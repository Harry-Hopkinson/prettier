{
  "blogPosts": [
    {
      "id": "/2022/03/16/2.6.0",
      "metadata": {
        "permalink": "/blog/2022/03/16/2.6.0",
        "source": "@site/blog/2022-03-16-2.6.0.md",
        "title": "Prettier 2.6: new singleAttributePerLine option and new JavaScript features!",
        "description": "This release includes a new singleAttributePerLine option. This is an option to print only one attribute per line in Vue SFC templates, HTML, and JSX. Per our Option Philosophy, we would prefer not to add such an option. However, there are many users who want this feature, and major style guides like Airbnb’s JavaScript Style Guide and Vue’s style guide recommend the single attribute per line style. A PR to add this feature was opened in October 2019, and both it and the corresponding issue have received a significant amount of support from users. For us it was a hard decision to add this option. We hope the addition of this option will benefit many users without significantly harming our principles.",
        "date": "2022-03-16T00:00:00.000Z",
        "formattedDate": "March 16, 2022",
        "tags": [],
        "readingTime": 12.445,
        "truncated": true,
        "authors": [
          {
            "name": "Sosuke Suzuki (@sosukesuzuki)",
            "url": "https://github.com/sosukesuzuki"
          }
        ],
        "frontMatter": {
          "author": "Sosuke Suzuki (@sosukesuzuki)",
          "authorURL": "https://github.com/sosukesuzuki",
          "title": "Prettier 2.6: new singleAttributePerLine option and new JavaScript features!"
        },
        "nextItem": {
          "title": "Prettier begins paying maintainers",
          "permalink": "/blog/2022/01/06/prettier-begins-paying-maintainers"
        }
      },
      "content": "This release includes a new `singleAttributePerLine` option. This is an option to print only one attribute per line in Vue SFC templates, HTML, and JSX. Per our [Option Philosophy](https://prettier.io/docs/en/option-philosophy.html), we would prefer not to add such an option. However, there are many users who want this feature, and major style guides like [Airbnb’s JavaScript Style Guide](https://github.com/airbnb/javascript/blob/274c8d570155a05b016980294d4204c5711bce86/packages/eslint-config-airbnb/rules/react.js#L97-L99) and [Vue’s style guide](https://vuejs.org/style-guide/rules-strongly-recommended.html#multi-attribute-elements) recommend the single attribute per line style. A [PR](https://github.com/prettier/prettier/pull/6644) to add this feature was opened in October 2019, and both it and the [corresponding issue](https://github.com/prettier/prettier/issues/5501) have received a significant amount of support from users. For us it was a hard decision to add this option. We hope the addition of this option will benefit many users without significantly harming our principles.\n\nWe've also added support formatting for some new JavaScript syntax proposals via Babel.\n\n<!--truncate-->\n\n## Thanks to our sponsors!\n\nAs discussed in [a blog post from earlier this year](https://prettier.io/blog/2022/01/06/prettier-begins-paying-maintainers.html), we have begun paying our maintainers from funds received from our sponsors. We would like to thank our many sponsors who have made this possible! We’re especially grateful to the following companies and individuals, who have donated over $1,000 to us:\n\n- [Frontend Masters](https://frontendmasters.com/)\n- [Salesforce](https://www.salesforce.com/)\n- [Indeed](https://indeed.com/)\n- [Sentry](https://sentry.io/welcome/)\n- [Airbnb](https://www.airbnb.com/)\n- [LINE](https://engineering.linecorp.com/en/)\n- [AMP Project](https://www.ampproject.org/)\n- [InVision AG](https://www.ivx.com/)\n- [Ubie](https://ubiehealth.com/)\n- [Shogun Labs, Inc](https://getshogun.com/)\n- [Underbelly](https://www.underbelly.is/)\n- [Principal Financial Group](https://www.principal.com/about-us)\n- [Suhail Doshi](https://twitter.com/suhail)\n\nIf you enjoy Prettier and would like to support our work, consider sponsoring us directly via [our OpenCollective](https://opencollective.com/prettier) or by sponsoring the projects we depend on, including [typescript-eslint](https://opencollective.com/typescript-eslint), [remark](https://opencollective.com/unified), and [Babel](https://opencollective.com/babel).\n\n<!--truncate-->\n\n## Highlights\n\n### TypeScript\n\n#### TypeScript 4.6 support ([#12400](https://github.com/prettier/prettier/pull/12400) by [@dependabot](https://github.com/dependabot))\n\nWe’ve updated the version of TypeScript that we use to parse TS code to [TypeScript 4.6](https://devblogs.microsoft.com/typescript/announcing-typescript-4-6/). However, no new syntax was added in this release of TypeScript so we have not had to make any other changes.\n\n### HTML\n\n#### Enforce Single Attribute Per Line ([#6644](https://github.com/prettier/prettier/pull/6644) by [@kankje](https://github.com/kankje))\n\nAdded the `singleAttributePerLine` option for specifying if Prettier should enforce single attribute per line in HTML, Vue and JSX.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div data-a=\"1\">\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</div>\n<div data-a=\"1\" data-b=\"2\" data-c=\"3\">\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</div>\n\n<!-- Prettier 2.5 -->\n<div data-a=\"1\">\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</div>\n<div data-a=\"1\" data-b=\"2\" data-c=\"3\">\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</div>\n\n<!-- Prettier 2.6, with `{\"singleAttributePerLine\": false}` -->\n<div data-a=\"1\">\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</div>\n<div data-a=\"1\" data-b=\"2\" data-c=\"3\">\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</div>\n\n<!-- Prettier 2.6, with `{\"singleAttributePerLine\": true}` -->\n<div data-a=\"1\">\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</div>\n<div\n  data-a=\"1\"\n  data-b=\"2\"\n  data-c=\"3\"\n>\n  Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n</div>\n```\n\n## Other Changes\n\n### JavaScript\n\n#### Recognize waitForAsync as test-statement in Angular ([#11992](https://github.com/prettier/prettier/pull/11992) by [@HendrikN](https://github.com/HendrikN))\n\n<!-- prettier-ignore -->\n```js\n// Input\ntest(\"foo bar\", waitForAsync(() => {\n  const foo = \"bar\";\n  expect(foo).toEqual(\"bar\")\n}));\n\n// Prettier 2.5\ntest(\n  \"foo bar\",\n  waitForAsync(() => {\n    const foo = \"bar\";\n    expect(foo).toEqual(\"bar\");\n  })\n);\n\n// Prettier 2.6\ntest(\"foo bar\", waitForAsync(() => {\n  const foo = \"bar\";\n  expect(foo).toEqual(\"bar\");\n}));\n```\n\n#### Preserve end-of-line comments after if statements without blocks ([#12017](https://github.com/prettier/prettier/pull/12017) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nif (condition1) expression1; // comment A\nelse if (condition2) expression2; // comment B\nelse expression3; // comment C\n\n// Prettier 2.5\nif (condition1) expression1;\n// comment A\nelse if (condition2) expression2;\n// comment B\nelse expression3; // comment C\n\n// Prettier 2.6\nif (condition1) expression1; // comment A\nelse if (condition2) expression2; // comment B\nelse expression3; // comment C\n\n```\n\n#### Print comments for parenthesized TS keyword types with `babel-ts` parser ([#12070](https://github.com/prettier/prettier/pull/12070) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nlet foo: (\n   // comment\n   never\n);\n\n// Prettier 2.5\nError: Comment \"comment\" was not printed. Please report this error!\n\n// Prettier 2.6\nlet foo: // comment\nnever;\n```\n\n#### Print end-of-line comments for `continue`/`break` statements ([#12075](https://github.com/prettier/prettier/pull/12075) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfor (;;) continue // comment\n;\n\n// Prettier 2.5\nError: Comment \"comment\" was not printed. Please report this error!\n\n// Prettier 2.6\nfor (;;)\n  continue; // comment\n\n```\n\n#### Inline `await` expressions in JSX ([#12088](https://github.com/prettier/prettier/pull/12088) & [#12109](https://github.com/prettier/prettier/pull/12109) by [@j-f1](https://github.com/j-f1))\n\n`await` expressions in JSX are now inlined if their argument would be inlined.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n{await Promise.all(\n  someVeryLongExpression\n)}\n\n{await (\n  <div>Lorem ipsum ...</div>\n)}\n\n\n// Prettier 2.5\n{\n  await Promise.all(\n    someVeryLongExpression\n  )\n}\n\n{\n  await (\n    <div>Lorem ipsum ...</div>\n  )\n}\n\n\n// Prettier 2.6\n{await Promise.all(\n  someVeryLongExpression\n)}\n\n{await (\n  <div>Lorem ipsum ...</div>\n)}\n\n```\n\n#### Add `acorn` parser ([#12172](https://github.com/prettier/prettier/pull/12172) by [@fisker](https://github.com/fisker))\n\nA new value for the `parser` option has been added: [`acorn`](https://github.com/acornjs/acorn) - A small, fast, JavaScript-based JavaScript parser.\n\n#### Keep comments after `default` cases in the same line ([#12177](https://github.com/prettier/prettier/pull/12177) by [@duailibe](https://github.com/duailibe))\n\nKeep comments right after `default` cases (in switch statements) in the same line, when possible.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfunction read_statement() {\n  switch (peek_keyword()) {\n    case Keyword.impl: // impl<T> Growling<T> for Wolf {}\n      return ImplDeclaration.read();\n\n    default: // expression;\n      return ExpressionStatement.read();\n  }\n}\n\n// Prettier 2.5\nfunction read_statement() {\n  switch (peek_keyword()) {\n    case Keyword.impl: // impl<T> Growling<T> for Wolf {}\n      return ImplDeclaration.read();\n\n    default:\n      // expression;\n      return ExpressionStatement.read();\n  }\n}\n\n// Prettier 2.6\nfunction read_statement() {\n  switch (peek_keyword()) {\n    case Keyword.impl: // impl<T> Growling<T> for Wolf {}\n      return ImplDeclaration.read();\n\n    default: // expression;\n      return ExpressionStatement.read();\n  }\n}\n```\n\n#### Fix misplaced argument comment in abstract methods ([#12185](https://github.com/prettier/prettier/pull/12185) by [@duailibe](https://github.com/duailibe))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nabstract class Foo {\n  abstract bar(\n    /** comment explaining userId param */\n    userId\n  )\n}\n\n// Prettier 2.5\nabstract class Foo {\n  abstract bar(userId);\n  /** comment explaining userId param */\n}\n\n// Prettier 2.6\nabstract class Foo {\n  abstract bar(\n    /** comment explaining userId param */\n    userId\n  );\n}\n```\n\n#### Fix typecast of superclass in class declarations ([#12222](https://github.com/prettier/prettier/pull/12222) & [#12226](https://github.com/prettier/prettier/pull/12226) by [@duailibe](https://github.com/duailibe))\n\nThis was a combination of two separate bugs: moving the comments before the superclass and adding multiple parenthesis around the superclass.\n\n<!-- prettier-ignore -->\n```js\n// Input\nclass Foo extends /** @type {Type} */ (Bar) {}\n\n// Prettier 2.5\nclass Foo /** @type {Type} */ extends ((Bar)) {}\n\n// Prettier 2.6\nclass Foo extends /** @type {Type} */ (Bar) {}\n```\n\n#### Add support for Unicode Set Notation in regular expressions ([#12241](https://github.com/prettier/prettier/pull/12241) by [@fisker](https://github.com/fisker))\n\nThe Stage 3 proposal for [Unicode Set Notation](https://github.com/tc39/proposal-regexp-set-notation/) in regular expressions is now supported via [Babel 7.17.0](https://babeljs.io/blog/2022/02/02/7.17.0).\n\nSee [the release blog post of Babel v7.17.0](https://babeljs.io/blog/2022/02/02/7.17.0#regexp-set-notation-and-properties-of-strings-14125httpsgithubcombabelbabelpull14125) and [the README of this proposal](https://github.com/tc39/proposal-regexp-set-notation/) for details. Also keep in mind our [policy on non-standardized syntax](https://prettier.io/docs/en/rationale.html#disclaimer-about-non-standard-syntax) before using this proposed syntax feature with Prettier.\n\n<!-- prettier-ignore -->\n```jsx\n// Examples\n\n/[\\p{Decimal_Number}--[0-9]]/v; // Non-ASCII decimal digits\n\n\"Did you see the 👩🏿‍❤️‍💋‍👩🏾 emoji?\".match(/\\p{RGI_Emoji}/v). // [\"👩🏿‍❤️‍💋‍👩🏾\"]\n\n/[\\r\\n\\q{\\r\\n|NEWLINE}]/v; // Matches \\r, \\n, \\r\\n or NEWLINE\n```\n\n#### Add parens to `ClassExpression` with decorators ([#12260](https://github.com/prettier/prettier/pull/12260) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\n(@f() class {});\n\n// Prettier 2.5\n@f()\nclass {};\n\n// Prettier 2.5 (Second format)\nSyntaxError: A class name is required. (2:7)\n  1 | @f()\n> 2 | class {};\n    |       ^\n  3 |\n\n// Prettier 2.6\n(\n  @f()\n  class {}\n);\n```\n\n#### Improve printing of comments in type aliases in Flow & TS ([#12268](https://github.com/prettier/prettier/pull/12268) by [@duailibe](https://github.com/duailibe))\n\nFor Flow, the comments will now be more aligned to how we print comments in assignments where the right-hand side is an object expression:\n\n<!-- prettier-ignore -->\n```js\n// Input\ntype Props = // comment explaining the props\n  {\n    isPlaying: boolean\n  };\n\n// Prettier 2.5\n// comment explaining the props\ntype Props = {\n  isPlaying: boolean,\n};\n\n// Prettier 2.6\ntype Props =\n  // comment explaining the props\n  {\n    isPlaying: boolean,\n  };\n```\n\nThis change also fixes an issue where a similarly-placed comment in TypeScript would be moved again after a second formatting operation:\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype Props = // comment explaining the props\n  {\n    isPlaying: boolean\n  };\n\n// Prettier 2.5\ntype Props = { // comment explaining the props\n  isPlaying: boolean;\n};\n\n// Prettier 2.5 (2nd format)\ntype Props = {\n  // comment explaining the props\n  isPlaying: boolean;\n};\n\n// Prettier 2.6\ntype Props =\n  // comment explaining the props\n  {\n    isPlaying: boolean,\n  };\n```\n\n#### Add support for destructuring of private fields ([#12276](https://github.com/prettier/prettier/pull/12276) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nThe Stage 2 TC39 proposal for [destructuring of private fields](https://github.com/tc39/proposal-destructuring-private) is now supported via [Babel 7.17](https://babeljs.io/blog/2022/02/02/7.17.0). Please read our [policy on non-standardized syntax](https://prettier.io/docs/en/rationale.html#disclaimer-about-non-standard-syntax) before you decide to use this proposed syntax feature with Prettier.\n\n<!-- prettier-ignore -->\n```jsx\n// Example\nclass Foo {\n  constructor() {\n    console.log(this.#x); // => 1\n    const { #x: x } = this;\n    console.log(x); // => 1\n  }\n}\n```\n\n#### Support decorator auto accessors syntax ([#12299](https://github.com/prettier/prettier/pull/12299) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nSupport auto accessors syntax that is introduced in [new decorators proposal](https://github.com/tc39/proposal-decorators). Please read our [policy on non-standardized syntax](https://prettier.io/docs/en/rationale.html#disclaimer-about-non-standard-syntax) before you decide to use this proposed syntax feature with Prettier.\n\n<!-- prettier-ignore -->\n```jsx\n// Example\n@defineElement(\"my-class\")\nclass C extends HTMLElement {\n  @reactive accessor clicked = false;\n}\n```\n\n#### Fix idempotence issues caused by line comments after `=` in assignments ([#12349](https://github.com/prettier/prettier/pull/12349) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst kochabCooieGameOnOboleUnweave = // !!!\n  rhubarbRhubarb(annularCooeedSplicesWalksWayWay);\n\n// Prettier 2.5, first format\nconst kochabCooieGameOnOboleUnweave = rhubarbRhubarb( // !!!\n  annularCooeedSplicesWalksWayWay\n);\n\n// Prettier 2.5, second format\nconst kochabCooieGameOnOboleUnweave = rhubarbRhubarb(\n  // !!!\n  annularCooeedSplicesWalksWayWay\n);\n\n// Prettier 2.6\nconst kochabCooieGameOnOboleUnweave = // !!!\n  rhubarbRhubarb(annularCooeedSplicesWalksWayWay);\n```\n\n### TypeScript\n\n#### Refactor printing definite assignment assertions ([#12351](https://github.com/prettier/prettier/pull/12351) by [@thorn0](https://github.com/thorn0))\n\nDefinite assignment assertions are now printed even when they aren't followed by type annotations. This is an error in TypeScript, but TS is still able to parse the file.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nlet a!;\n\n// Prettier 2.5\nlet a;\n\n// Prettier 2.6\nlet a!;\n```\n\n#### Print trailing comma for rest elements in tuple types ([#12390](https://github.com/prettier/prettier/pull/12390) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nTypeScript has allowed rest elements in tuple types (`...T`) to have normal elements come after them since [TypeScript 4.2](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-2.html#leadingmiddle-rest-elements-in-tuple-types).\nPrettier now prints a trailing comma for the trailing rest element (when trailing commas are enabled) for consistency and to reduce diffs if you decide to add more elements after the final element in the future.\n\n<!-- prettier-ignore -->\n```tsx\n// { trailingCommma: \"all\" }\n\n// Input\ntype Foo = [\n  Element,\n  Element,\n  Element,\n  Element,\n  Element,\n  Element,\n  ...RestElement,\n];\n\n\n// Prettier 2.5\ntype Foo = [\n  Element,\n  Element,\n  Element,\n  Element,\n  Element,\n  Element,\n  ...RestElement\n];\n\n\n// Prettier 2.6\ntype Foo = [\n  Element,\n  Element,\n  Element,\n  Element,\n  Element,\n  Element,\n  ...RestElement,\n];\n\n```\n\n### Flow\n\n#### Fix Flow's class declaration's `static` indexer formatting ([#12009](https://github.com/prettier/prettier/pull/12009) by [@gkz](https://github.com/gkz))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\ndeclare class A {\n  static [string]: boolean;\n}\n\n// Prettier 2.5\ndeclare class A {\n  [string]: boolean;\n}\n\n// Prettier 2.6\ndeclare class A {\n  static [string]: boolean;\n}\n```\n\n### CSS\n\n#### Preserve blank lines in SCSS maps ([#12210](https://github.com/prettier/prettier/pull/12210) by [@duailibe](https://github.com/duailibe))\n\nThis change also applies to some PostCSS features with similar syntax.\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n$colours: (\n    \"text\": $light-100,\n\n    \"background-primary\": $dark-300,\n    \"background-secondary\": $dark-200,\n    \"background-tertiary\": $dark-100\n);\n\n/* Prettier 2.5 */\n$colours: (\n  \"text\": $light-100,\n  \"background-primary\": $dark-300,\n  \"background-secondary\": $dark-200,\n  \"background-tertiary\": $dark-100\n);\n\n/* Prettier 2.6 */\n$colours: (\n    \"text\": $light-100,\n\n    \"background-primary\": $dark-300,\n    \"background-secondary\": $dark-200,\n    \"background-tertiary\": $dark-100\n);\n```\n\n#### Fix lowercasing postcss values ([#12393](https://github.com/prettier/prettier/pull/12393) by [@niklasvatn](https://github.com/niklasvatn))\n\nPostCSS values can start with digits. Prettier interprets this as a number followed by a unit in the example below.\n\n<!-- prettier-ignore -->\n```css\n// Input\n@value 4XLarge 28/36px;\n\n.test {\n  font: 4XLarge Helvetica;\n}\n\n// Prettier 2.5\n@value 4XLarge 28/36px;\n\n.test {\n  font: 4xlarge Helvetica;\n}\n\n// Prettier 2.6\n@value 4XLarge 28/36px;\n\n.test {\n  font: 4XLarge Helvetica;\n}\n```\n\n### SCSS\n\n#### Fix comments inside map ([#11920](https://github.com/prettier/prettier/pull/11920) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```scss\n// Input\n.ag-theme-balham {\n    @include ag-theme-balham(\n        (\n            foreground-color: $custom-foreground-color,\n            disabled-foreground-color: null, // TODO some comment\n        )\n    );\n}\n\n// Prettier 2.5\n.ag-theme-balham {\n    @include ag-theme-balham(\n        (\n            foreground-color: $custom-foreground-color,\n            disabled-foreground-color: null,\n            r: null, // TODO som\n        )\n    );\n}\n\n// Prettier 2.6\n.ag-theme-balham {\n  @include ag-theme-balham(\n    (\n      foreground-color: $custom-foreground-color,\n      disabled-foreground-color: null,\n      // TODO some comment\n    )\n  );\n}\n```\n\n#### Fixes printing parameters of a mixin named `selector()` ([#12213](https://github.com/prettier/prettier/pull/12213) by [@duailibe](https://github.com/duailibe))\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n@mixin selector($param: 'value') {\n}\n\n/* Prettier 2.5 */\n@mixin selector($param: 'value) {\n}\n\n/* Prettier 2.6 */\n@mixin selector($param: 'value') {\n}\n```\n\n### Vue\n\n#### Fix hangs on invalid `v-for` ([#12113](https://github.com/prettier/prettier/pull/12113) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n<template>\n  <div>\n    <div v-for=\" a in \">aaaaa</div>\n  </div>\n</template>\n\n// Prettier 2.5\n// Hangs\n\n// Prettier 2.6\n<template>\n  <div>\n    <div v-for=\" a in \">aaaaa</div>\n  </div>\n</template>;\n```\n\n#### Allow `lang` attribute of `<template>` to be empty ([#12394](https://github.com/prettier/prettier/pull/12394) by [@HallvardMM](https://github.com/HallvardMM))\n\nTemplate tag should allow empty string lang=\"\" or undefined lang\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input -->\n<template lang=\"\">\n  <v-app-bar>\n    <v-menu offset-y>\n      <template></template>\n    </v-menu>\n  </v-app-bar>\n</template>\n\n<template lang>\n  <v-app-bar>\n    <v-menu offset-y>\n      <template></template>\n    </v-menu>\n  </v-app-bar>\n</template>\n\n<!-- Prettier 2.5 -->\nSyntaxError: Unexpected closing tag \"v-menu\". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags (5:5)\n[error]   3 |     <v-menu offset-y>\n[error]   4 |       <template></template>\n[error] > 5 |     </v-menu>\n[error]     |     ^^^^^^^^^\n[error]   6 |   </v-app-bar>\n[error]   7 | </template>\n\n<!-- Prettier 2.6 -->\n<template lang=\"\">\n  <v-app-bar>\n    <v-menu offset-y>\n      <template></template>\n    </v-menu>\n  </v-app-bar>\n</template>\n\n<template lang>\n  <v-app-bar>\n    <v-menu offset-y>\n      <template></template>\n    </v-menu>\n  </v-app-bar>\n</template>\n```\n\n### Ember / Handlebars\n\n#### Correctly identify which backslashes are removed by glimmer ([#12302](https://github.com/prettier/prettier/pull/12302) by [@MattTheNub](https://github.com/MattTheNub))\n\nThis caused Prettier to unnecessarily add backslashes every time a file was formatted.\n\n<!-- prettier-ignore -->\n```hbs\n{{! Input }}\n<p>\\</p>\n<p>\\\\</p>\n<p>\\\\\\</p>\n\n{{! Prettier 2.5 }}\n<p>\\\\</p>\n<p>\\\\\\</p>\n<p>\\\\\\\\</p>\n\n{{! Prettier 2.6 }}\n<p>\\</p>\n<p>\\\\</p>\n<p>\\\\\\</p>\n```\n\n### GraphQL\n\n#### Print descriptions on graphql schema definition nodes ([#11901](https://github.com/prettier/prettier/pull/11901) by [@trevor-scheer](https://github.com/trevor-scheer))\n\n<!-- prettier-ignore -->\n```graphql\n# Input\n\"\"\"SchemaDefinition description is lost\"\"\"\nschema {\n  query: Query\n}\n\n# Prettier 2.5\nschema {\n  query: Query\n}\n\n# Prettier 2.6\n\"\"\"\nSchemaDefinition description is lost\n\"\"\"\nschema {\n  query: Query\n}\n\n```\n\n### YAML\n\n#### Fix unexpected deletion of block-literal lines which starts with U+3000 ([#12305](https://github.com/prettier/prettier/pull/12305) by [@Quramy](https://github.com/Quramy))\n\n<!-- prettier-ignore -->\n```yaml\n# Input \nblock_with_ideographic_space: |\n  　line-content # This line starts with U+3000\n\n# Prettier 2.5\nblock_with_ideographic_space: |\n\n// Prettier 2.6\nblock_with_ideographic_space: |\n  　line-content # This line starts with U+3000\n```\n\n### CLI\n\n#### Add `--no-plugin-search` option to turn off plugin autoloading ([#10274](https://github.com/prettier/prettier/pull/10274) by [@fisker](https://github.com/fisker))\n\nTo turn off plugin autoloading, use `--no-plugin-search` when using Prettier CLI or add `{ pluginSearchDirs: false }` to options in `prettier.format()` or to the config file.\n\n<!-- prettier-ignore -->\n```cli\n// Prettier 2.5\n$ prettier . --plugin-search-dir=a-dir-without-plugins\n\n// Prettier 2.6\n$ prettier . --no-plugin-search\n```\n\n#### Infer parser for `.swcrc` ([#12320](https://github.com/prettier/prettier/pull/12320) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nFormat the [`.swcrc`](https://swc.rs/docs/configuration/swcrc) file as a JSON file.\n\n### Miscellaneous\n\n#### Switch to `esbuild` ([#12055](https://github.com/prettier/prettier/pull/12055) by [@fisker](https://github.com/fisker))\n\nWe've switched our build process from Rollup to [esbuild](https://esbuild.github.io). esbuild is much faster and has improved our development experience. This is an internal change and should not affect users. If something isn’t working for you after upgrading, please [open an issue](https://github.com/prettier/prettier/issues/new?assignees=&labels=&template=integration.md)!"
    },
    {
      "id": "/2022/01/06/prettier-begins-paying-maintainers",
      "metadata": {
        "permalink": "/blog/2022/01/06/prettier-begins-paying-maintainers",
        "source": "@site/blog/2022-01-06-prettier-begins-paying-maintainers.md",
        "title": "Prettier begins paying maintainers",
        "description": "Prettier, an opinionated code formatter for JavaScript and many web languages, has been accepting donations at OpenCollective since 2019 and thanks to many generous donations we now have \\$50,000 in the bank! As a result, we are now able to pay the two active maintainers \\$1,500/month each. This funding will ensure that they will be able to continue consistent maintenance of Prettier into the future.",
        "date": "2022-01-06T00:00:00.000Z",
        "formattedDate": "January 6, 2022",
        "tags": [],
        "readingTime": 1.71,
        "truncated": true,
        "authors": [
          {
            "name": "Christopher Chedeau (@vjeux)",
            "url": "https://github.com/vjeux"
          }
        ],
        "frontMatter": {
          "author": "Christopher Chedeau (@vjeux)",
          "authorURL": "https://github.com/vjeux",
          "title": "Prettier begins paying maintainers"
        },
        "prevItem": {
          "title": "Prettier 2.6: new singleAttributePerLine option and new JavaScript features!",
          "permalink": "/blog/2022/03/16/2.6.0"
        },
        "nextItem": {
          "title": "Prettier 2.5: TypeScript 4.5 and MDX v2 comment syntax!",
          "permalink": "/blog/2021/11/25/2.5.0"
        }
      },
      "content": "Prettier, an opinionated code formatter for JavaScript and many web languages, has been accepting donations at [OpenCollective](https://opencollective.com/prettier) since 2019 and thanks to many generous donations we now have \\$50,000 in the bank! As a result, we are now able to pay the two active maintainers \\$1,500/month each. This funding will ensure that they will be able to continue consistent maintenance of Prettier into the future.\n\n<!--truncate-->\n\n<blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">📣 Prettier is now accepting donations! 🎉 If you &#39;d like to support our work, head to our OpenCollective! 🙏<a href=\"https://t.co/etDqkYLm4H\">https://t.co/etDqkYLm4H</a></p>&mdash; Prettier (@PrettierCode) <a href=\"https://twitter.com/PrettierCode/status/1132012865416781824?ref_src=twsrc%5Etfw\">May 24, 2019</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\nOpen Source and Money has always been a tricky topic. We've tried many things with Prettier. Right after the project was open sourced, Facebook contracted [James Long](https://twitter.com/jlongster) for 2 weeks in order to polish it. Facebook also paid Christopher Chedeau ([vjeux](https://twitter.com/Vjeux)) for 9 months to work on it full time. Once there was \\$10,000 in contributions, we gave everyone that contributed significantly the opportunity to redeem \\$1,000 but due to the complexities in collecting the money, few people did.\n\nWe now have \\$50,000 which is a sizable sum but not enough for someone with the skills to work on it to do it full time. But at the same time we shouldn't let it sit unused. So after a lot of thinking, we decided to provide a recurring \\$1,500 to the two current maintainers of the project. They have been amazing stewards for the project for the past 2 years!\n\n- [Fisker Cheung](https://github.com/fisker)\n- [Sosuke Suzuki](https://github.com/sosukesuzuki)\n\nAs you can imagine, maintaining a project that is [used by 60% of all JavaScript developers](https://twitter.com/vjeux/status/1349383134010200068) is not a simple task. We are planning to release Prettier 3.0, including a migration to ECMAScript Modules, support for formatting new language features in, and fixing new edge cases as they are identified.\n\nIf Prettier has been useful for you or your company, there has never been a better time to [donate to Prettier](https://opencollective.com/prettier). We will now be much more able to use that money to make Prettier better!"
    },
    {
      "id": "/2021/11/25/2.5.0",
      "metadata": {
        "permalink": "/blog/2021/11/25/2.5.0",
        "source": "@site/blog/2021-11-25-2.5.0.md",
        "title": "Prettier 2.5: TypeScript 4.5 and MDX v2 comment syntax!",
        "description": "This release adds support for TypeScript 4.5's new syntax and MDX v2 comment syntax!",
        "date": "2021-11-25T00:00:00.000Z",
        "formattedDate": "November 25, 2021",
        "tags": [],
        "readingTime": 5.625,
        "truncated": true,
        "authors": [
          {
            "name": "Sosuke Suzuki (@sosukesuzuki)",
            "url": "https://github.com/sosukesuzuki"
          }
        ],
        "frontMatter": {
          "author": "Sosuke Suzuki (@sosukesuzuki)",
          "authorURL": "https://github.com/sosukesuzuki",
          "title": "Prettier 2.5: TypeScript 4.5 and MDX v2 comment syntax!"
        },
        "prevItem": {
          "title": "Prettier begins paying maintainers",
          "permalink": "/blog/2022/01/06/prettier-begins-paying-maintainers"
        },
        "nextItem": {
          "title": "Prettier 2.4: new bracketSameLine option and TypeScript 4.4 support!",
          "permalink": "/blog/2021/09/09/2.4.0"
        }
      },
      "content": "This release adds support for [TypeScript 4.5](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/)'s new syntax and [MDX v2](https://mdxjs.com/blog/v2/) comment syntax!\n\nIf you enjoy Prettier and would like to support our work, consider sponsoring us directly via [our OpenCollective](https://opencollective.com/prettier) or by sponsoring the projects we depend on, including [typescript-eslint](https://opencollective.com/typescript-eslint), [remark](https://opencollective.com/unified), and [Babel](https://opencollective.com/babel).\n\n<!--truncate-->\n\n## Highlights\n\n### TypeScript\n\n#### Avoid extra offset in arrow function body when using long types ([#11515](https://github.com/prettier/prettier/pull/11515) by [@kachkaev](https://github.com/kachkaev) and [@thorn0](https://github.com/thorn0))\n\nStarting with Prettier 2.3.0, type declarations in arrow functions could affect function body indentation. Changing the length of the type annotation could produce large diffs and thus increased the chance of git conflicts. To prevent this, function body offset was stabilized.</p></br>\n**Note**: This change may affect a large number of lines in your codebase.\n\n<!-- prettier-ignore -->\n```tsx\n// Input\nconst MyComponentWithLongName: React.VoidFunctionComponent<MyComponentWithLongNameProps> = ({ x, y }) => {\n  const a = useA();\n  return <div>{x + y + a}</div>;\n};\n</MyComponentWithLongNameProps>\n\n// Prettier 2.2 and below\nconst MyComponentWithLongName: React.VoidFunctionComponent<MyComponentWithLongNameProps> = ({\n  x,\n  y,\n}) => {\n  const a = useA();\n  return <div>{x + y + a}</div>;\n};\n</MyComponentWithLongNameProps>\n\n// Prettier 2.4\nconst MyComponentWithLongName: React.VoidFunctionComponent<MyComponentWithLongNameProps> =\n  ({ x, y }) => {\n    const a = useA();\n    return <div>{x + y + a}</div>;\n  };\n</MyComponentWithLongNameProps>\n\n// Prettier 2.5\nconst MyComponentWithLongName: React.VoidFunctionComponent<\n  MyComponentWithLongNameProps\n> = ({ x, y }) => {\n  const a = useA();\n  return <div>{x + y + a}</div>;\n};\n</MyComponentWithLongNameProps>\n```\n\n#### Support TypeScript 4.5 ([#11721](https://github.com/prettier/prettier/pull/11721), [#11723](https://github.com/prettier/prettier/pull/11723), [#11813](https://github.com/prettier/prettier/pull/11813) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nWe’ve added support for TypeScript 4.5’s new syntax features:\n\n##### [`type` Modifiers on Import Names](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#type-on-import-names)\n\n<!-- prettier-ignore -->\n```ts\n// Example\nimport { type A } from \"mod\";\n\n```\n\n##### [Private Field Presence Checks](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#private-field-presence-checks)\n\n<!-- prettier-ignore -->\n```ts\n// Example\nclass Foo {\n  #prop1;\n  method() {\n    return #prop1 in this;\n  }\n}\n\n```\n\n##### [Import Assertions](https://devblogs.microsoft.com/typescript/announcing-typescript-4-5/#import-assertions)\n\n<!-- prettier-ignore -->\n```ts\n// Example\nimport obj from \"./something.json\" assert { type: \"json\" };\n\n```\n\n##### Handle `.mts` and `.cts`\n\nPrettier will now format files with `.mts` and `.cts` extensions as TypeScript.\n\n### HTML\n\n#### Collapse HTML `class` attributes onto one line ([#11827](https://github.com/prettier/prettier/pull/11827) by [@jlongster](https://github.com/jlongster))\n\nReverts [#7865](https://github.com/prettier/prettier/pull/7865).\n\nWhile this was intended to be useful for users of CSS libraries like Tailwind that tend to result in large numbers of classes on elements, it became clear that our heuristics for where to split the class list on to multiple lines were unable to consistently produce good results. We’re still considering better ways to format HTML with lots of classes — consider [discussing with us](https://github.com/prettier/prettier/issues/7863).\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div\n  class=\"SomeComponent__heading-row d-flex flex-column flex-lg-row justify-content-start justify-content-lg-between align-items-start align-items-lg-center\"\n></div>\n\n<!-- Prettier 2.4 -->\n<div\n  class=\"\n    SomeComponent__heading-row\n    d-flex\n    flex-column flex-lg-row\n    justify-content-start justify-content-lg-between\n    align-items-start align-items-lg-center\n  \"\n></div>\n\n<!-- Prettier 2.5 -->\n<div\n  class=\"SomeComponent__heading-row d-flex flex-column flex-lg-row justify-content-start justify-content-lg-between align-items-start align-items-lg-center\"\n></div>\n\n```\n\n### MDX\n\n#### Add support for MDX v2 comment syntax ([#11563](https://github.com/prettier/prettier/pull/11563) by [@wooorm](https://github.com/wooorm))\n\nThis adds basic support for MDX v2 comment syntax (JavaScript-style comments) in addition to the existing support MDX v1 comment syntax (HTML-style comments).\n\n**Note**: Prettier currently only supports the new comment syntax for single-line comments (so that `{/* prettier-ignore */}` can be used), and doesn’t support the rest of MDX v2.\n\n<!-- prettier-ignore -->\n```mdx\nInput:\n{/*A comment*/}\n\nPrettier 2.4:\n{/_A comment_/}\n\nPrettier 2.5:\n{/*A comment*/}\n```\n\n## Other Changes\n\n### JavaScript\n\n#### Fix parentheses around sequence expression as body of arrow chain ([#11593](https://github.com/prettier/prettier/pull/11593) by [@bakkot](https://github.com/bakkot))\n\nThe required parentheses around sequence expressions as the body of arrow functions are now preserved for chained arrows. Previously, Prettier removed them, which resulted in invalid syntax.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst f = () => () => (0, 1);\n\n// Prettier 2.4\nconst f = () => () => 0, 1;\n\n// Prettier 2.5\nconst f = () => () => (0, 1);\n```\n\n#### Ignore errors for sloppy mode syntax ([#11750](https://github.com/prettier/prettier/pull/11750) by [@fisker](https://github.com/fisker), [#11778](https://github.com/prettier/prettier/pull/11778) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nJavaScript’s [strict mode](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode) adds several useful errors to prevent mistakes. Some of these errors are syntax errors that occur at parse time. Since Prettier’s goal is to format all syntactically valid JavaScript code regardless of whether it will actually run, we’ve opted to leave this error checking to linters, compilers, and the runtime.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfunction foo() { var bar = 1; delete bar; }\n\n// Prettier 2.4\nSyntaxError: Deleting local variable in strict mode. (1:31)\n> 1 | function foo() { var bar = 1; delete bar; }\n    |                               ^\n\n// Prettier 2.5\nfunction foo() {\n  var bar = 1;\n  delete bar;\n}\n```\n\n#### Respect spacing for between expressions and parentheses in embedded CSS ([#11800](https://github.com/prettier/prettier/pull/11800) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst paragraph2 = css`\n  transform1: ${expr}(30px);\n  transform2: ${expr} (30px);\n`;\n\n// Prettier 2.4\nconst paragraph2 = css`\n  transform1: ${expr} (30px);\n  transform2: ${expr} (30px);\n`;\n\n// Prettier 2.5\nconst paragraph2 = css`\n  transform1: ${expr}(30px);\n  transform2: ${expr} (30px);\n`;\n\n```\n\n#### Support ES2022 class-private-fields-in syntax in `espree` parser ([#11835](https://github.com/prettier/prettier/pull/11835) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Example\nclass Foo {\n  #brand;\n  static isC(obj) {\n    return #brand in Foo;\n  }\n}\n\n```\n\n### TypeScript\n\n#### Remove unnecessary parentheses for decorators ([#11717](https://github.com/prettier/prettier/pull/11717), [#11849](https://github.com/prettier/prettier/pull/11849) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```tsx\n// Input\nclass Test {\n  @foo`bar`\n  test1: string = \"test\"\n\n  @test().x(\"global\").y()\n  test2: string = \"test\";\n}\n\n// Prettier 2.4\nclass Test {\n  @(foo`bar`)\n  test: string = \"test\"\n\n  @(test().x(\"global\").y())\n  test2: string = \"test\";\n}\n\n// Prettier 2.5\nclass Test {\n  @foo`bar`\n  test: string = \"test\"\n\n  @test().x(\"global\").y()\n  test2: string = \"test\";\n}\n```\n\n### SCSS\n\n#### Improve `@use with` formatting ([#11637](https://github.com/prettier/prettier/pull/11637) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```scss\n// Input\n@use 'library' with (\n  $black: #222,\n  $border-radius: 0.1rem,\n  $font-family: 'Helvetica, sans-serif'\n);\n\n// Prettier 2.4\n@use \"library\" with\n  ($black: #222, $border-radius: 0.1rem, $font-family: \"Helvetica, sans-serif\");\n\n// Prettier 2.5\n@use 'library' with (\n  $black: #222,\n  $border-radius: 0.1rem,\n  $font-family: 'Helvetica, sans-serif'\n);\n\n```\n\n#### Fix `@forward with` formatting error ([#11683](https://github.com/prettier/prettier/pull/11683) by [@sriramarul](https://github.com/sriramarul), [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```scss\n// Input\n@forward 'foo.scss' with ($components: red);\n\n// Prettier 2.4\nTypeError: Cannot read properties of undefined (reading 'type')\n\n// Prettier 2.5\n@forward \"foo.scss\" with (\n  $components: red\n);\n\n```\n\n### Ember / Handlebars\n\n#### Uses the opposite quote type for quotes inside mustache statements in attributes ([#11524](https://github.com/prettier/prettier/pull/11524) by [@bmaehr](https://github.com/bmaehr))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<div title=\"{{t 'login.username.description'}}\" />\n\n{{!-- Prettier 2.5 --}}\n<div title=\"{{t 'login.username.description'}}\" />\n\n{{!-- Prettier 2.4 --}}\n<div title=\"{{t \"login.username.description\"}}\" />\n\n```\n\n### Markdown\n\n#### Keep trailing commas for type parameters in embedded TSX ([#11685](https://github.com/prettier/prettier/pull/11685) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nThe trailing comma is necessary to prevent TypeScript from treating the `<T>` as the beginning of a JSX expression.\n\n<!-- prettier-ignore -->\n````md\n<!-- Input  -->\n```tsx\nconst test = <T,>(value: T) => {};\n```\n\n<!-- Prettier 2.4 -->\n```tsx\nconst test = <T>(value: T) => {};\n```\n\n<!-- Prettier 2.5 -->\n```tsx\nconst test = <T,>(value: T) => {};\n```\n````"
    },
    {
      "id": "/2021/09/09/2.4.0",
      "metadata": {
        "permalink": "/blog/2021/09/09/2.4.0",
        "source": "@site/blog/2021-09-09-2.4.0.md",
        "title": "Prettier 2.4: new bracketSameLine option and TypeScript 4.4 support!",
        "description": "This release renames the jsxBracketSameLine option to bracketSameLine, which supports HTML, Vue, and Angular in addition to JSX. The old name has been deprecated.",
        "date": "2021-09-09T00:00:00.000Z",
        "formattedDate": "September 9, 2021",
        "tags": [],
        "readingTime": 3.68,
        "truncated": true,
        "authors": [
          {
            "name": "Sosuke Suzuki (@sosukesuzuki)",
            "url": "https://github.com/sosukesuzuki"
          }
        ],
        "frontMatter": {
          "author": "Sosuke Suzuki (@sosukesuzuki)",
          "authorURL": "https://github.com/sosukesuzuki",
          "title": "Prettier 2.4: new bracketSameLine option and TypeScript 4.4 support!"
        },
        "prevItem": {
          "title": "Prettier 2.5: TypeScript 4.5 and MDX v2 comment syntax!",
          "permalink": "/blog/2021/11/25/2.5.0"
        },
        "nextItem": {
          "title": "Prettier 2.3. In which assignments are consistent, short keys non-breaking, and Handlebars official",
          "permalink": "/blog/2021/05/09/2.3.0"
        }
      },
      "content": "This release renames the `jsxBracketSameLine` option to `bracketSameLine`, which supports HTML, Vue, and Angular in addition to JSX. The old name has been deprecated.\n\nWe’ve also added support for [TypeScript 4.4](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-4.html), including new syntax features such as [class `static` blocks](https://github.com/tc39/proposal-class-static-block).\n\nIf you enjoy Prettier and would like to support our work, consider sponsoring us directly via [our OpenCollective](https://opencollective.com/prettier) or by sponsoring the projects we depend on, including [typescript-eslint](https://opencollective.com/typescript-eslint), [remark](https://opencollective.com/unified), and [Babel](https://opencollective.com/babel).\n\n<!--truncate-->\n\n## Highlights\n\n### TypeScript\n\n#### Support TypeScript 4.4 ([#11426](https://github.com/prettier/prettier/pull/11426) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nSupport [TypeScript 4.4](https://devblogs.microsoft.com/typescript/announcing-typescript-4-4/)!\n\n##### [`static` Blocks in Classes](https://devblogs.microsoft.com/typescript/announcing-typescript-4-4/#static-blocks)\n\nClass Static Blocks syntax is a Stage 4 ECMAScript proposal. See https://github.com/tc39/proposal-class-static-block for more details.\n\n<!-- prettier-ignore -->\n```tsx\n// Input\nclass Foo {\n  static count = 0;\n\n  // This is a static block:\n  static {\n    if (someCondition()) {\n      Foo.count++;\n    }\n  }\n}\n\n// Prettier 2.3\nSyntaxError: Declaration expected. (5:9)\n  3 |\n  4 |   // This is a static block:\n> 5 |   static {\n    |         ^\n  6 |     if (someCondition()) {\n  7 |       Foo.count++;\n  8 |     }\n\n// Prettier 2.4\nclass Foo {\n  static count = 0;\n\n  // This is a static block:\n  static {\n    if (someCondition()) {\n      Foo.count++;\n    }\n  }\n}\n\n```\n\n### HTML\n\n#### Replace `jsxBracketSameLine` option with `bracketSameLine` option ([#11006](https://github.com/prettier/prettier/pull/11006) by [@kurtztech](https://github.com/kurtztech))\n\nDeprecate the `jsxBracketSameLine` option in favour of the new `bracketSameLine` option that will work for HTML, Angular, Vue, and JSX.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div id=\"foo-bar-baz\"\n  class=\"bar-foo-baz\"\n  title=\"a sample title\"\n  data-foo=\"bar\"\n  data-bar=\"baz\">lorem ipsum dolor sit amet</div>\n\n<!-- Prettier 2.3 -->\n<div\n  id=\"foo-bar-baz\"\n  class=\"bar-foo-baz\"\n  title=\"a sample title\"\n  data-foo=\"bar\"\n  data-bar=\"baz\"\n>\n  lorem ipsum dolor sit amet\n</div>\n\n<!-- Prettier 2.4 -->\n<!-- Options: `{bracketSameLine: true}` -->\n<div\n  id=\"foo-bar-baz\"\n  class=\"bar-foo-baz\"\n  title=\"a sample title\"\n  data-foo=\"bar\"\n  data-bar=\"baz\">\n  lorem ipsum dolor sit amet\n</div>\n```\n\n## Other Changes\n\n### JavaScript\n\n#### Support parenthesized tagged template literals for styled components ([#11246](https://github.com/prettier/prettier/pull/11246) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst StyledComponent =\n  /** @type {import('styled-components').ThemedStyledFunction<'div',null,{overlap: boolean}>} */\n  (styled.div)`\n    position:   fixed;\n  color: red;\n  `;\n\n// Prettier 2.3\nconst StyledComponent =\n  /** @type {import('styled-components').ThemedStyledFunction<'div',null,{overlap: boolean}>} */\n  (styled.div)`\n    position:   fixed;\n  color: red;\n  `;\n\n// Prettier 2.4\nconst StyledComponent =\n  /** @type {import('styled-components').ThemedStyledFunction<'div',null,{overlap: boolean}>} */\n  (styled.div)`\n    position: fixed;\n    color: red;\n  `;\n\n```\n\n#### Count correctly regex literals in method chain arguments ([#11299](https://github.com/prettier/prettier/pull/11299) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Input\nfoo1(/𠮟𠮟𠮟/).foo2(bar).foo3(baz);\n\nfoo1(/叱叱叱/).foo2(bar).foo3(baz);\n\n// Prettier 2.3\nfoo1(/𠮟𠮟𠮟/)\n  .foo2(bar)\n  .foo3(baz);\n\nfoo1(/叱叱叱/).foo2(bar).foo3(baz);\n\n// Prettier 2.4\nfoo1(/𠮟𠮟𠮟/)\n  .foo2(bar)\n  .foo3(baz);\n\nfoo1(/叱叱叱/)\n  .foo2(bar)\n  .foo3(baz);\n\n```\n\n#### Support hack-style pipeline proposal ([#11335](https://github.com/prettier/prettier/pull/11335) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nThe proposed [hack-style pipeline syntax](https://github.com/js-choi/proposal-hack-pipes) is now supported by Prettier. We are using `%` as the topic token, following the official explainer — although this may change in future releases as the proposal progresses.\n\nAs part of this change, support for the [“smart” pipeline syntax](https://github.com/js-choi/proposal-smart-pipelines) has been removed. See [our policy on non-standardized syntax](https://prettier.io/docs/en/rationale.html#disclaimer-about-non-standard-syntax) for the rationale behind this decision.\n\n```js\n// Input\nconst foo = fn() |> fn1(%) |> fn2(%);\n\n// Prettier 2.3\nSyntaxError: Unexpected token (1:25)\n> 1 | const foo = fn() |> fn1(%) |> fn2(%);\n    |                         ^\n  2 |\n\n// Prettier 2.4\nconst foo = fn() |> fn1(%) |> fn(%);\n\n```\n\n### TypeScript\n\n#### Fix formatting intersection types that include mapped types ([#11247](https://github.com/prettier/prettier/pull/11247) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype Example = {\n  [A in B]: T;\n} & {\n  [A in B]: T;\n};\n\n// Prettier 2.3\ntype Example = {\n  [A in B]: T;\n} &\n  {\n    [A in B]: T;\n  };\n\n// Prettier 2.4\ntype Example = {\n  [A in B]: T;\n} & {\n  [A in B]: T;\n};\n\n```\n\n### Flow\n\n#### Always put a semicolon before Flow variance sigils ([#11398](https://github.com/prettier/prettier/pull/11398) by [@noppa](https://github.com/noppa))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nclass A {\n  +one = function() {};\n  -two = val();\n  +#privOne = val();\n  static +#privTwo = val();\n}\n// Prettier 2.3\nclass A {\n  +one = function() {}\n  -two = val()\n  +#privOne = val()\n  static +#privTwo = val()\n}\n// Prettier 2.4\nclass A {\n  +one = function() {};\n  -two = val();\n  +#privOne = val()\n  static +#privTwo = val()\n}\n```\n\n### SCSS\n\n#### Consistently quote Sass modules strings ([#11461](https://github.com/prettier/prettier/pull/11461) by [@niksy](https://github.com/niksy))\n\n<!-- prettier-ignore -->\n```scss\n// Input\n@use \"sass:math\";\n@forward \"list\";\n\n// Prettier 2.3\n@use \"sass:math\";\n@forward \"list\";\n\n// Prettier 2.4\n@use 'sass:math';\n@forward 'list';\n```\n\n### CLI\n\n#### Infer parser for `.stylelintrc` ([#10924](https://github.com/prettier/prettier/pull/10924) by [@SevenOutman](https://github.com/SevenOutman))\n\nA `.stylelintrc` file (without extension) is handled using `json` and `yaml` parsers."
    },
    {
      "id": "/2021/05/09/2.3.0",
      "metadata": {
        "permalink": "/blog/2021/05/09/2.3.0",
        "source": "@site/blog/2021-05-09-2.3.0.md",
        "title": "Prettier 2.3. In which assignments are consistent, short keys non-breaking, and Handlebars official",
        "description": "This release focuses on fixing long-standing issues in the JavaScript printer. Be warned that, unfortunately, reformatting a project with the new version might result in quite a big diff. If you don’t use ignoreRevsFile to hide such wholesale changes from git blame, it might be about time.",
        "date": "2021-05-09T00:00:00.000Z",
        "formattedDate": "May 9, 2021",
        "tags": [],
        "readingTime": 30.08,
        "truncated": true,
        "authors": [
          {
            "name": "Georgii Dolzhykov (@thorn0)",
            "url": "https://github.com/thorn0"
          }
        ],
        "frontMatter": {
          "author": "Georgii Dolzhykov (@thorn0)",
          "authorURL": "https://github.com/thorn0",
          "title": "Prettier 2.3. In which assignments are consistent, short keys non-breaking, and Handlebars official"
        },
        "prevItem": {
          "title": "Prettier 2.4: new bracketSameLine option and TypeScript 4.4 support!",
          "permalink": "/blog/2021/09/09/2.4.0"
        },
        "nextItem": {
          "title": "Prettier for Ruby goes v1.0 🎉",
          "permalink": "/blog/2020/12/11/plugin-ruby-1.0"
        }
      },
      "content": "This release focuses on fixing long-standing issues in the JavaScript printer. Be warned that, unfortunately, reformatting a project with the new version might result in quite a big diff. If you don’t use [`ignoreRevsFile`](https://git-scm.com/docs/git-blame#Documentation/git-blame.txt---ignore-revs-fileltfilegt) to hide such wholesale changes from `git blame`, it might be about time.\n\nA remarkable milestone is the long-awaited release of the Ember / Handlebars formatter. It’s supposed to be the last formatter included directly in the core library. In the future, for sustainability, languages should be added only by plugins.\n\nWe are grateful to our financial contributors: [Salesforce](https://engineering.salesforce.com/foss-fund-brings-more-than-just-financial-contributions-7b0664067b1e), [Indeed](https://engineering.indeedblog.com/blog/2019/07/foss-fund-six-months-in/), [Frontend Masters](https://blog.opencollective.com/frontend-masters/), Airbnb, Shogun Labs, Skyscanner, Konstantin Pschera, and [many others](https://opencollective.com/prettier#section-contributors) who help us keep going. If you enjoy Prettier and would like to support our work, head to our [OpenCollective](https://opencollective.com/prettier). Please consider also supporting the projects Prettier depends on, such as [typescript-eslint](https://opencollective.com/typescript-eslint), [remark](https://opencollective.com/unified), and [Babel](https://opencollective.com/babel).\n\nMost of the changes in this release are thanks to the hard work of [Fisker Cheung](https://github.com/fisker), [Georgii Dolzhykov](https://github.com/thorn0), and [Sosuke Suzuki](https://github.com/sosukesuzuki), along with many other contributors.\n\nAnd just a reminder, when Prettier is installed or updated, it’s [strongly recommended](https://prettier.io/docs/en/install.html#summary) to specify the exact version in `package.json`: `\"2.3.0\"`, not `\"^2.3.0\"`.\n\n<!--truncate-->\n\n## Highlights\n\n### JavaScript\n\n#### Format assignments more consistently ([#10222](https://github.com/prettier/prettier/pull/10222), [#10643](https://github.com/prettier/prettier/pull/10643), [#10672](https://github.com/prettier/prettier/pull/10672) by [@thorn0](https://github.com/thorn0); [#10158](https://github.com/prettier/prettier/pull/10158) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nPreviously, Prettier had a lot of trouble with figuring out how to break lines in assignments. E.g., long right-hand sides often stayed unbroken. Not anymore.\n\n<!-- prettier-ignore -->\n```ts\n// Prettier 2.2\naParticularlyLongAndObnoxiousNameForIllustrativePurposes = anotherVeryLongNameForIllustrativePurposes;\n\naParticularlyLongAndObnoxiousNameForIllustrativePurposes = \"a very long string for illustrative purposes\"\n  .length;\n\nsomeReallyLongThingStoredInAMapWithAReallyBigName[\n  pageletID\n] = _someVariableThatWeAreCheckingForFalsiness\n  ? Date.now() - _someVariableThatWeAreCheckingForFalsiness\n  : 0;\n\nclass x {\n  private readonly rawConfigFromFile$: BehaviorSubject<any> = new BehaviorSubject(\n    notRead\n  );\n}\n\n// Prettier 2.3\naParticularlyLongAndObnoxiousNameForIllustrativePurposes =\n  anotherVeryLongNameForIllustrativePurposes;\n\naParticularlyLongAndObnoxiousNameForIllustrativePurposes =\n  \"a very long string for illustrative purposes\".length;\n\nsomeReallyLongThingStoredInAMapWithAReallyBigName[pageletID] =\n  _someVariableThatWeAreCheckingForFalsiness\n    ? Date.now() - _someVariableThatWeAreCheckingForFalsiness\n    : 0;\n\nclass x {\n  private readonly rawConfigFromFile$: BehaviorSubject<any> =\n    new BehaviorSubject(notRead);\n}\n```\n\n#### Prevent wrapping object properties with short keys ([#10335](https://github.com/prettier/prettier/pull/10335) by [@thorn0](https://github.com/thorn0))\n\nLine breaks after short property names in object literals often look unnatural. Even when such a line break yields a line length benefit of 1 or 2 characters, it rarely looks justified. Prettier 2.3 avoids line breaks after property names shorter than `tabWidth + 3` – for example, 5 characters in the default configuration, or 7 characters with `tabWidth: 4`. This heuristic may be revised in future versions.\n\n<!-- prettier-ignore -->\n```js\n// Prettier 2.2\nconst importantLink = {\n  url:\n    \"https://prettier.io/docs/en/rationale.html#what-prettier-is-concerned-about\",\n  gitHubUrl:\n    \"https://github.com/prettier/prettier/blob/main/docs/rationale.md#what-prettier-is-concerned-about\",\n};\n\n// Prettier 2.3\nconst importantLink = {\n  url: \"https://prettier.io/docs/en/rationale.html#what-prettier-is-concerned-about\",\n  gitHubUrl:\n    \"https://github.com/prettier/prettier/blob/main/docs/rationale.md#what-prettier-is-concerned-about\",\n};\n```\n\n### Ember / Handlebars\n\n#### Move Handlebars support out of alpha to release ([#10290](https://github.com/prettier/prettier/pull/10290) by [@dcyriller](https://github.com/dcyriller) & [@thorn0](https://github.com/thorn0))\n\nThis started in 2017. Handlebars support has been in Prettier for a while, but it wasn’t released officially as it wasn’t really ready. Its status went from “alpha” to “experimental” to “beta” and then, if you checked older release notes, you can see that after “beta” somehow it was “alpha” again…\n\nWell, anyway, it finally is happening: Prettier can now officially format HTML templates with Handlebars! 🎉\n\nIt uses [Glimmer], [Ember]’s Handlebars parser, so it should be compliant with the HTML spec thanks to the Ember team.\n\nThe [`--html-whitespace-sensitivity`][hws-option] option is supported and defaults to `strict`, which means that Prettier will always respect the presence or absence of whitespace around tags and consider it unsafe to add whitespace where there were none and vice versa as this can affect how the document is rendered in the browser. The `css` value is not yet supported (treated as `strict` for now).\n\nThe feature is called “Ember / Handlebars” and not just “Handlebars” because Glimmer doesn’t support some syntax and use cases of Handlebars. This is mostly due to the fact that [Handlebars], being a template engine (a preprocessor), doesn’t care about the underlying syntax of the content it processes whereas Glimmer parses two syntaxes – HTML and Handlebars – at the same time and combines the result into a single tree, which Prettier can print. This means Prettier won’t format Handlebars files that can’t be parsed into such a tree, either because the underlying syntax isn’t HTML or because template directives and tags overlap in a way that can’t be represented in a tree (e.g., `{{#if foo}}<div>{{/if}`). Even with these restrictions, the formatter still seems to be useful enough to non-Ember Handlebars users. As for the syntax unsupported by Ember, there is a good chance to see support for it in future versions of Prettier as Glimmer uses a full-fledged Handlebars parser under the hood.\n\nFiles with the extensions `.hbs` and `.handlebars` are recognized as Handlebars by default. For other extensions, the [`--parser`](parser-option) option with the value `glimmer` has to be specified – for example, using command line or, better yet, [configuration overrides].\n\nSee the formatter in action on the [playground][playground-glimmer]!\n\n[glimmer]: https://www.npmjs.com/package/@glimmer/syntax\n[ember]: https://emberjs.com\n[hws-option]: https://prettier.io/docs/en/options.html#html-whitespace-sensitivity\n[handlebars]: https://handlebarsjs.com/\n[parser-option]: https://prettier.io/docs/en/options.html#parser\n[configuration overrides]: https://prettier.io/docs/en/configuration.html#configuration-overrides\n[playground-glimmer]: https://prettier.io/playground/#N4Igxg9gdgLgprEAuEACVAeAJgSwG7qFgA2AhgM7kC8AOiAjAE4CedhqAfDVOhgBYBGDsGDoYOGMTjsAvjIwB6QVx6ZcBdCQrU6AIwhZWIFe1OERhfYbOE53Reo6YFjkABoQEAA7jo5ZKCkjIwQAO4ACkEI-iikxKGkzP4euoykYADWcDAAyl7pOFAA5shMAK5wHnAAtrpwWFj1ADKkxWWkRXAAYhCM1aQw4sXIIKRlMBDuIHww1cQA6nwScOT5YHA50RL4Eswj5Ew4YDBTheRwjDDhaUX9yABmceceAFbkAB4AQmmZ2Tmk1TgTUKcAeT0qIDe7xyhSKUgAimUIPAwcRniB8oxzowRnCcNVATiPF5GIUYPMcFgYHxkAAOAAMxJC53maS8IxJKwueFBHgAjkj4NdvDFRuQALRQOD1epTRhwAU4eXXDp3JCPNEQ87VHClRgVDzkWEIwWg9XgjwwUi6ClUmlIABMlrSOGIsIAwhACaQRisAKxTMrnAAq1piGvReAqAEkoI1YDkwKSfABBOM5GDMKSo85yIA\n\n## Formatting Improvements\n\n### JavaScript\n\n#### Refine formatting of curried arrow functions ([#9992](https://github.com/prettier/prettier/pull/9992), [#10543](https://github.com/prettier/prettier/pull/10543) by [@sosukesuzuki](https://github.com/sosukesuzuki) & [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```js\n// Prettier 2.2\nconst currying = (argument1) => (argument2) => (argument3) => (argument4) => (\n  argument5\n) => (argument6) => foo;\n\n// Prettier 2.3\nconst currying =\n  (argument1) =>\n  (argument2) =>\n  (argument3) =>\n  (argument4) =>\n  (argument5) =>\n  (argument6) =>\n    foo;\n```\n\n#### Improve formatting for React Hooks calls ([#10238](https://github.com/prettier/prettier/pull/10238) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Prettier 2.2\nconst { firstName, lastName } = useMemo(() => parseFullName(fullName), [\n  fullName,\n]);\n\n// Prettier 2.3\nconst { firstName, lastName } = useMemo(\n  () => parseFullName(fullName),\n  [fullName]\n);\n```\n\n#### Improve visual separation between header and body in classes with multiline headers ([#10085](https://github.com/prettier/prettier/pull/10085) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Prettier 2.2\nclass loooooooooooooooooooong\n  extends looooooooooooooooooong\n  implements loooooooooooooooooooong {\n  property: string;\n}\n\n// Prettier 2.3\nclass loooooooooooooooooooong\n  extends looooooooooooooooooong\n  implements loooooooooooooooooooong\n{\n  property: string;\n}\n```\n\n#### Concise formatting of number-only arrays ([#10106](https://github.com/prettier/prettier/pull/10106), [#10160](https://github.com/prettier/prettier/pull/10160) by [@thorn0](https://github.com/thorn0))\n\nWhile in general, Prettier avoids this kind of formatting because it's not diff-friendly, in this special case we decided that the benefits outweigh the risks.\n\nIf at least one element has a trailing single-line (`// ...`) comment on the same line, the concise formatting isn't applied. On the other hand, single-line comments placed on separate lines don't have such an effect and – as well as empty lines – can be used for logical grouping.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst lazyCatererNumbers  =  [1, 2, 4, 7, 11, 16, 22, 29, 37, 46,\n\n// n > 10\n56, 67, 79, 92, 106, 121, 137, 154, 172, 191, 211, 232, 254, 277, 301, 326, 352, 379, 407, 436, 466,\n497, 529, 562, 596, 631, 667, 704, 742, 781,\n// n > 40\n821, 862, 904, 947, 991, 1036, 1082, 1129, 1177, 1226, 1276, 1327, 1379];\n\n// Prettier 2.2\nconst lazyCatererNumbers = [\n  1,\n  2,\n  4,\n  7,\n  11,\n  16,\n  22,\n  29,\n  37,\n  // ... ✂ 46 lines ✂ ...\n  1379,\n];\n\n// Prettier 2.3\nconst lazyCatererNumbers = [\n  1, 2, 4, 7, 11, 16, 22, 29, 37, 46,\n\n  // n > 10\n  56, 67, 79, 92, 106, 121, 137, 154, 172, 191, 211, 232, 254, 277, 301, 326,\n  352, 379, 407, 436, 466, 497, 529, 562, 596, 631, 667, 704, 742, 781,\n  // n > 40\n  821, 862, 904, 947, 991, 1036, 1082, 1129, 1177, 1226, 1276, 1327, 1379,\n];\n```\n\n#### Improve formatting for nested await expressions in heads of member and call expressions ([#10342](https://github.com/prettier/prettier/pull/10342) by [@thorn0](https://github.com/thorn0))\n\nEven though Prettier tries to be helpful here, please don't write code like this. Have mercy upon your teammates and use intermediate variables.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst getAccountCount = async () =>\n  (await\n    (await (\n      await focusOnSection(BOOKMARKED_PROJECTS_SECTION_NAME)\n    ).findItem(\"My bookmarks\")).getChildren()\n  ).length\n\n// Prettier 2.2\nconst getAccountCount = async () =>\n  (\n    await (\n      await (await focusOnSection(BOOKMARKED_PROJECTS_SECTION_NAME)).findItem(\n        \"My bookmarks\"\n      )\n    ).getChildren()\n  ).length;\n\n// Prettier 2.3\nconst getAccountCount = async () =>\n  (\n    await (\n      await (\n        await focusOnSection(BOOKMARKED_PROJECTS_SECTION_NAME)\n      ).findItem(\"My bookmarks\")\n    ).getChildren()\n  ).length;\n```\n\n#### Improve formatting for `do` expressions in function calls ([#10693](https://github.com/prettier/prettier/pull/10693) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n“`do` expressions” are a [stage 1 ECMAScript proposal](https://github.com/tc39/proposal-do-expressions).\n\n<!-- prettier-ignore -->\n```js\n// Prettier 2.2\nexpect(\n  do {\n    var bar = \"foo\";\n    bar;\n  }\n).toBe(\"foo\");\n\n// Prettier 2.3\nexpect(do {\n  var bar = \"foo\";\n  bar;\n}).toBe(\"foo\");\n```\n\n#### Consistent indentation for conditional operators ([#10187](https://github.com/prettier/prettier/pull/10187), [#10266](https://github.com/prettier/prettier/pull/10266) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Prettier 2.2\nconst dotNotationMemberExpression = (callNode.parent?.type ===\nAST_NODE_TYPES.ChainExpression\n  ? callNode.parent.parent\n  : callNode.parent\n).TSESTree.BinaryExpression;\n\nconst computedMemberExpression = (callNode.parent?.type ===\nAST_NODE_TYPES.ChainExpression\n  ? callNode.parent.parent\n  : callNode.parent)[TSESTree.BinaryExpression];\n\nconst callExpressionCallee = (callNode.parent?.type ===\n  AST_NODE_TYPES.ChainExpression\n  ? callNode.parent.parent\n  : callNode.parent)(TSESTree.BinaryExpression);\n\nconst typeScriptAsExpression = (callNode.parent?.type ===\nAST_NODE_TYPES.ChainExpression\n  ? callNode.parent.parent\n  : callNode.parent) as TSESTree.BinaryExpression;\n\n// Prettier 2.3\nconst dotNotationMemberExpression = (\n  callNode.parent?.type === AST_NODE_TYPES.ChainExpression\n    ? callNode.parent.parent\n    : callNode.parent\n).TSESTree.BinaryExpression;\n\nconst computedMemberExpression = (\n  callNode.parent?.type === AST_NODE_TYPES.ChainExpression\n    ? callNode.parent.parent\n    : callNode.parent\n)[TSESTree.BinaryExpression];\n\nconst callExpressionCallee = (\n  callNode.parent?.type === AST_NODE_TYPES.ChainExpression\n    ? callNode.parent.parent\n    : callNode.parent\n)(TSESTree.BinaryExpression);\n\nconst typeScriptAsExpression = (\n  callNode.parent?.type === AST_NODE_TYPES.ChainExpression\n    ? callNode.parent.parent\n    : callNode.parent\n) as TSESTree.BinaryExpression;\n```\n\n### HTML\n\n#### Prefix-based multiline formatting for the `class` attribute ([#7865](https://github.com/prettier/prettier/pull/7865) by [@thorn0](https://github.com/thorn0))\n\nFormatting of HTML class names will now keep classes on one line until the line length limit is reached; at that point, consecutive classes with the same prefix will be grouped together on each line. For layout frameworks such as Bootstrap and Tailwind CSS, which add many classes to an element, this is important for readability and maintainability vs. the previous behavior (keeping all classes on one line) or e.g. putting each class on its own line.\n\n<!-- prettier-ignore -->\n```html\n<!-- Prettier 2.2 -->\n<div\n  class=\"SomeComponent__heading-row d-flex flex-column flex-lg-row justify-content-start justify-content-lg-between align-items-start align-items-lg-center\"\n></div>\n\n<!-- Prettier 2.3 -->\n<div\n  class=\"\n    SomeComponent__heading-row\n    d-flex\n    flex-column flex-lg-row\n    justify-content-start justify-content-lg-between\n    align-items-start align-items-lg-center\n  \"\n></div>\n```\n\n## Other Changes\n\n### JavaScript\n\n#### Fix unstable multiple comments on the same line ([#9672](https://github.com/prettier/prettier/pull/9672) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\na;\n/*1*//*2*/\n/*3*/\nb;\n\n// Prettier 2.2\na; /*2*/\n/*1*/ /*3*/\nb;\n\n// Prettier 2.2 (second format)\na; /*2*/ /*3*/\n/*1*/ b;\n\n// Prettier 2.3\na;\n/*1*/ /*2*/\n/*3*/\nb;\n```\n\n#### Don’t format nodes that end just before `rangeStart` ([#9704](https://github.com/prettier/prettier/pull/9704) by [@fisker](https://github.com/fisker))\n\nPreviously, when [range formatting](https://prettier.io/docs/en/options.html#range) was performed, such nodes were considered part of the range, now they're excluded. This affects other languages that the range formatting feature supports, not only JavaScript.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfoo = 1.0000;bar = 1.0000;baz=1.0000;\n             ^^^^^^^^^^^^^ Range\n\n// Prettier 2.2\nfoo = 1.0;\nbar = 1.0;baz=1.0000;\n\n// Prettier 2.3\nfoo = 1.0000;bar = 1.0;baz=1.0000;\n```\n\n#### Fix comments inside JSX end tag ([#9711](https://github.com/prettier/prettier/pull/9711) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n<a><// comment\n/a>;\n\n// Prettier 2.2\n<a></// comment\na>;\n\n// Prettier 2.3\n<a></\n  // comment\n  a\n>;\n```\n\n#### Fix inconsistent language comment detection ([#9743](https://github.com/prettier/prettier/pull/9743) by [@fisker](https://github.com/fisker))\n\nAn `/* HTML */` comment should directly precede a template literal for the latter to be recognized as HTML-in-JS. Previously, the comment was erroneously recognized is some other locations.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfoo /* HTML */ = `<DIV>\n</DIV>`;\n\n// Prettier 2.2 (--parser=babel)\nfoo /* HTML */ = `<div></div>`;\n\n// Prettier 2.2 (--parser=meriyah)\nfoo /* HTML */ = `<DIV>\n</DIV>`;\n\n// Prettier 2.3 (All JavaScript parsers)\nfoo /* HTML */ = `<DIV>\n</DIV>`;\n```\n\n#### Fix extra semicolon added to ignored directives ([#9850](https://github.com/prettier/prettier/pull/9850) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\n// prettier-ignore\n'use strict';\n\nfunction foo() {\n// prettier-ignore\n\"use strict\";;\n}\n\n// Prettier 2.2\n// prettier-ignore\n'use strict';;\n\nfunction foo() {\n  // prettier-ignore\n  \"use strict\";;\n}\n\n// Prettier 2.3\n// prettier-ignore\n'use strict';\n\nfunction foo() {\n  // prettier-ignore\n  \"use strict\";\n}\n```\n\n#### Fix unstable JSX formatting with U+3000 ([#9866](https://github.com/prettier/prettier/pull/9866) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\n<p>\n  <span />　{this.props.data.title}　<span />\n  //----- ^ U+3000 --------------- ^ U+3000\n</p>\n\n// Prettier 2.2\n<p>\n  <span />\n  　{this.props.data.title}　<span />\n  //----- ^ U+3000 --------------- ^ U+3000\n</p>;\n\n// Prettier 2.2 (second format)\n<p>\n  <span />　{this.props.data.title}　<span />\n  //----- ^ U+3000 --------------- ^ U+3000\n</p>;\n\n// Prettier 2.3\n<p>\n  <span />　{this.props.data.title}　<span />\n  //----- ^ U+3000 --------------- ^ U+3000\n</p>;\n```\n\n#### Fix error thrown on expressions like `a(b => c => function (){})` ([#10278](https://github.com/prettier/prettier/pull/10278) by [@thorn0](https://github.com/thorn0))\n\nRegression from v2.2.0.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\na(b => c => function (){})\n\n// Prettier 2.2\nTypeError: Cannot read property 'length' of undefined\n\n// Prettier 2.3\na((b) => (c) => function () {});\n```\n\n#### Improve formatting for inline decorators ([#10296](https://github.com/prettier/prettier/pull/10296) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nclass Foo {\n  @decorator([]) bar() {}\n  @decorator(\n    []\n  ) baz() {}\n}\n\n// Prettier 2.2\nclass Foo {\n  @decorator([]) bar() {}\n  @decorator([])\n  baz() {}\n}\n\n// Prettier 2.3\nclass Foo {\n  @decorator([]) bar() {}\n  @decorator([]) baz() {}\n}\n```\n\n#### Fix ASI protection for private fields ([#10334](https://github.com/prettier/prettier/pull/10334) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nclass C {\n  #field = 'value';\n  [\"method\"]() {}\n}\n\n// Prettier 2.2 (with --no-semi)\nclass C {\n  #field = \"value\"\n  [\"method\"]() {}\n}\n\n// Prettier 2.3 (with --no-semi)\nclass C {\n  #field = \"value\";\n  [\"method\"]() {}\n}\n```\n\n#### Support Module Blocks proposal ([#10417](https://github.com/prettier/prettier/pull/10417) by [@sosukesuzuki](https://github.com/sosukesuzuki), [@thorn0](https://github.com/thorn0))\n\nSupport formatting for [Module Blocks Stage 2 proposal](https://github.com/tc39/proposal-js-module-blocks).\n\n<!-- prettier-ignore -->\n```js\n// Input\nmodule { export let foo = \"foo\"; };\n\n// Prettier 2.2\nSyntaxError: Unexpected token, expected \";\"\n\n// Prettier 2.3\nmodule {\n  export let foo = \"foo\";\n};\n```\n\n#### Fix missing parentheses for `yield` in a pipeline ([#10446](https://github.com/prettier/prettier/pull/10446) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfunction* f() {\n  return x |> (yield #);\n}\n\n// Prettier 2.2\nfunction* f() {\n  return x |> yield #;\n}\n\n// Prettier 2.3\nfunction* f() {\n  return x |> (yield #);\n}\n```\n\n#### Make Babel’s error recovery more selective ([#10495](https://github.com/prettier/prettier/pull/10495) by [@fisker](https://github.com/fisker), [#9787](https://github.com/prettier/prettier/pull/9787) by [@sosukesuzuki](https://github.com/sosukesuzuki), [#10065](https://github.com/prettier/prettier/pull/10065), [#10322](https://github.com/prettier/prettier/pull/10322) by [@thorn0](https://github.com/thorn0))\n\nPreviously, because of the [error recovery](https://babeljs.io/blog/2019/11/05/7.7.0#parser-error-recovery-10363httpsgithubcombabelbabelpull10363), the Babel parser was too permissive, which lead to all kinds of AST shapes that Prettier couldn’t print. Prettier 2.3 lets Babel recover only from a few harmless types of errors – for example, multiple `const` declarations with the same name. Anything else is reported as syntax errors.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfoo(\"a\", , \"b\");\n\n// Prettier 2.2\nTypeError: Cannot read property 'type' of null\n\n// Prettier 2.3\n[error] stdin: SyntaxError: Argument expression expected. (1:10)\n[error] > 1 | foo(\"a\", , \"b\");\n[error]     |          ^\n```\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst \\u{20} = 1\n\n// Prettier 2.2\nconst   = 1;\n\n// Prettier 2.3\n[error] stdin: SyntaxError: Invalid Unicode escape (1:7)\n[error] > 1 | const \\u{20} = 1\n[error]     |       ^         ^\n```\n\n#### Avoid last-argument hugging for number-only arrays ([#10517](https://github.com/prettier/prettier/pull/10517) by [@thorn0](https://github.com/thorn0))\n\nAnother special case for number-only arrays.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\ninstantiate(game, [\n  transform([-0.7, 0.5, 0]),\n  render_colored_diffuse(game.MaterialDiffuse, game.Meshes[\"monkey_flat\"], [1, 1, 0.3, 1]),\n]);\n\n// Prettier 2.2\ninstantiate(game, [\n  transform([-0.7, 0.5, 0]),\n  render_colored_diffuse(game.MaterialDiffuse, game.Meshes[\"monkey_flat\"], [\n    1,\n    1,\n    0.3,\n    1,\n  ]),\n]);\n\n// Prettier 2.3\ninstantiate(game, [\n  transform([-0.7, 0.5, 0]),\n  render_colored_diffuse(\n    game.MaterialDiffuse,\n    game.Meshes[\"monkey_flat\"],\n    [1, 1, 0.3, 1]\n  ),\n]);\n```\n\n#### Improve detection of AMD `define` ([#10528](https://github.com/prettier/prettier/pull/10528) by [@thorn0](https://github.com/thorn0))\n\nPrettier special-cases AMD `define` calls to avoid unexpected line breaks in them. We now only format `define` calls if they are at the top level of a function or program and are passed arguments in the way AMD expects.\n\n<!-- prettier-ignore -->\n```jsx\n// Prettier 2.2\nconst someVariable = define(\"some string literal\", anotherVariable, yetAnotherVariable);\n\n// Prettier 2.3\nconst someVariable = define(\n  \"some string literal\",\n  anotherVariable,\n  yetAnotherVariable\n);\n```\n\n#### Fix duplicated `prettier-ignore` comments ([#10666](https://github.com/prettier/prettier/pull/10666) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfoo = a.\n  // prettier-ignore\n  b;\n\n// Prettier 2.2\nfoo =\n  // prettier-ignore\n  a.\n  // prettier-ignore\n  b;\n\n// Prettier 2.3\nfoo = a.\n  // prettier-ignore\n  b;\n```\n\n#### Process conditional groups in `mapDoc` ([#10695](https://github.com/prettier/prettier/pull/10695) by [@thorn0](https://github.com/thorn0))\n\nIn particular, this fixes broken substitutions in HTML-in-JS.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nexport default function include_photoswipe(\n\tgallery_selector = \".my-gallery\"\n): string {\n\treturn /* HTML */ `\n\t\t<script>\n\t\t\twindow.addEventListener(\"load\", () =>\n\t\t\t\tinitPhotoSwipeFromDOM(\"${gallery_selector}\")\n\t\t\t);\n\t\t</script>`;\n}\n\n// Prettier 2.2\nexport default function include_photoswipe(\n  gallery_selector = \".my-gallery\"\n): string {\n  return /* HTML */ ` <script>\n    window.addEventListener(\"load\", () =>\n      initPhotoSwipeFromDOM(\"PRETTIER_HTML_PLACEHOLDER_0_13_IN_JS\")\n    );\n  </script>`;\n}\n\n// Prettier 2.3\nexport default function include_photoswipe(\n  gallery_selector = \".my-gallery\"\n): string {\n  return /* HTML */ ` <script>\n    window.addEventListener(\"load\", () =>\n      initPhotoSwipeFromDOM(\"${gallery_selector}\")\n    );\n  </script>`;\n}\n```\n\n#### Avoid arg expansion that leads to broken code ([#10712](https://github.com/prettier/prettier/pull/10712) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nglimseGlyphsHazardNoopsTieTie(({ a, b = () => {\n  console.log();\n}}) => averredBathersBoxroomBuggyNurl());\n\n// Prettier 2.2\nglimseGlyphsHazardNoopsTieTie(({ a, b = () => {\n    console.log();\n  } }) => averredBathersBoxroomBuggyNurl());\n\n// Prettier 2.3\nglimseGlyphsHazardNoopsTieTie(\n  ({\n    a,\n    b = () => {\n      console.log();\n    },\n  }) => averredBathersBoxroomBuggyNurl()\n);\n```\n\n#### Fix missing parentheses around `async` in `for-of` ([#10781](https://github.com/prettier/prettier/pull/10781) by [@fisker](https://github.com/fisker))\n\nSee https://github.com/tc39/ecma262/issues/2034\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfor ((async) of []);\n\n// Prettier 2.2\nfor (async of []);\n\n// Prettier 2.2 (second format)\nSyntaxError: Unexpected token, expected \"=>\" (1:15)\n> 1 | for (async of []);\n\n// Prettier 2.3\nfor ((async) of []);\n```\n\n#### Support `async do` expressions proposal ([#10813](https://github.com/prettier/prettier/pull/10813) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nSee https://github.com/tc39/proposal-async-do-expressions\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst x = async do {\n  await requestAPI().json();\n};\n\n// Prettier 2.2\nSyntaxError: Unexpected token, expected \";\" (1:17)\n\n// Prettier 2.3\nconst x = async do {\n  await requestAPI().json();\n};\n```\n\n### TypeScript\n\n#### Fix missing comments in `MethodDefinition` ([#9872](https://github.com/prettier/prettier/pull/9872) by [@fisker](https://github.com/fisker))\n\n`typescript` parser only, `babel-ts` doesn't have this issue.\n\n<!-- prettier-ignore -->\n```typescript\n// Input\nclass Foo {\n  bar() /* bat */;\n}\n\n// Prettier 2.2\nError: Comment \"bat\" was not printed. Please report this error!\n\n// Prettier 2.3\nclass Foo {\n  bar /* bat */();\n}\n```\n\n#### Fix unnecessary line breaks in method type declaration parameters ([#10024](https://github.com/prettier/prettier/pull/10024) by [@sosukesuzuki](https://github.com/sosukesuzuki), [#10357](https://github.com/prettier/prettier/pull/10357) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```js\n// Input\ntype Foo = {\n  method(foo: \"foo\"): `\n  `\n};\n\n// Prettier 2.2\ntype Foo = {\n  method(\n    foo: \"foo\"\n  ): `\n  `;\n};\n\n// Prettier 2.3\ntype Foo = {\n  method(foo: \"foo\"): `\n  `;\n};\n\n```\n\n#### Print trailing commas in type parameters ([#10109](https://github.com/prettier/prettier/pull/10109) by [@sosukesuzuki](https://github.com/sosukesuzuki), [#10353](https://github.com/prettier/prettier/pull/10353) by [@thorn0](https://github.com/thorn0))\n\nTypeScript has been supporting trailing commas in type parameters since TypeScript 2.7 released in January 2018. Prettier 2.3 prints them if the `trailingComma` option is set to `all`. Keep this option at the more conservative default value `es5` if compatibility with TypeScript 2.7 or older is needed. Note that TypeScript [still doesn't support][ts-issue-21984] trailing commas in type arguments (type parameter instantiations).\n\n[ts-issue-21984]: https://github.com/microsoft/TypeScript/issues/21984\n\n<!-- prettier-ignore -->\n```ts\n// Input\nexport class BaseSingleLevelProfileTargeting<\n\tT extends ValidSingleLevelProfileNode,\n> {\n  // ...\n}\n\n// Prettier 2.2\nexport class BaseSingleLevelProfileTargeting<\n  T extends ValidSingleLevelProfileNode\n> {\n  // ...\n}\n\n// Prettier 2.3 with --trailling-comma=all\nexport class BaseSingleLevelProfileTargeting<\n  T extends ValidSingleLevelProfileNode,\n> {\n  // ...\n}\n```\n\n#### Allow hugging arguments that are non-concise arrow functions with return type annotations ([#10316](https://github.com/prettier/prettier/pull/10316) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```ts\n// Prettier 2.2\nusers.map(\n  (user: User): User => {\n    return user;\n  }\n);\n\n// Prettier 2.3\nusers.map((user: User): User => {\n  return user;\n})\n```\n\n#### Correct parentheses for non-null assertions ([#10337](https://github.com/prettier/prettier/pull/10337) by [@thorn0](https://github.com/thorn0))\n\nNecessary parentheses sometimes weren't printed in expressions containing non-null assertions. This has been fixed.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst myFunction2 = (key: string): number =>\n  ({\n    a: 42,\n    b: 42,\n  }[key]!)\n\n// Prettier 2.2 (invalid syntax)\nconst myFunction2 = (key: string): number =>\n  {\n    a: 42,\n    b: 42,\n  }[key]!;\n\n// Prettier 2.3\nconst myFunction2 = (key: string): number =>\n  ({\n    a: 42,\n    b: 42,\n  }[key]!);\n```\n\n#### Indent type assertions in heads of member and call expressions ([#10341](https://github.com/prettier/prettier/pull/10341) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst accountCount = (findItemInSection(BOOKMARKED_PROJECTS_SECTION_NAME,\n  \"My bookmarks\") as TreeItem).getChildren().length;\n\n// Prettier 2.2\nconst accountCount = (findItemInSection(\n  BOOKMARKED_PROJECTS_SECTION_NAME,\n  \"My bookmarks\"\n) as TreeItem).getChildren().length;\n\n// Prettier 2.3\nconst accountCount = (\n  findItemInSection(\n    BOOKMARKED_PROJECTS_SECTION_NAME,\n    \"My bookmarks\"\n  ) as TreeItem\n).getChildren().length;\n```\n\n#### Support intrinsic keyword ([#10390](https://github.com/prettier/prettier/pull/10390) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype Uppercase<S extends string> = intrinsic;\n\n// Prettier 2.2\nError: unknown type: \"TSIntrinsicKeyword\"\n\n// Prettier 2.3\ntype Uppercase<S extends string> = intrinsic;\n\n```\n\n#### Support TypeScript 4.2 ([#10418](https://github.com/prettier/prettier/pull/10418), [#10466](https://github.com/prettier/prettier/pull/10466), [#10546](https://github.com/prettier/prettier/pull/10546), [#10589](https://github.com/prettier/prettier/pull/10589) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n##### [`abstract` Construct Signatures](https://devblogs.microsoft.com/typescript/announcing-typescript-4-2/#abstract-construct-signatures)\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype T = abstract new () => void;\n\n// Prettier 2.2\nSyntaxError: Unexpected token, expected \";\" (1:19)\n\n// Prettier 2.3\ntype T = abstract new () => void;\n\n```\n\n##### [Type imports in import require declaration](https://github.com/microsoft/TypeScript/pull/41573)\n\n<!-- prettier-ignore -->\n```ts\n// Input\nimport type A = require(\"A\");\n\n// Prettier 2.2\nSyntaxError: Only ECMAScript imports may use 'import type'.\n\n// Prettier 2.3\nimport type A = require(\"A\");\n\n```\n\n#### Fix misplaced comments in unions and intersections ([#10457](https://github.com/prettier/prettier/pull/10457) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype Foo = \"1\" | \"2\" /* two */ | \"3\";\n\n// Prettier 2.2\ntype Foo = \"1\" | \"2\" | /* two */ \"3\";\n\n// Prettier 2.3\ntype Foo = \"1\" | \"2\" /* two */ | \"3\";\n```\n\n#### Don’t print parens around nested type assertions ([#10702](https://github.com/prettier/prettier/pull/10702) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nfoo as unknown as Bar\n\n// Prettier 2.2\n(foo as unknown) as Bar;\n\n// Prettier 2.3\nfoo as unknown as Bar;\n```\n\n#### Support TypeScript 4.3 via `babel-ts` ([#10811](https://github.com/prettier/prettier/pull/10811) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n##### [`override` modifiers in class elements](https://devblogs.microsoft.com/typescript/announcing-typescript-4-3-beta/#override-and-the-noimplicitoverride-flag)\n\n```ts\nclass Foo extends  {\n  override method() {}\n}\n```\n\n##### [static index signatures (`[key: KeyType]: ValueType`) in classes](https://devblogs.microsoft.com/typescript/announcing-typescript-4-3-beta/#static-index-signatures)\n\n```ts\nclass Foo {\n  static [key: string]: Bar;\n}\n```\n\n##### [`get` / `set` in type declarations](https://devblogs.microsoft.com/typescript/announcing-typescript-4-3-beta/#separate-write-types-on-properties)\n\n```ts\ninterface Foo {\n  set foo(value);\n  get foo(): string;\n}\n```\n\n### Flow\n\n#### Fix missing semicolon in `declare export * from …` ([#9767](https://github.com/prettier/prettier/pull/9767) by [@fisker](https://github.com/fisker))\n\n<!-- Optional description if it makes sense. -->\n\n<!-- prettier-ignore -->\n```jsx\n// Input\ndeclare export * from \"ES6_ExportAllFrom_Source2\";\n\n// Prettier 2.2\ndeclare export * from \"ES6_ExportAllFrom_Source2\"\n\n// Prettier 2.3\ndeclare export * from \"ES6_ExportAllFrom_Source2\";\n```\n\n#### Support `this` type annotation in functions via `babel-flow` ([#10397](https://github.com/prettier/prettier/pull/10397) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n`this` type annotation is supported since [Babel 7.13](https://babeljs.io/blog/2021/02/22/7.13.0#new-flow-features-12193httpsgithubcombabelbabelpull12193-12234httpsgithubcombabelbabelpull12234).\n\n```js\n// Input\nvar foo: (this: boolean) => void;\n\n// Prettier 2.2\nSyntaxError: Unexpected token, expected \")\" (1:15)\n\n// Prettier 2.3\nvar foo: (this: boolean) => void;\n\n```\n\n#### Fix range formatting issues ([#10505](https://github.com/prettier/prettier/pull/10505) by [@thorn0](https://github.com/thorn0))\n\nPrettier had trouble formatting some ranges in function declarations. `SyntaxError` was thrown. Prettier 2.3 formats these cases without errors. Examples of problematic ranges are shown below:\n\n<!-- prettier-ignore -->\n```jsx\ndeclare export function graphql<Props, Variables, Component: React$ComponentType<Props>>\n  //                            ^^^^^ range 1\n  (query: GQLDocument, config?: Config<Props, QueryConfigOptions<Variables>>):\n  (Component: Component) => React$ComponentType<$Diff<React$ElementConfig<Component>, {\n    data: Object|void,\n    //           ^^^^ range 2\n    mutate: Function|void\n  }>>\n```\n\n#### Support for Flow's indexed access type ([#10594](https://github.com/prettier/prettier/pull/10594) by [@gkz](https://github.com/gkz))\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst x: Obj['foo'] = 1;\n\n// Prettier 2.2\n// Error: unsupported node type \"IndexedAccessType\"\n\n// Prettier 2.3\nconst x: Obj[\"foo\"] = 1;\n```\n\n#### Support for Flow's optional indexed access type ([#10788](https://github.com/prettier/prettier/pull/10788) by [@gkz](https://github.com/gkz))\n\n<!-- prettier-ignore -->\n```js\n// Input\ntype T = Obj?.['foo'];\n\n// Prettier 2.2\n// Error: unsupported node type \"OptionalIndexedAccessType\"\n\n// Prettier 2.3\ntype T = Obj?.['foo'];\n```\n\n### JSON\n\n#### Don't use smart quotes for JSON5 with `--quote-props=preserve` ([#10323](https://github.com/prettier/prettier/pull/10323) by [@thorn0](https://github.com/thorn0))\n\nWith the `quoteProps` option set to `preserve` and `singleQuotes` to `false` (default), double quotes are always used for printing strings, including situations like `\"bla\\\"bla\"`. This effectively allows using `--parser json5` for \"JSON with comments and trailing commas\".\n\n<!-- prettier-ignore -->\n```js\n// Input\n{\n  \"char\": \"\\\"\",\n}\n\n// Prettier 2.2\n{\n  \"char\": '\"',\n}\n\n// Prettier 2.3\n{\n  \"char\": \"\\\"\",\n}\n```\n\n#### Stricter JSON parser ([#10346](https://github.com/prettier/prettier/pull/10346), [#10443](https://github.com/prettier/prettier/pull/10443), [#10456](https://github.com/prettier/prettier/pull/10456), [#10434](https://github.com/prettier/prettier/pull/10434) by [@fisker](https://github.com/fisker))\n\nPrettier internally uses a JavaScript expression parser to parse JSON. That's why the `json` and `json5` parsers used to be very forgiving and allowed all kinds of JavaScript expressions. Now they are much stricter, although some simple non-standard syntax is still allowed (e.g., [JSON6](https://github.com/d3x0r/JSON6) is supported, except for multiple minus signs: `----123`).\n\n<!-- prettier-ignore -->\n```js\n// Input\n[1, 2, 1 + 2]\n\n// Prettier 2.2\n[1, 2, 1 + 2]\n\n// Prettier 2.3\nSyntaxError: BinaryExpression is not allowed in JSON. (1:8)\n> 1 | [1, 2, 1 + 2]\n    |        ^\n```\n\n#### Improve error message ([#10433](https://github.com/prettier/prettier/pull/10433) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\n{key: \"foo\" + \"bar\"}\n\n// Prettier 2.2 (--parser=json-stringify)\nSyntaxError: BinaryExpression is not allowed in JSON. (1:7)\n> 1 | {key: \"foo\" + \"bar\"}\n    |       ^\n\n// Prettier 2.3\nSyntaxError: BinaryExpression is not allowed in JSON. (1:7)\n> 1 | {key: \"foo\" + \"bar\"}\n    |       ^^^^^^^^^^^^^\n```\n\n#### Fix syntax error on JSON range formatting ([#10497](https://github.com/prettier/prettier/pull/10497) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\n[{ a: 1.0000}, {\"b\":   2.0000 }]\n//                 ^^^^^^^^^^^ range\n\n// Prettier 2.2\nSyntaxError: Unexpected token (1:4)\n> 1 | \"b\":   2.0000\n    |    ^\n\n// Prettier 2.3\n[{ a: 1.0000}, { \"b\": 2.0 }]\n```\n\n### CSS\n\n#### Fix absolute path in custom CSS `-custom-url()` calls ([#9966](https://github.com/prettier/prettier/pull/9966) by [@vjeux](https://github.com/vjeux))\n\nThe CSS parser is parsing this as `[\"division\", \"absolute/path\"]` instead of a single `\"/absolute/path\"` token unless you are in a `url()` call. Because we put space after division, it results in an incorrect path. The fix was to avoid printing a space if a division is the first token of a call, which hopefully should be safe.\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n-custom-url(/absolute/path)\n\n/* Prettier 2.2 */\n-custom-url(/ absolute/path)\n\n/* Prettier 2.3 */\n-custom-url(/absolute/path)\n```\n\n#### Exclude `@keyframes` params from being parsed as a Less variable ([#10773](https://github.com/prettier/prettier/pull/10773) by [@tmazeika](https://github.com/tmazeika))\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n@keyframes :global(spin) {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Prettier 2.2 */\n@keyframes: global(spin){\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n};\n\n/* Prettier 2.3 */\n@keyframes :global(spin) {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n```\n\n### SCSS\n\n#### Fix broken comment inside parens ([#9710](https://github.com/prettier/prettier/pull/9710) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```scss\n// Input\n.simplification {\n  foo: (\n    calc() // not a comment anymore\n  );\n}\n\n// Prettier 2.2\n.simplification {\n  foo: (calc() // not a comment anymore);\n}\n\n// Prettier 2.3\n.simplification {\n  foo: (\n    calc() // not a comment anymore\n  );\n}\n```\n\n#### Fix maps with keys that are lists or maps ([#10005](https://github.com/prettier/prettier/pull/10005) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```scss\n// Input\n$map: (\n  ('my list'): 'hello world',\n);\n\n// Prettier 2.2\nTypeError: Cannot read property 'length' of undefined\n\n// Prettier 2.3\n$map: (\n  (\"my list\"): \"hello world\",\n);\n```\n\n### Ember / Handlebars\n\n#### Preserve tilde comments ([#9082](https://github.com/prettier/prettier/pull/9082) by [@kangax](https://github.com/kangax), [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n{{~! Comment }}\n{{! Comment ~}}\n{{~! Comment ~}}\n\n{{!-- Prettier 2.2 --}}\n{{! Comment }}\n{{! Comment }}\n{{! Comment }}\n\n{{!-- Prettier 2.3 --}}\n{{~! Comment }}\n{{! Comment ~}}\n{{~! Comment ~}}\n```\n\n#### Add a whitespace sensitive mode ([#9885](https://github.com/prettier/prettier/pull/9885) by [@dcyriller](https://github.com/dcyriller))\n\n```sh\n--html-whitespace-sensitivity strict\n```\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<span>123 {{mustache}}</span>\n<span>\n123 {{mustache}}</span>\n<span>123 {{mustache}}\n</span>\n<span>\n123 {{mustache}}\n</span>\n\n{{!-- Prettier 2.2 --}}\n<span>\n  123 {{mustache}}\n</span>\n<span>\n  123 {{mustache}}\n</span>\n<span>\n  123 {{mustache}}\n</span>\n<span>\n  123 {{mustache}}\n</span>\n\n{{!-- Prettier 2.3 --}}\n<span>123 {{mustache}}</span>\n<span>\n  123\n  {{mustache}}</span>\n<span>123\n  {{mustache}}\n</span>\n<span>\n  123\n  {{mustache}}\n</span>\n```\n\n#### Print final `blockParam` on its own line ([#9978](https://github.com/prettier/prettier/pull/9978) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<MyComponent @prop={{true}} @prop2={{true}} @prop3={{true}} @prop4={{true}} as |thing|></MyComponent>\n{{#block param hashKey=hashValue hashKey=hashValue hashKey=hashValue as |blockParam|}}\n  Hello\n{{/block}}\n\n{{!-- Prettier 2.2 --}}\n<MyComponent\n  @prop={{true}}\n  @prop2={{true}}\n  @prop3={{true}}\n  @prop4={{true}} as |thing|\n/>\n{{#block\n  param\n  hashKey=hashValue\n  hashKey=hashValue\n  hashKey=hashValue as |blockParam|\n}}\n  Hello\n{{/block}}\n\n{{!-- Prettier 2.3 --}}\n<MyComponent\n  @prop={{true}}\n  @prop2={{true}}\n  @prop3={{true}}\n  @prop4={{true}}\n  as |thing|\n/>\n{{#block\n  param\n  hashKey=hashValue\n  hashKey=hashValue\n  hashKey=hashValue\n  as |blockParam|\n}}\n  Hello\n{{/block}}\n```\n\n#### Fix formatting of attributes ([#10145](https://github.com/prettier/prettier/pull/10145) by [@thorn0](https://github.com/thorn0))\n\n- fix escaping of `{{` in attributes and text\n- fix the choice between `'` and `\"` for attributes with interpolations\n- fix the bug with `[object Object]` printed in the `class` attribute\n- implement simple formatting for the `class` attribute, like Prettier formatted it in HTML before v2.3.0\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<div class=\"\nfoo\"></div>\n<div bar='\"{{expr}}\"'></div>\n<div baz=\"\\{{ non-expression }}\"></div>\n\n{{!-- Prettier 2.2 --}}\n<div class=\"[object Object],foo\"></div>\n<div bar=\"\"{{expr}}\"\"></div>\n<div baz=\"{{ non-expression }}\"></div>\n\n{{!-- Prettier 2.3 --}}\n<div class=\"foo\"></div>\n<div bar='\"{{expr}}\"'></div>\n<div baz=\"\\{{ non-expression }}\"></div>\n```\n\n#### Split text content on multiple lines ([#10179](https://github.com/prettier/prettier/pull/10179) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```handlebars\n{{!-- Input --}}\n<div>\n  A long enough string to trigger a line break that would prevent wrapping more and more.\n</div>\n\n{{!-- Prettier 2.2 --}}\n<div>\n  A long enough string to trigger a line break that would prevent wrapping more and more.\n</div>\n\n{{!-- Prettier 2.3 --}}\n<div>\n  A long enough string to trigger a line break that would prevent wrapping more\n  and more.\n</div>\n```\n\n#### Preserve numeric character references ([#10550](https://github.com/prettier/prettier/pull/10550) by [@rwjblue](https://github.com/rwjblue) and [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```hbs\n{{! Input }}\n<span class=\"stampFont\" style=\"font-family: 'stampfont'\">&#xf000;</span>\n\n{{! Prettier 2.2 }}\n<span class=\"stampFont\" style=\"font-family: 'stampfont'\"></span>\n\n{{! Prettier 2.3 }}\n<span class=\"stampFont\" style=\"font-family: 'stampfont'\">&#xf000;</span>\n```\n\n#### Do not break opening mustache and path ([#10586](https://github.com/prettier/prettier/pull/10586) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```handlebars\n{{!-- Input --}}\n<GlimmerComponent\n  @errors={{or this.aVeryLongProperty (and this.aProperty (v-get bike \"number\" \"message\"))}}\n  data-test-beneficiary-account-number\n/>\n<GlimmerComponent\n  @progress={{aPropertyEngdingAfterEightiethColumnToHighlightAWeirdClosingParenIssue}}\n/>\n\n{{!-- Prettier 2.2 --}}\n<GlimmerComponent\n  @errors={{\n    or\n    this.aVeryLongProperty\n    (and this.aProperty (v-get bike \"number\" \"message\"))\n  }}\n  data-test-beneficiary-account-number\n/>\n<GlimmerComponent\n  @progress={{\n    aPropertyEngdingAfterEightiethColumnToHighlightAWeirdClosingParenIssue\n  }}\n/>\n\n{{!-- Prettier 2.3 --}}\n<GlimmerComponent\n  @errors={{or\n    this.aLongProperty\n    (and this.aProperty (v-get bike \"number\" \"message\"))\n  }}\n  data-test-beneficiary-account-number\n/>\n<GlimmerComponent\n  @progress={{aPropertyEngdingAfterEightiethColumnToHighlightAWeirdClosingParenIssue}}\n/>\n```\n\n### GraphQL\n\n#### Fix missing space after keyword in anonymous operations ([#10689](https://github.com/prettier/prettier/pull/10689) by [@patriscus](https://github.com/patriscus))\n\n<!-- prettier-ignore -->\n```graphql\n# Input\nquery ($unnamed: String) {\n  id\n}\n\n# Prettier 2.2\nquery($unnamed: String) {\n  id\n}\n\n# Prettier 2.3\nquery ($unnamed: String) {\n  id\n}\n```\n\n### Markdown\n\n#### Fix extra newline at the end of JavaScript fenced code block with string literal ([#9736](https://github.com/prettier/prettier/pull/9736) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n````markdown\n<!-- Input -->\nMarkdown\n\n```js\n\"· \"\n```\n\n<!-- Prettier 2.2 -->\nMarkdown\n\n```js\n\"· \";\n\n```\n\n<!-- Prettier 2.3 -->\nMarkdown\n\n```js\n\"· \";\n```\n````\n\n#### Fix empty front matter formatting ([#9791](https://github.com/prettier/prettier/pull/9791) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\n---\n---\n\n# Title\n\na|b|c|\n|:--|:-:|--:|\n|d|e|f|\n\n---\n\ntext\n\n<!-- Prettier 2.2 -->\n---\n---\n# Title\n\na|b|c|\n|:--|:-:|--:|\n|d|e|f|\n---\n\ntext\n\n<!-- Prettier 2.3 -->\n---\n---\n\n# Title\n\n| a   |  b  |   c |\n| :-- | :-: | --: |\n| d   |  e  |   f |\n\n---\n\ntext\n```\n\n#### Support YAML document end marker in front matter ([#9878](https://github.com/prettier/prettier/pull/9878) by [@michaelbeaumont](https://github.com/michaelbeaumont))\n\nAdd the ability to delimit the end of front matter with `...`.\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\n---\ntitle: Hello\nslug: home\n...\n\nMarkdown\n\n<!-- Prettier 2.2 -->\n---\n\ntitle: Hello\nslug: home\n...\n\nMarkdown\n\n<!-- Prettier 2.3 -->\n---\ntitle: Hello\nslug: home\n...\n\nMarkdown\n```\n\n### YAML\n\n#### Fix SyntaxError incorrectly thrown on anchors followed by empty lines ([#10516](https://github.com/prettier/prettier/pull/10516) by [@eemeli](https://github.com/eemeli) & [@thorn0](https://github.com/thorn0))\n\nPrettier couldn't parse this valid YAML. Thanks to Eemeli Aro for fixing this bug in the underlying parser.\n\n<!-- prettier-ignore -->\n```yaml\n# Input\nkey1: &default\n\n  subkey1: value1\n\nkey2:\n  <<: *default\n\n# Prettier 2.2\nSyntaxError: Nested mappings are not allowed in compact mappings (1:7)\n\n# Prettier 2.3\nkey1: &default\n  subkey1: value1\n\nkey2:\n  <<: *default\n```\n\n### API\n\n#### Treat `.prettierrc` as YAML when formatting it ([#8105](https://github.com/prettier/prettier/pull/8105) by [@fisker](https://github.com/fisker))\n\nThe `.prettierrc` file can be written in either JSON or YAML. Previously, when Prettier formatted it, the parser was inferred to be `json`, which lead to a `SyntaxError` thrown if the content was YAML. Now it’s treated as a YAML file. However, if it's JSON, it will be formatted as JSON (not as JSON-like YAML).\n\n#### Use arrays instead of `concat` ([#9733](https://github.com/prettier/prettier/pull/9733) by [@fisker](https://github.com/fisker), [@thorn0](https://github.com/thorn0))\n\nTo simplify the code of AST printers, the data structure for the concatenation command has been changed from `{ type: 'concat', parts: Doc[] }` to `Doc[]`. The old format is deprecated, but for compatibility, the doc printer still supports it, and `doc.builders.concat` (as well as some other builder functions) will keep using it until the next major version of Prettier.\n\nIf you're a plugin author, this change should only concern you if your plugin introspects or modifies composed docs. If it happens to be the case, please make your plugin compatible with future versions of Prettier by tweaking the introspecting code to support the new format. There also is an off-chance where this change can break things, namely if a plugin calls another plugin to [print an embedded language](https://prettier.io/docs/en/plugins.html#optional-embed) and then introspects the returned doc. There seems to be no reason for plugins to do that though.\n\nTo replace `concat(…)` calls in your plugins, you can try auto-fix by this ESLint rule [`prettier-doc/no-concat`](https://github.com/fisker/eslint-plugin-prettier-doc#no-concat).\n\n```jsx\n// Prettier 2.2\nmyDoc = group(concat([\"foo\", line, \"bar\"]));\n\n// Prettier 2.3\nmyDoc = group([\"foo\", line, \"bar\"]);\n```\n\n#### Fix `lineSuffixBoundary` IR command ([#10122](https://github.com/prettier/prettier/pull/10122) by [@thorn0](https://github.com/thorn0))\n\nThere was a bug in the implementation of the [`lineSuffixBoundary`][lsb] command that significantly limited its usefulness: the printer algorithm didn't correctly consider it a potential line break. Now that the bug has been fixed, we urge plugin authors to give this command another try and see if it can help them simplify printing of trailing comments.\n\n[lsb]: https://github.com/prettier/prettier/blob/main/commands.md#linesuffixboundary\n\n<!-- prettier-ignore -->\n```jsx\n// Input\ngroup([\n  \"let foo = [\",\n  indent([\n    softline,\n    [lineSuffixBoundary, \"item1,\"],\n    line,\n    [lineSuffixBoundary, \"item2,\", lineSuffix(\" // comment\")],\n    line,\n    [lineSuffixBoundary, \"item3\"],\n  ]),\n  softline,\n  \"];\",\n])\n\n// Prettier 2.2\nlet foo = [item1, item2,  // comment\n  item3];\n\n// Prettier 2.3\nlet foo = [\n  item1,\n  item2, // comment\n  item3\n];\n```\n\n#### Add `indentIfBreak` IR command ([#10221](https://github.com/prettier/prettier/pull/10221) by [@thorn](https://github.com/thorn))\n\n`indentIfBreak(doc, { groupId })` is an optimized version of `ifBreak(indent(doc), doc, { groupId })`.\n\n#### Simplified `print` callback ([#10557](https://github.com/prettier/prettier/pull/10557) by [@fisker](https://github.com/fisker))\n\nThe third argument of the `print` method of plugin printers (the `print` callback) has been updated. Its first argument can be a string or an array of strings now.\n\nTo print the current node, call `print` without arguments:\n\n```diff\n function print(path, options, print) {\n   const parts = [];\n   path.each((childPath) => {\n-    parts.push(print(childPath));\n+    parts.push(print());\n   }, \"children\");\n   return parts;\n }\n```\n\nTo print a property of the current node, use `\"property\"` or `[\"property\"]`:\n\n```diff\n function print(path, options, print) {\n-  return path.call(print, \"property\");\n+  return print(\"property\");\n }\n```\n\nTo print a sub-property of the current node, use `[\"property1\", \"property2\"]`:\n\n```diff\n function print(path, options, print) {\n   // print `node.child.child`\n-  return path.call(print, \"child\", \"child\");\n+  return print([\"child\", \"child\"]);\n }\n```\n\nSee also an example in the [docs](https://prettier.io/docs/en/plugins.html#print).\n\n### CLI\n\n#### Add CLI option to prevent errors on unmatched pattern ([#10058](https://github.com/prettier/prettier/pull/10058) by [@daronmcintosh](https://github.com/daronmcintosh))\n\nThe Prettier CLI will no longer display an error when no files match the glob pattern passed as input.\n\n```sh\n# Prettier 2.2\n$ npx prettier --check \"prettier/docs/*.yaml\"\nChecking formatting...\n[error] No files matching the pattern were found: \"prettier/docs/*.yaml\".\nAll matched files use Prettier code style!\n\n# Prettier 2.3\n$ npx prettier --check --no-error-on-unmatched-pattern \"prettier/docs/*.yaml\"\nChecking formatting...\nAll matched files use Prettier code style!\n```\n\n#### Add CLI flag for debugging comment attachment issues ([#10124](https://github.com/prettier/prettier/pull/10124) by [@thorn0](https://github.com/thorn0))\n\nA new `--debug-print-comments` CLI flag and corresponding functionality for the Playground.\n\n#### Round-trippable `--debug-print-doc` ([#10169](https://github.com/prettier/prettier/pull/10169), [#10177](https://github.com/prettier/prettier/pull/10177) by [@thorn0](https://github.com/thorn0))\n\nThe idea is to make the output of `--debug-print-doc` closer to actual code for generating docs (Prettier's intermediate representation). Ideally, it should be possible for it to work without modification after copy-pasting into a JS file. That ideal hasn't probably been reached by this PR, but it's pretty close. This is going to make `--debug-print-doc` and the corresponding part of the Playground a bit more useful.\n\n#### Print an error message when `--find-config-path` can't find config file ([#10208](https://github.com/prettier/prettier/pull/10208) by [@fisker](https://github.com/fisker))\n\n```console\n# Prettier 2.2\n$ prettier --find-config-path /prettier.js\n# Silently failed\n\n# Prettier 2.3\n$ prettier --find-config-path /prettier.js\n[error] Can not find configure file for \"/prettier.js\"\n```\n\n#### Clear printed long filenames of formatting file ([#10217](https://github.com/prettier/prettier/pull/10217) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```console\n# Prettier 2.2\n$ prettier tests/flow-repo/config_module_system_node_resolve_dirname --check\nChecking formatting...\ntests\\flow-repo\\config_module_system_node_resolve_dirname\\custom_resolve_dir\\tes\ntests\\flow-repo\\config_module_system_node_resolve_dirname\\custom_resolve_dir\\tes\ntests\\flow-repo\\config_module_system_node_resolve_dirname\\subdir\\custom_resolve_\nAll matched files use Prettier code style!\n\n# Prettier 2.3\n$ prettier tests/flow-repo/config_module_system_node_resolve_dirname --check\nChecking formatting...\nAll matched files use Prettier code style!\n```\n\n#### Don't skip file paths containing special words like `constructor` ([#10256](https://github.com/prettier/prettier/pull/10256) by [@ashlkv](https://github.com/ashlkv))\n\nDirectories whose names happened to coincide with the properties of `Object.prototype` were ignored by Prettier CLI because of a classic bug (introduced in Prettier 2.0.0) with object properties not being checked for being own.\n\n<!-- prettier-ignore -->\n```console\n# Prettier 2.2\n$ prettier \"js/constructor/*.js\" --write\n[error] No matching files. Patterns: js/constructor/*.js\n\n# Prettier 2.3\n$ prettier \"js/constructor/*.js\" --write\njs/constructor/test.js 42ms\n```"
    },
    {
      "id": "/2020/12/11/plugin-ruby-1.0",
      "metadata": {
        "permalink": "/blog/2020/12/11/plugin-ruby-1.0",
        "source": "@site/blog/2020-12-11-plugin-ruby-1.0.md",
        "title": "Prettier for Ruby goes v1.0 🎉",
        "description": "After 1500 commits and 50 releases since July 2018, we're happy to announce that we've just released v1.0 of Prettier for Ruby. In this blog post, we'd like to give a short overview of how the plugin works, its philosophy, and what to expect in the future.",
        "date": "2020-12-11T00:00:00.000Z",
        "formattedDate": "December 11, 2020",
        "tags": [],
        "readingTime": 2.985,
        "truncated": true,
        "authors": [
          {
            "name": "Kevin Newton (@kddnewton)",
            "url": "https://twitter.com/kddnewton"
          }
        ],
        "frontMatter": {
          "author": "Kevin Newton (@kddnewton)",
          "authorURL": "https://twitter.com/kddnewton",
          "title": "Prettier for Ruby goes v1.0 🎉"
        },
        "prevItem": {
          "title": "Prettier 2.3. In which assignments are consistent, short keys non-breaking, and Handlebars official",
          "permalink": "/blog/2021/05/09/2.3.0"
        },
        "nextItem": {
          "title": "Prettier 2.2: new JavaScript parsers, TS 4.1 and ESM standalone bundles",
          "permalink": "/blog/2020/11/20/2.2.0"
        }
      },
      "content": "After 1500 commits and 50 releases since July 2018, we're happy to announce that we've just released v1.0 of [Prettier for Ruby](https://github.com/prettier/plugin-ruby). In this blog post, we'd like to give a short overview of how the plugin works, its philosophy, and what to expect in the future.\n\n<!--truncate-->\n\n## How does it work?\n\nPrettier for Ruby works through Prettier's [plugin API](https://prettier.io/docs/en/plugins.html). Its `parse` function works by spawning a Ruby process and using Ruby's own parser (known as `Ripper`). After tracking all of the various node types, comments, location information, and other various metadata, it returns a built abstract syntax tree (AST) to the Prettier process. Finally it converts that AST into Prettier's intermediate representation (known as `Doc`) before allowing Prettier to handle printing it back out.\n\n## Philosophy\n\nThe Ruby plugin attempts to be satisfied with as many varieties of code as possible. For instance, if you decide to a call a method with or without parentheses, the plugin will allow this and honor your selection. For a couple of instances where the Ruby community has entrenched itself into some strong opinions, however, options are provided. These include:\n\n- `rubyArrayLiteral` - By default, the Ruby plugin will convert arrays of simple strings and symbols to their equivalent array literal syntax (`%w` and `%i`, respectively). If you disable this option, it will leave them alone.\n- `rubyHashLabel` - This option is for the fans of the hash rocket. By default, the Ruby plugin will print out your hash keys consistently, i.e., it will use labels if it can for every key, otherwise it will use hash rockets for every key. If you disable the default behavior, every key in hashes will always use hash rockets.\n- `rubyModifier` - For the users that really dislike the modifier form of `if`, `unless`, `while`, and `until`, this option is for you.\n- `rubySingleQuote` - The default behavior is to use single quotes where it makes sense, and otherwise to use double quotes. With this option you can reverse that behavior.\n- `rubyToProc` - This option allows Prettier to convert statements like `array.map { |elem| elem.to_s }` to `array.map(&:to_s)`. It is disabled by default because it technically changes the arity of block, which can break reflection code.\n\nThe plugin additionally supports various Prettier core options, including:\n\n- `printWidth` - This defaults to 80 characters, but you can make the line longer if you prefer.\n- `tabWidth` - This defaults to 2 characters.\n- `trailingComma` - This defaults to `\"none\"`, but you can choose `\"all\"` to introduce trailing commas into array literals, hash literals, and argument lists that span multiple lines.\n\nIn general the style of Prettier will match that of the [Ruby style guide](https://github.com/rubocop-hq/ruby-style-guide), i.e., the default Rubocop configuration. However, while you're using Prettier you might just find that you want to turn off the `Formatting/*` rules from Rubocop anyway as it will speed up your linter runs.\n\n## What's next\n\nGoing forward, we're going to be working on a couple of things:\n\n- Support for the new syntax coming out with Ruby 3, including rightward assignment and more pattern matching.\n- Better performance, as in [these](https://github.com/kddeisz/libdoc) [experiments](https://github.com/prettier/plugin-ruby/pull/512).\n- Support for the Ruby language in Prettier's [playground](https://prettier.io/playground/).\n- Support for HTML ERB templates as another plugin, as in this [experiment](https://github.com/prettier/plugin-ruby/compare/erb).\n\nToday, you can try the plugin from the command line by following the [instructions in the README](https://github.com/prettier/plugin-ruby#getting-started). Definitely [report any bugs](https://github.com/prettier/plugin-ruby/issues) that you find, we're working diligently to make sure they're squashed as soon as they come up. Also feel free to [get started contributing](https://github.com/prettier/plugin-ruby/blob/master/CONTRIBUTING.md) to the project itself if you're interested."
    },
    {
      "id": "/2020/11/20/2.2.0",
      "metadata": {
        "permalink": "/blog/2020/11/20/2.2.0",
        "source": "@site/blog/2020-11-20-2.2.0.md",
        "title": "Prettier 2.2: new JavaScript parsers, TS 4.1 and ESM standalone bundles",
        "description": "This release supports new JavaScript parsers espree and meriyah, supports TypeScript 4.1, ships ESM standalone bundles for modern browsers, and includes many bug fixes and improvements!",
        "date": "2020-11-20T00:00:00.000Z",
        "formattedDate": "November 20, 2020",
        "tags": [],
        "readingTime": 15.535,
        "truncated": true,
        "authors": [
          {
            "name": "Sosuke Suzuki (@sosukesuzuki)",
            "url": "https://github.com/sosukesuzuki"
          }
        ],
        "frontMatter": {
          "author": "Sosuke Suzuki (@sosukesuzuki)",
          "authorURL": "https://github.com/sosukesuzuki",
          "title": "Prettier 2.2: new JavaScript parsers, TS 4.1 and ESM standalone bundles"
        },
        "prevItem": {
          "title": "Prettier for Ruby goes v1.0 🎉",
          "permalink": "/blog/2020/12/11/plugin-ruby-1.0"
        },
        "nextItem": {
          "title": "Prettier 2.1: new --embedded-language-formatting option and new JavaScript/TypeScript features!",
          "permalink": "/blog/2020/08/24/2.1.0"
        }
      },
      "content": "This release supports new JavaScript parsers [espree](https://github.com/eslint/espree) and [meriyah](https://github.com/meriyah/meriyah), supports [TypeScript 4.1](https://devblogs.microsoft.com/typescript/announcing-typescript-4-1-rc/), ships ESM standalone bundles for modern browsers, and includes many bug fixes and improvements!\n\n<!--truncate-->\n\n## Highlights\n\n### JavaScript\n\n#### Add `espree` and `meriyah` parser ([#9000](https://github.com/prettier/prettier/pull/9000), [#9514](https://github.com/prettier/prettier/pull/9514) by [@fisker](https://github.com/fisker))\n\nTwo new values for the `parser` option has been added:\n\n- [`espree`](https://github.com/eslint/espree) - which is the default parser used by [`ESLint`](https://github.com/eslint/eslint).\n\n  Note that `espree` only works for [Finished ECMAScript Proposals](https://github.com/tc39/proposals/blob/master/finished-proposals.md), and is stricter than the `babel` parser.\n\n- [`meriyah`](https://github.com/meriyah/meriyah) - A [fast](https://meriyah.github.io/meriyah/performance/) JavaScript parser, successor of [cherow](https://github.com/cherow/cherow).\n\n### TypeScript\n\n#### Support [TypeScript 4.1](https://devblogs.microsoft.com/typescript/announcing-typescript-4-1/) ([#9473](https://github.com/prettier/prettier/pull/9473), [#9636](https://github.com/prettier/prettier/pull/9636) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n##### [Key Remapping In Mapped Types](https://devblogs.microsoft.com/typescript/announcing-typescript-4-1/#key-remapping-in-mapped-types)\n\n```ts\n// Input\ntype MappedTypeWithNewKeys<T> = {\n  [K in keyof T as NewKeyType]: T[K]\n};\n\n// Prettier 2.1\nSyntaxError: Unexpected token, expected \"]\" (2:17)\n  1 | type MappedTypeWithNewKeys<T> = {\n> 2 |   [K in keyof T as NewKeyType]: T[K]\n    |                 ^\n  3 | };\n\n// Prettier 2.2\ntype MappedTypeWithNewKeys<T> = {\n  [K in keyof T as NewKeyType]: T[K]\n};\n```\n\n##### [Template Literal Types](https://devblogs.microsoft.com/typescript/announcing-typescript-4-1/#template-literal-types)\n\n```ts\n// Input\ntype HelloWorld = `Hello, ${keyof World}`\n\n// Prettier 2.1\nSyntaxError: Unexpected token, expected \"}\" (1:35)\n> 1 | type HelloWorld = `Hello, ${keyof World}`\n    |                                   ^\n\n// Prettier 2.2\ntype HelloWorld = `Hello, ${keyof World}`;\n\n```\n\n### API\n\n#### ESM standalone bundles ([#8983](https://github.com/prettier/prettier/pull/8983) by [@Monchi](https://github.com/Monchi), [@fisker](https://github.com/fisker))\n\nPrettier now also comes as ES modules, which can be directly used in modern browsers:\n\n```js\nimport prettier from \"https://unpkg.com/prettier/esm/standalone.mjs\";\nimport parserGraphql from \"https://unpkg.com/prettier/esm/parser-graphql.mjs\";\n\nprettier.format(\"query {     }\", {\n  parser: \"graphql\",\n  plugins: [parserGraphql],\n});\n```\n\n## Other changes\n\n### JavaScript\n\n#### Respect spacing between template values in embedded CSS ([#9078](https://github.com/prettier/prettier/pull/9078) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst style = css`\n  width: ${size}${sizeUnit};\n`;\n\n// Prettier 2.1\nconst style = css`\n  width: ${size} ${sizeUnit};\n`;\n\n// Prettier 2.2\nconst style = css`\n  width: ${size}${sizeUnit};\n`;\n\n```\n\n#### Fix comments inside template literals with embedded syntax ([#9278](https://github.com/prettier/prettier/pull/9278) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\nhtml`${\n      foo\n  /* comment */\n}`;\nhtml`\n${\n      foo\n  /* comment */\n}\n`;\ngraphql`${\n      foo\n  /* comment */\n}`;\ncss`${\n      foo\n  /* comment */\n}`;\n\n// Prettier 2.1\nhtml`${foo}`;\n/* comment */\nhtml`\n  ${foo}\n  /* comment */\n`;\ngraphql`\n  ${foo}\n  /* comment */\n`;\ncss`\n  ${foo}\n  /* comment */\n`;\n\n\n// Prettier 2.2\nhtml`${\n  foo\n  /* comment */\n}`;\nhtml`\n${\n  foo\n  /* comment */\n}\n`;\ngraphql`${\n  foo\n  /* comment */\n}`;\ncss`${\n  foo\n  /* comment */\n}`;\n```\n\n#### Improve formatting for assignments of classes with long superclass names ([#9341](https://github.com/prettier/prettier/pull/9341) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nThis improves the formatting for [Google Closure Library namespaces](https://developers.google.com/closure/library/docs/introduction#names).\n\n<!-- prettier-ignore -->\n```js\n// Input\naaaaaaaa.bbbbbbbb.cccccccc.dddddddd.eeeeeeee.ffffffff.gggggggg2 = class extends (\n  aaaaaaaa.bbbbbbbb.cccccccc.dddddddd.eeeeeeee.ffffffff.gggggggg1\n) {\n  method () {\n    console.log(\"foo\");\n  }\n};\n\n// Prettier 2.1\naaaaaaaa.bbbbbbbb.cccccccc.dddddddd.eeeeeeee.ffffffff.gggggggg2 = class extends aaaaaaaa\n  .bbbbbbbb.cccccccc.dddddddd.eeeeeeee.ffffffff.gggggggg1 {\n  method() {\n    console.log(\"foo\");\n  }\n};\n\n// Prettier 2.2\naaaaaaaa.bbbbbbbb.cccccccc.dddddddd.eeeeeeee.ffffffff.gggggggg2 = class extends (\n  aaaaaaaa.bbbbbbbb.cccccccc.dddddddd.eeeeeeee.ffffffff.gggggggg1\n) {\n  method() {\n    console.log(\"foo\");\n  }\n};\n\n```\n\n#### Fix placement of leading comments for bodies of `while` statements ([#9345](https://github.com/prettier/prettier/pull/9345) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Input\nwhile(1) // Comment\n  foo();\n\n// Prettier 2.1\nwhile (\n  1 // Comment\n)\n  foo();\n\n// Prettier 2.2\nwhile (1)\n  // Comment\n  foo();\n\n```\n\n#### Update to `@babel/parser` 7.12 ([#9408](https://github.com/prettier/prettier/pull/9408), [#9476](https://github.com/prettier/prettier/pull/9476), [#9597](https://github.com/prettier/prettier/pull/9597) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nUpdated the JavaScript parser to [`@babel/parser` 7.12](https://babeljs.io/blog/2020/10/15/7.12.0). This fixes several bugs and supports some new syntax.\n\n##### Support Import Assertions\n\n[The \"module attributes\" proposal supported on 2.1](https://prettier.io/blog/2020/08/24/2.1.0.html#support-es-module-attributes-and-json-modules-8436httpsgithubcomprettierprettierpull8436-by-fiskerhttpsgithubcomfisker) has been significantly changed and also renamed to \"import assertions\".\n\n```js\nimport foo from \"./foo.json\" assert { type: \"json\" };\n```\n\n##### Support imports and exports with string names\n\n```js\nlet happy = \"happy\";\nexport { happy as \"😃\" };\n```\n\n##### Support class static blocks\n\n```js\nclass C {\n  static #x = 42;\n  static y;\n  static {\n    try {\n      this.y = doSomethingWith(this.#x);\n    } catch {\n      this.y = \"unknown\";\n    }\n  }\n}\n```\n\n#### Keep HTML and Markdown invalid template literals as is ([#9431](https://github.com/prettier/prettier/pull/9431) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\nfoo = html`<div>\\u{prettier}</div>`;\nfoo = html`\\u{prettier}${foo}pr\\u{0065}ttier`;\nfoo = markdown`# \\u{prettier}\\u{0065}`;\n\n// Prettier 2.1\nfoo = html``;\nfoo = html`null${foo}prettier`;\nfoo = markdown`\n# \\u{prettier}\\u{0065}\n`;\n\n// Prettier 2.2\nfoo = html`<div>\\u{prettier}</div>`;\nfoo = html`\\u{prettier}${foo}pr\\u{0065}ttier`;\nfoo = markdown`# \\u{prettier}\\u{0065}`;\n```\n\n#### Fix formatting for `import {a as a}` and `export {a as a}` ([#9435](https://github.com/prettier/prettier/pull/9435) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\nimport { a as a } from \"a\";\nexport { b as b } from \"b\";\n\n// Prettier 2.1\nimport { a } from \"a\";\nexport { b } from \"b\";\n\n// Prettier 2.2\nimport { a as a } from \"a\";\nexport { b as b } from \"b\";\n```\n\n#### Fix formatting of yielded JSX expressions ([#9650](https://github.com/prettier/prettier/pull/9650) by [@brainkim](https://github.com/brainkim))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfunction* f() {\n  yield <div>generator</div>\n}\n// Prettier 2.1\nfunction* f() {\n  yield (<div>generator</div>);\n}\n// Prettier 2.2\nfunction* f() {\n  yield <div>generator</div>;\n}\n```\n\n#### Flatten function expression parameters in hugged last argument ([#9662](https://github.com/prettier/prettier/pull/9662) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Prettier 2.1\nfunction* mySagas() {\n  yield effects.takeEvery(rexpress.actionTypes.REQUEST_START, function* ({\n    id\n  }) {\n    console.log(id);\n    yield rexpress.actions(store).writeHead(id, 400);\n    yield rexpress.actions(store).end(id, \"pong\");\n    console.log(\"pong\");\n  });\n}\n\n// Prettier 2.2\nfunction* mySagas() {\n  yield effects.takeEvery(\n    rexpress.actionTypes.REQUEST_START,\n    function* ({ id }) {\n      console.log(id);\n      yield rexpress.actions(store).writeHead(id, 400);\n      yield rexpress.actions(store).end(id, \"pong\");\n      console.log(\"pong\");\n    }\n  );\n}\n```\n\n#### Fix crash on `require(/* comment */)` ([#9670](https://github.com/prettier/prettier/pull/9670) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nrequire(/* comment */)\n\n// Prettier 2.1\nError: Comment \"comment\" was not printed. Please report this error!\n\n// Prettier 2.2\nrequire(/* comment */);\n```\n\n### TypeScript\n\n#### Preserve the last separator in ignored object types and interfaces ([#9318](https://github.com/prettier/prettier/pull/9318) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nlet x: {\n  // prettier-ignore\n  y: z;\n};\n\n// Prettier 2.1\nlet x: {\n  // prettier-ignore\n  y: z;;\n};\n\n// Prettier 2.2\nlet x: {\n  // prettier-ignore\n  y: z;\n};\n```\n\n#### Add parens around assignments in object literal properties ([#9484](https://github.com/prettier/prettier/pull/9484) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nfoo = { bar: (a = b) };\n\n// Prettier 2.1\nfoo = { bar: a = b };\n\n// Prettier 2.2\nfoo = { bar: (a = b) };\n```\n\n#### Fix inconsistencies in formatting of types between `typescript` and `flow` ([#9521](https://github.com/prettier/prettier/pull/9521) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst name: SomeGeneric<\n  Pick<Config, \"ONE_LONG_PROP\" | \"ANOTHER_LONG_PROP\">\n> = null;\n\n// Prettier 2.1 (--parser=typescript)\nconst name: SomeGeneric<Pick<\n  Config,\n  \"ONE_LONG_PROP\" | \"ANOTHER_LONG_PROP\"\n>> = null;\n\n// Prettier 2.1 (--parser=flow)\nconst name: SomeGeneric<\n  Pick<Config, \"ONE_LONG_PROP\" | \"ANOTHER_LONG_PROP\">\n> = null;\n\n// Prettier 2.2 (typescript and flow parser)\nconst name: SomeGeneric<\n  Pick<Config, \"ONE_LONG_PROP\" | \"ANOTHER_LONG_PROP\">\n> = null;\n```\n\n#### Fix `prettier-ignore`d mapped types ([#9551](https://github.com/prettier/prettier/pull/9551) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype a= {\n    // prettier-ignore\n    [A in B]: C  |  D\n  }\n\n// Prettier 2.1\ntype a = {\n  // prettier-ignore\n  A in B: C | D;\n};\n\n// Prettier 2.2\ntype a = {\n    // prettier-ignore\n    [A in B]: C  |  D\n  };\n```\n\n### Flow\n\n#### Switch the `babel` parser to `babel-flow` if the `@flow` pragma is found ([#9071](https://github.com/prettier/prettier/pull/9071) by [@fisker](https://github.com/fisker))\n\nIn practice, this means that as long as your Flow files have the pragma, it's safe to use the `.js` extension for them. Prettier will correctly parse and print them without any additional configuration. Previously, the pragma was recognized by the parser, but there existed minor correctness issues with the printer. E.g. it's not safe to unquote number keys in Flow.\n\n<!-- prettier-ignore -->\n```jsx\n// Input (with --parser babel)\n// @flow\nf<T>({ \"2\": 2 })\n\n// Prettier 2.1\n// @flow\nf<T>({ 2: 2 });\n\n// Prettier 2.2\n// @flow\nf<T>({ \"2\": 2 });\n```\n\n#### Enums with unknown members ([#9432](https://github.com/prettier/prettier/pull/9432) by [@gkz](https://github.com/gkz))\n\nPreviously, was not supported. Now, the following is formatted:\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nenum E {\n  A,\n  B,\n  ...\n}\n\n// Prettier 2.1: parse error\n\n// Prettier 2.2\nenum E {\n  A,\n  B,\n  ...\n}\n```\n\n#### `this` parameter annotations ([#9457](https://github.com/prettier/prettier/pull/9457) by [@dsainati1](https://github.com/dsainati1), [#9489](https://github.com/prettier/prettier/pull/9489) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfunction f(this: string, a: number) {\n}\n\ntype T = (this: boolean, a: number) => boolean;\n\n// Prettier 2.1\nfunction f(this: string, a: number) {}\n\ntype T = (a: number) => boolean;\n\n// Prettier 2.2\nfunction f(this: string, a: number) {\n}\n\ntype T = (this: boolean, a: number) => boolean;\n```\n\n#### Support `BigIntLiteralTypeAnnotation` and `BigIntTypeAnnotation` ([#9523](https://github.com/prettier/prettier/pull/9523) by [@fisker](https://github.com/fisker))\n\nAdd support for `BigIntLiteralTypeAnnotation` and `BigIntTypeAnnotation` in Flow.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst foo: bigint = 1n;\nconst bar: baz<1n> = 1n;\n\n// Prettier 2.1\nError: unknown type: \"BigIntTypeAnnotation\"\n    at ...\n\n// Prettier 2.2\nconst foo: bigint = 1n;\nconst bar: baz<1n> = 1n;\n```\n\n#### Treat more simple types as non-breaking in generic type annotations ([#9543](https://github.com/prettier/prettier/pull/9543) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst foo1: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<symbol> = a\nconst foo2: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<\"STRING\"> = a;\nconst foo3: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<0> = a;\n\n// Prettier 2.1\nconst foo1: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<\n  symbol\n> = a;\nconst foo2: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<\n  \"STRING\"\n> = a;\nconst foo3: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<\n  0\n> = a;\n\n// Prettier 2.2 (typescript and flow parser)\nconst foo1: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<symbol> = a\nconst foo2: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<\"STRING\"> = a;\nconst foo3: Fooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<0> = a;\n```\n\n#### Fix missing parentheses around `prettier-ignore`d type assertions ([#9553](https://github.com/prettier/prettier/pull/9553) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\ntransform(\n  // prettier-ignore\n  (pointTransformer: (Point => Point))\n);\n\n// Prettier 2.1\ntransform(\n  // prettier-ignore\n  pointTransformer: (Point => Point)\n);\n\n// Prettier 2.2\ntransform(\n  // prettier-ignore\n  (pointTransformer: (Point => Point))\n);\n```\n\n#### Improve comment types detection ([#9563](https://github.com/prettier/prettier/pull/9563) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfoo/*::<bar>*/(baz);\nclass Foo {\n  bar( data: Array<string>) {}\n}\n\n// Prettier 2.1\nfoo/*:: <bar> */(baz);\nclass Foo {\n  bar(data: Array/*:: <string> */) {}\n}\n\n// Prettier 2.2\nfoo/*:: <bar> */(baz);\nclass Foo {\n  bar(data: Array<string>) {}\n}\n```\n\n### Less\n\n#### Fix comments in value lists ([#9356](https://github.com/prettier/prettier/pull/9356) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```less\n// Input\n@test-space-separated: #aaaaaa // Start with A\n  #bbbbbb // then some B\n  #cccccc; // and round it out with C\n\n// Prettier 2.1\n@test-space-separated: #aaaaaa a // Start with\n  #bbbbbb b // then some\n  #cccccc; // and round it out with C\n\n// Prettier 2.2\n@test-space-separated: #aaaaaa // Start with A\n  #bbbbbb // then some B\n  #cccccc; // and round it out with C\n```\n\n### HTML\n\n#### Fix crash on reading `Node.sourceSpan` ([#9368](https://github.com/prettier/prettier/pull/9368) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<strong>a</strong>-<strong>b</strong>-\n\n<!-- Prettier 2.1 -->\nTypeError: Cannot read property 'line' of undefined\n    at forceNextEmptyLine ...\n\n<!-- Prettier 2.2 -->\n<strong>a</strong>-<strong>b</strong>-\n```\n\n### Vue\n\n#### Fix inconsistent formatting for `v-for` ([#9225](https://github.com/prettier/prettier/pull/9225) by [@zweimach](https://github.com/zweimach))\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input -->\n<template>\n  <div\n    v-for=\"({ longLongProp=42, anotherLongLongProp='Hello, World!' }, index) of longLongLongLongLongLongLongLongList\"\n  ></div>\n  <div\n    v-for=\"({firstValue, secondValue, thirdValue, fourthValue, fifthValue, sixthValue}, objectKey, index) in objectWithAVeryVeryVeryVeryLongName\"\n  ></div>\n</template>\n\n<!-- Prettier 2.1 -->\n<template>\n  <div\n    v-for=\"({ longLongProp = 42, anotherLongLongProp = 'Hello, World!' },\n    index) of longLongLongLongLongLongLongLongList\"\n  ></div>\n  <div\n    v-for=\"({\n      firstValue,\n      secondValue,\n      thirdValue,\n      fourthValue,\n      fifthValue,\n      sixthValue,\n    },\n    objectKey,\n    index) in objectWithAVeryVeryVeryVeryLongName\"\n  ></div>\n</template>\n\n<!-- Prettier 2.2 -->\n<template>\n  <div\n    v-for=\"(\n      { longLongProp = 42, anotherLongLongProp = 'Hello, World!' }, index\n    ) of longLongLongLongLongLongLongLongList\"\n  ></div>\n  <div\n    v-for=\"(\n      {\n        firstValue,\n        secondValue,\n        thirdValue,\n        fourthValue,\n        fifthValue,\n        sixthValue,\n      },\n      objectKey,\n      index\n    ) in objectWithAVeryVeryVeryVeryLongName\"\n  ></div>\n</template>\n```\n\n#### Fix inconsistent formatting for slots, support Vue 3 `script[setup]` and `style[vars]` ([#9609](https://github.com/prettier/prettier/pull/9609) by [@fisker](https://github.com/fisker))\n\n- [SFC Composition API Syntax Sugar (`<script setup>`)](https://github.com/vuejs/rfcs/blob/sfc-improvements/active-rfcs/0000-sfc-script-setup.md)\n- [SFC State-driven CSS Variables (`<style vars>`)](https://github.com/vuejs/rfcs/blob/sfc-improvements/active-rfcs/0000-sfc-style-variables.md)\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input -->\n<script setup=\"props, {emit }\"></script>\n<style vars=\"{color }\"></style>\n<template>\n  <div>\n<div v-slot=\"{destructuring:{   a:{b}}}\"/>\n<div v-slot:name=\"{destructuring:{   a:{b}}}\"/>\n<div #default=\"{destructuring:{   a:{b}}}\"/>\n<slot slot-scope=\"{destructuring:{   a:{b}}}\"/>\n</div>\n</template>\n\n<!-- Prettier 2.1 -->\n<script setup=\"props, {emit }\"></script>\n<style vars=\"{color }\"></style>\n<template>\n  <div>\n    <div v-slot=\"{ destructuring: { a: { b } } }\" />\n    <div v-slot:name=\"{ destructuring: { a: { b } } }\" />\n    <div #default=\"{ destructuring: { a: { b } } }\" />\n    <slot\n      slot-scope=\"{\n        destructuring: {\n          a: { b },\n        },\n      }\"\n    />\n  </div>\n</template>\n\n<!-- Prettier 2.2 -->\n<script setup=\"props, { emit }\"></script>\n<style vars=\"{ color }\"></style>\n<template>\n  <div>\n    <div\n      v-slot=\"{\n        destructuring: {\n          a: { b },\n        },\n      }\"\n    />\n    <div\n      v-slot:name=\"{\n        destructuring: {\n          a: { b },\n        },\n      }\"\n    />\n    <div\n      #default=\"{\n        destructuring: {\n          a: { b },\n        },\n      }\"\n    />\n    <slot\n      slot-scope=\"{\n        destructuring: {\n          a: { b },\n        },\n      }\"\n    />\n  </div>\n</template>\n```\n\n### Handlebars (alpha)\n\n#### Fix unstable newlines after `<Textarea />` ([#9403](https://github.com/prettier/prettier/pull/9403) by [@fisker](https://github.com/fisker), fixes in `simple-html-tokenizer` by [@rwjblue](https://github.com/rwjblue))\n\n<!-- prettier-ignore -->\n```handlebars\n// Input\n<Textarea />\n{{#if true}}\n  Test\n{{/if}}\n\n// Prettier 2.1\n<Textarea />\n\n{{#if true}}\n  Test\n{{/if}}\n\n// Prettier 2.1 (second format)\n<Textarea />\n{{#if true}}\n  Test\n{{/if}}\n\n// Prettier 2.2\n<Textarea />\n{{#if true}}\n  Test\n{{/if}}\n```\n\n### Markdown\n\n#### Update remark-math to 3.0.1; escape dollar signs only if originally escaped ([#7938](https://github.com/prettier/prettier/pull/7938) by [@fisker](https://github.com/fisker) and [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\nParagraph with $14 million.\n\nParagraph with $14 million.    But if more $dollars on the same line...\n\n<!-- Prettier 2.1 -->\nParagraph with \\$14 million.\n\nParagraph with $14 million.    But if more $dollars on the same line...\n\n<!-- Prettier 2.2 -->\nParagraph with $14 million.\n\nParagraph with $14 million. But if more $dollars on the same line...\n```\n\n#### Fix missing blank lines in fenced code blocks lacking the closing fence ([#8786](https://github.com/prettier/prettier/pull/8786) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```markdown\nrequire(\"prettier\").format(\"```a\\n\\n\\n\\n\", { parser: \"markdown\" });\n\n<!-- Prettier 2.1 -->\n'```a\\n\\n```\\n'\n\n<!-- Prettier 2.2 -->\n'```a\\n\\n\\n\\n```\\n'\n```\n\n#### Add support for `[[wiki-style]]` links ([#9275](https://github.com/prettier/prettier/pull/9275) by [@iamrecursion](https://github.com/iamrecursion))\n\n1.  Support for `[[wiki-style]]` links ensures that they do not get broken by\n    the prettier formatting by being wrapped over multiple lines.\n2.  The contents of the link (between the `[[]]` brackets) are treated as raw\n    text. This is because the various tools that rely on the `[[]]` syntax do not\n    agree on what is allowable between them.\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\nIf I have a prose that forces a wiki link to end up crossing the [[line width limit]] like this. It's wrapped into an invalid state.\n\n<!-- Prettier 2.1 -->\nIf I have a prose that forces a wiki link to end up crossing the [[line width\nlimit]] like this. It's wrapped into an invalid state.\n\n<!-- Prettier 2.2 -->\nIf I have a prose that forces a wiki link to end up crossing the\n[[line width limit]] like this. It's wrapped into an invalid state.\n```\n\n#### Align code block language detection with other popular tools ([#9365](https://github.com/prettier/prettier/pull/9365) by [@kachkaev](https://github.com/kachkaev))\n\nSince [Prettier 1.12](https://prettier.io/blog/2018/04/11/1.12.0.html#support-fenced-codeblock-lang-followed-by-attributes-4153httpsgithubcomprettierprettierpull4153-by-ikatyanghttpsgithubcomikatyang), code blocks starting like ` ```js {something=something} ` are detected as JavaScript ones and are therefore formatted.\nBack in the day, not many tools used to separate the language from the metadata, so [it was decided](https://github.com/prettier/prettier/pull/4783) to make whitespace optional and thus detect ` ```js{something=something} ` as JavaScript too.\n\nWith the release of [Remark](https://github.com/remarkjs/remark) v8 (which is used by Prettier), code block language detection and formatting became inconsistent in [several rare edge cases](https://github.com/prettier/prettier/issues/9155).\nBesides, [it was noticed](https://github.com/gicentre/litvis/issues/50) that Prettier‘s formatting behaviour mismatched syntax highlighting in VSCode.\nTo encourage consistency between different tools and to better align with the [Commonmark spec](https://spec.commonmark.org/0.29/#fenced-code-blocks), use of whitespace between the language name and the metadata was made compulsory.\n\n<!-- prettier-ignore -->\n````markdown\n<!-- Input -->\n```js {something=something}\nconsole.log    (    \"hello world\"    );\n```\n\n```js{something=something}\nconsole.log    (    \"hello world\"    );\n```\n\n<!-- Prettier 2.1 -->\n```js {something=something}\nconsole.log(\"hello world\");\n```\n\n```js{something=something}\nconsole.log(\"hello world\");\n```\n\n<!-- Prettier 2.2 -->\n```js {something=something}\nconsole.log(\"hello world\");\n```\n\n```js{something=something}\nconsole.log    (    \"hello world\"    );\n```\n````\n\n#### Fix extra empty line added after empty table ([#9654](https://github.com/prettier/prettier/pull/9654) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\nTest line 1\n\n| Specify the selected option : | Option 1 |\n| ----------------------------- | -------- |\n\nTest line 6\n\n<!-- Prettier 2.1 -->\nTest line 1\n\n| Specify the selected option : | Option 1 |\n| ----------------------------- | -------- |\n\n\nTest line 6\n\n<!-- Prettier 2.2 -->\nTest line 1\n\n| Specify the selected option : | Option 1 |\n| ----------------------------- | -------- |\n\nTest line 6\n```\n\n### MDX\n\n#### Fix extra empty lines in JSX ([#9267](https://github.com/prettier/prettier/pull/9267) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\n# title\n\n<Jsx>\n\ntext\n\n</Jsx>\n\n<!-- Prettier 2.1 -->\n# title\n\n<Jsx>\n\n\ntext\n\n</Jsx>\n\n\n(Extra empty lines added after `<Jsx>` and `</Jsx>`)\n\n<!-- Prettier 2.2 -->\n# title\n\n<Jsx>\n\ntext\n\n</Jsx>\n```\n\n### YAML\n\n#### Apply `trailingComma` option ([#9665](https://github.com/prettier/prettier/pull/9665) by [@fisker](https://github.com/fisker))\n\nWhen `--trailing-comma=none`, should not add trailing comma to flowMapping and flowSequence.\n\n<!-- prettier-ignore -->\n```yaml\n# Input\nflow-mapping:\n  {\n    \"object-does-not-fit-within-print-width\": \"------\",\n    \"TEST\": \"comma IS added here\"\n  }\nflow-sequence:\n  [\n    \"object-does-not-fit-within-print-width\", \"------\",\n    \"TEST\", \"comma IS added here\"\n  ]\n\n# Prettier 2.1\nmapping:\n  {\n    \"object-does-not-fit-within-print-width\": \"------\",\n    \"TEST\": \"comma IS added here\",\n  }\nflow-sequence:\n  [\n    \"object-does-not-fit-within-print-width\",\n    \"------\",\n    \"TEST\",\n    \"comma IS added here\",\n  ]\n\n# Prettier 2.2\nflow-mapping:\n  {\n    \"object-does-not-fit-within-print-width\": \"------\",\n    \"TEST\": \"comma IS added here\"\n  }\nflow-sequence:\n  [\n    \"object-does-not-fit-within-print-width\",\n    \"------\",\n    \"TEST\",\n    \"comma IS added here\"\n  ]\n```\n\n#### Fix comments inside `flowMapping` and `flowSequence` ([#9669](https://github.com/prettier/prettier/pull/9669) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```yaml\n# Input\na:\n  [\n    a, b,\n    # comment\n  ]\n\nb:\n  # prettier-ignore\n  {\n    a: 1, b: 2,\n    # comment\n  }\n\n# Prettier 2.1\na: [a, b]\n  # comment\n\nb:\n  # prettier-ignore\n  {\n    a: 1, b: 2,\n    # comment\n  }\n  # comment\n\n\n# Prettier 2.1 (second format)\na:\n  [a, b]\n  # comment\n\nb:\n  # prettier-ignore\n  {\n    a: 1, b: 2,\n    # comment\n  }\n  # comment\n  # comment\n\n\n# Prettier 2.2\na: [\n    a,\n    b,\n    # comment\n  ]\n\nb:\n  # prettier-ignore\n  {\n    a: 1, b: 2,\n    # comment\n  }\n```\n\n### API\n\n#### Stop inferring the parser to be `json` for `.jsonl` files ([#9371](https://github.com/prettier/prettier/pull/9371) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```console\n// Prettier 2.1\n$ prettier --check .\nChecking formatting...\n[error] bad.jsonl: SyntaxError: Unexpected token (2:1)\n[error]   1 | '{\"type\": \"t/f\", \"head\": \"England\", \"relation\": \"invaded\", \"tail\": \"United States\"}'\n[error] > 2 | '{\"type\": \"t/f\", \"head\": \"England\", \"relation\": \"attacked\", \"tail\": \"Baltimore\"}'\n[error]     | ^\n[error]   3 |\nAll matched files use Prettier code style!\n\n// Prettier 2.2\n$ prettier --check .\nChecking formatting...\nAll matched files use Prettier code style!\n```\n\n#### Flush line suffix contents at the end of document ([#9703](https://github.com/prettier/prettier/pull/9703) by [@dangmai](https://github.com/dangmai))\n\nPrettier did not flush [line-suffix](https://github.com/prettier/prettier/blob/main/commands.md#linesuffix) contents at the end of the document if there was no trailing newline. This fix forces all of those contents to be flushed even without trailing newlines.\n\n### CLI\n\n#### Move [pre-commit](https://github.com/pre-commit/pre-commit) support to github.com/pre-commit/mirrors-prettier ([#8937](https://github.com/prettier/prettier/pull/8937) by [@FloChehab](https://github.com/FloChehab))\n\n`pre-commit` support has moved to https://github.com/pre-commit/mirrors-prettier, please update your `.pre-commit-config.yaml` file .\n\n```diff\n- - repo: https://github.com/prettier/prettier\n+ - repo: https://github.com/pre-commit/mirrors-prettier\n-   rev: \"2.2.0\"\n+   rev: \"v2.2.0\"\n    hooks:\n     - id: prettier\n```\n\n#### Fix: error on directories and files with numeric names ([#9298](https://github.com/prettier/prettier/pull/9298) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```console\n$ cat 1/index.js\nhello('world')\n\n// Prettier 2.1\n$ prettier 1\n[error] The \"path\" argument must be of type string. Received type number (1)\n\n// Prettier 2.2\n$ prettier 1\nhello(\"world\");\n```"
    },
    {
      "id": "/2020/08/24/2.1.0",
      "metadata": {
        "permalink": "/blog/2020/08/24/2.1.0",
        "source": "@site/blog/2020-08-24-2.1.0.md",
        "title": "Prettier 2.1: new --embedded-language-formatting option and new JavaScript/TypeScript features!",
        "description": "This release adds a new --embedded-language-formatting option, supports new JavaScript/TypeScript features, and includes many bug fixes and improvements!",
        "date": "2020-08-24T00:00:00.000Z",
        "formattedDate": "August 24, 2020",
        "tags": [],
        "readingTime": 32.105,
        "truncated": true,
        "authors": [
          {
            "name": "Sosuke Suzuki (@sosukesuzuki)",
            "url": "https://github.com/sosukesuzuki"
          }
        ],
        "frontMatter": {
          "author": "Sosuke Suzuki (@sosukesuzuki)",
          "authorURL": "https://github.com/sosukesuzuki",
          "title": "Prettier 2.1: new --embedded-language-formatting option and new JavaScript/TypeScript features!"
        },
        "prevItem": {
          "title": "Prettier 2.2: new JavaScript parsers, TS 4.1 and ESM standalone bundles",
          "permalink": "/blog/2020/11/20/2.2.0"
        },
        "nextItem": {
          "title": "Prettier 2.0 “2020”",
          "permalink": "/blog/2020/03/21/2.0.0"
        }
      },
      "content": "This release adds a new `--embedded-language-formatting` option, supports new JavaScript/TypeScript features, and includes many bug fixes and improvements!\n\n<!--truncate-->\n\n## Highlights\n\n### API\n\n#### Add --embedded-language-formatting={auto,off} option ([#7875](https://github.com/prettier/prettier/pull/7875) by [@bakkot](https://github.com/bakkot), [#8825](https://github.com/prettier/prettier/pull/8825) by [@fisker](https://github.com/fisker))\n\nWhen Prettier identifies cases where it looks like you've placed some code it knows how to format within a string in another file, like in a tagged template in JavaScript with a tag named `html` or in code blocks in Markdown, it will try to format that code by default.\n\nSometimes this behavior is undesirable, since it can change the behavior of your code. This option allows you to switch between the default behavior (`auto`) and disabling this feature entirely (`off`). It applies to all languages where Prettier recognizes embedded code, not just JavaScript.\n\n<!-- prettier-ignore -->\n```js\n// Input\nhtml`\n<p>\nI am expecting this to come out exactly like it went in.\n`;\n\n// using --embedded-language-formatting=auto (or omitting this option)\nhtml`\n  <p>\n    I am expecting this to come out exactly like it went in.\n  </p>\n`;\n\n// using --embedded-language-formatting=off\nhtml`\n<p>\nI am expecting this to come out exactly like it went in.\n`;\n```\n\n### TypeScript\n\n#### Support for TypeScript 4.0\n\n- [Labeled Tuple Elements](https://devblogs.microsoft.com/typescript/announcing-typescript-4-0/#labeled-tuple-elements)\n- [Short-Circuiting Assignment Operators](https://devblogs.microsoft.com/typescript/announcing-typescript-4-0/#short-circuiting-assignment-operators)\n- [Type annotations on catch clauses](https://devblogs.microsoft.com/typescript/announcing-typescript-4-0/#unknown-on-catch)\n\n##### Labeled Tuple Elements ([#8885](https://github.com/prettier/prettier/pull/8885) by [@fisker](https://github.com/fisker), [#8982](https://github.com/prettier/prettier/pull/8982) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype Range = [start: number, end: number];\n\n// Prettier 2.0\nSyntaxError: Unexpected token, expected \",\" (1:20)\n> 1 | type Range = [start: number, end: number];\n\n// Prettier 2.1\ntype Range = [start: number, end: number];\n```\n\n##### Short-Circuiting Assignment Operators ([#8982](https://github.com/prettier/prettier/pull/8982) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\na ||= b;\n\n// Prettier 2.0\nSyntaxError: Expression expected. (1:5)\n> 1 | a ||= b;\n\n// Prettier 2.1\na ||= b;\n```\n\n##### Type annotations on catch clauses ([#8805](https://github.com/prettier/prettier/pull/8805) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntry {} catch (e: any) {}\n\n// Prettier 2.0\ntry {\n} catch (e) {}\n\n// Prettier 2.1\ntry {\n} catch (e: any) {}\n```\n\n## Other changes\n\n### JavaScript\n\n#### Support the F# and Smart pipeline operator proposals ([#6319](https://github.com/prettier/prettier/pull/6319) by [@sosukesuzuki](https://github.com/sosukesuzuki), [@thorn0](https://github.com/thorn0), [#7979](https://github.com/prettier/prettier/pull/7979) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n- [F# Pipeline Operator proposal](https://github.com/valtech-nyc/proposal-fsharp-pipelines)\n- [Smart Pipelines proposal](https://github.com/js-choi/proposal-smart-pipelines)\n- [Babel Blog: What's Happening With the Pipeline (`|>`) Proposal?](https://babeljs.io/blog/2018/07/19/whats-happening-with-the-pipeline-proposal)\n\n**F#-style Pipeline:**\n\n<!-- prettier-ignore -->\n```js\n// Input\npromises |> await;\n\n// Output (Prettier 2.0)\nSyntaxError: Unexpected token (1:18)\n> 1 | promises |> await;\n    |                  ^\n\n// Output (Prettier 2.1)\npromises |> await;\n```\n\n**Smart Pipeline:**\n\n<!-- prettier-ignore -->\n```js\n// Input\n5 |> # * 2\n\n// Output (Prettier 2.0)\nSyntaxError: Unexpected character '#' (1:6)\n> 1 | 5 |> # * 2\n    |      ^\n\n// Output (Prettier 2.1)\n5 |> # * 2\n```\n\n#### Fix end-of-line comments if followed by trailing whitespace ([#8069](https://github.com/prettier/prettier/pull/8069) by [@shisama](https://github.com/shisama))\n\nIf a comments line had trailing whitespaces, comments were not detected as end-of-line.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nvar a = { /* extra whitespace --> */  \n    b };\n\nvar a = { /* no whitespace --> */\n    b };\n\n// Prettier 2.0\nvar a = {\n  /* extra whitespace --> */\n\n  b,\n};\n\nvar a = {\n  /* no whitespace --> */ b,\n};\n\n// Prettier 2.1\nvar a = {\n  /* extra whitespace --> */ b,\n};\n\nvar a = {\n  /* no whitespace --> */ b,\n};\n```\n\n#### Fix inconsistent parsing of injected expressions in styled-components template literals ([#8097](https://github.com/prettier/prettier/pull/8097) by [@thecodrr](https://github.com/thecodrr))\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst SingleConcat = styled.div`\n  ${something()}\n  & > ${Child}:not(:first-child) {\nmargin-left:5px;\n}\n`\n\nconst MultiConcats = styled.div`\n  ${something()}\n  & > ${Child}${Child2}:not(:first-child) {\nmargin-left:5px;\n}\n`\n\nconst SeparatedConcats = styled.div`\nfont-family: \"${a}\", \"${b}\";\n`\n\n// Prettier 2.0 -- same as input\n\n// Prettier 2.1\nconst SingleConcat = styled.div`\n  ${something()}\n  & > ${Child}:not(:first-child) {\n    margin-left: 5px;\n  }\n`;\n\nconst MultiConcats = styled.div`\n  ${something()}\n  & > ${Child}${Child2}:not(:first-child) {\n    margin-left: 5px;\n  }\n`;\n\nconst SeparatedConcats = styled.div`\n  font-family: \"${a}\", \"${b}\";\n`;\n```\n\n#### Fix object trailing commas that last property is ignored ([#8111](https://github.com/prettier/prettier/pull/8111) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst foo = {\n  // prettier-ignore\n  bar: \"baz\"\n}\n\n// Prettier 2.0\nconst foo = {\n  // prettier-ignore\n  bar: \"baz\"\n};\n\n// Prettier 2.1\nconst foo = {\n  // prettier-ignore\n  bar: \"baz\",\n};\n```\n\n#### Keep object key with escape sequence as it is ([#8160](https://github.com/prettier/prettier/pull/8160) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst a = {\n  \"\\u2139\": 'why \"\\\\u2139\" converted to \"i\"?',\n};\n\n// Prettier 2.0\nconst a = {\n  ℹ: 'why \"\\\\u2139\" converted to \"i\"?',\n};\n\n\n// Prettier 2.1\nconst a = {\n  \"\\u2139\": 'why \"\\\\u2139\" is converted to \"i\"?',\n};\n```\n\n#### Fix extra space after minus in CSS-in-JS ([#8255](https://github.com/prettier/prettier/pull/8255) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```js\n// Input\ncss`\ncolor: var(--global--color--${props.color});\n`\n\n// Prettier 2.0\ncss`\n  color: var(--global--color-- ${props.color});\n`;\n\n// Prettier 2.1\ncss`\n  color: var(--global--color--${props.color});\n`;\n```\n\n#### Fix comments in the `extends` part of class declarations/expressions ([#8312](https://github.com/prettier/prettier/pull/8312) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nclass a extends a // comment\n{\n  constructor() {}\n}\n\n// Prettier 2.0\nclass a extends a // comment {\n  constructor() {}\n}\n\n// Prettier 2.1\nclass a extends a { // comment\n  constructor() {}\n}\n```\n\n#### Don't wrap arrays in Jest `test.each` template strings ([#8354](https://github.com/prettier/prettier/pull/8354) by [@yogmel](https://github.com/yogmel))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\ntest.each`\na | b | c\n${1} | ${[{ start: 1, end: 3 },{ start: 15, end: 20 },]} | ${[]}\n`(\"example test\", ({a, b, c}) => {})\n\n// Prettier 2.0\ntest.each`\n  a | b | c\n  ${1} | ${[\n  { start: 1, end: 3 },\n  { start: 15, end: 20 }\n]} | ${[]}\n`(\"example test\", ({ a, b, c }) => {});\n\n// Prettier 2.1\ntest.each`\n  a    | b                                                 | c\n  ${1} | ${[{ start: 1, end: 3 }, { start: 15, end: 20 }]} | ${[]}\n`(\"example test\", ({ a, b, c }) => {});\n```\n\n#### Support `insertPragma` and `requirePragma` in files with shebang ([#8376](https://github.com/prettier/prettier/pull/8376) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// `--insert-pragma`\n// Input\n#!/usr/bin/env node\nhello\n  .world();\n\n// Prettier 2.0\nSyntaxError: Unexpected token (3:1)\n  1 | /** @format */\n  2 |\n> 3 | #!/usr/bin/env node\n    | ^\n  4 | hello\n  5 |   .world();\n\n// Prettier 2.1\n#!/usr/bin/env node\n/** @format */\n\nhello.world();\n\n// `--require-pragma`\n// Input\n#!/usr/bin/env node\n/**\n * @format\n */\nhello\n  .world();\n\n// Prettier 2.0\n#!/usr/bin/env node\n/**\n * @format\n */\nhello\n  .world();\n\n// Prettier 2.1\n#!/usr/bin/env node\n/**\n * @format\n */\nhello.world();\n```\n\n#### Fix range formatting indentation ([#8410](https://github.com/prettier/prettier/pull/8410) by [@thorn0](https://github.com/thorn0))\n\n```console\n> echo -e \"export default class Foo{\\n/**/\\n}\" | prettier --range-start 16 --range-end 31 --parser babel\n```\n\n<!-- prettier-ignore -->\n```js\n// Prettier 2.0\nexport default class Foo {\n                 /**/\n               }\n\n// Prettier 2.1\nexport default class Foo {\n  /**/\n}\n```\n\n#### Improve detection of source elements for range formatting ([#8419](https://github.com/prettier/prettier/pull/8419) by [@thorn0](https://github.com/thorn0))\n\nNot all statement types were detected (read [here](https://prettier.io/docs/en/options.html#range) how range formatting works in Prettier).\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfor   (const  element of list) { /* ... */ }\n//     ^^^^^^^^^^^^^^^^^^^^^^ ← range\n\n// Prettier 2.0\nfor   (const  element of list) { /* ... */ }\n\n// Prettier 2.1\nfor (const element of list) {\n  /* ... */\n}\n```\n\n#### Support Private Fields in `in` ([#8431](https://github.com/prettier/prettier/pull/8431) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nSupport Stage-2 proposal [Private Fields in `in`](https://github.com/tc39/proposal-private-fields-in-in).\n\n<!-- prettier-ignore -->\n```js\n// Input\n#prop in obj;\n\n// Prettier 2.0\nSyntaxError: Unexpected token (1:1)\n> 1 | #prop in obj;\n    | ^\n  2 | \n\n// Prettier 2.1\n#prop in obj;\n```\n\n#### Support ES Module Attributes and JSON modules ([#8436](https://github.com/prettier/prettier/pull/8436) by [@fisker](https://github.com/fisker))\n\nSupport Stage-2 proposal [ES Module Attributes and JSON modules](https://github.com/tc39/proposal-import-assertions).\n\n<!-- prettier-ignore -->\n```js\n// Input\nimport foo from \"foo.json\" with type: \"json\";\n\n// Prettier 2.0\nSyntaxError: Unexpected token, expected \";\" (1:28)\n> 1 | import foo from \"foo.json\" with type: \"json\";\n    |                            ^\n\n// Prettier 2.1\nimport foo from \"foo.json\" with type: \"json\";\n```\n\n#### Support record and tuple syntax ([#8453](https://github.com/prettier/prettier/pull/8453) by [@fisker](https://github.com/fisker))\n\nSupport Stage-2 proposal [JavaScript Records & Tuples Proposal](https://github.com/tc39/proposal-record-tuple).\n\n_Only support `#[]`/`#{}` syntax, not `{| |}` / `[| |]`._\n\n**Tuples**\n\n<!-- prettier-ignore -->\n```js\n// Input\n#[1, 2, 3]\n\n// Prettier 2.0\nSyntaxError: Unexpected token (1:1)\n> 1 | #[1, 2, 3]\n    | ^\n\n\n// Prettier 2.1\n#[1, 2, 3];\n```\n\n**Records**\n\n<!-- prettier-ignore -->\n```js\n// Input\n#{\n  a: 1,\n  b: 2,\n  c: 3,\n}\n\n// Prettier 2.0\nSyntaxError: Unexpected token (1:1)\n> 1 | #{\n    | ^\n  2 |   a: 1,\n  3 |   b: 2,\n  4 |   c: 3,\n\n\n// Prettier 2.1\n#{\n  a: 1,\n  b: 2,\n  c: 3,\n};\n```\n\n#### Wrap jsx element on the left of \"<\" with parentheses ([#8461](https://github.com/prettier/prettier/pull/8461) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n(<div/>) < 5;\n\n// Prettier 2.0\n<div/> < 5;\n\n// Prettier 2.0 second outout\nSyntaxError: Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>? (1:9)\n> 1 | <div /> < 5;\n    |         ^\n  2 | \n\n// Prettier 2.1\n(<div />) < 5;\n```\n\n#### Fix indentation for binary expressions with trailing comments ([#8476](https://github.com/prettier/prettier/pull/8476) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Input\na +\n  a + // comment\n  a;\n\n// Prettier 2.0\na +\na + // comment\n  a;\n\n// Prettier 2.1\na +\n  a + // comment\n  a;\n\n```\n\n#### Fix unstable comments in binary expressions ([#8491](https://github.com/prettier/prettier/pull/8491) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nMath.min(\n  (\n    /* foo */\n    document.body.scrollHeight -\n    (window.scrollY + window.innerHeight)\n  ) - devsite_footer_height,\n  0,\n)\n\n// Prettier 2.0 (first output)\nMath.min(\n  /* foo */\n  document.body.scrollHeight -\n  (window.scrollY + window.innerHeight) -\n    devsite_footer_height,\n  0\n);\n\n// Prettier 2.0 (second output)\nMath.min(\n  /* foo */\n  document.body.scrollHeight -\n    (window.scrollY + window.innerHeight) -\n    devsite_footer_height,\n  0\n);\n\n// Prettier 2.1 (first and second outputs)\nMath.min(\n  /* foo */\n  document.body.scrollHeight -\n    (window.scrollY + window.innerHeight) -\n    devsite_footer_height,\n  0\n);\n```\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst topOfDescriptionBox =\n      Layout.window.width +          // Images are 1:1 aspect ratio, full screen width\n      Layout.headerHeight;\n\n// Prettier 2.0 (first output)\nconst topOfDescriptionBox =\n  Layout.window.width + Layout.headerHeight; // Images are 1:1 aspect ratio, full screen width\n\n// Prettier 2.0 (second output)\nconst topOfDescriptionBox = Layout.window.width + Layout.headerHeight; // Images are 1:1 aspect ratio, full screen width\n\n// Prettier 2.1 (first and second outputs)\nconst topOfDescriptionBox =\n  Layout.window.width + // Images are 1:1 aspect ratio, full screen width\n  Layout.headerHeight;\n```\n\n#### Quote and unquote number keys ([#8508](https://github.com/prettier/prettier/pull/8508) by [@lydell](https://github.com/lydell))\n\nPrettier removes quotes from object keys if they are identifiers. Now, Prettier also removes quotes from object keys that are numbers.\n\nIf you use `quoteProps: \"consistent\"`, Prettier can also _add_ quotes to number keys so that _all_ properties end up with quotes.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nx = {\n  \"a\": null,\n  \"1\": null,\n};\n\n// Prettier 2.0\nx = {\n  a: null,\n  \"1\": null,\n};\n\n// Prettier 2.1\nx = {\n  a: null,\n  1: null,\n};\n```\n\nPrettier only touches “simple” numbers such as `1` and `123.5`. It _won’t_ make the following transformations, as they feel unexpected:\n\n```\n1e2 -> \"100\"\n0b10 -> \"10\"\n1_000 -> \"1000\"\n1.0 -> \"1\"\n0.99999999999999999 -> \"1\"\n999999999999999999999 -> \"1e+21\"\n2n -> \"2\"\n\n\"1e+100\" -> 1e100\n```\n\n(Please don’t use confusing numbers as object keys!)\n\nNote that Prettier only unquotes numbers using the `\"babel\"` parser. It’s not completely safe to do so in TypeScript.\n\n#### Prefer leading comment when there is a comment on after \"?\" in conditional types ([#8557](https://github.com/prettier/prettier/pull/8557) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype A = B extends T\n  ? // comment\n    foo\n  : bar;\n\n// Prettier 2.0\ntype A = B extends T // comment\n  ? foo\n  : bar;\n\n// Prettier 2.1\ntype A = B extends T\n  ? // comment\n    foo\n  : bar;\n\n```\n\n#### Break ternary expressions that include a multiline block comment ([#8592](https://github.com/prettier/prettier/pull/8592) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Input\ntest\n  ? /* comment\n       comment\n    */\n    foo\n  : bar;\n\n// Prettier 2.0\ntest ? /* comment\n       comment\n    */ foo : bar;\n\n// Prettier 2.1\ntest\n  ? /* comment\n       comment\n    */\n    foo\n  : bar;\n\n```\n\n#### Fix unstable pair of comments between class methods ([#8731](https://github.com/prettier/prettier/pull/8731) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\nclass C {\n    ma() {} /* D */ /* E */\n    mb() {}\n}\n\n// Prettier 2.0\nclass C {\n  ma() {} /* E */ /* D */\n  mb() {}\n}\n\n// Prettier 2.0 (Second format)\nclass C {\n  ma() {} /* D */ /* E */\n  mb() {}\n}\n\n// Prettier 2.1\nclass C {\n  ma() {} /* D */ /* E */\n  mb() {}\n}\n```\n\n#### Fix duplicated `prettier-ignore` comments ([#8742](https://github.com/prettier/prettier/pull/8742) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\na = <div {.../* prettier-ignore */{}}/>\na = <div {...{}/* prettier-ignore */}/>\n\n// Prettier 2.0\na = <div {/* prettier-ignore */ .../* prettier-ignore */ {}} />;\na = <div {...{} /* prettier-ignore */ /* prettier-ignore */} />;\n\n// Prettier 2.1\na = <div {.../* prettier-ignore */ {}} />;\na = <div {...{} /* prettier-ignore */} />;\n```\n\n#### Support Decimal Proposal ([#8901](https://github.com/prettier/prettier/pull/8901) by [@fisker](https://github.com/fisker))\n\nSupport Stage-1 proposal [Decimal Proposal](https://github.com/tc39/proposal-decimal).\n\n<!-- prettier-ignore -->\n```js\n// Input\n0.3m;\n\n// Prettier 2.0\nSyntaxError: Identifier directly after number (1:4)\n> 1 | 0.3m;\n\n// Prettier 2.1\n0.3m;\n```\n\n#### Add parens when yielding jsx ([#9011](https://github.com/prettier/prettier/pull/9011) by [@fisker](https://github.com/fisker))\n\nIn `v2.0.0` we [removed the parens when yielding jsx](https://prettier.io/blog/2020/03/21/2.0.0.html#remove-unnecessary-parens-when-yielding-jsx-7367httpsgithubcomprettierprettierpull7367-by-cola119httpsgithubcomcola119), this works for most parsers, but ESLint throws when parsing it, [related issue](https://github.com/acornjs/acorn-jsx/issues/82).\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction* f() {\n  yield <div>generator</div>\n}\n\n// Prettier 2.0\nfunction* f() {\n  yield <div>generator</div>\n}\n\n// Prettier 2.1\nfunction* f() {\n  yield (<div>generator</div>);\n}\n```\n\n### TypeScript\n\n#### Fix the `babel-ts` parser so that it emits a proper syntax error for `(a:b)` ([#8046](https://github.com/prettier/prettier/pull/8046) by [@thorn0](https://github.com/thorn0))\n\nPreviously, such code was parsed without errors, but an error was thrown in the printer, and this error was printed in an unfriendly way, with a stack trace. Now a proper syntax error is thrown by the parser.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n(a:b)\n\n// Prettier 2.0\n[error] test.ts: Error: unknown type: \"TSTypeCastExpression\"\n[error] ... [a long stack trace here] ...\n\n// Prettier 2.1\n[error] test.ts: SyntaxError: Did not expect a type annotation here. (1:2)\n[error] > 1 | (a:b)\n[error]     |  ^\n[error]   2 |\n```\n\n#### Parenthesize string literals to avoid interpreting as directives ([#8422](https://github.com/prettier/prettier/pull/8422) by [@thorn0](https://github.com/thorn0))\n\nPrettier wraps any string literal which is in statement position in parentheses because otherwise such strings would get interpreted as directives if they occurred at the top of a function or program, which can change the behavior of the program. It is not technically necessary to do this for strings which are not on the first line of a function or program. But doing so anyway is more consistent and can highlight bugs. See for example [this thread on twitter](https://twitter.com/dan_abramov/status/874601179334017024).\n\nPreviously this didn't consistently work for the `typescript` parser. Only strings already wrapped in parentheses retained them.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nf();\n'use foo';\n('use bar');\n\n// Prettier 2.0\nf();\n\"use foo\";\n(\"use bar\");\n\n// Prettier 2.1\nf();\n(\"use foo\");\n(\"use bar\");\n```\n\n#### Support TypeScript 3.9 breaking change for Optional Chaining and Non-Null Assertions ([#8450](https://github.com/prettier/prettier/pull/8450) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nSee https://devblogs.microsoft.com/typescript/announcing-typescript-3-9/#breaking-changes\n\n<!-- prettier-ignore -->\n```ts\n// Input\n(a?.b)!.c;\n\n// Prettier 2.0\na?.b!.c;\n\n// Prettier 2.1\n(a?.b)!.c;\n\n```\n\n### Flow\n\n#### Fix function type param contains nullable param ([#8365](https://github.com/prettier/prettier/pull/8365) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```flow\n// Input\nlet f: <A>(\n  ((?A) => B),\n) => B;\n\n// Prettier 2.0\nlet f: <A>((?A) => B) => B;\n\n// Prettier 2.0 (Second format)\nSyntaxError: Unexpected token (1:12)\n> 1 | let f: <A>((?A) => B) => B;\n\n// Prettier 2.1\nlet f: <A>(((?A) => B)) => B;\n```\n\n#### Fix export default of Flow Enum ([#8768](https://github.com/prettier/prettier/pull/8768) by [@gkz](https://github.com/gkz))\n\nDo not add a trailing semicolon if default exporting a Flow Enum.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nexport default enum B {}\n\n// Prettier 2.0\nexport default enum B {};\n\n// Prettier 2.1\nexport default enum B {}\n```\n\n### CSS\n\n#### Do not break code with a comment at the end of an at-rule ([#7009](https://github.com/prettier/prettier/pull/7009) by [@evilebottnawi](https://github.com/evilebottnawi))\n\n<!-- prettier-ignore -->\n```scss\n/* Input */\n@at-root .foo\n// .bar\n{\n\n}\n\n/* Prettier 2.0 */\n@at-root .foo\n// .bar {\n}\n\n/* Prettier 2.1 */\n@at-root .foo\n// .bar\n{\n}\n```\n\n#### Fix url() unquoted content manipulation ([#7592](https://github.com/prettier/prettier/pull/7592) by [@mattiacci](https://github.com/mattiacci))\n\nImprove the handling of unquoted URL content in CSS/SCSS/Less. This doesn't\naddress the underlying parsing issues, but at least ensures Prettier doesn't\nmodify URLs.\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n@import url(https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&display=swap);\n@import url(//fonts.googleapis.com/css?family=#{ get-font-family('Roboto') }:100,300,500,700,900&display=swap);\n.validUnquotedUrls{\n  background: url(data/+0ThisShouldNotBeLowerCased);\n  background: url(https://foo/A*3I8oSY6AKRMAAAAAAAAAAABkARQnAQ);\n  background: url(https://example.com/some/quite,long,url,with,commas.jpg);\n}\n\n/* Prettier 2.0 */\n@import url(\n  https://fonts.googleapis.com/css?family=Roboto:100,\n  300,\n  400,\n  500,\n  700,\n  900&display=swap\n);\n@import url(\n  //fonts.googleapis.com/css?family=#{get-font-family(\"Roboto\")}:100,\n  300,\n  500,\n  700,\n  900&display=swap\n);\n.validUnquotedUrls {\n  background: url(data/+0thisshouldnotbelowercased);\n  background: url(https://foo/A*3i8osy6akrmaaaaaaaaaaabkarqnaq);\n  background: url(https://example.com/some/quite, long, url, with, commas.jpg);\n}\n\n\n/* Prettier 2.1 */\n@import url(https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&display=swap);\n@import url(//fonts.googleapis.com/css?family=#{ get-font-family('Roboto') }:100,300,500,700,900&display=swap);\n.validUnquotedUrls{\n  background: url(data/+0ThisShouldNotBeLowerCased);\n  background: url(https://foo/A*3I8oSY6AKRMAAAAAAAAAAABkARQnAQ);\n  background: url(https://example.com/some/quite,long,url,with,commas.jpg);\n}\n```\n\n#### Incorrect whitespace added after escaped colon in css grid line name ([#8535](https://github.com/prettier/prettier/pull/8535) by [@boyenn](https://github.com/boyenn))\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n.grid {\n  grid-template-rows:\n    [row-1-00\\:00] auto;\n}\n\n/* Prettier 2.0 */\n.grid {\n  grid-template-rows: [row-1-00\\: 00] auto;\n}\n\n/* Prettier 2.1 */\n.grid {\n  grid-template-rows: [row-1-00\\:00] auto;\n}\n```\n\n#### Add support for @supports selector(<custom-selector>) ([#8545](https://github.com/prettier/prettier/pull/8545) by [@boyenn](https://github.com/boyenn))\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n@supports selector(:focus-visible) {\n  button:focus {\n    outline: none;\n  }\n\n  button:focus-visible {\n    outline: 2px solid orange;\n  }\n}\n\n/* Prettier 2.0 */\n@supports selector(: focus-visible) {\n  button:focus {\n    outline: none;\n  }\n\n  button:focus-visible {\n    outline: 2px solid orange;\n  }\n}\n\n/* Prettier 2.1 */\n@supports selector(:focus-visible) {\n  button:focus {\n    outline: none;\n  }\n\n  button:focus-visible {\n    outline: 2px solid orange;\n  }\n}\n```\n\n#### Improve Prettier handling of arbitrary arguments ([#8567](https://github.com/prettier/prettier/pull/8567), [#8566](https://github.com/prettier/prettier/pull/8566) by [@boyenn](https://github.com/boyenn))\n\nPrettier no longer unexpectedly add extra space after function when passing arbitrary arguments.\nPrettier no longer breaks code when inline number lists are used as arbitrary arguments.\n\n<!-- prettier-ignore -->\n```css\n/* Input */\nbody {\n  test: function($list...);\n  foo: bar(returns-list($list)...);\n  background-color: rgba(50 50 50 50...);\n}\n\n/* Prettier 2.0 */\nbody {\n  test: function($list...);\n  foo: bar(returns-list($list) ...); \n  background-color: rgba(50 50 50 50..);\n}\n\n/* Prettier 2.1 */\nbody {\n  test: function($list...);\n  foo: bar(returns-list($list)...);\n  background-color: rgba(50 50 50 50...);\n}\n```\n\n### SCSS\n\n#### Fix extra indentation of lines following comments in scss ([#7844](https://github.com/prettier/prettier/pull/7844) by [@boyenn](https://github.com/boyenn))\n\nPreviously, Prettier would place extra indentation of lines following comments within SCSS maps\nPrettier now no longer places these indentations\n\n<!-- prettier-ignore -->\n```scss\n/* Input */\n$my-map: (\n  'foo': 1, // Foo\n  'bar': 2, // Bar\n);\n\n/* Prettier 2.0 */\n$my-map: (\n  \"foo\": 1,\n  // Foo\n    \"bar\": 2,\n  // Bar\n);\n\n/* Prettier 2.1 */\n$my-map: (\n  \"foo\": 1,\n  // Foo\n  \"bar\": 2,\n  // Bar\n);\n```\n\n#### Fix inline comments between property and value ([#8366](https://github.com/prettier/prettier/pull/8366) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```scss\n// Input\na {\n  color: // comment\n         red;\n}\n\n// Prettier 2.0\na {\n  color: // comment red;\n}\n\n// Prettier 2.1\na {\n  color: // comment\n    red;\n}\n```\n\n#### Comments at the end of the file were lost if the final semicolon was omitted ([#8675](https://github.com/prettier/prettier/pull/8675) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```scss\n// Input\n@mixin foo() {\n  a {\n    color: #f99;\n  }\n}\n\n@include foo() /* comment*/\n\n// Prettier 2.0\n@mixin foo() {\n  a {\n    color: #f99;\n  }\n}\n\n@include foo();\n\n// Prettier 2.1\n@mixin foo() {\n  a {\n    color: #f99;\n  }\n}\n\n@include foo(); /* comment*/\n```\n\n### Less\n\n#### Fix `:extend` pseudo-class ([#8178](https://github.com/prettier/prettier/pull/8178) by [@fisker](https://github.com/fisker))\n\nThe selector is parsed as value before, now it's recognized as selector.\n\n<!-- prettier-ignore -->\n```less\n// Input\n.hello {\n  &:extend(.input[type=\"checkbox\"]:checked ~ label)}\n\n// Prettier 2.0\n.hello {\n  &:extend(.input[type= \"checkbox\" ]: checked ~label);\n}\n\n// Prettier 2.1\n.hello {\n  &:extend(.input[type=\"checkbox\"]:checked ~ label);\n}\n```\n\n#### Fix inline comments contains `/*` ([#8360](https://github.com/prettier/prettier/pull/8360) by [@fisker](https://github.com/fisker))\n\nWhen inline comments contains `/*`, some other comment not correctly printed.\n\n<!-- prettier-ignore -->\n```less\n// Input\n@import \"a\";\n\n// '/*' <-- this breaks formatting\n\n@import 'b';\n/* block */\n/*no-space block*/\n\n// Prettier 2.0\n@import \"a\";\n\n// '/*' <-- this breaks formatting\n\n@import \"b\";\n\n@import 'b\n@import 'b';\n/* bl\n\n// Prettier 2.1\n@import \"a\";\n\n// '/*' <-- this breaks formatting\n\n@import \"b\";\n/* block */\n/*no-space block*/\n```\n\n### HTML\n\n#### Omit trailing semicolon on single line style attributes ([#8013](https://github.com/prettier/prettier/pull/8013) by [@bschlenk](https://github.com/bschlenk))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div style=\"margin: 0; padding: 20px\"></div>\n<div style=\"margin: 0; padding: 20px; position: relative; display: inline-block; color: blue\"></div>\n\n<!-- Prettier 2.0 -->\n<div style=\"margin: 0; padding: 20px;\"></div>\n<div\n  style=\"\n    margin: 0;\n    padding: 20px;\n    position: relative;\n    display: inline-block;\n    color: blue;\n  \"\n></div>\n\n<!-- Prettier 2.1 -->\n<div style=\"margin: 0; padding: 20px\"></div>\n<div\n  style=\"\n    margin: 0;\n    padding: 20px;\n    position: relative;\n    display: inline-block;\n    color: blue;\n  \"\n></div>\n```\n\n#### Preserve non-ASCII whitespace characters in HTML ([#8137](https://github.com/prettier/prettier/pull/8137) by [@fisker](https://github.com/fisker))\n\nNon-ASCII whitespace characters like `U+00A0` `U+2005` etc. are not considered whitespace in html, they should not be removed.\n\n```js\n// Prettier 2.0\n[...require(\"prettier\").format(\"<i> \\u2005 </i>\", { parser: \"html\" })]\n  .slice(3, -5)\n  .map((c) => c.charCodeAt(0).toString(16));\n\n// -> [ '20' ]\n// `U+2005` is removed\n\n// Prettier 2.1\n[...require(\"prettier\").format(\"<i> \\u2005 </i>\", { parser: \"html\" })]\n  .slice(3, -5)\n  .map((c) => c.charCodeAt(0).toString(16));\n\n// -> [ '20', '2005', '20' ]\n```\n\n#### Support legacy HTML-like comments script blocks ([#8173](https://github.com/prettier/prettier/pull/8173) by [@fisker](https://github.com/fisker), [#8394](https://github.com/prettier/prettier/pull/8394) by [@fisker](https://github.com/fisker))\n\nPreviously we parse html `<script>` blocks as \"module\"([ECMAScript Module grammar](https://babeljs.io/docs/en/options#sourcetype)), this is why we can't parse comments starts with `<!--`(aka [HTML-like comments](https://tc39.es/ecma262/#sec-html-like-comments)), now we parse `<script>` blocks as \"script\", unless this `<script>`\n\n1. `type=\"module\"`\n2. `type=\"text/babel\"` and `data-type=\"module\"`, [introduced in babel@v7.10.0](https://github.com/babel/babel/pull/11466)\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<SCRIPT>\n<!--\nalert(\"hello\" +    ' world!')\n//--></SCRIPT>\n\n<!-- Prettier 2.0 -->\nSyntaxError: Unexpected token (2:1)\n  1 |\n> 2 | <!--\n    | ^\n  3 | alert(\"hello\" +    ' world!')\n  4 | //-->\n\n<!-- Prettier 2.1 -->\n<script>\n  <!--\n  alert(\"hello\" + \" world!\");\n  //-->\n</script>\n```\n\n#### Treat `<select>` as inline-block and `<optgroup>`/`<option>` as block ([#8275](https://github.com/prettier/prettier/pull/8275) by [@thorn0](https://github.com/thorn0), [#8620](https://github.com/prettier/prettier/pull/8620) by [@fisker](https://github.com/fisker))\n\nNow Prettier knows that it's safe to add whitespace inside `select`, `option` and `optgroup` tags.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<select><option>Blue</option><option>Green</option><optgroup label=\"Darker\"><option>Dark Blue</option><option>Dark Green</option></optgroup></select>\n\n<!-- Prettier 2.0 -->\n<select\n  ><option>Blue</option\n  ><option>Green</option\n  ><optgroup label=\"Darker\"\n    ><option>Dark Blue</option><option>Dark Green</option></optgroup\n  ></select\n>\n\n<!-- Prettier 2.1 -->\n<select>\n  <option>Blue</option>\n  <option>Green</option>\n  <optgroup label=\"Darker\">\n    <option>Dark Blue</option>\n    <option>Dark Green</option>\n  </optgroup>\n</select>\n```\n\n#### Fix broken URLs with commas in srcset ([#8359](https://github.com/prettier/prettier/pull/8359) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<img\nsrcset=\"\n_20200401_145009_szrhju_c_scale,w_200.jpg 200w,\n_20200401_145009_szrhju_c_scale,w_1400.jpg 1400w\"\nsrc=\"_20200401_145009_szrhju_c_scale,w_1400.jpg\"\n>\n\n<!-- Prettier 2.0 -->\n<img\n  srcset=\"\n    _20200401_145009_szrhju_c_scale,\n    w_200.jpg                        200w,\n    _20200401_145009_szrhju_c_scale,\n    w_1400.jpg                      1400w\n  \"\n  src=\"_20200401_145009_szrhju_c_scale,w_1400.jpg\"\n/>\n\n<!-- Prettier 2.1 -->\n<img\n  srcset=\"\n    _20200401_145009_szrhju_c_scale,w_200.jpg   200w,\n    _20200401_145009_szrhju_c_scale,w_1400.jpg 1400w\n  \"\n  src=\"_20200401_145009_szrhju_c_scale,w_1400.jpg\"\n/>\n```\n\n#### Support `<script type=\"text/html>` ([#8371](https://github.com/prettier/prettier/pull/8371) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<script type=\"text/html\">\n<div>\n<p>foo</p>\n</div>\n</script>\n\n<!-- Prettier 2.0 -->\n<script type=\"text/html\">\n  <div>\n  <p>foo</p>\n  </div>\n</script>\n\n<!-- Prettier 2.1 -->\n<script type=\"text/html\">\n  <div>\n    <p>foo</p>\n  </div>\n</script>\n\n```\n\n#### Support front matter with dynamic language ([#8381](https://github.com/prettier/prettier/pull/8381) by [@fisker](https://github.com/fisker))\n\nSupport [dynamic language detection](https://github.com/jonschlinkert/gray-matter#optionslanguage) in front matter, also available for `css`, `less`, `scss`, and `markdown` parser.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n---my-awsome-language\ntitle: Title\ndescription: Description\n---\n  <h1>\n    prettier</h1>\n\n<!-- Prettier 2.0 -->\n---my-awsome-language title: Title description: Description ---\n\n<h1>\n  prettier\n</h1>\n\n<!-- Prettier 2.1 -->\n---my-awsome-language\ntitle: Title\ndescription: Description\n---\n\n<h1>\n  prettier\n</h1>\n```\n\n#### Don't preserve line breaks around text-only content ([#8614](https://github.com/prettier/prettier/pull/8614) by [@fisker](https://github.com/fisker))\n\nPreviously, Prettier always [preserved line breaks][#5596] around inline nodes (i.e. inline elements, text, interpolations). In general, Prettier, as much as possible, tries to avoid relying on original formatting, but there are at least two cases when collapsing inline nodes into a single line is undesirable, namely list-like content and conditional constructions (e.g. `v-if`/`v-else` in Vue). A good way to detect those cases couldn't be found, so such a trade-off was made. It turned out, however, for text-only content, this relaxation of rules was unnecessary and only led to confusingly inconsistent formatting.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div>\n  Hello, world!\n</div>\n<div>\n  Hello, {{ username }}!\n</div>\n\n<!-- Prettier 2.0 -->\n<div>\n  Hello, world!\n</div>\n<div>Hello, {{ username }}!</div>\n\n<!-- Prettier 2.1 -->\n<div>Hello, world!</div>\n<div>Hello, {{ username }}!</div>\n```\n\n[#5596]: https://prettier.io/blog/2019/01/20/1.16.0.html#respect-surrounding-linebreaks-5596-by-ikatyang\n\n#### Recognize known html tags ([#8621](https://github.com/prettier/prettier/pull/8621) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div>before<details><summary>summary long long long long </summary>details</details>after</div>\n<div>before<dialog open>dialog long long long long  long long long long </dialog>after</div>\n<div>before<object data=\"horse.wav\"><param name=\"autoplay\" value=\"true\"/><param name=\"autoplay\" value=\"true\"/></object>after</div>\n\n<!-- Prettier 2.0 -->\n<div>\n  before<details><summary>summary long long long long </summary>details</details\n  >after\n</div>\n<div>\n  before<dialog open>dialog long long long long long long long long </dialog\n  >after\n</div>\n<div>\n  before<object data=\"horse.wav\"\n    ><param name=\"autoplay\" value=\"true\" /><param\n      name=\"autoplay\"\n      value=\"true\" /></object\n  >after\n</div>\n\n<!-- Prettier 2.1 -->\n<div>\n  before\n  <details>\n    <summary>summary long long long long</summary>\n    details\n  </details>\n  after\n</div>\n<div>\n  before\n  <dialog open>dialog long long long long long long long long</dialog>\n  after\n</div>\n<div>\n  before<object data=\"horse.wav\">\n    <param name=\"autoplay\" value=\"true\" />\n    <param name=\"autoplay\" value=\"true\" /></object\n  >after\n</div>\n```\n\n#### Fix formatting element with void element as its last child ([#8643](https://github.com/prettier/prettier/pull/8643) by [@ikatyang](https://github.com/ikatyang))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<video controls width=\"250\">\n    <source src=\"/media/examples/flower.webm\"\n            type=\"video/webm\">\n    <source src=\"/media/examples/flower.mp4\"\n            type=\"video/mp4\"\n></video>text after\n\n<!-- Prettier 2.0 -->\n<video controls width=\"250\">\n  <source src=\"/media/examples/flower.webm\" type=\"video/webm\" />\n  <source src=\"/media/examples/flower.mp4\" type=\"video/mp4\" /></video\n\n>text after\n\n<!-- Prettier 2.1 -->\n<video controls width=\"250\">\n  <source src=\"/media/examples/flower.webm\" type=\"video/webm\" />\n  <source src=\"/media/examples/flower.mp4\" type=\"video/mp4\" /></video\n>text after\n```\n\n### Vue\n\n#### Improve formatting Vue SFC root blocks ([#8023](https://github.com/prettier/prettier/pull/8023) by [@sosukesuzuki](https://github.com/sosukesuzuki), [#8465](https://github.com/prettier/prettier/pull/8465) by [@fisker](https://github.com/fisker))\n\nSupport formatting all [language blocks](https://vue-loader.vuejs.org/spec.html#language-blocks)(including [custom blocks](https://vue-loader.vuejs.org/spec.html#custom-blocks) with `lang` attribute) with [builtin parsers](https://prettier.io/docs/en/options.html#parser) and [plugins](https://prettier.io/docs/en/plugins.html).\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<template lang=\"pug\">\ndiv.text( color =   \"primary\",  disabled  =\"true\"  )\n</template>\n<i18n lang=\"json\">\n{\n\"hello\": 'prettier',}\n</i18n>\n\n<!-- Prettier 2.0 -->\n<template lang=\"pug\">\ndiv.text( color =   \"primary\",  disabled  =\"true\"  )\n</template>\n<i18n lang=\"json\">\n{\n\"hello\": 'prettier',}\n</i18n>\n\n<!-- Prettier 2.1 -->\n<template lang=\"pug\">\n.text(color=\"primary\", disabled=\"true\")\n</template>\n<i18n lang=\"json\">\n{\n  \"hello\": \"prettier\"\n}\n</i18n>\n```\n\n**[@prettier/plugin-pug](https://github.com/prettier/plugin-pug) is required for this example.**\n\n#### Improve parsing for custom blocks ([#8153](https://github.com/prettier/prettier/pull/8153) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<custom lang=\"javascript\">\nconst foo =    \"</\";\n</custom>\n\n<!-- Prettier 2.0 -->\nSyntaxError: Unexpected character \"\"\" (2:19)\n[error]   1 | <custom lang=\"javascript\">\n[error] > 2 | const foo =    \"</\";\n[error]     |                   ^\n[error]   3 | </custom>\n\n<!-- Prettier 2.1 -->\n<custom lang=\"javascript\">\nconst foo = \"</\";\n</custom>\n```\n\n#### Fix broken format with upper case HTML tag ([#8280](https://github.com/prettier/prettier/pull/8280) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<!doctype html><HTML></HTML>\n\n<!-- Prettier 2.0 -->\n<!DOCTYPE html>><HTML></HTML>\n\n<!-- Prettier 2.1 -->\n<!DOCTYPE html><HTML></HTML>\n```\n\n#### Fix ugly formatting for one line `template` in Vue SFC ([#8325](https://github.com/prettier/prettier/pull/8325) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<template><p>foo</p><div>foo</div></template>\n\n<!-- Prettier 2.0 -->\n<template\n  ><p>foo</p>\n  <div>foo</div></template\n>\n\n<!-- Prettier 2.1 -->\n<template>\n  <p>foo</p>\n  <div>foo</div>\n</template>\n```\n\n#### Support Vue DOM Template ([#8326](https://github.com/prettier/prettier/pull/8326) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nWhen use vue parse for HTML, parse template as HTML.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<!DOCTYPE html>\n<html>\n  <body STYLE=\"color: #333\">\n    <DIV id=\"app\">\n      <DIV>First Line</DIV><DIV>Second Line</DIV>\n    </DIV>\n    <script src=\"https://unpkg.com/vue/dist/vue.js\"></script>\n    <script>\n      new Vue({\n        el: \"#app\",\n        data() {\n          return {}\n        },\n      });\n    </script>\n  </body>\n</html>\n\n<!-- Prettier 2.0 -->\n<!DOCTYPE html>\n<html>\n  <body STYLE=\"color: #333\">\n    <DIV id=\"app\"> <DIV>First Line</DIV><DIV>Second Line</DIV> </DIV>\n    <script src=\"https://unpkg.com/vue/dist/vue.js\"></script>\n    <script>\n      new Vue({\n        el: \"#app\",\n        data() {\n          return {};\n        },\n      });\n    </script>\n  </body>\n</html>\n\n<!-- Prettier 2.1 -->\n<!DOCTYPE html>\n<html>\n  <body style=\"color: #333\">\n    <div id=\"app\">\n      <div>First Line</div>\n      <div>Second Line</div>\n    </div>\n    <script src=\"https://unpkg.com/vue/dist/vue.js\"></script>\n    <script>\n      new Vue({\n        el: \"#app\",\n        data() {\n          return {};\n        },\n      });\n    </script>\n  </body>\n</html>\n```\n\n#### Improve upper case HTML tag formatting in DOM template ([#8337](https://github.com/prettier/prettier/pull/8337) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<!DOCTYPE html><HTML>\n  <body>\n    <div v-if=\"foo ===    'foo'\">\n\n</div>\n    <script>\nnew Vue({el: '#app'})\n    </script>\n  </body>\n</HTML>\n\n<!-- Prettier 2.0 -->\n<!DOCTYPE html>\n<HTML>\n  <body>\n    <div v-if=\"foo ===    'foo'\">\n\n</div>\n    <script>\nnew Vue({el: '#app'})\n    </script>\n  </body>\n</HTML>\n\n<!-- Prettier 2.1 -->\n<!DOCTYPE html>\n<HTML>\n  <body>\n    <div v-if=\"foo === 'foo'\"></div>\n    <script>\n      new Vue({ el: \"#app\" });\n    </script>\n  </body>\n</HTML>\n```\n\n#### Fix parenthesized interpolation format ([#8747](https://github.com/prettier/prettier/pull/8747) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input -->\n<template>\n<span>{{(a||          b)}} {{z&&(a&&b)}}</span>\n</template>\n\n<!-- Prettier 2.0 -->\n<template>\n  <span>{{(a||          b)}} {{z&&(a&&b)}}</span>\n</template>\n\n<!-- Prettier 2.1 -->\n<template>\n  <span>{{ a || b }} {{ z && a && b }}</span>\n</template>\n```\n\n#### Fix named slots shorthand value is not formatted ([#8839](https://github.com/prettier/prettier/pull/8839) by [@wenfangdu](https://github.com/wenfangdu))\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input -->\n<template>\n  <div #default=\"{foo:{bar:{baz}}}\"></div>\n</template>\n\n<!-- Prettier 2.0 -->\n<template>\n  <div #default=\"{foo:{bar:{baz}}}\"></div>\n</template>\n\n<!-- Prettier 2.1 -->\n<template>\n  <div #default=\"{ foo: { bar: { baz } } }\"></div>\n</template>\n```\n\n### Angular\n\n#### Fix optional chaining with computed properties and handling of `this` ([#8253](https://github.com/prettier/prettier/pull/8253) by [@thorn0](https://github.com/thorn0), [#7942](https://github.com/prettier/prettier/pull/8253) by [@fisker](https://github.com/fisker), fixes in [`angular-estree-parser`](https://github.com/ikatyang/angular-estree-parser) by [@ikatyang](https://github.com/ikatyang))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n{{ a?.b[c] }}\n{{ a  ( this )}}\n\n<!-- Prettier 2.0 -->\n{{ (a?.b)[c] }}\n{{ a  ( this )}}\n\n<!-- Prettier 2.1 -->\n{{ a?.b[c] }}\n{{ a(this) }}\n```\n\n#### Preserve parentheses around pipes in objects literals for compatibility with AngularJS 1.x ([#8254](https://github.com/prettier/prettier/pull/8254) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div ng-style=\"{ 'color': ('#222' | darken)}\"></div>\n\n<!-- Prettier 2.0 -->\n<div ng-style=\"{ color: '#222' | darken }\"></div>\n\n<!-- Prettier 2.1 -->\n<div ng-style=\"{ 'color': ('#222' | darken)}\"></div>\n```\n\n### Handlebars (alpha)\n\n#### Respect singleQuote option around attribute value more complex than a bare text ([#8375](https://github.com/prettier/prettier/pull/8375) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<a href='/{{url}}'></a>\n<a href=\"/{{url}}\"></a>\n\n<a href='url'></a>\n<a href=\"url\"></a>\n\n{{!-- Prettier 2.0 --}}\n<a href=\"/{{url}}\"></a>\n<a href=\"/{{url}}\"></a>\n\n<a href='url'></a>\n<a href='url'></a>\n\n{{!-- Prettier 2.1 --}}\n<a href='/{{url}}'></a>\n<a href='/{{url}}'></a>\n\n<a href='url'></a>\n<a href='url'></a>\n```\n\n#### Fix formatting of classic components inside element ([#8593](https://github.com/prettier/prettier/pull/8593) by [@mikoscz](https://github.com/mikoscz))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<div>\n  {{classic-component-with-many-properties\n    class=\"hello\"\n    param=this.someValue\n    secondParam=this.someValue\n    thirdParam=this.someValue\n  }}\n</div>\n\n{{!-- Prettier 2.0 --}}\n<div>\n  {{\n    classic-component-with-many-properties\n    class=\"hello\"\n    param=this.someValue\n    secondParam=this.someValue\n    thirdParam=this.someValue\n  }}\n</div>\n\n{{!-- Prettier 2.1 --}}\n<div>\n  {{classic-component-with-many-properties\n    class=\"hello\"\n    param=this.someValue\n    secondParam=this.someValue\n    thirdParam=this.someValue\n  }}\n</div>\n```\n\n#### Support escaping a mustache with a backslash ([#8634](https://github.com/prettier/prettier/pull/8634) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n\\{{mustache}}\n\\\\{{mustache}}\n\\\\\\{{mustache}}\n\n{{!-- Prettier 2.0 --}}\n{{mustache}}\n\\{{mustache}}\n\\\\{{mustache}}\n\n{{!-- Prettier 2.1 --}}\n\\{{mustache}}\n\\\\{{mustache}}\n\\\\\\{{mustache}}\n```\n\n#### Format only class names in attributes ([#8677](https://github.com/prettier/prettier/pull/8677) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<div class=' class '></div>\n<div title=' other attribute '></div>\n\n{{!-- Prettier 2.0 --}}\n<div class=\"class\"></div>\n<div title=\"other attribute\"></div>\n\n{{!-- Prettier 2.1 --}}\n<div class=\"class\"></div>\n<div title=\" other attribute \"></div>\n```\n\n### GraphQL\n\n#### Improve wrapping of GraphQL fragment directives ([#7721](https://github.com/prettier/prettier/pull/7721) by [@sasurau4](https://github.com/sasurau4))\n\n<!-- prettier-ignore -->\n```graphql\n# Input\nfragment TodoList_list on TodoList @argumentDefinitions(\n  count: {type: \"Int\", defaultValue: 10},\n) {\n  title\n}\n\n# Prettier 2.0\nfragment TodoList_list on TodoList\n  @argumentDefinitions(count: { type: \"Int\", defaultValue: 10 }) {\n  title\n}\n\n# Prettier 2.1\nfragment TodoList_list on TodoList\n@argumentDefinitions(count: { type: \"Int\", defaultValue: 10 }) {\n  title\n}\n```\n\n#### Fix comments between interfaces ([#8006](https://github.com/prettier/prettier/pull/8006) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```graphql\n# Input\ntype Type1 implements\n    A  &\n# comment 1\n    B\n# comment 2\n &  C {a: a}\n\n# Prettier 2.0\ntype Type1 implements A & # comment 1\nB & # comment 2\nC {\n  a: a\n}\n\n# Prettier 2.0 (Second format)\ntype Type1 implements A & B & C { # comment 1 # comment 2\n  a: a\n}\n\n# Prettier 2.1\ntype Type1 implements A &\n# comment 1\nB &\n# comment 2\nC {\n  a: a\n}\n```\n\n#### Allow interfaces to implement other interfaces ([#8007](https://github.com/prettier/prettier/pull/8007) by [@fisker](https://github.com/fisker))\n\nSee [\"RFC: Allow interfaces to implement other interfaces\"](https://github.com/graphql/graphql-spec/pull/373)\n\n<!-- prettier-ignore -->\n```graphql\n# Input\ninterface Resource implements Node {\n  id: ID!\n  url: String\n}\n\n# Prettier 2.0\ninterface Resource {\n  id: ID!\n  url: String\n}\n\n# Prettier 2.1\ninterface Resource implements Node {\n  id: ID!\n  url: String\n}\n```\n\n### Markdown\n\n#### Update `remark-parse` to v8 ([#8140](https://github.com/prettier/prettier/pull/8140) by [@saramarcondes](https://github.com/saramarcondes), [@fisker](https://github.com/fisker), [@thorn0](https://github.com/thorn0))\n\n[remark](https://remark.js.org/), the Markdown parser that Prettier uses, got a long-overdue update (5.0.0 → 8.0.2, see [remark's changelog](https://github.com/remarkjs/remark/releases)). This fixed tons of old bugs, in particular related to parsing list items indented with tabs.\n\nPlease note that the new version is stricter in parsing footnotes, a syntax extension not defined in any specification. Previously, Prettier would parse (and output, depending on the `--tab-width` option) multiline footnotes indented with any number of spaces. The new version recognizes only multiline footnotes indented with 4 spaces. This change isn't considered breaking as the syntax is non-standard, but if you happen to use it, before updating Prettier, you might want to use its older version with `--tab-width=4` to make footnotes in your files compatible with the new version.\n\n#### Correctly format CJK sentences with Variation Selector ([#8511](https://github.com/prettier/prettier/pull/8511) by [@ne-sachirou](https://github.com/ne-sachirou))\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\n麻󠄁羽󠄀‼️\n\n<!-- Prettier 2.0 -->\n麻 󠄁 羽 󠄀 ‼️\n\n<!-- Prettier 2.1 -->\n麻󠄁羽󠄀‼️\n```\n\n### YAML\n\n#### Fix unstable format with `prettier-ignore` ([#8355](https://github.com/prettier/prettier/pull/8355) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```yaml\n# Input\n# prettier-ignore\n---\nprettier: true\n...\nhello: world\n\n# Prettier 2.0\n# prettier-ignore\n---\nprettier: true\n---\nhello: world\n\n# Prettier 2.0 (Second format)\n# prettier-ignore\n---\nprettier: true\n\n---\nhello: world\n\n# Prettier 2.1\n# prettier-ignore\n---\nprettier: true\n---\nhello: world\n\n```\n\n#### Preserve blank lines in comments ([#8356](https://github.com/prettier/prettier/pull/8356) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```yaml\n# Input\na:\n  - a: a\n\n  # - b: b\n\n  # - c: c\n\n  - d: d\n\n\nb:\n  - a: a\n\n  # - b: b\n\n  # - c: c\n\n# Prettier 2.0\na:\n  - a: a\n\n  # - b: b\n\n  # - c: c\n\n  - d: d\n\nb:\n  - a: a\n  # - b: b\n  # - c: c\n\n# Prettier 2.1\na:\n  - a: a\n\n  # - b: b\n\n  # - c: c\n\n  - d: d\n\nb:\n  - a: a\n\n  # - b: b\n\n  # - c: c\n```\n\n#### Update `yaml` and `yaml-unist-parser` ([#8386](https://github.com/prettier/prettier/pull/8386) by [@fisker](https://github.com/fisker), fixes in [`yaml-unist-parser`](https://github.com/ikatyang/yaml-unist-parser) by [@ikatyang](https://github.com/ikatyang))\n\n- `yaml`: [Add explicit error for block scalars with more-indented leading empty lines](https://github.com/eemeli/yaml/commit/7eafeb821d4a89d4de26f5b3798ee6e009e99b12)\n- `yaml-unist-parser`: [fix: no false positive for document head end marker position](https://github.com/ikatyang/yaml-unist-parser/pull/272)\n\n<!-- prettier-ignore -->\n```yaml\n# Input\n# --- comments ---\n\n# Prettier 2.0\n--- # --- comments ---\n\n# Prettier 2.1\n# --- comments ---\n\n# Input\nempty block scalar: >\n\n # comment\n\n# Prettier 2.0\nempty block scalar: >\n\n# comment\n\n# Prettier 2.1\nSyntaxError: Block scalars with more-indented leading empty lines must use an explicit indentation indicator (1:21)\n> 1 | empty block scalar: >\n    |                     ^\n> 2 |\n    | ^^\n> 3 |  # comment\n    | ^^^^^^^^^^^\n```\n\n#### Fix error on YAML Inline Extend syntax ([#8888](https://github.com/prettier/prettier/pull/8888) by [@fisker](https://github.com/fisker), [@evilebottnawi](https://github.com/evilebottnawi), fixes in [`yaml-unist-parser`](https://github.com/ikatyang/yaml-unist-parser) by [@ikatyang](https://github.com/ikatyang))\n\n<!-- prettier-ignore -->\n```yaml\n# Input\nfoo:\n <<: &anchor\n   K1: \"One\"\n K2: \"Two\"\n\nbar:\n <<: *anchor\n K3: \"Three\"\n\n# Prettier 2.0\nSyntaxError: Merge nodes can only have Alias nodes as values (2:2)\n  1 | foo:\n> 2 |  <<: &anchor\n    |  ^^^^^^^^^^^\n> 3 |    K1: \"One\"\n    | ^^^^^^^^^^^^\n> 4 |  K2: \"Two\"\n    | ^^^^^^^^^^^^\n> 5 | \n    | ^\n  6 | bar:\n  7 |  <<: *anchor\n  8 |  K3: \"Three\"\n\n# Prettier 2.1\nfoo:\n  <<: &anchor\n    K1: \"One\"\n  K2: \"Two\"\n\nbar:\n  <<: *anchor\n  K3: \"Three\"\n```\n\n### API\n\n#### Add plugins' parsers to the `parser` option ([#8390](https://github.com/prettier/prettier/pull/8390) by [@thorn0](https://github.com/thorn0))\n\nWhen a plugin defines a language, the parsers specified for this language are now automatically added to the list of valid values of the `parser` option.\nThis might be useful for editor integrations or other applications that need a list of available parsers.\n\n```bash\nnpm install --save-dev --save-exact prettier @prettier/plugin-php\n```\n\n```js\nconst hasPhpParser = prettier\n  .getSupportInfo()\n  .options.find((option) => option.name === \"parser\")\n  .choices.map((choice) => choice.value)\n  .includes(\"php\"); // false in Prettier 2.0, true in Prettier 2.1\n```\n\n#### Fix `prettier.getFileInfo()` ([#8548](https://github.com/prettier/prettier/pull/8548), [#8551](https://github.com/prettier/prettier/pull/8551), [#8585](https://github.com/prettier/prettier/pull/8585) by [@fisker](https://github.com/fisker))\n\n- When passing `{resolveConfig: true}`, the `inferredParser` should be the parser resolved from config file, previous version might returns wrong result for files supported by builtin parsers.\n- When passing `{resolveConfig: true}` and `{ignorePath: \"a/file/in/different/dir\"}`, the `inferredParser` result might incorrect.\n- If given `filePath` is ignored, the `inferredParser` is always `null` now.\n\n<!-- prettier-ignore -->\n```console\n$ echo {\"parser\":\"flow\"}>.prettierrc\n$ node -p \"require('prettier').getFileInfo.sync('./foo.js', {resolveConfig: true})\"\n\n# Prettier 2.0\n# { ignored: false, inferredParser: 'babel' }\n\n# Prettier 2.1\n# { ignored: false, inferredParser: 'flow' }\n```\n\n<!-- prettier-ignore -->\n```console\n$ echo ignored.js>>.prettierignore\n$ node -p \"require('prettier').getFileInfo.sync('./ignored.js')\"\n\n# Prettier 2.0\n# { ignored: true, inferredParser: 'babel' }\n\n# Prettier 2.1\n# { ignored: true, inferredParser: null }\n```\n\n#### Fix resolve editorConfig for files in deep directory ([#8591](https://github.com/prettier/prettier/pull/8591) by [@fisker](https://github.com/fisker))\n\nPrevious version can't find `.editorconfig` for files in deep directory (depth great than 9 to project root, see #5705).\n\n#### Support `.cjs` and `.json5` configuration files ([#8890](https://github.com/prettier/prettier/pull/8890), [#8957](https://github.com/prettier/prettier/pull/8957) by [@fisker](https://github.com/fisker))\n\nAdded new format of configuration files:\n\n- `.prettierrc.json5`\n- `.prettierrc.cjs`\n- `prettier.config.cjs`\n\n#### Fix wrong range format on files with BOM ([#8936](https://github.com/prettier/prettier/pull/8936) by [@fisker](https://github.com/fisker))\n\nWhen files have BOM, in previous version, the real range is wrongly calculated.\n\n<!-- prettier-ignore -->\n```js\nconst text = \"\\uFEFF\" + \"foo = 1.0000;bar = 1.0000;\";\n//                       ^^^^^^^^^^^^^ Range\nconst result = require(\"prettier\")\n  .format(text, {\n    parser: \"babel\",\n    rangeStart: 1,\n    rangeEnd: 13,\n  })\n  // Visualize BOM\n  .replace(\"\\uFEFF\", \"<<BOM>>\")\n  // Visualize EOL\n  .replace(\"\\n\", \"<<EOL>>\");\n\nconsole.log(result);\n\n// Prettier 2.0\n// -> <<BOM>>foo = 1.0;<<EOL>>bar = 1.0;\n//                            ^^^^^^^^^ This part should not be formatted\n\n// Prettier 2.1\n// -> <<BOM>>foo = 1.0;bar = 1.0000;\n```\n\n### CLI\n\n#### Fix filenames contains CJK or emoji not correctly ignored ([#8098](https://github.com/prettier/prettier/pull/8098) by [@fisker](https://github.com/fisker))\n\n```console\n// Prettier 2.0\n$ echo \"dir\" > .prettierignore\n$ prettier **/*.js -l\ndir/😁.js\ndir/中文.js\nnot-ignored.js\n\n// Prettier 2.1\n$ echo \"dir\" > .prettierignore\n$ prettier **/*.js -l\nnot-ignored.js\n```\n\n#### `--file-info` respect the `.prettierrc` and `--no-config` ([#8586](https://github.com/prettier/prettier/pull/8586), [#8830](https://github.com/prettier/prettier/pull/8830) by [@fisker](https://github.com/fisker))\n\n```console\n$ echo {\"parser\":\"ninja\"}>.prettierrc\n\n# Prettier 2.0\n$ prettier --file-info file.js\n# { \"ignored\": false, \"inferredParser\": \"babel\" }\n$ prettier --file-info file.js --no-config\n# { \"ignored\": false, \"inferredParser\": \"babel\" }\n\n# Prettier 2.1\n$ prettier --file-info file.js\n# { \"ignored\": false, \"inferredParser\": \"ninja\" }\n$ prettier --file-info file.js --no-config\n# { \"ignored\": false, \"inferredParser\": \"babel\" }\n```\n\n#### Added `--ignore-unknown`(alias `-u`) flag ([#8829](https://github.com/prettier/prettier/pull/8829) by [@fisker](https://github.com/fisker))\n\n```console\n# Prettier 2.0\nnpx prettier * --check\nChecking formatting...\nfoo.unknown[error] No parser could be inferred for file: foo.unknown\nAll matched files use Prettier code style!\n\n# Prettier 2.1\nnpx prettier * --check --ignore-unknown\nChecking formatting...\nAll matched files use Prettier code style!\n```\n\n#### Add `-w` alias for `--write` option ([#8833](https://github.com/prettier/prettier/pull/8833) by [@fisker](https://github.com/fisker))\n\n```console\n# Prettier 2.0\n$ prettier index.js -w\n[warn] Ignored unknown option -w. Did you mean -_?\n\"use strict\";\n\nmodule.exports = require(\"./src/index\");\n\n# Prettier 2.1\n$ prettier index.js -w\nindex.js 30ms\n```\n\n#### Stop suggesting `-_` for unknown options ([#8934](https://github.com/prettier/prettier/pull/8934) by [@fisker](https://github.com/fisker))\n\n```console\n# Prettier 2.0\n$ prettier foo.js -a\n[warn] Ignored unknown option -a. Did you mean -_?\n\n# Prettier 2.1\n$ prettier foo.js -a\n[warn] Ignored unknown option -a. Did you mean -c?\n```"
    },
    {
      "id": "/2020/03/21/2.0.0",
      "metadata": {
        "permalink": "/blog/2020/03/21/2.0.0",
        "source": "@site/blog/2020-03-21-2.0.0.md",
        "title": "Prettier 2.0 “2020”",
        "description": "Better defaults, a better CLI and better heuristics. Oh, and TypeScript 3.8.",
        "date": "2020-03-21T00:00:00.000Z",
        "formattedDate": "March 21, 2020",
        "tags": [],
        "readingTime": 35.82,
        "truncated": true,
        "authors": [
          {
            "name": "Georgii Dolzhykov (@thorn0)",
            "url": "https://github.com/thorn0"
          }
        ],
        "frontMatter": {
          "author": "Georgii Dolzhykov (@thorn0)",
          "authorURL": "https://github.com/thorn0",
          "title": "Prettier 2.0 “2020”"
        },
        "prevItem": {
          "title": "Prettier 2.1: new --embedded-language-formatting option and new JavaScript/TypeScript features!",
          "permalink": "/blog/2020/08/24/2.1.0"
        },
        "nextItem": {
          "title": "Prettier 1.19: Long awaited Vue option, TypeScript 3.7 and new JavaScript features",
          "permalink": "/blog/2019/11/09/1.19.0"
        }
      },
      "content": "Better defaults, a better CLI and better heuristics. Oh, and TypeScript 3.8.\n\nAfter a long and careful consideration, we decided to change the default values for the `trailingComma`, `arrowParens`, and `endOfLine` options. We made the CLI more intuitive. And we've finally dropped support for Node versions older than 10, which had grown to become a huge maintenance hassle and an obstacle for contributors. Read below in details.\n\n<!--truncate-->\n\n## Highlights\n\n### JavaScript\n\n#### Improved method chain breaking heuristic ([#6685](https://github.com/prettier/prettier/pull/6685) by [@mmkal](https://github.com/mmkal))\n\nPreviously, any method call chain of length three or longer would be automatically broken into multiple lines. The new heuristic is based on the complexity of the call arguments in the chain, rather than simply on the chain's length. Now, if chained method calls have arguments which aren't easy to understand at a glance (e.g. functions or deeply-nested objects), the chain is broken. Otherwise, they're allowed to remain on one line. See prior issues [#3197](https://github.com/prettier/prettier/issues/3107), [#4765](https://github.com/prettier/prettier/pull/4765), [#1565](https://github.com/prettier/prettier/issues/1565) and [#4125](https://github.com/prettier/prettier/pull/4125) for context and examples.\n\nTo get best results, make sure your value for the [`printWidth` option](/docs/en/options.html#print-width) isn't too high.\n\n<!-- prettier-ignore -->\n```javascript\n// Prettier 1.19\nif (\n  foo\n    .one()\n    .two()\n    .three() ===\n  bar\n    .four()\n    .five()\n    .six()\n) {\n  // ...\n}\n\n// Prettier 2.0\nif (foo.one().two().three() === bar.four().five().six()) {\n  // ...\n}\n```\n\n#### Ultimate fix for Closure-style type casts ([#7791](https://github.com/prettier/prettier/pull/7791) by [@thorn0](https://github.com/thorn0), [#7011](https://github.com/prettier/prettier/pull/7011) by [@evilebottnawi](https://github.com/evilebottnawi))\n\nPrettier has been trying not to corrupt these JSDoc type assertions since [v1.6.0](https://prettier.io/blog/2017/08/29/1.6.0.html#handle-closure-compiler-type-cast-syntax-correctly-2484httpsgithubcomprettierprettierpull2484-by-yangsuhttpsgithubcomyangsu), with mixed results. As type checking based on JSDoc becomes increasingly common, we've been getting new bug reports about this syntax. The bugs were tricky because the required parentheses around the expression weren't part of the AST, so Prettier didn't have a good way to detect their presence.\n\nFinally, we used the `createParenthesizedExpressions` option of the Babel parser to represent parentheses in the AST using non-standard nodes. This helped fix all the reported bugs.\n\nConsequently, Prettier won't recognize JSDoc type casts if the `flow` or `typescript` parser is used, but this is reasonable as this syntax makes little sense in Flow and TypeScript files.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst nestedAssertions = /** @type {MyType} */\n  (/** @type {unknown} */\n      (x));\n\n// Prettier 1.19\nconst nestedAssertions /** @type {MyType} */ /** @type {unknown} */ = x;\n\n// Prettier 2.0\nconst nestedAssertions = /** @type {MyType} */ (/** @type {unknown} */ (x));\n```\n\nReference documentation for this syntax: [Closure Compiler](https://github.com/google/closure-compiler/wiki/Annotating-JavaScript-for-the-Closure-Compiler#type-type), [TypeScript (with `--checkJs`)](https://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html#casts).\n\n### TypeScript\n\n#### TypeScript 3.8 ([#7631](https://github.com/prettier/prettier/pull/7631) by [@thorn0](https://github.com/thorn0), [#7764](https://github.com/prettier/prettier/pull/7764) by [@sosukesuzuki](https://github.com/sosukesuzuki), [#7804](https://github.com/prettier/prettier/pull/7804) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nPrettier now supports the new syntax added in TypeScript 3.8:\n\n- [Type-Only Imports and Exports](https://devblogs.microsoft.com/typescript/announcing-typescript-3-8/#type-only-imports-exports)\n- [ECMAScript Private Fields](https://devblogs.microsoft.com/typescript/announcing-typescript-3-8/#ecmascript-private-fields)\n- [`export * as ns`](https://devblogs.microsoft.com/typescript/announcing-typescript-3-8/#export-star-as-namespace-syntax)\n\n### CLI\n\n#### Test whether passed globs are names of existing files before treating them as globs ([#7587](https://github.com/prettier/prettier/pull/7587) by [@fisker](https://github.com/fisker))\n\nSince file names in Linux can contain almost any characters, strings like `foo*.js` and `[bar].css` are valid file names. Previously, if the user needed to format a file named `[bar].css`, a glob escaping syntax had to be used: `prettier \"\\[bar].css\"` (this one doesn't work on Windows, where backslashes are treated as path separators) or `prettier \"[[]bar].css\"`. Because of this, important use cases were broken. E.g. [lint-staged](https://github.com/okonet/lint-staged) passes absolute paths and knows nothing about the escaping syntax. Now, when Prettier CLI gets a glob, it first tries to resolve it as a literal file name.\n\n#### Expand directories, including `.` ([#7660](https://github.com/prettier/prettier/pull/7660) by [@thorn0](https://github.com/thorn0))\n\nIt's finally possible to run `prettier --write .` to format all supported files in the current directory and its subdirectories.\nDirectory names can be mixed with file names and glob patterns (e.g. `prettier src \"test/*.spec.js\" foo.js`).\n\nAlso, the order in which files are processed has changed. Previously, all the files were sorted alphabetically before\nformatting. Now, their order corresponds to the order of the specified paths. For each path, the list of resolved\nfiles is sorted, but the full sorting of the resulting combined list isn't done anymore.\n\nThere are also changes in how Prettier CLI reports errors if passed patterns don't match any files. Previously, Prettier CLI\nprinted a \"No matching files\" error if it couldn't find any files at all—for all the patterns together, not for an individual pattern.\nIn Prettier 2.0, the CLI also prints such errors for individual patterns.\n\n## Breaking changes\n\n### API\n\n#### Fix config overrides pattern matching to include dot files ([#5813](https://github.com/prettier/prettier/pull/5813) by [@chrisblossom](https://github.com/chrisblossom))\n\nPreviously, [configuration overrides](/docs/en/configuration.html#configuration-overrides) weren't applied to files whose name had a leading dot.\n\n#### Drop support for Node versions older than 10 ([#6908](https://github.com/prettier/prettier/pull/6908) by [@fisker](https://github.com/fisker))\n\nThe minimal required Node version now is 10.13.0. For our contributors, this means there is no need anymore to jump through hoops to make tests pass on Node 4.\n\n#### Change default value for `trailingComma` to `es5` ([#6963](https://github.com/prettier/prettier/pull/6963) by [@fisker](https://github.com/fisker))\n\nBefore version 2.0, Prettier was avoiding trailing commas by default where possible.\nThis made the resulting JavaScript compatible with now very old environments such as IE8, but implied [some missed opportunities](https://medium.com/@nikgraf/why-you-should-enforce-dangling-commas-for-multiline-statements-d034c98e36f8).\n\nPrettier has included an [option to configure trailing commas](https://prettier.io/docs/en/options.html#trailing-commas) since its early days, and an initiative to change the default value has been out there [for over three years](https://github.com/prettier/prettier/issues/68).\nFinally, the default value becomes `es5` instead of `none` in Prettier v2.0.\n\nIf the old behavior is still preferred, please configure Prettier with `{ \"trailingComma\": \"none\" }`.\nThere is a possibility that the default value will change to `all` (meaning even more trailing commas) in a future major version of Prettier as the JavaScript ecosystem further matures.\n\n#### Plugin API: changes in `prettier.util` ([#6993](https://github.com/prettier/prettier/pull/6993) by [@fisker](https://github.com/fisker))\n\n- `prettier.util.mapDoc` has been removed.</br>\n  Use `prettier.doc.utils.mapDoc` instead.\n- `prettier.util.isNextLineEmpty` has been updated.</br>\n  Use `isNextLineEmpty(text, node, locEnd)` instead of `isNextLineEmpty(text, node, options)`.\n- `prettier.util.isPreviousLineEmpty` has been updated.</br>\n  Use `isPreviousLineEmpty(text, node, locStart)` instead of `isPreviousLineEmpty(text, node, options)`.\n- `prettier.util.getNextNonSpaceNonCommentCharacterIndex` has been updated.</br>\n  Use `getNextNonSpaceNonCommentCharacterIndex(text, node, locEnd)` instead of `getNextNonSpaceNonCommentCharacterIndex(text, node, options)`.\n\n#### Change default value for `arrowParens` to `always` ([#7430](https://github.com/prettier/prettier/pull/7430) by [@kachkaev](https://github.com/kachkaev))\n\n[Since version 1.9](https://prettier.io/blog/2017/12/05/1.9.0.html#option-to-add-parens-in-arrow-function-arguments-3324httpsgithubcomprettierprettierpull3324-by-rattrayalexhttpsgithubcomrattrayalex-and-suchipihttpsgithubcomsuchipi), Prettier has had an [option](https://prettier.io/docs/en/options.html#arrow-function-parentheses) to always wrap arrow function arguments with parentheses.\nIn version 2.0, this behavior has become the default.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst fn = (x) => y => x + y;\n\n// Prettier 1.19\nconst fn = x => y => x + y;\n\n// Prettier 2.0\nconst fn = (x) => (y) => x + y;\n```\n\nAt first glance, avoiding parentheses in the isolated example above may look like a better choice because it results in less visual noise.\nHowever, when Prettier removes parentheses, it becomes harder to add type annotations, extra arguments, default values, or a variety of [other things](https://twitter.com/ManuelBieh/status/1181880524954050560).\nConsistent use of parentheses provides a better developer experience when editing real codebases, which justifies the change.\n\nYou are encouraged to use the new default value, but if the old behavior is still preferred, please configure Prettier with `{ \"arrowParens\": \"avoid\" }`.\n\n#### Change default value for `endOfLine` to `lf` ([#7435](https://github.com/prettier/prettier/pull/7435) by [@kachkaev](https://github.com/kachkaev))\n\nEarly versions of Prettier were formatting all files with the \\*nix flavor of [line endings](https://en.wikipedia.org/wiki/Newline) (`\\n`, also known as `LF`).\nThis behavior was changed in [#472](https://github.com/prettier/prettier/pull/472), which allowed preserving Windows line endings (`\\r\\n`, also known as `CRLF`).\n\n[Since Prettier version 1.15](https://prettier.io/blog/2018/11/07/1.15.0.html#add-an-option-to-enforce-line-endings-5327-by-kachkaev), the flavor of line endings has been configurable via the `endOfLine` option.\nThe default value was set to `auto` for backwards compatibility, which meant that Prettier preserved whichever flavor of line endings was already present in a given file.\n\nThat meant Prettier converted mixed line endings within one file to what was found at the end of the first line.\nHowever, line endings in separate files could still remain inconsistent.\nBesides, contributors on different operating systems could accidentally change line endings in previously committed files and this would be fine with Prettier.\nDoing so would produce a large `git diff` and thus make the line-by-line history for a file (`git blame`) harder to explore.\n\nYou are encouraged to use the new default value for `endOfLine`, which is now `lf`.\nIt may be also worth [checking the option docs](https://prettier.io/docs/en/options.html#end-of-line) to ensure your project repository is configured correctly.\nThis will help you avoid a mix of line endings in the repo and a broken `git blame`.\nIf the old behavior is still preferred, please configure Prettier with `{ \"endOfLine\": \"auto\" }`.\n\nIf you use Travis CI, be aware of [the `autocrlf` option](https://docs.travis-ci.com/user/customizing-the-build#git-end-of-line-conversion-control) in `.travis.yml`.\n\n#### Cache plugin search results ([#7485](https://github.com/prettier/prettier/pull/7485) by [@fisker](https://github.com/fisker))\n\nPreviously, Prettier searched the file system for plugins on every `prettier.format` call. Now, search results are cached. The cache can be cleared by calling `prettier.clearConfigCache()`.\n\n#### Remove deprecated options and option values ([#6993](https://github.com/prettier/prettier/pull/6993), [#7511](https://github.com/prettier/prettier/pull/7511), [#7533](https://github.com/prettier/prettier/pull/7533), [#7535](https://github.com/prettier/prettier/pull/7535), [#7536](https://github.com/prettier/prettier/pull/7536) by [@fisker](https://github.com/fisker))\n\n- Options:\n  - `useFlowParser` (`--flow-parser` in CLI) has been deprecated [since `v0.0.10`](https://github.com/prettier/prettier/blob/master/CHANGELOG.md#0010).\n- Option values:\n  - `parser`: `babylon` (renamed to `babel` in v1.16.0), `postcss` (renamed to `css` in v1.7.1), `typescript-eslint` (an old alias for `typescript`)\n  - `proseWrap`: `true` (renamed to `always` in v1.9.0), `false` (renamed to `never` in v1.9.0)\n  - `trailingComma`: `true` (renamed to `es5` in v0.19.0), `false` (renamed to `none` in v0.19.0)\n\n#### Remove the `version` parameter of `prettier.getSupportInfo` ([#7620](https://github.com/prettier/prettier/pull/7620) by [@thorn0](https://github.com/thorn0))\n\nSince Prettier 1.8.0, it was possible to pass a version number to `prettier.getSupportInfo` to get information on the languages, options, etc. supported by previous versions. This interesting but apparently not very useful API kept causing maintenance problems and has been removed in Prettier 2.0.0.\n\n## Other changes\n\n### JavaScript\n\n#### Always add a space after the `function` keyword ([#3903](https://github.com/prettier/prettier/pull/3903) by [@j-f1](https://github.com/j-f1), [@josephfrazier](https://github.com/josephfrazier), [@sosukesuzuki](https://github.com/sosukesuzuki), [@thorn0](https://github.com/thorn0); [#7516](https://github.com/prettier/prettier/pull/7516) by [@bakkot](https://github.com/bakkot))\n\nPreviously, a space would be added after the `function` keyword in function declarations, but not in function expressions. Now, for consistency, a space is always added after the `function` keyword. The only exception is generator declarations where `function*` is treated as a whole word.\n\n<!-- prettier-ignore -->\n```ts\n// Prettier 1.19\nconst identity = function(value) {\n  return value;\n};\nfunction identity(value) {\n  return value;\n}\nconst f = function<T>(value: T) {};\nconst g = function*() {};\n\n// Prettier 2.0\nconst identity = function (value) {\n  return value;\n};\nfunction identity(value) {\n  return value;\n}\nconst f = function <T>(value: T) {};\nconst g = function* () {};\n```\n\n#### Fix unstable formatting of labeled statements with comments ([#6984](https://github.com/prettier/prettier/pull/6984) by [@clement26695](https://github.com/clement26695))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nloop1:\n//test\nconst i = 3;\n\n// Prettier 1.19 (first output)\nloop1: //test\nconst i = 3;\n\n// Prettier 1.19 (second output)\n//test\nloop1: const i = 3;\n\n// Prettier 2.0 (first and second outputs)\n//test\nloop1: const i = 3;\n```\n\n#### Fix formatting of logical, binary and sequence expressions in template literals ([#7010](https://github.com/prettier/prettier/pull/7010) by [@evilebottnawi](https://github.com/evilebottnawi))\n\n<!-- prettier-ignore -->\n```js\n// Input\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${foo || bar}`;\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${foo | bar}`;\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${(foo, bar)}`;\n\n// Prettier 1.19\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${foo ||\n  bar}`;\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${foo |\n  bar}`;\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${(foo,\nbar)}`;\n\n// Prettier 2.0\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${\n  foo || bar\n}`;\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${\n  foo | bar\n}`;\n`111111111 222222222 333333333 444444444 555555555 666666666 777777777 ${\n  (foo, bar)\n}`;\n```\n\n#### Fix unstable formatting of logical expressions ([#7026](https://github.com/prettier/prettier/pull/7026) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst averredBathersBoxroomBuggyNurl =\n  bifornCringerMoshedPerplexSawder === 1 ||\n  (askTrovenaBeenaDependsRowans === 2 || glimseGlyphsHazardNoopsTieTie === 3);\n\n// Prettier 1.19 (first output)\nconst averredBathersBoxroomBuggyNurl =\n  bifornCringerMoshedPerplexSawder === 1 ||\n  askTrovenaBeenaDependsRowans === 2 || glimseGlyphsHazardNoopsTieTie === 3;\n\n// Prettier 1.19 (second output)\nconst averredBathersBoxroomBuggyNurl =\n  bifornCringerMoshedPerplexSawder === 1 ||\n  askTrovenaBeenaDependsRowans === 2 ||\n  glimseGlyphsHazardNoopsTieTie === 3;\n\n// Prettier 2.0 (first and second outputs)\nconst averredBathersBoxroomBuggyNurl =\n  bifornCringerMoshedPerplexSawder === 1 ||\n  askTrovenaBeenaDependsRowans === 2 ||\n  glimseGlyphsHazardNoopsTieTie === 3;\n```\n\n#### Format `throw` like `return` ([#7070](https://github.com/prettier/prettier/pull/7070) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction foo() {\n  throw this.hasPlugin(\"dynamicImports\") && this.lookahead().type === tt.parenLeft.right;\n}\n\n// Prettier 1.19\nfunction foo() {\n  throw this.hasPlugin(\"dynamicImports\") &&\n    this.lookahead().type === tt.parenLeft.right;\n}\n\n\n// Prettier 2.0\nfunction foo() {\n  throw (\n    this.hasPlugin(\"dynamicImports\") &&\n    this.lookahead().type === tt.parenLeft.right\n  );\n}\n```\n\n#### Fix indentation in ternaries nested in conditions of other ternaries ([#7087](https://github.com/prettier/prettier/pull/7087) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst foo = (number % 10 >= 2 && (number % 100 < 10 || number % 100 >= 20) ?\nkochabCooieGameOnOboleUnweave : annularCooeedSplicesWalksWayWay)\n? anodyneCondosMalateOverateRetinol : averredBathersBoxroomBuggyNurl;\n\n// Prettier 1.19\nconst foo = (number % 10 >= 2 && (number % 100 < 10 || number % 100 >= 20)\n? kochabCooieGameOnOboleUnweave\n: annularCooeedSplicesWalksWayWay)\n  ? anodyneCondosMalateOverateRetinol\n  : averredBathersBoxroomBuggyNurl;\n\n// Prettier 2.0\nconst foo = (\n  number % 10 >= 2 && (number % 100 < 10 || number % 100 >= 20)\n    ? kochabCooieGameOnOboleUnweave\n    : annularCooeedSplicesWalksWayWay\n)\n  ? anodyneCondosMalateOverateRetinol\n  : averredBathersBoxroomBuggyNurl;\n```\n\n#### Tweak function composition logic for decorators ([#7138](https://github.com/prettier/prettier/pull/7138) by [@brainkim](https://github.com/brainkim))\n\nBecause decorators modify the line following, splitting a decorator call’s\narguments onto multiple lines can obscure the relationship between the\ndecorator and its intended target, producing less-readable code. Therefore, the\nfunction composition logic introduced in [#6033](https://github.com/prettier/prettier/pull/6033) has been changed to exclude\ndecorator calls.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nexport class Item {\n  @OneToOne(() => Thing, x => x.item)\n  thing!: Thing;\n}\n\n// Prettier 1.19\nexport class Item {\n  @OneToOne(\n    () => Thing,\n    x => x.item,\n  )\n  thing!: Thing;\n}\n\n// Prettier 2.0\nexport class Item {\n  @OneToOne(() => Thing, x => x.item)\n  thing!: Thing;\n}\n```\n\n#### Correct semicolon placement in empty `return` statement with comment ([#7140](https://github.com/prettier/prettier/pull/7140) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```js\n// Input\nreturn // comment\n;\n\n// Prettier 1.19\nreturn // comment;\n\n// Prettier 2.0\nreturn; // comment\n```\n\n#### Respect whitespace significance in HTML template literals ([#7208](https://github.com/prettier/prettier/pull/7208) by [@saschanaz](https://github.com/saschanaz))\n\nPrettier had been adding newlines for every HTML template string, which could lead to unexpected whitespace in rendered HTML.\nThis doesn't happen anymore unless `--html-whitespace-sensitivity ignore` option is given.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nhtml`<div>`;\nhtml`  <span>TEXT</span>  `;\n\n// Prettier 1.19\nhtml`\n  <div></div>\n`;\nhtml`\n  <span>TEXT</span>\n`;\n\n// Prettier 2.0\nhtml`<div></div>`;\nhtml` <span>TEXT</span> `;\n```\n\n#### Remove unnecessary parens when yielding JSX ([#7367](https://github.com/prettier/prettier/pull/7367) by [@cola119](https://github.com/cola119))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfunction* f() {\n  yield <div>generator</div>;\n}\n\n// Prettier 1.19\nfunction* f() {\n  yield (<div>generator</div>);\n}\n\n// Prettier 2.0\nfunction* f() {\n  yield <div>generator</div>;\n}\n```\n\n#### Keep parentheses around comma expressions in default export declarations ([#7491](https://github.com/prettier/prettier/pull/7491) by [@fisker](https://github.com/fisker))\n\nOmitting these parentheses makes the code invalid.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nexport default (1, 2);\n\n// Prettier 1.19\nexport default 1, 2;\n\n// Prettier 2.0\nexport default (1, 2);\n```\n\n#### Fix edge cases with parentheses around optional chaining ([#7500](https://github.com/prettier/prettier/pull/7500) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n(foo?.bar)();\nnew (foo?.bar)();\n\n// Prettier 1.19\nfoo?.bar();\nnew foo?.bar();\n\n// Prettier 2.0\n(foo?.bar)();\nnew (foo?.bar)();\n```\n\n#### Don't wrap `undefined` in parentheses in conditional expressions within JSX ([#7504](https://github.com/prettier/prettier/pull/7504) by [@fisker](https://github.com/fisker))\n\nPreviously, parentheses were added around any expression except `null`. Now, `undefined` is excluded too.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfoo ? <span>loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong jsx</span> :\nundefined\nfoo ? <span>loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong jsx</span> :\nnull\n\n// Prettier 1.19\nfoo ? (\n  <span>\n    loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong jsx\n  </span>\n) : (\n  undefined\n);\nfoo ? (\n  <span>\n    loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong jsx\n  </span>\n) : null;\n\n// Prettier 2.0\nfoo ? (\n  <span>\n    loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong jsx\n  </span>\n) : undefined;\nfoo ? (\n  <span>\n    loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong jsx\n  </span>\n) : null;\n```\n\n#### Keep comments position for assignments/variables ([#7709](https://github.com/prettier/prettier/pull/7709) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst foo = /* comments */\n  bar;\n\n// Prettier 1.19\nconst foo /* comments */ = bar;\n\n// Prettier 2.0\nconst foo = /* comments */ bar;\n```\n\n### TypeScript\n\n#### Babel as an alternative parser for TypeScript ([#6400](https://github.com/prettier/prettier/pull/6400) by [@JounQin](https://github.com/JounQin) & [@thorn0](https://github.com/thorn0))\n\nA new value for the `parser` option has been added: `babel-ts`, which makes use of Babel’s TypeScript plugin. The `babel-ts` parser supports JavaScript features not yet supported by TypeScript (ECMAScript proposals, e.g. [private methods and accessors](https://github.com/tc39/proposal-private-methods)), but it's less permissive when it comes to error recovery and less battle-tested than the `typescript` parser. While Babel’s TypeScript plugin is quite mature, ASTs produced by the two parsers aren't 100% compatible. We tried to take the discrepancies into account, but there are most likely still cases where code gets formatted differently or even incorrectly. We call upon you, our users, to help us find such cases. If you see them, please raise issues. In the long run, this will help with [unifying the AST format](https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/typescript-estree#ast-alignment-tests) in future versions of the parsers and thus contribute to a better, more solid JavaScript parser ecosystem.\n\n#### Fix formatting of complex types in arrow function return type annotations ([#6901](https://github.com/prettier/prettier/pull/6901) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nexport const getVehicleDescriptor = async (\n  vehicleId: string\n): Promise<\n  Collections.Parts.PrintedCircuitBoardAssembly[\"attributes\"] & undefined\n> => {};\n\n// Prettier 1.19\nexport const getVehicleDescriptor = async (\n  vehicleId: string\n): Promise<Collections.Parts.PrintedCircuitBoardAssembly[\"attributes\"] &\n  undefined> => {};\n\n// Prettier 2.0\nexport const getVehicleDescriptor = async (\n  vehicleId: string\n): Promise<\n  Collections.Parts.PrintedCircuitBoardAssembly[\"attributes\"] & undefined\n> => {};\n```\n\n#### Print JSDoc-only types as is instead of throwing errors ([#7020](https://github.com/prettier/prettier/pull/7020) by [@thorn0](https://github.com/thorn0))\n\nAnother fix related to error recovery. Should come in handy to those who migrate from Flow to TypeScript.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfunction fromFlow(arg: ?Maybe) {}\n\n// Prettier 1.19\nError: unknown type: \"TSJSDocNullableType\"\n\n// Prettier 2.0\nfunction fromFlow(arg: ?Maybe) {}\n```\n\n#### Don't print trailing commas after rest elements in tuples ([#7075](https://github.com/prettier/prettier/pull/7075) by [@thorn0](https://github.com/thorn0))\n\n- A rest element is always the last element of a tuple type. Nothing can be added after it.\n- While TS is okay with this comma, [Babel doesn't parse it](https://github.com/babel/babel/issues/10769)\n- In function parameters and array destructuring, such a comma is a syntax error. Keeping it in tuples is inconsistent.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\ntype ValidateArgs = [\n\t{\n\t\t[key: string]: any;\n\t},\n\tstring,\n\t...string[],\n];\n\n// Prettier 1.19\ntype ValidateArgs = [\n  {\n    [key: string]: any;\n  },\n  string,\n  ...string[],\n];\n\n// Prettier 2.0\ntype ValidateArgs = [\n  {\n    [key: string]: any;\n  },\n  string,\n  ...string[]\n];\n```\n\n#### Fix indentation of arrow functions in variable declarations followed by comments ([#7094](https://github.com/prettier/prettier/pull/7094) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\nThis could happen with code written in the no-semicolon style if the statement after the variable declaration was prefixed with a semicolon to avoid ASI issues.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst foo = () => {\n  return\n}\n\n// foo\n;[1,2,3].forEach(bar)\n\n// Prettier 1.19\nconst foo = () => {\n    return;\n  };\n\n  // foo\n[1, 2, 3].forEach(bar);\n\n// Prettier 2.0\nconst foo = () => {\n  return;\n};\n\n// foo\n[1, 2, 3].forEach(bar);\n```\n\n#### Fix printing of comments in function types ([#7104](https://github.com/prettier/prettier/pull/7104) by [@thorn0](https://github.com/thorn0))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype f1 = (\n  currentRequest: {a: number},\n  // TODO this is a very very very very long comment that makes it go > 80 columns\n) => number;\n\n// Prettier 1.19\ntype f1 = (currentRequest: {\n  a: number;\n}) => // TODO this is a very very very very long comment that makes it go > 80 columns\nnumber;\n\n// Prettier 2.0\ntype f1 = (\n  currentRequest: { a: number }\n  // TODO this is a very very very very long comment that makes it go > 80 columns\n) => number;\n```\n\n#### Fix formatting of comments for function-like nodes ([#7144](https://github.com/prettier/prettier/pull/7144) by [@armano2](https://github.com/armano2))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ninterface foo1 {\n  bar1/* foo */ (/* baz */) // bat\n  bar2/* foo */ ? /* bar */ (/* baz */) /* bat */;\n  bar3/* foo */ (/* baz */) /* bat */\n  bar4/* foo */ ? /* bar */ (bar: /* baz */ string): /* bat */ string;\n  /* foo */ (/* bar */): /* baz */ string;\n  /* foo */ (bar: /* bar */ string): /* baz */ string;\n  /* foo */ new /* bar */  (a: /* baz */ string): /* bat */ string\n  /* foo */ new /* bar */ (/* baz */): /* bat */ string\n}\n\ntype foo7 = /* foo */ (/* bar */) /* baz */ => void\ntype foo8 = /* foo */ (a: /* bar */ string) /* baz */ => void\nlet foo9: new /* foo */ (/* bar */) /* baz */ => string;\nlet foo10: new /* foo */ (a: /* bar */ string) /* baz */ => string;\n\n// Prettier 1.19\ninterface foo1 {\n  bar1 /* foo */ /* baz */(); // bat\n  bar2 /* foo */ /* bar */ /* baz */ /* bat */?();\n  bar3 /* foo */ /* baz */() /* bat */;\n  bar4 /* foo */?(/* bar */ bar: /* baz */ string): /* bat */ string;\n  /* foo */ (): /* bar */ /* baz */ string;\n  /* foo */ (bar: /* bar */ string): /* baz */ string;\n  /* foo */ new (/* bar */ a: /* baz */ string): /* bat */ string;\n  /* foo */ new (): /* bar */ /* baz */ /* bat */ string;\n}\n\ntype foo7 = /* foo */ () => /* bar */ /* baz */ void;\ntype foo8 = /* foo */ (a: /* bar */ string) => /* baz */ void;\nlet foo9: new () => /* foo */ /* bar */ /* baz */ string;\nlet foo10: new (/* foo */ a: /* bar */ string) => /* baz */ string;\n\n// Prettier 2.0\ninterface foo1 {\n  bar1 /* foo */(/* baz */); // bat\n  bar2 /* foo */ /* bar */?(/* baz */) /* bat */;\n  bar3 /* foo */(/* baz */) /* bat */;\n  bar4 /* foo */?(/* bar */ bar: /* baz */ string): /* bat */ string;\n  /* foo */ (/* bar */): /* baz */ string;\n  /* foo */ (bar: /* bar */ string): /* baz */ string;\n  /* foo */ new (/* bar */ a: /* baz */ string): /* bat */ string;\n  /* foo */ new (/* baz */): /* bar */ /* bat */ string;\n}\n\ntype foo7 = /* foo */ (/* bar */) => /* baz */ void;\ntype foo8 = /* foo */ (a: /* bar */ string) => /* baz */ void;\nlet foo9: new (/* bar */) => /* foo */ /* baz */ string;\nlet foo10: new (/* foo */ a: /* bar */ string) => /* baz */ string;\n```\n\n<!-- prettier-ignore -->\n```ts\n// Input\nabstract class Test {\n  abstract foo12 /* foo */ (a: /* bar */ string): /* baz */ void\n  abstract foo13 /* foo */ (/* bar */) /* baz */\n}\n\n// Prettier 1.19\nError: Comment \"foo\" was not printed. Please report this error!\n\n// Prettier 2.0\nabstract class Test {\n  abstract foo12 /* foo */(a: /* bar */ string): /* baz */ void;\n  abstract foo13 /* foo */(/* bar */); /* baz */\n}\n```\n\n#### Fix printing of mapped types with the template type omitted ([#7221](https://github.com/prettier/prettier/pull/7221) by [@cola119](https://github.com/cola119))\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype A = { [key in B] };\n\n// Prettier 1.19\ntype A = { [key in B]: };\n\n// Prettier 2.0\ntype A = { [key in B] };\n```\n\n#### Fix edge cases of printing index signatures ([#7228](https://github.com/prettier/prettier/pull/7228) by [@cola119](https://github.com/cola119))\n\nEven though index signatures without type annotations or with multiple parameters aren't valid TypeScript, the TypeScript parser supports this syntax. In line with the [previous error recovery efforts](https://prettier.io/blog/2019/11/09/1.19.0.html#enable-formatting-even-if-there-are-parse-errors-in-some-cases-6816-by-thorn0-and-the-babel-team), Prettier now makes sure its output still can be parsed in these cases. Previous versions produced unparseable code.\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype A = { [key: string] };\ntype B = { [a: string, b: string]: string; };  \n\n// Prettier 1.19\ntype A = { [key: string]:  };\ntype B = { [a: stringb: string]: string };\n\n// Prettier 2.0\ntype A = { [key: string] };\ntype B = { [a: string, b: string]: string };\n```\n\n#### Fix printing of comments in empty type parameters ([#7729](https://github.com/prettier/prettier/pull/7729) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst a: T</* comment */> = 1;\n\n// Prettier 1.19\nError: Comment \"comment\" was not printed. Please report this error!\n\n// Prettier 2.0\nconst a: T</* comment */> = 1;\n```\n\n### Flow\n\n#### Add support for `symbol` ([#7472](https://github.com/prettier/prettier/pull/7472) by [@fisker](https://github.com/fisker))\n\nA new AST node type was introduced in flow@0.114.0, now it's recognized.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst x: symbol = Symbol();\n\n// Prettier after updating Flow, but without this fix\nError: unknown type: \"SymbolTypeAnnotation\"\n\n// Prettier 2.0\nconst x: symbol = Symbol();\n```\n\n#### Add support for decorators ([#7482](https://github.com/prettier/prettier/pull/7482) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n/* @flow */\n@decorator4\nclass Foo {\n  @decorator1\n  method1() {}\n\n  @decorator2\n  @decorator3\n  method2() {}\n}\n\n// Prettier 1.19\nSyntaxError: Unexpected token `@`, expected the token `class` (2:1)\n\n// Prettier 2.0\n/* @flow */\n@decorator4\nclass Foo {\n  @decorator1\n  method1() {}\n\n  @decorator2\n  @decorator3\n  method2() {}\n}\n```\n\n#### Fix private class field declarations ([#7484](https://github.com/prettier/prettier/pull/7484) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```js\n// Input\nclass Foo {\n  #privateProp: number;\n}\n\n// Prettier 1.19\nclass Foo {\n  privateProp: number;\n}\n\n// Prettier 2.0\nclass Foo {\n  #privateProp: number;\n}\n```\n\n### CSS\n\n#### Don't lowercase element names in CSS selectors ([#6947](https://github.com/prettier/prettier/pull/6947) by [@ark120202](https://github.com/ark120202))\n\nPreviously, Prettier already preserved casing of unknown element names, but it did lowercase names of HTML elements.\nThis caused issues when CSS was applied to a case-sensitive document and there was an element with the same name as in HTML, which is the case in NativeScript.\nPrettier now always preserves original casing.\n\n<!-- prettier-ignore -->\n```css\n/* Input */\nLabel {\n}\n\n/* Prettier 1.19 */\nlabel {\n}\n\n/* Prettier 2.0 */\nLabel {\n}\n```\n\n### SCSS\n\n#### Don't add extra comma after last comment in map ([#6918](https://github.com/prettier/prettier/pull/6918) by [@fisker](https://github.com/fisker))\n\nPreviously, when `trailingComma` set to `es5`, an extra comma was added after last comment in an SCSS map.\n\n<!-- prettier-ignore -->\n```scss\n// Input\n$my-map: (\n  'foo': 1, // Comment\n  'bar': 2, // Comment\n);\n\n// Prettier 1.19\n$my-map: (\n  \"foo\": 1,\n  // Comment\n    \"bar\": 2,\n  // Comment,\n);\n\n// Prettier 2.0\n$my-map: (\n  \"foo\": 1,\n  // Comment\n    \"bar\": 2,\n  // Comment\n);\n```\n\n#### Fix whitespace in SCSS concatenation ([#7211](https://github.com/prettier/prettier/pull/7211) by [@sasurau4](https://github.com/sasurau4))\n\n<!-- prettier-ignore -->\n```scss\n// Input\na {\n  background-image: url($test-path + 'static/test.jpg');\n}\n\n// Prettier 1.19\na {\n  background-image: url($test-path+\"static/test.jpg\");\n}\n\n// Prettier 2.0\na {\n  background-image: url($test-path + \"static/test.jpg\");\n}\n```\n\n### Less\n\n#### Fix multiple long-standing issues by updating `postcss-less` ([#6981](https://github.com/prettier/prettier/pull/6981) by [@fisker](https://github.com/fisker), [#7021](https://github.com/prettier/prettier/pull/7021) by [@evilebottnawi](https://github.com/evilebottnawi), [@thorn0](https://github.com/thorn0))\n\n- [`each`](http://lesscss.org/functions/#list-functions-each) is supported now ([#5653](https://github.com/prettier/prettier/issues/5653)).\n- `!important` was being moved out of mixin call parameters ([#3544](https://github.com/prettier/prettier/issues/3544)).\n- Comments in rulesets passed to mixin calls caused duplicate semicolons ([#3096](https://github.com/prettier/prettier/issues/3096)).\n- `::before` was broken in mixin call parameters ([#5791](https://github.com/prettier/prettier/issues/5791)).\n\n### HTML\n\n#### Comments in `pre` tags caused bad formatting of following closing tag ([#5959](https://github.com/prettier/prettier/pull/5959) by [@selvazhagan](https://github.com/selvazhagan))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<details>\n<pre>\n    <!-- TEST -->\n  </pre></details>\n\n<!-- Prettier 1.19 -->\n<details>\n  <pre>\n    <!-- TEST -->\n  </pre></details</details\n>\n\n<!-- Prettier 2.0 -->\n<details>\n  <pre>\n    <!-- TEST -->\n  </pre>\n</details>\n```\n\n#### Don't treat colons as namespace prefix delimiters in tag names ([#7273](https://github.com/prettier/prettier/pull/7273) by [@fisker](https://github.com/fisker))\n\nIn HTML5, colons don't have any special meaning in tag names. Previously, Prettier treated them the XML way, as namespace prefix delimiters, but no more. In practice, this means that tags whose ancestors have colons in their names are now treated as usual HTML tags: if they're known standard tags, their names can be lowercased and assumptions can be made about their whitespace sensitivity; custom elements whose names are unknown to Prettier retain the casing of their names and, if `--html-whitespace-sensitivity` is set to `css`, are treated as inline.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<with:colon>\n<div> looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog block </div>\n<DIV> block </DIV><DIV> block </DIV> <DIV> block </DIV><div> block </div><div> block </div>\n<pre> pre pr\ne</pre>\n<textarea> pre-wrap pr\ne-wrap </textarea>\n<span> looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog inline </span>\n<span> inline </span><span> inline </span> <span> inline </span><span> inline </span>\n</with:colon>\n\n<!-- Prettier 1.19 -->\n<with:colon>\n  <div>\n    looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog block\n  </div>\n  <DIV> block </DIV><DIV> block </DIV> <DIV> block </DIV><div> block </div\n  ><div> block </div>\n  <pre> pre pr e</pre>\n  <textarea> pre-wrap pr e-wrap </textarea>\n  <span>\n    looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog inline\n  </span>\n  <span> inline </span><span> inline </span> <span> inline </span\n  ><span> inline </span>\n</with:colon>\n\n<!-- Prettier 2.0 -->\n<with:colon>\n  <div>\n    looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog block\n  </div>\n  <div>block</div>\n  <div>block</div>\n  <div>block</div>\n  <div>block</div>\n  <div>block</div>\n  <pre>\n pre pr\ne</pre\n  >\n  <textarea>\n pre-wrap pr\ne-wrap </textarea\n  >\n  <span>\n    looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog inline\n  </span>\n  <span> inline </span><span> inline </span> <span> inline </span\n  ><span> inline </span>\n</with:colon>\n```\n\n#### Do not throw on broken HTML ([#7293](https://github.com/prettier/prettier/pull/7293) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div><span>\n<\n\n<!-- Prettier 1.19 -->\nTypeError: Cannot read property 'start' of null\n\n<!-- Prettier 2.0 -->\n<div><span> < </span></div>\n```\n\n#### Fix srcset parse error ([#7295](https://github.com/prettier/prettier/pull/7295) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<img\n\nsrcset=\"\n             /media/examples/surfer-240-200.jpg\n\">\n\n<!-- Prettier 1.19 -->\nError: Mixed descriptor in srcset is not supported\n\n<!-- Prettier 2.0 -->\n<img srcset=\"/media/examples/surfer-240-200.jpg\" />\n```\n\n#### Fix error thrown on unclosed tag in `pre` tag ([#7392](https://github.com/prettier/prettier/pull/7392) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<pre><br></pre>\n<pre><hr></pre>\n\n<!-- Prettier 1.19 -->\nTypeError: Cannot read property 'start' of null\n\n<!-- Prettier 2.0 -->\n<pre><br /></pre>\n<pre><hr /></pre>\n```\n\n#### Fix inconsistent formatting of self-closing tags ([#7395](https://github.com/prettier/prettier/pull/7395) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<span><input type=\"checkbox\"/> </span>\n<span><span><input type=\"checkbox\"/></span></span>\n<span><input type=\"checkbox\"/></span>\n\n<!-- Prettier 1.19 -->\n<span><input type=\"checkbox\" /> </span>\n<span\n  ><span><input type=\"checkbox\"/></span\n></span>\n<span><input type=\"checkbox\"/></span>\n\n<!-- Prettier 2.0 -->\n<span><input type=\"checkbox\" /> </span>\n<span\n  ><span><input type=\"checkbox\" /></span\n></span>\n<span><input type=\"checkbox\" /></span>\n```\n\n#### Fix empty lines unexpectedly added after `table` tags ([#7461](https://github.com/prettier/prettier/pull/7461) by [@ikatyang](https://github.com/ikatyang))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<table><tr>\n</tr>\n</table><div>Should not insert empty line before this div</div>\n\n<!-- Prettier 1.19 -->\n<table>\n  <tr></tr>\n</table>\n\n<div>Should not insert empty line before this div</div>\n\n<!-- Prettier 2.0 -->\n<table>\n  <tr></tr>\n</table>\n<div>Should not insert empty line before this div</div>\n```\n\n#### Format value of HTML `class` attribute ([#7555](https://github.com/prettier/prettier/pull/7555) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div class=\"  foo\nbar baz\"></div>\n<div class=\"\nanother element with so many classes\neven can not fit one line\nreally a lot and lot of classes\n\"></div>\n\n<!-- Prettier 1.19 -->\n<div\n  class=\"  foo\nbar baz\"\n></div>\n<div\n  class=\"\nanother element with so many classes\neven can not fit one line\nreally a lot and lot of classes\n\"\n></div>\n\n<!-- Prettier 2.0 -->\n<div class=\"foo bar baz\"></div>\n<div\n  class=\"another element with so many classes even can not fit one line really a lot and lot of classes\"\n></div>\n```\n\n#### Format value of HTML `style` attribute ([#7556](https://github.com/prettier/prettier/pull/7556) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div style=\"   color : red;\n            display    :inline \">\n  </div>\n<div style=\"   color : red;\n            display    :inline; height: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0; \">\n  </div>\n\n<!-- Prettier 1.19 -->\n<div\n  style=\"   color : red;\n            display    :inline \"\n></div>\n<div\n  style=\"   color : red;\n            display    :inline; height: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0; \"\n></div>\n\n\n<!-- Prettier 2.0 -->\n<div style=\"color: red; display: inline;\"></div>\n<div\n  style=\"\n    color: red;\n    display: inline;\n    height: auto;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  \"\n></div>\n```\n\n#### Support `<!-- prettier ignore -->` for text ([#7654](https://github.com/prettier/prettier/pull/7654) by [@graemeworthy](https://github.com/graemeworthy))\n\nPreviously, it worked only for tags. Useful for protecting various macros and pre-processor commands from being corrupted by formatting.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<!-- prettier-ignore -->\nA super long string that has been marked as ignore because it was probably generated by some script.\n\n<!-- Prettier 1.19 -->\n<!-- prettier-ignore -->\nA super long string that has been marked as ignore because it was probably\ngenerated by some script.\n\n<!-- Prettier 2.0 -->\n<!-- prettier-ignore -->\nA super long string that has been marked as ignore because it was probably generated by some script.\n```\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<!-- prettier-ignore -->\n| Dogs | Cats | Weasels | Bats | Pigs | Mice | Hedgehogs | Capybaras | Rats | Tigers |\n| ---- | ---- | ------- | ---- | ---- | ---- | --------- | --------- | ---- | ------ |\n|    1 |    1 |       0 |    0 |    1 |    1 |         5 |        16 |    4 |      0 |\n\n<!-- Prettier 1.19 -->\n<!-- prettier-ignore -->\n| Dogs | Cats | Weasels | Bats | Pigs | Mice | Hedgehogs | Capybaras | Rats |\nTigers | | ---- | ---- | ------- | ---- | ---- | ---- | --------- | --------- |\n---- | ------ | | 1 | 1 | 0 | 0 | 1 | 1 | 5 | 16 | 4 | 0 |\n\n<!-- Prettier 2.0 -->\n<!-- prettier-ignore -->\n| Dogs | Cats | Weasels | Bats | Pigs | Mice | Hedgehogs | Capybaras | Rats | Tigers |\n| ---- | ---- | ------- | ---- | ---- | ---- | --------- | --------- | ---- | ------ |\n|    1 |    1 |       0 |    0 |    1 |    1 |         5 |        16 |    4 |      0 |\n```\n\n### Vue\n\n#### Format vue SFC containing JSX script ([#7180](https://github.com/prettier/prettier/pull/7180) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<script lang=\"jsx\">\nexport default {\n  data: () => ({\n    message: 'hello with jsx'\n  }),\n  render(h) {\n\n\n\n    return <div>{this.message}</div>\n  }\n}\n</script>\n\n<!-- Prettier 1.19 -->\n<script lang=\"jsx\">\nexport default {\n  data: () => ({\n    message: 'hello with jsx'\n  }),\n  render(h) {\n\n\n\n    return <div>{this.message}</div>\n  }\n}\n</script>\n\n<!-- Prettier 2.0 -->\n<script lang=\"jsx\">\nexport default {\n  data: () => ({\n    message: \"hello with jsx\"\n  }),\n  render(h) {\n    return <div>{this.message}</div>;\n  }\n};\n</script>\n```\n\n#### Don't print sole string literals in attributes on a new line ([#7479](https://github.com/prettier/prettier/pull/7479) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input -->\n<template>\n<MyComponent\n  :attr1=\"`loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong ${template} literal value`\"\n  :attr2=\"'loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong string literal value'\"/>\n</template>\n\n<!-- Prettier 1.19 -->\n<template>\n  <MyComponent\n    :attr1=\"\n      `loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong ${template} literal value`\n    \"\n    :attr2=\"\n      'loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong string literal value'\n    \"\n  />\n</template>\n\n<!-- Prettier 2.0 -->\n<template>\n  <MyComponent\n    :attr1=\"`loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong ${template} literal value`\"\n    :attr2=\"'loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooong string literal value'\"\n  />\n</template>\n```\n\n#### Fix indentation of Vue expressions ([#7781](https://github.com/prettier/prettier/pull/7781) by [@fisker](https://github.com/fisker))\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input -->\n<template>\n<MyComponent v-if=\"\nlong_long_long_long_long_long_long_condition_1 && long_long_long_long_long_long_long_condition_2 &&\nlong_long_long_long_long_long_long_condition_3 &&\nlong_long_long_long_long_long_long_condition_4\n\"\n:attr=\"\n`loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog string 1` +\n`loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog string 2`\n\"\n/>\n</template>\n\n<!-- Prettier 1.19 -->\n<template>\n  <MyComponent\n    v-if=\"\n      long_long_long_long_long_long_long_condition_1 &&\n        long_long_long_long_long_long_long_condition_2 &&\n        long_long_long_long_long_long_long_condition_3 &&\n        long_long_long_long_long_long_long_condition_4\n    \"\n    :attr=\"\n      `loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog string 1` +\n        `loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog string 2`\n    \"\n  />\n</template>\n\n<!-- Prettier 2.0 -->\n<template>\n  <MyComponent\n    v-if=\"\n      long_long_long_long_long_long_long_condition_1 &&\n      long_long_long_long_long_long_long_condition_2 &&\n      long_long_long_long_long_long_long_condition_3 &&\n      long_long_long_long_long_long_long_condition_4\n    \"\n    :attr=\"\n      `loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog string 1` +\n      `loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog string 2`\n    \"\n  />\n</template>\n\n```\n\n### Angular\n\n#### Unofficial rudimentary support for some of the most used directives of AngularJS 1.x ([#6869](https://github.com/prettier/prettier/pull/6869) by [@thorn0](https://github.com/thorn0))\n\nWhile there are some syntax incompatibilities (one-time bindings and the precedence of `|`) between the expression languages of the old AngularJS and the new Angular, overall the two languages are compatible enough for legacy and hybrid AngularJS-based projects to be able to benefit from using Prettier. Previously, when Prettier formatted AngularJS templates using the Angular parser, it formatted expressions only in interpolations. Now, some of the most used AngularJS directives are formatted too, namely: `ng-if`, `ng-show`, `ng-hide`, `ng-class`, `ng-style`.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div ng-if=\"$ctrl .shouldShowWarning&&!$ctrl.loading  \">Warning!</div>\n\n<!-- Prettier 1.19 -->\n<div ng-if=\"$ctrl .shouldShowWarning&&!$ctrl.loading  \">Warning!</div>\n\n<!-- Prettier 2.0 -->\n<div ng-if=\"$ctrl.shouldShowWarning && !$ctrl.loading\">Warning!</div>\n```\n\n#### Fix formatting of i18n attributes ([#7371](https://github.com/prettier/prettier/pull/7371) by [@thorn0](https://github.com/thorn0))\n\nPrettier 1.19 [added](https://prettier.io/blog/2019/11/09/1.19.0.html#add-formatting-for-i18n-attributes-6695-by-voithos)\nsupport for formatting [i18n attributes](https://angular.io/guide/i18n), but putting the closing quote mark on a new line\nbroke [custom ids](https://angular.io/guide/i18n#set-a-custom-id-for-persistence-and-maintenance). This is fixed now.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div i18n-prop=\"Special-property|This is a special property with much important information@@MyTextId\"\nprop=\"My Text\"></div>\n\n<!-- Prettier 1.19 -->\n<div\n  i18n-prop=\"\n    Special-property|This is a special property with much important\n    information@@MyTextId\n  \"\n  prop=\"My Text\"\n></div>\n\n<!-- Prettier 2.0 -->\n<div\n  i18n-prop=\"\n    Special-property|This is a special property with much important\n    information@@MyTextId\"\n  prop=\"My Text\"\n></div>\n```\n\n### Handlebars (alpha)\n\n#### Fix superfluous line breaks in `ConcatStatement` ([#7051](https://github.com/prettier/prettier/pull/7051) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<a href=\"a-very-long-href-from-a-third-party-marketing-platform{{id}}longer-than-eighty-chars\">Link</a>\n\n{{!-- Prettier 1.19 --}}\n<a\n  href=\"a-very-long-href-from-a-third-party-marketing-platform\n    {{id}}\n    longer-than-eighty-chars\"\n>\n  Link\n</a>\n\n{{!-- Prettier 2.0 --}}\n<a\n  href=\"a-very-long-href-from-a-third-party-marketing-platform{{id}}longer-than-eighty-chars\"\n>\n  Link\n</a>\n```\n\nand\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<div class=\"hello {{if goodbye true}} {{if goodbye false}} {{if goodbye true}} {{if goodbye false}} {{if goodbye true}}\">\n  Hello\n</div>\n\n{{!-- Prettier 1.19 --}}\n<div\n  class=\"hello\n    {{if goodbye true}}\n\n    {{if goodbye false}}\n\n    {{if goodbye true}}\n\n    {{if goodbye false}}\n\n    {{if goodbye true}}\"\n>\n  Hello\n</div>\n\n{{!-- Prettier 2.0 --}}\n<div\n  class=\"hello {{if goodbye true}} {{if goodbye false}} {{if goodbye true}} {{if\n      goodbye\n      false\n    }} {{if goodbye true}}\"\n>\n  Hello\n</div>\n```\n\n#### Fix a falling mustache issue ([#7052](https://github.com/prettier/prettier/pull/7052) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<GlimmerComponent @progress={{aPropertyEndingAfterEightiethColumnToHighlightAWeirdClosingParenIssue}} />\n\n{{!-- Prettier 1.19 --}}\n<GlimmerComponent\n  @progress={{aPropertyEndingAfterEightiethColumnToHighlightAWeirdClosingParenIssue\n  }}\n/>\n\n{{!-- Prettier 2.0 --}}\n<GlimmerComponent\n  @progress={{aPropertyEndingAfterEightiethColumnToHighlightAWeirdClosingParenIssue}}\n/>\n```\n\n#### Improve `MustacheStatement` printing ([#7157](https://github.com/prettier/prettier/pull/7157) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<p>Hi here is your name, as it will be displayed  {{firstName}}  {{lastName}}   , welcome!</p>\n\n{{!-- Prettier 1.19 --}}\n<p>\n  Hi here is your name, as it will be displayed {{firstName}} {{lastName\n  }} , welcome!\n</p>\n\n{{!-- Prettier 2.0 --}}\n<p>\n  Hi here is your name, as it will be displayed {{firstName}} {{\n    lastName\n  }} , welcome!\n</p>\n```\n\n#### Add support for `prettier-ignore` ([#7275](https://github.com/prettier/prettier/pull/7275) by [@chadian](https://github.com/chadian))\n\n<!-- prettier-ignore -->\n```hbs\n{{! Input }}\n{{! prettier-ignore }}\n<div>\n  \"hello! my parent was ignored\"\n  {{#my-crazy-component     \"shall\"     be=\"preserved\"}}\n    <This\n\n      is=\"preserved\"\n    />\n  {{/my-crazy-component}}\n</div>\n\n{{#a-normal-component    isRestoredTo   = \"order\"    }}\n  <ThisWillBeNormal backTo    =   \"normal\" />\n{{/a-normal-component}}\n\n{{! Prettier 1.19 }}\n{{! prettier-ignore }}\n<div>\n  \"hello! my parent was ignored\"\n  {{#my-crazy-component \"shall\" be=\"preserved\"}}\n    <This is=\"preserved\" />\n  {{/my-crazy-component}}\n</div>\n\n{{#a-normal-component isRestoredTo=\"order\"}}\n  <ThisWillBeNormal backTo=\"normal\" />\n{{/a-normal-component}}\n\n{{! Prettier 2.0 }}\n{{! prettier-ignore }}\n<div>\n  \"hello! my parent was ignored\"\n  {{#my-crazy-component     \"shall\"     be=\"preserved\"}}\n    <This\n\n      is=\"preserved\"\n    />\n  {{/my-crazy-component}}\n</div>\n\n{{#a-normal-component isRestoredTo='order'}}\n  <ThisWillBeNormal backTo='normal' />\n{{/a-normal-component}}\n```\n\n#### Support printing inline Handlebars in HTML ([#7306](https://github.com/prettier/prettier/pull/7306) by [@dcyriller](https://github.com/dcyriller))\n\n<!-- prettier-ignore -->\n```\n<!-- Input -->\n<script type=\"text/x-handlebars-template\">\n  {{component arg1='hey' arg2=(helper this.arg7 this.arg4) arg3=anotherone arg6=this.arg8}}\n</script>\n\n<!-- Prettier 1.19 -->\n<script type=\"text/x-handlebars-template\">\n  {{component arg1='hey' arg2=(helper this.arg7 this.arg4) arg3=anotherone arg6=this.arg8}}\n</script>\n\n<!-- Prettier 2.0 -->\n<script type=\"text/x-handlebars-template\">\n  {{component\n    arg1='hey'\n    arg2=(helper this.arg7 this.arg4)\n    arg3=anotherone\n    arg6=this.arg8\n  }}\n</script>\n```\n\n#### Fix stripped value from AttrNode ([#7552](https://github.com/prettier/prettier/pull/7552) by [@bantic](https://github.com/bantic))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n<ul class=\"abc\n       def\">\n</ul>\n\n{{!-- Prettier 1.19 --}}\n<ul class></ul>\n\n{{!-- Prettier 2.0 --}}\n<ul class=\"abc\n       def\">\n</ul>\n```\n\n#### Preserve whitespace control characters ([#7575](https://github.com/prettier/prettier/pull/7575) by [@mahirshah](https://github.com/mahirshah))\n\n<!-- prettier-ignore -->\n```hbs\n{{!-- Input --}}\n{{~#if bar}}\n  if1\n{{~else~}}\n  else\n{{~/if~}}\n\n{{!-- Prettier 1.19 --}}\n{{#if bar}}\n  if1\n{{else}}\n  else\n{{/if}}\n\n{{!-- Prettier 2.0 --}}\n{{~#if bar}}\n  if1\n{{~else~}}\n  else\n{{~/if~}}\n```\n\n### GraphQL\n\n#### Improve detection of separator between interfaces ([#7305](https://github.com/prettier/prettier/pull/7305) by [@fisker](https://github.com/fisker))\n\nEven though using a comma to separate multiple implemented interfaces is deprecated syntax, in order to support legacy use cases, Prettier keeps the original separator and doesn't wilfully replace commas with ampersands. Previously, however, this logic contained a bug, so the wrong separator could end up in the output. This is fixed now.\n\n<!-- prettier-ignore -->\n```graphql\n# Input\ntype Type1 implements A, B\n# { &  <-- Removing this comment changes the separator in 1.19\n{a: a}\n\ntype Type2 implements A, B & C{a: a}\n\n# Prettier 1.19\ntype Type1 implements A & B {\n  # { &  <-- Removing this comment changes the separator in 1.19\n  a: a\n}\n\ntype Type2 implements A & B & C {\n  a: a\n}\n\n# Prettier 2.0\ntype Type1 implements A, B {\n  # { &  <-- Removing this comment changes the separator in 1.19\n  a: a\n}\n\ntype Type2 implements A, B & C {\n  a: a\n}\n```\n\n### Markdown\n\n#### Handle zero-based lists correctly ([#6852](https://github.com/prettier/prettier/pull/6852) by [@evilebottnawi](https://github.com/evilebottnawi))\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n0. List\n1. List\n2. List\n\n<!-- Prettier 1.19 -->\n0. List\n1. List\n1. List\n\n<!-- Prettier 2.0 -->\n0. List\n1. List\n2. List\n```\n\n#### Fix HTML formatting broken if the beginning tag starts after a list item ([#7181](https://github.com/prettier/prettier/pull/7181) and [#7220](https://github.com/prettier/prettier/pull/7220) by [@sasurau4](https://github.com/sasurau4))\n\nPreviously, when Prettier formatted an HTML tag placed just after a list item, it would insert indent and break the relationship of open and close tag. Now, Prettier no longer changes anything.\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n- A list item.\n<details><summary>Summary</summary>\n<p>\n\n- A list item.\n\n</p>\n</details>\n\n- A list item\n  <blockquote>asdf</blockquote>\n\n<!-- Prettier 1.19 -->\n- A list item.\n\n  <details><summary>Summary</summary>\n  <p>\n\n- A list item.\n\n</p>\n</details>\n\n- A list item\n  <blockquote>asdf</blockquote>\n\n<!-- Prettier 2.0 -->\n- A list item.\n<details><summary>Summary</summary>\n<p>\n\n- A list item.\n\n</p>\n</details>\n\n- A list item\n  <blockquote>asdf</blockquote>\n```\n\n#### Fix formatting of multi-line footnote ([#7203](https://github.com/prettier/prettier/pull/7203) by [@sasurau4](https://github.com/sasurau4))\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\nHere's a statement[^footnote].\n\n[^footnote]:\n    Here's a multi-line footnote walking back the above statement, and showing\n    how it's all totally bollocks.\n\n<!-- Prettier 1.19 -->\nHere's a statement[^footnote].\n\n[^footnote]:\n\n  Here's a multi-line footnote walking back the above statement, and showing\n  how it's all totally bollocks.\n\n<!-- Prettier 2.0 -->\nHere's a statement[^footnote].\n\n[^footnote]:\n  Here's a multi-line footnote walking back the above statement, and showing\n  how it's all totally bollocks.\n```\n\n### MDX\n\n#### Add support for JSX fragments ([#6398](https://github.com/prettier/prettier/pull/6398) by [@JounQin](https://github.com/JounQin))\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n<>\n    test   <World        />   test\n</>       123\n\n<!-- Prettier 1.19 -->\n<>\ntest <World        /> test\n</> 123\n\n<!-- Prettier 2.0 -->\n<>\n  test <World /> test\n</> 123\n```\n\n#### Fix JSX parsing bugs introduced in Prettier 1.19 ([#6949](https://github.com/prettier/prettier/pull/6949) by [@Tigge](https://github.com/Tigge) & [@thorn0](https://github.com/thorn0))\n\nMDX parsing for JSX failed when encountering JSX elements that where not\nparsable as HTML, such as `<Tag value={{a: 'b'}}>test</Tag>`\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n\n<Tag  value={ {a :  'b'   } }>test</ Tag>\n\n<Foo bg={ 'red' } >\n   <div  style={{   display:   'block'}   }>\n      <Bar    >hi    </Bar>\n       {  hello       }\n         {     /* another comment */}\n            </div>\n</Foo>\n\n<!-- Prettier 1.19 -->\n\nSyntaxError: Unexpected closing tag \"Tag\". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags (1:35)\n> 1 | <Tag  value={ {a :  'b'   } }>test</ Tag>\n\n<!-- Prettier 2.0 -->\n\n<Tag value={{ a: \"b\" }}>test</Tag>\n\n<Foo bg={\"red\"}>\n  <div style={{ display: \"block\" }}>\n    <Bar>hi </Bar>\n    {hello}\n    {/* another comment */}\n  </div>\n</Foo>\n\n```\n\n### CLI\n\n#### Support file extensions `.cjs` and `.yaml.sed` ([#7210](https://github.com/prettier/prettier/pull/7210) by [@sosukesuzuki](https://github.com/sosukesuzuki))\n\n```sh\n# Prettier 1.19\n$ prettier test.cjs\ntest.cjs[error] No parser could be inferred for file: test.cjs\n\n# Prettier 2.0\n$ prettier test.cjs\n\"use strict\";\nconsole.log(\"Hello, World!\");\n```\n\n#### Respect `--ignore-path` when prettier executes from a subdirectory ([#7588](https://github.com/prettier/prettier/pull/7588) by [@heylookltsme](https://github.com/heylookltsme))\n\nChanges the filename used when filtering ignored files to be relative to the\n`--ignore-path`, if present, rather than the current working directory.\n\n#### Remove `--stdin` ([#7668](https://github.com/prettier/prettier/pull/7668) by [@thorn0](https://github.com/thorn0))\n\nThis CLI flag, never properly documented, was supposed to make Prettier CLI read input from stdin, but Prettier CLI does so anyway when not given any file paths or glob patterns. So the flag was redundant. Now that it's been removed, if you use this flag in your commands, you'll see a warning: \"Ignored unknown option\". This warning is just information. It doesn't prevent the command from doing what it should do and doesn't affect the exit code."
    },
    {
      "id": "/2019/11/09/1.19.0",
      "metadata": {
        "permalink": "/blog/2019/11/09/1.19.0",
        "source": "@site/blog/2019-11-09-1.19.0.md",
        "title": "Prettier 1.19: Long awaited Vue option, TypeScript 3.7 and new JavaScript features",
        "description": "This release adds the long awaited --vue-indent-script-and-style option, support for TypeScript 3.7 and some cutting edge JavaScript syntax. Not to mention a whole bunch of bug fixes and improvements!",
        "date": "2019-11-09T00:00:00.000Z",
        "formattedDate": "November 9, 2019",
        "tags": [],
        "readingTime": 26.17,
        "truncated": true,
        "authors": [
          {
            "name": "Simon Lydell (@lydell)",
            "url": "https://github.com/lydell"
          }
        ],
        "frontMatter": {
          "author": "Simon Lydell (@lydell)",
          "authorURL": "https://github.com/lydell",
          "title": "Prettier 1.19: Long awaited Vue option, TypeScript 3.7 and new JavaScript features"
        },
        "prevItem": {
          "title": "Prettier 2.0 “2020”",
          "permalink": "/blog/2020/03/21/2.0.0"
        },
        "nextItem": {
          "title": "Prettier 1.18: Lots of fixes and OpenCollective",
          "permalink": "/blog/2019/06/06/1.18.0"
        }
      },
      "content": "This release adds the long awaited `--vue-indent-script-and-style` option, support for TypeScript 3.7 and some cutting edge JavaScript syntax. Not to mention a whole bunch of bug fixes and improvements!\n\n<!--truncate-->\n\n## Highlights\n\n### Vue\n\n#### Add `--vue-indent-script-and-style` ([#6157] by [@kamilic])\n\nThe new [`--vue-indent-script-and-style`](https://prettier.io/docs/en/options.html#vue-files-script-and-style-tags-indentation) option controls whether or not to indent the code inside `<script>` and `<style>` tags in Vue files. Some people (like [the creator of Vue](https://github.com/prettier/prettier/issues/3888#issuecomment-459521863)) don’t indent to save an indentation level, but this might break code folding in your editor. This closes our most commented issue so far, and should improve lots of Vue coders’ editing experience!\n\n### TypeScript\n\n#### Support for TypeScript 3.7 ([#6657] by [@cryrivers])\n\nPrettier 1.19 adds support for the features of the upcoming TypeScript 3.7 that introduce new syntax:\n\n- [Optional chaining](https://devblogs.microsoft.com/typescript/announcing-typescript-3-7-rc/#optional-chaining)\n- [Nullish coalescing](https://devblogs.microsoft.com/typescript/announcing-typescript-3-7-rc/#nullish-coalescing)\n- [Assertion functions](https://devblogs.microsoft.com/typescript/announcing-typescript-3-7-rc/#assertion-functions)\n- [`declare` modifier on class fields](https://github.com/microsoft/TypeScript/pull/33509)\n\n(Note: A dependency upgrade for TypeScript 3.7 led to dropping Node.js 6 support for direct installation from GitHub. Prettier installed from npm stays compatible with Node.js 4.)\n\n##### Optional Chaining\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst longChain = obj?.a?.b?.c?.d?.e?.f?.g;\nconst longChainCallExpression = obj.a?.(a,b,c).b?.(a,b,c).c?.(a,b,c).d?.(a,b,c).e?.(a,b,c).f?.(a,b,c)\n\n// Prettier 1.19\nconst longChain = obj?.a?.b?.c?.d?.e?.f?.g;\nconst longChainCallExpression = obj\n  .a?.(a, b, c)\n  .b?.(a, b, c)\n  .c?.(a, b, c)\n  .d?.(a, b, c)\n  .e?.(a, b, c)\n  .f?.(a, b, c);\n```\n\n##### Nullish Coalescing\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst cond = null;\nconst result = cond??'a';\nconst longChain = cond??cond??cond??'b';\n\n// Prettier 1.19\nconst cond = null;\nconst result = cond ?? \"a\";\nconst longChain = cond ?? cond ?? cond ?? \"b\";\n```\n\n##### Assertion Functions\n\n<!-- prettier-ignore -->\n```ts\n// Input\nfunction assertsString(x: any): asserts x {console.assert(typeof x === 'string');}\nfunction assertsStringWithGuard(x: any): asserts x is string {console.assert(typeof x === 'string');}\n\n// Prettier 1.19\nfunction assertsString(x: any): asserts x {\n  console.assert(typeof x === \"string\");\n}\nfunction assertsStringWithGuard(x: any): asserts x is string {\n  console.assert(typeof x === \"string\");\n}\n```\n\n##### `declare` Modifier on Class Fields\n\n<!-- prettier-ignore -->\n```ts\n// Input\nclass B {p: number;}\nclass C extends B {declare p: 256 | 1000;}\n\n// Prettier 1.19\nclass B {\n  p: number;\n}\nclass C extends B {\n  declare p: 256 | 1000;\n}\n```\n\n### JavaScript\n\n#### Add support for [partial application syntax](https://github.com/tc39/proposal-partial-application) ([#6397] by [@JounQin])\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst addOne = add(1, ?); // apply from the left\naddOne(2); // 3\n\nconst addTen = add(?, 10); // apply from the right\naddTen(2); // 12\n\n// with pipeline\nlet newScore = player.score\n  |> add(7, ?)\n  |> clamp(0, 100, ?); // shallow stack, the pipe to `clamp` is the same frame as the pipe to `add`.\n\n// Prettier 1.18\nSyntaxError: Unexpected token (1:23)\n> 1 | const addOne = add(1, ?); // apply from the left\n    |                       ^\n  2 | addOne(2); // 3\n  3 |\n  4 | const addTen = add(?, 10); // apply from the right\n\n// Prettier 1.19\nconst addOne = add(1, ?); // apply from the left\naddOne(2); // 3\n\nconst addTen = add(?, 10); // apply from the right\naddTen(2); // 12\n\n// with pipeline\nlet newScore = player.score |> add(7, ?) |> clamp(0, 100, ?); // shallow stack, the pipe to \\`clamp\\` is the same frame as the pipe to \\`add\\`.\n```\n\n#### Use function literals in arguments to detect function composition ([#6033] by [@brainkim])\n\nPreviously, we used a set of hard-coded names related to functional programming (`compose`, `flow`, `pipe`, etc.) to detect function composition and chaining patterns in code. This was done so that Prettier would not put code like the following call to `pipe` on the same line even if it fit within the allotted column budget:\n\n<!-- prettier-ignore -->\n```js\nsource$\n  .pipe(\n    filter(x => x % 2 === 0),\n    map(x => x + x),\n    scan((acc, x) => acc + x, 0),\n  )\n  .subscribe(x => console.log(x));\n```\n\nHowever, this heuristic caused people to complain because of false positives where calls to functions or methods matching the hard-coded names would always be split on multiple lines, even if the calls did not contain function arguments ([#5769](https://github.com/prettier/prettier/issues/5769), [#5969](https://github.com/prettier/prettier/issues/5969)). For many, this blanket decision to split functions based on name was both surprising and sub-optimal.\n\nWe now use a refined heuristic which uses the presence of function literals to detect function composition. This heuristic preserves the line-splitting behavior above and eliminates many if not all of the false positives caused by the older heuristic.\n\nTry it out and feel free to provide feedback!\n\n<!-- prettier-ignore -->\n```js\n// Input\neventStore.update(id, _.flow(updater, incrementVersion));\n\n// Prettier 1.18\neventStore.update(\n  id,\n  _.flow(\n    updater,\n    incrementVersion\n  )\n);\n\n// Prettier 1.19\neventStore.update(id, _.flow(updater, incrementVersion));\n```\n\n#### Enable formatting even if there are parse errors in some cases ([#6816] by [@thorn0] and the Babel team)\n\nWe updated the Babel parser to the latest version and got an awesome feature for free. Prettier is now able to format your code even if it is invalid in some cases, which should make your coding experience smoother. This will get better over time as Babel improves their error recovery parsing mode. Read more in the [Babel 7.7.0 blog post](https://babeljs.io/blog/2019/11/05/7.7.0#parser-error-recovery-10363-https-githubcom-babel-babel-pull-10363)!\n\n<!-- prettier-ignore -->\n```js\n// Input\nlet a = {\n  __proto__ : x,\n  __proto__ : y\n}\nlet a = 2\n\n// Prettier 1.18\nSyntaxError: Redefinition of __proto__ property (3:3)\n  1 | let a = {\n  2 |   __proto__ : x,\n> 3 |   __proto__ : y\n    |   ^\n  4 | }\n  5 | let a = 2\n\n// Prettier 1.19\nlet a = {\n  __proto__: x,\n  __proto__: y\n};\nlet a = 2;\n```\n\n## Other changes\n\n### TypeScript\n\n#### Fix optional computed class fields and methods ([#6657] by [@cryrivers], [#6673] by [@thorn0])\n\nThis is still broken if the key is a complex expression, but it has been fixed in these cases:\n\n<!-- prettier-ignore -->\n```ts\n// Input\nclass Foo {\n  [bar]?: number;\n  protected [s]?() {}\n}\n\n// Prettier 1.18\nclass Foo {\n  [bar]: number;\n  protected [s?]() {};\n}\n\n// Prettier 1.19\nclass Foo {\n  [bar]?: number;\n  protected [s]?() {}\n}\n```\n\n#### Comments after JSX element names with type arguments were lost ([#6209] by [@duailibe])\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst comp = (\n  <Foo<number>\n    // This comment goes missing\n    value={4}\n  >\n    Test\n  </Foo>\n);\n\n// Prettier 1.18\nconst comp = <Foo<number> value={4}>Test</Foo>;\n\n// Prettier 1.19\nconst comp = (\n  <Foo<number>\n    // This comment goes missing\n    value={4}\n  >\n    Test\n  </Foo>\n);\n```\n\n#### Fix crashes when using `//` in JSX texts ([#6289] by [@duailibe])\n\nThis version updates the TypeScript parser to correctly handle JSX text with double slashes (`//`). In previous versions, this would cause Prettier to crash.\n\n#### Correctly format long one-line mapped types in one pass ([#6420] by [@sosukesuzuki])\n\nPreviously, when Prettier formatted long one-line mapped types, it would break the line but didn’t add a semicolon until you ran Prettier again, which means Prettier’s idempotence rule was broken. Now, Prettier adds the semicolon in the first run.\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype FooBar<T> = { [P in keyof T]: T[P] extends Something ? Something<T[P]> : T[P] }\n\n// Prettier 1.18\ntype FooBar<T> = {\n  [P in keyof T]: T[P] extends Something ? Something<T[P]> : T[P]\n};\n\n// Prettier 1.19\ntype FooBar<T> = {\n  [P in keyof T]: T[P] extends Something ? Something<T[P]> : T[P];\n};\n```\n\n#### Keep type parameters inline for type annotations in variable declarations ([#6467] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst fooooooooooooooo: SomeThing<boolean> = looooooooooooooooooooooooooooooongNameFunc();\n\n// Prettier 1.18\nconst fooooooooooooooo: SomeThing<\n  boolean\n> = looooooooooooooooooooooooooooooongNameFunc();\n\n// Prettier 1.19\nconst fooooooooooooooo: SomeThing<boolean> = looooooooooooooooooooooooooooooongNameFunc();\n```\n\n#### Sometimes double parentheses around types were removed incorrectly ([#6604] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype A = 0 extends ((1 extends 2  ? 3 : 4)) ? 5 : 6;\ntype B = ((0 extends 1 ? 2 : 3)) extends 4 ? 5 : 6;\ntype C = ((number | string))[\"toString\"];\ntype D = ((keyof T1))[\"foo\"];\n\n// Prettier 1.18\ntype A = 0 extends 1 extends 2 ? 3 : 4 ? 5 : 6;\ntype B = 0 extends 1 ? 2 : 3 extends 4 ? 5 : 6;\ntype C = number | string[\"toString\"];\ntype D = keyof T1[\"foo\"];\n\n// Prettier 1.19\ntype A = 0 extends (1 extends 2 ? 3 : 4) ? 5 : 6;\ntype B = (0 extends 1 ? 2 : 3) extends 4 ? 5 : 6;\ntype C = (number | string)[\"toString\"];\ntype D = (keyof T1)[\"foo\"];\n```\n\n#### Keep parentheses around JSX when needed to avoid syntax errors ([#6640] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```tsx\n// Input\n(<a />).toString();\n\n// Prettier 1.18\n<a />.toString():\n\n// Prettier 1.19\n(<a />).toString();\n```\n\n#### Keep semi for a class property before index signature when no-semi is enabled ([#6728] by [@sosukesuzuki])\n\nAttempting to format Prettier’s output again used to result in a syntax error.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nexport class User {\n  id: number = 2;\n  [key: string]: any\n}\n\n// Prettier 1.18\nexport class User {\n  id: number = 2\n  [key: string]: any\n}\n\n// Prettier 1.19\nexport class User {\n  id: number = 2;\n  [key: string]: any\n}\n```\n\n#### Improve argument expansion with `as` type expressions ([#6471] by [@mattleff])\n\nPreviously, when Prettier formatted a call expression containing an `as` type expression or a type assertion, it would break the line. Now, Prettier uses the expression contained by the `as` type or type assertion to determine line breaks.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst bar = [1,2,3].reduce((carry, value) => {\n  return [...carry, value];\n}, ([] as unknown) as number[]);\n\n// Prettier 1.18\nconst bar = [1, 2, 3].reduce(\n  (carry, value) => {\n    return [...carry, value];\n  },\n  ([] as unknown) as number[]\n);\n\n// Prettier 1.19\nconst bar = [1,2,3].reduce((carry, value) => {\n  return [...carry, value];\n}, ([] as unknown) as number[]);\n```\n\n### TypeScript/Flow\n\n#### Fix indentation for union types inside tuples ([#6381] by [@squidfunk], [#6605] by [@thorn0])\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype A = [\n  | AAAAAAAAAAAAAAAAAAAAAA\n  | BBBBBBBBBBBBBBBBBBBBBB\n  | CCCCCCCCCCCCCCCCCCCCCC\n  | DDDDDDDDDDDDDDDDDDDDDD\n]\n\ntype B = [\n  | AAAAAAAAAAAAAAAAAAAAAA\n  | BBBBBBBBBBBBBBBBBBBBBB\n  | CCCCCCCCCCCCCCCCCCCCCC\n  | DDDDDDDDDDDDDDDDDDDDDD,\n  | AAAAAAAAAAAAAAAAAAAAAA\n  | BBBBBBBBBBBBBBBBBBBBBB\n  | CCCCCCCCCCCCCCCCCCCCCC\n  | DDDDDDDDDDDDDDDDDDDDDD\n]\n\ntype C = [\n  | [AAAAAAAAAAAAAAAAAAAAAA | BBBBBBBBBBBBBBBBBBBBBB | CCCCCCCCCCCCCCCCCCCCCC | DDDDDDDDDDDDDDDDDDDDDD]\n  | [AAAAAAAAAAAAAAAAAAAAAA | BBBBBBBBBBBBBBBBBBBBBB | CCCCCCCCCCCCCCCCCCCCCC | DDDDDDDDDDDDDDDDDDDDDD]\n]\n\n// Prettier 1.18\ntype A = [\n\n    | AAAAAAAAAAAAAAAAAAAAAA\n    | BBBBBBBBBBBBBBBBBBBBBB\n    | CCCCCCCCCCCCCCCCCCCCCC\n    | DDDDDDDDDDDDDDDDDDDDDD\n];\n\ntype B = [\n\n    | AAAAAAAAAAAAAAAAAAAAAA\n    | BBBBBBBBBBBBBBBBBBBBBB\n    | CCCCCCCCCCCCCCCCCCCCCC\n    | DDDDDDDDDDDDDDDDDDDDDD,\n\n    | AAAAAAAAAAAAAAAAAAAAAA\n    | BBBBBBBBBBBBBBBBBBBBBB\n    | CCCCCCCCCCCCCCCCCCCCCC\n    | DDDDDDDDDDDDDDDDDDDDDD\n];\n\ntype C = [\n\n    | [\n\n          | AAAAAAAAAAAAAAAAAAAAAA\n          | BBBBBBBBBBBBBBBBBBBBBB\n          | CCCCCCCCCCCCCCCCCCCCCC\n          | DDDDDDDDDDDDDDDDDDDDDD\n      ]\n    | [\n\n          | AAAAAAAAAAAAAAAAAAAAAA\n          | BBBBBBBBBBBBBBBBBBBBBB\n          | CCCCCCCCCCCCCCCCCCCCCC\n          | DDDDDDDDDDDDDDDDDDDDDD\n      ]\n];\n\n// Prettier 1.19\ntype A = [\n  | AAAAAAAAAAAAAAAAAAAAAA\n  | BBBBBBBBBBBBBBBBBBBBBB\n  | CCCCCCCCCCCCCCCCCCCCCC\n  | DDDDDDDDDDDDDDDDDDDDDD\n];\n\ntype B = [\n  (\n    | AAAAAAAAAAAAAAAAAAAAAA\n    | BBBBBBBBBBBBBBBBBBBBBB\n    | CCCCCCCCCCCCCCCCCCCCCC\n    | DDDDDDDDDDDDDDDDDDDDDD\n  ),\n  (\n    | AAAAAAAAAAAAAAAAAAAAAA\n    | BBBBBBBBBBBBBBBBBBBBBB\n    | CCCCCCCCCCCCCCCCCCCCCC\n    | DDDDDDDDDDDDDDDDDDDDDD\n  )\n];\n\ntype C = [\n  | [\n      | AAAAAAAAAAAAAAAAAAAAAA\n      | BBBBBBBBBBBBBBBBBBBBBB\n      | CCCCCCCCCCCCCCCCCCCCCC\n      | DDDDDDDDDDDDDDDDDDDDDD\n    ]\n  | [\n      | AAAAAAAAAAAAAAAAAAAAAA\n      | BBBBBBBBBBBBBBBBBBBBBB\n      | CCCCCCCCCCCCCCCCCCCCCC\n      | DDDDDDDDDDDDDDDDDDDDDD\n    ]\n];\n```\n\n#### Fix moving comments in function calls like `useEffect` ([#6270] by [@sosukesuzuki])\n\nThis fixes a bug that was affecting function calls with an arrow function as the first argument and an array expression as the second argument, e.g. React's `useEffect`.\nIf a comment was placed on the line before the second argument, Prettier would move it to the line above and corrupt the indentation.\n\nThe bug was only present when using the Flow and TypeScript parsers.\n\n<!-- prettier-ignore -->\n```js\n// Input\nuseEffect(\n  () => {\n    console.log(\"some code\", props.foo);\n  },\n\n  // eslint-disable-line react-hooks/exhaustive-deps\n  []\n);\n\n// Prettier 1.18\nuseEffect(() => {\n  console.log(\"some code\", props.foo);\n}, // eslint-disable-line react-hooks/exhaustive-deps\n[]);\n\n// Prettier 1.19\nuseEffect(\n  () => {\n    console.log(\"some code\", props.foo);\n  },\n\n  // eslint-disable-line react-hooks/exhaustive-deps\n  []\n);\n```\n\n#### Put a closing parenthesis onto a new line after union types ([#6307] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst foo = [abc, def, ghi, jkl, mno, pqr, stu, vwx, yz] as (\n  | string\n  | undefined\n)[];\n\n// Prettier 1.18\nconst foo = [abc, def, ghi, jkl, mno, pqr, stu, vwx, yz] as (\n  | string\n  | undefined)[];\n\n// Prettier 1.19\nconst foo = [abc, def, ghi, jkl, mno, pqr, stu, vwx, yz] as (\n  | string\n  | undefined\n)[];\n```\n\n### Flow\n\n#### Add support for enums ([#6833] by [@gkz])\n\n```js\n// Input\nenum E of string {\n  A = \"a\", B = \"b\"\n}\n\n// Prettier 1.19\nenum E of string {\n  A = \"a\",\n  B = \"b\",\n}\n```\n\n#### Parentheses around arrow functions' return types that have `FunctionTypeAnnotation` nested in `ObjectTypeAnnotation` ([#6717] by [@sosukesuzuki])\n\nThis is a workaround for a [bug](https://github.com/facebook/flow/pull/8163) in the Flow parser. Without the parentheses, the parser throws an error.\n\n```js\n// Input\nconst example1 = (): { p: (string => string) } => (0: any);\n\n// Prettier 1.18\nconst example1 = (): { p: string => string } => (0: any);\n\n// Prettier 1.19\nconst example1 = (): ({ p: string => string }) => (0: any);\n```\n\n### JavaScript\n\n#### Break arrays of arrays/objects if each element has more than one element/property ([#6694] by [@sosukesuzuki])\n\nThis should format your `new Map` and Jest `test.each` calls more nicely.\n\n<!-- prettier-ignore -->\n```js\n// Input\ntest.each([\n  { a: \"1\", b: 1 },\n  { a: \"2\", b: 2 },\n  { a: \"3\", b: 3 }\n])(\"test\", ({ a, b }) => {\n  expect(Number(a)).toBe(b);\n});\n[[0, 1, 2], [0, 1, 2]];\nnew Map([\n  [A, B],\n  [C, D],\n  [E, F],\n  [G, H],\n  [I, J],\n  [K, L],\n  [M, N]\n]);\n\n// Prettier 1.18\ntest.each([{ a: \"1\", b: 1 }, { a: \"2\", b: 2 }, { a: \"3\", b: 3 }])(\n  \"test\",\n  ({ a, b }) => {\n    expect(Number(a)).toBe(b);\n  }\n);\n[[0, 1, 2], [0, 1, 2]]\nnew Map([[A, B], [C, D], [E, F], [G, H], [I, J], [K, L], [M, N]]);\n\n// Prettier 1.19\ntest.each([\n  { a: \"1\", b: 1 },\n  { a: \"2\", b: 2 },\n  { a: \"3\", b: 3 }\n])(\"test\", ({ a, b }) => {\n  expect(Number(a)).toBe(b);\n});\n[\n  [0, 1, 2],\n  [0, 1, 2]\n];\nnew Map([\n  [A, B],\n  [C, D],\n  [E, F],\n  [G, H],\n  [I, J],\n  [K, L],\n  [M, N]\n]);\n```\n\n#### Update `??` precedence to match stage 3 proposal ([#6404] by [@vjeux], [#6863] by [@jridgewell])\n\nWe've updated Prettier's support for the nullish coalescing operator to match a spec update that no longer allows it to immediately contain, or be contained within an `&&` or `||` operation.\n\n<!-- prettier-ignore -->\n```js\n// Input\n(foo ?? bar) || baz;\n(foo || bar) ?? baz;\n\n// Prettier 1.18\nfoo ?? bar || baz;\nfoo || bar ?? baz;\n\n// Prettier 1.19\n(foo ?? bar) || baz;\n(foo || bar) ?? baz;\n```\n\nPlease note that since we have updated our parsers with versions that support this spec update, code without the parentheses will throw a parse error.\n\n#### Don't require parens for same-operator logical expressions ([#6864] by [@jridgewell])\n\n<!-- prettier-ignore -->\n```js\n// Input\nfoo && (bar && baz);\nfoo || (bar || baz);\nfoo ?? (bar ?? baz);\n\n// Prettier 1.18\nfoo && (bar && baz);\nfoo || (bar || baz);\nfoo ?? (bar ?? baz);\n\n// Prettier 1.19\nfoo && bar && baz;\nfoo || bar || baz;\nfoo ?? bar ?? baz;\n```\n\n#### More readable parentheses for `new` call ([#6412] by [@bakkot])\n\n<!-- prettier-ignore -->\n```js\n// Input\nvar a = new (x().y)();\nvar a = new (x().y.z)();\nvar a = new (x().y().z)();\n\n// Prettier 1.18\nvar a = new (x()).y();\nvar a = new (x()).y.z();\nvar a = new (x().y()).z();\n\n// Prettier 1.19\nvar a = new (x().y)();\nvar a = new (x().y.z)();\nvar a = new (x().y().z)();\n```\n\n#### Keep parentheses with comments in unary expressions ([#6217] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```ts\n// Input\n!(\n  /* foo */\n  foo\n);\n!(\n  foo // foo\n);\n\n// Prettier 1.18\n!/* foo */\nfoo;\n!foo; // foo\n\n// Prettier 1.19\n!(/* foo */ foo);\n!(\n  foo // foo\n);\n```\n\n#### Stop moving comments inside tagged template literals ([#6236] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```js\n// Input\nfoo //comment\n`\n`;\n\n// Prettier 1.18\nfoo` // comment\n`;\n\n// Prettier 1.19\nfoo // comment\n`\n`;\n```\n\n#### Empty lines in destructured arrow function parameters could break indentation and idempotence ([#6301] & [#6382] by [@sosukesuzuki])\n\nPreviously, Prettier indented code strangely when an arrow function whose parameters included an object pattern was passed to a function call as an argument. Also, it broke idempotence. Please see [#6294](https://github.com/prettier/prettier/issues/6294) for details.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfoo(\n  ({\n    a,\n\n    b\n  }) => {}\n);\n\n// Prettier 1.18\nfoo(({ a,\n  b }) => {});\n\n// Prettier 1.19\nfoo(\n  ({\n    a,\n\n    b\n  }) => {}\n);\n```\n\n#### Fix formatting of object destructuring with parameter decorators ([#6411] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```js\n// Input\nclass Class {\n  method(\n    @decorator\n     { foo }\n  ) {}\n}\n\n// Prettier 1.18\nclass Class {\n  method(@decorator\n  {\n    foo\n  }) {}\n}\n\n// Prettier 1.19\nclass Class {\n  method(\n    @decorator\n    { foo }\n  ) {}\n}\n```\n\n#### Handle empty object patterns with type annotations in function parameters ([#6438] by [@bakkot])\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst f = ({}: MyVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryLongType) => {};\nfunction g({}: Foo) {}\n\n// Prettier 1.18\nconst f = ({\n  ,\n}: MyVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryLongType) => {};\nfunction g({  }: Foo) {}\n\n// Prettier 1.19\nconst f = ({}: MyVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryLongType) => {};\nfunction g({}: Foo) {}\n```\n\n#### Put a closing parenthesis onto a new line after binary expressions within function calls ([#6441] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```js\n// Input\n(\n  aaaaaaaaaaaaaaaaaaaaaaaaa &&\n  bbbbbbbbbbbbbbbbbbbbbbbbb &&\n  ccccccccccccccccccccccccc &&\n  ddddddddddddddddddddddddd &&\n  eeeeeeeeeeeeeeeeeeeeeeeee\n)();\n\n// Prettier 1.18\n(aaaaaaaaaaaaaaaaaaaaaaaaa &&\n  bbbbbbbbbbbbbbbbbbbbbbbbb &&\n  ccccccccccccccccccccccccc &&\n  ddddddddddddddddddddddddd &&\n  eeeeeeeeeeeeeeeeeeeeeeeee)();\n\n// Prettier 1.19\n(\n  aaaaaaaaaaaaaaaaaaaaaaaaa &&\n  bbbbbbbbbbbbbbbbbbbbbbbbb &&\n  ccccccccccccccccccccccccc &&\n  ddddddddddddddddddddddddd &&\n  eeeeeeeeeeeeeeeeeeeeeeeee\n)();\n```\n\n#### Fix formatting of long named exports ([#6446] by [@sosukesuzuki])\n\nNow, Prettier formats named exports the same way as named imports.\n\n<!-- prettier-ignore -->\n```js\n// Input\nexport { fooooooooooooooooooooooooooooooooooooooooooooooooo } from \"fooooooooooooooooooooooooooooo\";\n\n// Prettier 1.18\nexport {\n  fooooooooooooooooooooooooooooooooooooooooooooooooo\n} from \"fooooooooooooooooooooooooooooo\";\n\n// Prettier 1.19\nexport { fooooooooooooooooooooooooooooooooooooooooooooooooo } from \"fooooooooooooooooooooooooooooo\";\n```\n\n#### Fix bad formatting for multi-line optional chaining with comment ([#6506] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```js\n// Input\nreturn a\n  .b()\n  .c()\n  // Comment\n  ?.d()\n\n// Prettier 1.18\nreturn a\n  .b()\n  .c()\n  ?.// Comment\n  d();\n\n// Prettier 1.19\nreturn (\n  a\n    .b()\n    .c()\n    // Comment\n    ?.d()\n);\n```\n\n#### Fix inconsistent indentation in switch statement ([#6514] by [@sosukesuzuki])\n\n<!-- prettier-ignore -->\n```js\n// Input\nswitch ($veryLongAndVeryVerboseVariableName && $anotherVeryLongAndVeryVerboseVariableName) {\n}\n\nswitch ($longButSlightlyShorterVariableName && $anotherSlightlyShorterVariableName) {\n}\n\n// Prettier 1.18\nswitch (\n  $veryLongAndVeryVerboseVariableName &&\n    $anotherVeryLongAndVeryVerboseVariableName\n) {\n}\n\nswitch (\n  $longButSlightlyShorterVariableName && $anotherSlightlyShorterVariableName\n) {\n}\n\n// Prettier 1.19\nswitch (\n  $veryLongAndVeryVerboseVariableName &&\n  $anotherVeryLongAndVeryVerboseVariableName\n) {\n}\n\nswitch (\n  $longButSlightlyShorterVariableName &&\n  $anotherSlightlyShorterVariableName\n) {\n}\n```\n\n#### Support formatting code with V8 intrinsics ([#6496] by [@rreverser])\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction doSmth()     {\n            %DebugPrint\n        (\n                foo )\n  }\n\n// Prettier 1.18\nSyntaxError: Unexpected token (2:13)\n  1 | function doSmth()     {\n> 2 |             %DebugPrint\n    |             ^\n\n// Prettier 1.19\nfunction doSmth() {\n  %DebugPrint(foo);\n}\n```\n\n#### Object destructuring in method parameters always broke into multiple lines ([#6646] by [@ericsakmar])\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst obj = {\n  func(id, { blog: { title } }) {\n    return id + title;\n  },\n};\n\nclass A {\n  func(id, { blog: { title } }) {\n    return id + title;\n  }\n  #func(id, { blog: { title } }) {\n    return id + title;\n  }\n}\n\n// Prettier 1.18\nconst obj = {\n  func(\n    id,\n    {\n      blog: { title }\n    }\n  ) {\n    return id + title;\n  }\n};\n\nclass A {\n  func(\n    id,\n    {\n      blog: { title }\n    }\n  ) {\n    return id + title;\n  }\n  #func(\n    id,\n    {\n      blog: { title }\n    }\n  ) {\n    return id + title;\n  }\n}\n\n// Prettier 1.19\nconst obj = {\n  func(id, { blog: { title } }) {\n    return id + title;\n  },\n};\n\nclass A {\n  func(id, { blog: { title } }) {\n    return id + title;\n  }\n  #func(id, { blog: { title } }) {\n    return id + title;\n  }\n}\n```\n\n#### Numeric separators were removed from BigInt literals ([#6796] by [@thorn0])\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst bigints = [200_000n, 0x0000_000An, 0b0111_1111n];\n\n// Prettier 1.18\nconst bigints = [200000n, 0x0000000an, 0b01111111n];\n\n// Prettier 1.19\nconst bigints = [200_000n, 0x0000_000an, 0b0111_1111n];\n```\n\n#### Better formatting for inline `await` expression nested in calls ([#6856] by [@thorn0])\n\n<!-- prettier-ignore -->\n```js\n// Input\nasync function f() {\n  const admins = (await(db.select('*').from('admins').leftJoin('bla').where('id', 'in', [1,2,3,4]))).map(({id, name})=>({id, name}))\n}\n\n// Prettier 1.18\nasync function f() {\n  const admins = (await db\n    .select(\"*\")\n    .from(\"admins\")\n    .leftJoin(\"bla\")\n    .where(\"id\", \"in\", [1, 2, 3, 4])).map(({ id, name }) => ({ id, name }));\n}\n\n// Prettier 1.19\nasync function f() {\n  const admins = (\n    await db\n      .select(\"*\")\n      .from(\"admins\")\n      .leftJoin(\"bla\")\n      .where(\"id\", \"in\", [1, 2, 3, 4])\n  ).map(({ id, name }) => ({ id, name }));\n}\n```\n\n### HTML\n\n#### Don't wrap `template` elements on lines shorter than `printWidth` ([#6284] by [@sosukesuzuki])\n\nPreviously, even if the line length was shorter than `printWidth`, Prettier would break the line with a `template` element.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<template>\n  <template>foo</template>\n</template>\n\n<!-- Prettier 1.18 -->\n<template>\n  <template\n    >foo</template\n  >\n</template>\n\n<!-- Prettier 1.19 -->\n<template>\n  <template>foo</template>\n</template>\n```\n\n#### Script tags are now treated as blocks for the purposes of formatting ([#6423] by [@thorn0])\n\nPreviously, in the [whitespace-sensitive mode](https://prettier.io/docs/en/options.html#html-whitespace-sensitivity), they were formatted as if they were inline.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<script\n  async\n  src=\"/_next/static/development/pages/_app.js?ts=1565732195968\"\n></script><script></script>\n\n<!-- Prettier 1.18 -->\n<script\n  async\n  src=\"/_next/static/development/pages/_app.js?ts=1565732195968\"\n></script\n><script></script>\n\n<!-- Prettier 1.19 -->\n<script\n  async\n  src=\"/_next/static/development/pages/_app.js?ts=1565732195968\"\n></script>\n<script></script>\n```\n\n#### Add support for `&excl;` and other entities ([#6785] by [@lydell] and [@ikatyang])\n\nPreviously, Prettier only supported the most common HTML entities, such as `&nbsp;` and `&quot;`. Now, Prettier supports every HTML entity in the HTML spec, such as `&excl;` and `&pitchfork;`.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<p>Hi&excl;</p>\n\n<!-- Prettier 1.18\n[error] stdin: SyntaxError: Unknown entity \"excl\" - use the \"&#<decimal>;\" or  \"&#x<hex>;\" syntax (1:6)\n[error] > 1 | <p>Hi&excl;</p>\n[error]     |      ^\n[error]   2 | \n-->\n\n<!-- Prettier 1.19 -->\n<p>Hi&excl;</p>\n```\n\n#### Add JSON script types ([#6293] by [@ascorbic])\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<script type=\"application/json\">\n  {   \"json\":true  }\n</script>\n<script type=\"importmap\">\n  {   \"json\":true  }\n  {   \"json\":true  }\n</script>\n</script>\n<script type=\"systemjs-importmap\">\n  {   \"json\":true  }\n</script>\n\n<!-- Prettier 1.18 -->\n<script type=\"application/json\">\n  {   \"json\":true  }\n</script>\n<script type=\"importmap\">\n  {   \"json\":true  }\n  {   \"json\":true  }\n</script>\n</script>\n<script type=\"systemjs-importmap\">\n  {   \"json\":true  }\n</script>\n\n<!-- Prettier 1.19 -->\n<script type=\"application/json\">\n  { \"json\": true }\n</script>\n<script type=\"importmap\">\n  { \"json\": true }\n</script>\n<script type=\"systemjs-importmap\">\n  { \"json\": true }\n</script>\n```\n\n### Angular\n\n#### Put a closing parenthesis onto a new line after ternaries passed to pipes ([#5682] by [@selvazhagan])\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n{{ (isCustomDiscount ? 'DISCOUNTS__DISCOUNT_TRAINING_HEADER__CUSTOM_DISCOUNT' : 'DISCOUNTS__DISCOUNT_TRAINING_HEADER__DISCOUNT') | translate }}\n\n<!-- Prettier 1.18 -->\n{{\n  (isCustomDiscount\n    ? \"DISCOUNTS__DISCOUNT_TRAINING_HEADER__CUSTOM_DISCOUNT\"\n    : \"DISCOUNTS__DISCOUNT_TRAINING_HEADER__DISCOUNT\") | translate\n}}\n\n<!-- Prettier 1.19 -->\n{{\n  (isCustomDiscount\n    ? \"DISCOUNTS__DISCOUNT_TRAINING_HEADER__CUSTOM_DISCOUNT\"\n    : \"DISCOUNTS__DISCOUNT_TRAINING_HEADER__DISCOUNT\"\n  ) | translate\n}}\n```\n\n#### Add formatting for `i18n` attributes ([#6695] by [@voithos])\n\nPrettier will auto-wrap the contents of `i18n` attributes once they exceed the line length.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<h1 i18n=\"This is a very long internationalization description text, exceeding the configured print width\">\n  Hello!\n</h1>\n\n<!-- Prettier 1.18 -->\n<h1\n  i18n=\"This is a very long internationalization description text, exceeding the configured print width\"\n>\n  Hello!\n</h1>\n\n<!-- Prettier 1.19 -->\n<h1\n  i18n=\"\n    This is a very long internationalization description text, exceeding the\n    configured print width\n  \"\n>\n  Hello!\n</h1>\n```\n\n### Handlebars\n\n#### Fix handling of whitespace and line breaks ([#6354] by [@chadian])\n\nThis fixes a variety of whitespace and line break use cases within Handlebars and Glimmer templates.\n\n<!-- prettier-ignore -->\n```hbs\n<!-- Input -->\n<SomeComponent />{{name}}\n\nSome sentence with  {{dynamic}}  expressions.\n\n\n\nsometimes{{nogaps}}areimportant<Hello></Hello>\n{{name}}  is your name\n\n<!-- Prettier 1.18 -->\n<SomeComponent />\n{{name}}\nSome sentence with\n{{dynamic}}\nexpressions.\n\n\n\nsometimes\n{{nogaps}}\nareimportant\n<Hello />\n{{name}}\nis your name\n\n<!-- Prettier 1.19 -->\n<SomeComponent />{{name}}\n\nSome sentence with {{dynamic}} expressions.\n\n\n\nsometimes{{nogaps}}areimportant\n<Hello />\n{{name}} is your name\n```\n\n#### Avoid adding unwanted line breaks between text and mustaches ([#6186] by [@gavinjoyce])\n\nPreviously, Prettier added line breaks between text and mustaches which resulted in unwanted whitespace in rendered output.\n\n<!-- prettier-ignore -->\n```hbs\n<!-- Input -->\n<p>Your username is @{{name}}</p>\n<p>Hi {{firstName}} {{lastName}}</p>\n\n<!-- Prettier 1.18 -->\n<p>\n  Your username is @\n  {{name}}\n</p>\n<p>\n  Hi\n  {{firstName}}\n  {{lastName}}\n</p>\n\n<!-- Prettier 1.19 -->\n<p>\n  Your username is @{{name}}\n</p>\n<p>\n  Hi {{firstName}} {{lastName}}\n</p>\n```\n\n#### Improve comment formatting ([#6206] by [@gavinjoyce])\n\n<!-- prettier-ignore -->\n```hbs\n<!-- Input -->\n<div>\n  {{! Foo }}\n  {{#if @foo}}\n    Foo\n  {{/if}}\n\n  {{! Bar }}\n  {{#if @bar}}\n    Bar\n  {{/if}}\n</div>\n\n<!-- Prettier 1.18 -->\n<div>\n  {{! Foo }}\n  {{#if @foo}}\n    Foo\n  {{/if}}{{! Bar }}{{#if @bar}}\n    Bar\n  {{/if}}\n</div>\n\n<!-- Prettier 1.19 -->\n<div>\n  {{! Foo }}\n  {{#if @foo}}\n    Foo\n  {{/if}}\n  {{! Bar }}\n  {{#if @bar}}\n    Bar\n  {{/if}}\n</div>\n```\n\n#### Preserve HTML entities ([#6234] by [@gavinjoyce])\n\n<!-- prettier-ignore -->\n```hbs\n<!-- Input -->\n<p>\n  Some escaped characters: &lt; &gt; &amp;\n</p>\n\n<!-- Prettier 1.18 -->\n<p>\n  Some escaped characters: < > &\n</p>\n\n<!-- Prettier 1.19 -->\n<p>\n  Some escaped characters: &lt; &gt; &amp;\n</p>\n```\n\n#### Fix `--single-quote` option on HTML attributes ([#6377] by [@dcyriller])\n\nPreviously, the flag was not applied on HTML attributes.\n\n<!-- prettier-ignore -->\n```hbs\n<!-- Input -->\n<div class=\"a-class-name\"></div>\n\n<!-- Prettier 1.18, with the option --single-quote -->\n<div class=\"a-class-name\"></div>\n\n<!-- Prettier 1.19, with the option --single-quote -->\n<div class='a-class-name'></div>\n```\n\n#### Break long interpolations ([#6249] by [@jjaffeux])\n\n<!-- prettier-ignore -->\n```hbs\n<!-- Input -->\n{{my-component  foo=\"bar\"  bar=\"baz\" action=(action \"almostTheMaximumLengthxxxx\")\n}}\n\n<!-- Prettier 1.18 -->\n{{my-component  foo=\"bar\"  bar=\"baz\" action=(action \"almostTheMaximumLengthxxxx\")\n}}\n\n<!-- Prettier 1.19 -->\n{{my-component\n  foo=\"bar\"\n  bar=\"baz\"\n  action=(action \"almostTheMaximumLengthxxxx\")\n}}\n```\n\n### MDX\n\n#### Text following JSX was trimmed incorrectly ([#6340] by [@JounQin])\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n<Hello>\n    test   <World />   test\n</Hello>       123\n\n<!-- Prettier 1.18 -->\n<Hello>\n  test <World /> test\n</Hello>123\n\n<!-- Prettier 1.19 -->\n<Hello>\n  test <World /> test\n</Hello> 123\n```\n\n#### Adjacent JSX elements should be allowed ([#6332] by [@JounQin])\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n<Hello>\n    test   <World />   test\n</Hello>123\n\n// Prettier 1.18\nSyntaxError: Unexpected token (3:9)\n  1 | <Hello>\n  2 |     test   <World />   test\n> 3 | </Hello>123\n    |         ^\n\n// Prettier 1.19\n<Hello>\n  test <World /> test\n</Hello>123\n\n\n// Input\n<Hello>\n    test   <World />   test\n</Hello>\n<Hello>\n    test   <World />   test\n</Hello>123\n\n// Prettier 1.18\nSyntaxError: Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>? (4:1)\n  2 |     test   <World />   test\n  3 | </Hello>\n> 4 | <Hello>\n    | ^\n  5 |     test   <World />   test\n  6 | </Hello>123\n\n// Prettier 1.19\n<Hello>\n  test <World /> test\n</Hello>\n<Hello>\n  test <World /> test\n</Hello>123\n```\n\n### Vue\n\n#### Format `style[lang=\"css\"]` ([#6875] by [@fisker])\n\nPreviously, `<style>` elements with `lang=\"css\"` were not formatted, while omitting the attribute or setting to some other values worked. This oversight has been fixed.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<style lang=\"css\">\n    a { \ncolor: #F00\n}</style>\n\n<!-- Output (Prettier stable) -->\n<style lang=\"css\">\n    a {\ncolor: #F00\n}\n</style>\n\n<!-- Output (Prettier master) -->\n<style lang=\"css\">\n  a {\n    color: #f00;\n  }\n</style>\n```\n\n### Less\n\n#### Don't lowercase variable names and remove whitespace between variable and colon ([#6778] by [@fisker])\n\n<!-- prettier-ignore -->\n```less\n// Input\n@FoO : bar;\n\n// Prettier 1.18\n@foo : bar;\n\n// Prettier 1.19\n@FoO: bar;\n```\n\n### API\n\n#### Add `resolveConfig` option to `getFileInfo()` ([#6666] by [@kaicataldo])\n\nAdd a `resolveConfig: boolean` option to `prettier.getFileInfo()` that, when set to `true`, will resolve the configuration for the given file path. This allows consumers to take any overridden parsers into account.\n\n### CLI\n\n#### Handle errors when reading stdin ([#6708] by [@andersk] and [@lydell])\n\nIf you had an error in your `.prettierrc` Prettier used to crash when formatting stdin. Such errors are now handled properly.\n\n```\n# Prettier 1.18\n$ prettier --parser babel < test.js\n(node:21531) UnhandledPromiseRejectionWarning: Error: Invalid printWidth value. Expected an integer, but received \"nope\".\n    at _loop (/home/you/project/node_modules/prettier/bin-prettier.js:7887:63)\n    at Normalizer._applyNormalization (/home/you/project/node_modules/prettier/bin-prettier.js:8000:13)\n    at applyNormalization (/home/you/project/node_modules/prettier/bin-prettier.js:7817:49)\n    at Normalizer.normalize (/home/you/project/node_modules/prettier/bin-prettier.js:7823:9)\n    at normalizeOptions$1 (/home/you/project/node_modules/prettier/bin-prettier.js:8760:31)\n    at Object.normalizeApiOptions (/home/you/project/node_modules/prettier/bin-prettier.js:8918:10)\n    at getOptionsForFile (/home/you/project/node_modules/prettier/bin-prettier.js:44160:69)\n    at /home/you/project/node_modules/prettier/bin-prettier.js:44214:22\n    at process._tickCallback (internal/process/next_tick.js:68:7)\n(node:21531) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)\n(node:21531) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\n\n# Prettier 1.19\n$ prettier --parser babel < test.js\n[error] Invalid printWidth value. Expected an integer, but received \"nope\".\n```\n\n#### Gracefully handle nonexistent paths passed to `--stdin-filepath` ([#6687] by [@voithos] and [@lydell])\n\nPreviously, if you passed a nonexistent subdirectory to `--stdin-filepath`, Prettier would throw an error. Now, Prettier gracefully handles this.\n\n```\n# Prettier 1.18\n$ prettier --stdin-filepath does/not/exist.js < test.js\n[error] Invalid configuration file: ENOENT: no such file or directory, scandir '/home/you/project/does/not'\n\n# Prettier 1.19\n$ prettier --stdin-filepath does/not/exist.js < test.js\ntest;\n```\n\n#### Config should not be evaluated for ignored files ([#6233] by [@jamesreggio])\n\nPrior to this change, the CLI would resolve the config for a file before checking it against the ignored list. If the config was invalid, the CLI would report a failure.\n\nThis change relocates the config-resolution phase until after the file is confirmed to not be ignored.\n\n#### Display invalid config filename in error message ([#6865] by [@fisker])\n\n<!-- prettier-ignore -->\n```\n# Input\n$ prettier filename.js --config .invalid-config\n\n# Prettier 1.18\nInvalid configuration file: ...\n\n# Prettier 1.19\nInvalid configuration file `.invalid-config`: ...\n```\n\n### Other\n\nThanks to [@fisker] for updating lots of Prettier’s dependencies!\n\n#### VS Code: add support for .mongo files ([#6848] by [@aymericbouzy])\n\nWhen using the Azure Cosmos DB extension for VS Code, you can create .mongo files to write MongoDB queries, which use Javascript syntax. This change allows VS Code to format your file using Prettier.\n\n```js\ndb.users.find({ someField: { $exists: true } });\n```\n\n[#5682]: https://github.com/prettier/prettier/pull/5682\n[#5910]: https://github.com/prettier/prettier/pull/5910\n[#6033]: https://github.com/prettier/prettier/pull/6033\n[#6157]: https://github.com/prettier/prettier/pull/6157\n[#6186]: https://github.com/prettier/prettier/pull/6186\n[#6206]: https://github.com/prettier/prettier/pull/6206\n[#6209]: https://github.com/prettier/prettier/pull/6209\n[#6217]: https://github.com/prettier/prettier/pull/6217\n[#6233]: https://github.com/prettier/prettier/pull/6233\n[#6234]: https://github.com/prettier/prettier/pull/6234\n[#6236]: https://github.com/prettier/prettier/pull/6236\n[#6249]: https://github.com/prettier/prettier/pull/6249\n[#6270]: https://github.com/prettier/prettier/pull/6270\n[#6284]: https://github.com/prettier/prettier/pull/6284\n[#6289]: https://github.com/prettier/prettier/pull/6289\n[#6293]: https://github.com/prettier/prettier/pull/6293\n[#6301]: https://github.com/prettier/prettier/pull/6301\n[#6307]: https://github.com/prettier/prettier/pull/6307\n[#6332]: https://github.com/prettier/prettier/pull/6332\n[#6340]: https://github.com/prettier/prettier/pull/6340\n[#6354]: https://github.com/prettier/prettier/pull/6354\n[#6377]: https://github.com/prettier/prettier/pull/6377\n[#6381]: https://github.com/prettier/prettier/pull/6381\n[#6382]: https://github.com/prettier/prettier/pull/6382\n[#6397]: https://github.com/prettier/prettier/pull/6397\n[#6404]: https://github.com/prettier/prettier/pull/6404\n[#6411]: https://github.com/prettier/prettier/pull/6411\n[#6412]: https://github.com/prettier/prettier/pull/6412\n[#6420]: https://github.com/prettier/prettier/pull/6420\n[#6423]: https://github.com/prettier/prettier/pull/6423\n[#6438]: https://github.com/prettier/prettier/pull/6438\n[#6441]: https://github.com/prettier/prettier/pull/6441\n[#6446]: https://github.com/prettier/prettier/pull/6446\n[#6467]: https://github.com/prettier/prettier/pull/6467\n[#6471]: https://github.com/prettier/prettier/pull/6471\n[#6496]: https://github.com/prettier/prettier/pull/6496\n[#6506]: https://github.com/prettier/prettier/pull/6506\n[#6514]: https://github.com/prettier/prettier/pull/6514\n[#6604]: https://github.com/prettier/prettier/pull/6604\n[#6605]: https://github.com/prettier/prettier/pull/6605\n[#6640]: https://github.com/prettier/prettier/pull/6640\n[#6646]: https://github.com/prettier/prettier/pull/6646\n[#6657]: https://github.com/prettier/prettier/pull/6657\n[#6666]: https://github.com/prettier/prettier/pull/6666\n[#6673]: https://github.com/prettier/prettier/pull/6673\n[#6687]: https://github.com/prettier/prettier/pull/6687\n[#6694]: https://github.com/prettier/prettier/pull/6694\n[#6695]: https://github.com/prettier/prettier/pull/6695\n[#6708]: https://github.com/prettier/prettier/pull/6708\n[#6717]: https://github.com/prettier/prettier/pull/6717\n[#6728]: https://github.com/prettier/prettier/pull/6728\n[#6778]: https://github.com/prettier/prettier/pull/6778\n[#6785]: https://github.com/prettier/prettier/pull/6785\n[#6796]: https://github.com/prettier/prettier/pull/6796\n[#6816]: https://github.com/prettier/prettier/pull/6816\n[#6833]: https://github.com/prettier/prettier/pull/6833\n[#6848]: https://github.com/prettier/prettier/pull/6848\n[#6856]: https://github.com/prettier/prettier/pull/6856\n[#6863]: https://github.com/prettier/prettier/pull/6863\n[#6864]: https://github.com/prettier/prettier/pull/6864\n[#6865]: https://github.com/prettier/prettier/pull/6865\n[#6875]: https://github.com/prettier/prettier/pull/6875\n[@andersk]: https://github.com/andersk\n[@ascorbic]: https://github.com/ascorbic\n[@aymericbouzy]: https://github.com/aymericbouzy\n[@bakkot]: https://gibhub.com/bakkot\n[@brainkim]: https://github.com/brainkim\n[@chadian]: https://github.com/chadian\n[@cryrivers]: https://github.com/Cryrivers\n[@dcyriller]: https://github.com/dcyriller\n[@duailibe]: https://github.com/duailibe\n[@ericsakmar]: https://github.com/ericsakmar\n[@fisker]: https://github.com/fisker\n[@g-harel]: https://github.com/g-harel\n[@gavinjoyce]: https://github.com/gavinjoyce\n[@gkz]: https://github.com/gkz\n[@ikatyang]: https://github.com/ikatyang/\n[@jamesreggio]: https://github.com/jamesreggio\n[@jjaffeux]: https://github.com/jjaffeux\n[@jounqin]: https://github.com/JounQin\n[@jridgewell]: https://github.com/jridgewell\n[@kaicataldo]: https://github.com/kaicataldo\n[@kamilic]: https://github.com/kamilic\n[@lydell]: https://github.com/lydell\n[@mattleff]: https://github.com/mattleff\n[@rreverser]: https://github.com/RReverser\n[@selvazhagan]: https://github.com/selvazhagan\n[@sosukesuzuki]: https://github.com/sosukesuzuki\n[@squidfunk]: https://github.com/squidfunk\n[@thorn0]: https://github.com/thorn0\n[@vjeux]: https://github.com/vjeux\n[@voithos]: https://github.com/voithos"
    },
    {
      "id": "/2019/06/06/1.18.0",
      "metadata": {
        "permalink": "/blog/2019/06/06/1.18.0",
        "source": "@site/blog/2019-06-06-1.18.0.md",
        "title": "Prettier 1.18: Lots of fixes and OpenCollective",
        "description": "This release doesn't include shiny new features, but has lots of fixes for JavaScript, specially JSX and template literals, TypeScript and Markdown.",
        "date": "2019-06-06T00:00:00.000Z",
        "formattedDate": "June 6, 2019",
        "tags": [],
        "readingTime": 10,
        "truncated": true,
        "authors": [
          {
            "name": "Lucas Duailibe (@duailibe)",
            "url": "https://github.com/duailibe"
          }
        ],
        "frontMatter": {
          "author": "Lucas Duailibe (@duailibe)",
          "authorURL": "https://github.com/duailibe",
          "title": "Prettier 1.18: Lots of fixes and OpenCollective"
        },
        "prevItem": {
          "title": "Prettier 1.19: Long awaited Vue option, TypeScript 3.7 and new JavaScript features",
          "permalink": "/blog/2019/11/09/1.19.0"
        },
        "nextItem": {
          "title": "Prettier 1.17: More quotes options and support for shared configs",
          "permalink": "/blog/2019/04/12/1.17.0"
        }
      },
      "content": "This release doesn't include shiny new features, but has lots of fixes for JavaScript, specially JSX and template literals, TypeScript and Markdown.\n\nIt's also a good opportunity to remind that Prettier is now accepting donations! If you enjoy Prettier and would like to support our work, head to our [OpenCollective](https://opencollective.com/prettier).\n\n<!--truncate-->\n\n## Highlights\n\n### JavaScript\n\n#### Stop breaking simple template literals ([#5979] by [@jwbay])\n\nThis is one of the Prettier parts that get a lot of change requests: breaking simple expressions inside template literals. Previously Prettier would break the expressions in multiple lines if the whole literal exceeded the print width. Now, we'll prevent breaking if the expression is simple.\n\nThis is an improvement to what we had before, but there's still work to be done in this area.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconsole.log(chalk.white(`Covered Lines below threshold: ${coverageSettings.lines}%. Actual: ${coverageSummary.total.lines.pct}%`))\n\n// Output (Prettier stable)\nconsole.log(\n  chalk.white(\n    `Covered Lines below threshold: ${coverageSettings.lines}%. Actual: ${\n      coverageSummary.total.lines.pct\n    }%`\n  )\n);\n\n// Output (Prettier master)\nconsole.log(\n  chalk.white(\n    `Covered Lines below threshold: ${coverageSettings.lines}%. Actual: ${coverageSummary.total.lines.pct}%`\n  )\n);\n```\n\n#### Stop converting empty JSX elements to self-closing elements ([#6127] by [@duailibe])\n\nPrettier has always converted empty JSX elements (`<div></div>`) to self-closing elements (`<div />`) because those are equivalent.\n\nWe have received feedback that during development, one would like to type the opening and closing tags and leave them to add the children later, but Prettier would convert it to a self-closing element, forcing the developer to manually convert them back. This has changed in this release.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction Foo() {\n  return <div></div>;\n}\n\n// Output (Prettier stable)\nfunction Foo() {\n  return <div />;\n}\n\n// Output (Prettier master)\nfunction Foo() {\n  return <div></div>;\n}\n```\n\n## Other changes\n\n### JavaScript\n\n#### Fix closure compiler typecasts ([#5947] by [@jridgewell])\n\nIf a closing parenthesis follows after a typecast in an inner expression, the typecast would wrap everything to that following parenthesis.\n\n<!-- prettier-ignore -->\n```js\n// Input\ntest(/** @type {!Array} */(arrOrString).length);\ntest(/** @type {!Array} */((arrOrString)).length + 1);\n// Output (Prettier stable)\ntest(/** @type {!Array} */ (arrOrString.length));\ntest(/** @type {!Array} */ (arrOrString.length + 1));\n// Output (Prettier master)\ntest(/** @type {!Array} */ (arrOrString).length);\ntest(/** @type {!Array} */ (arrOrString).length + 1);\n```\n\n#### Fix closure typecasts without spaces ([#6116] by [@jridgewell])\n\nPreviously, a space was required between the `@type` and opening `{` of a closure typecast, or else the enclosing parenthesis would be removed. Closure itself does not require a space.\n\n<!-- prettier-ignore -->\n```tsx\n// Input\nconst v = /** @type{string} */(value);\n\n// Output (Prettier stable)\nconst v = /** @type{string} */ value;\n\n// Output (prettier master)\nconst v = /** @type{string} */ (value);\n```\n\n#### Prevent adding quotes when using `--quote-props=consistent` and objects had numbers or computed expressions as keys ([#6119] and [#6138] by [@duailibe])\n\nPreviously, Prettier added unnecessary quotes to keys of an object, or properties and methods of classes, if there was at least one computed key with a \"complex\" expression (e.g. a member expression) or a numeric literal.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst obj = {\n  foo: \"\",\n  [foo.bar]: \"\",\n};\n\nconst other = {\n  foo: \"\",\n  1: \"\"\n};\n\n// Output (Prettier stable)\nconst obj = {\n  \"foo\": \"\",\n  [foo.bar]: \"\",\n};\n\nconst other = {\n  \"foo\": \"\",\n  1: \"\"\n};\n\n// Output (Prettier master)\nconst obj = {\n  foo: \"\",\n  [foo.bar]: \"\",\n};\n\nconst other = {\n  foo: \"\",\n  1: \"\"\n};\n```\n\n#### Add parenthesis in JSX spread element with logical expressions ([#6130] by [@duailibe])\n\nPreviously, Prettier didn't add parenthesis in JSX spread elements because they aren't necessary, but for the sake of consistency with spread operator in objects and arrays, we'll add to JSX as well.\n\n<!-- prettier-ignore -->\n```js\n// Input\n<Component {...(props || {})} />;\n\n// Output (Prettier stable)\n<Component {...props || {}} />;\n\n// Output (Prettier master)\n<Component {...(props || {})} />;\n```\n\n#### Correctly handle comments in empty arrow function expressions ([#6086] by [@evilebottnawi])\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst fn = (/*event, data*/) => doSomething(anything);\n\n// Output (Prettier stable)\nconst fn = () => /*event, data*/ doSomething(anything);\n\n// Output (Prettier master)\nconst fn = (/*event, data*/) => doSomething(anything);\n```\n\n#### Do not hug sequence expression in object properties ([#6088] by [@evilebottnawi])\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst a = {\n  someKey:\n    (longLongLongLongLongLongLongLongLongLongLongLongLongLongName, shortName)\n};\n\n// Output (Prettier stable)\nconst a = {\n  someKey: (longLongLongLongLongLongLongLongLongLongLongLongLongLongName,\n  shortName)\n};\n\n// Output (Prettier master)\nconst a = {\n  someKey:\n    (longLongLongLongLongLongLongLongLongLongLongLongLongLongName, shortName)\n};\n```\n\n#### Add support for styled-jsx external styles ([#6089] by [@hongrich])\n\nAdd support for 2 external styles tags in `styled-jsx/css`: `css.global`, and `css.resolve`. https://github.com/zeit/styled-jsx/#external-css-and-styles-outside-of-the-component\n\nThe `css` template tag is already supported by Prettier.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst styles = css.resolve`\n.box {background:black;\n}`;\n\n// Output (Prettier stable)\nconst styles = css.resolve`\n.box {background:black;\n}`;\n\n// Output (prettier master)\nconst styles = css.resolve`\n  .box {\n    background: black;\n  }\n`;\n```\n\n#### Keep parenthesis around functions and classes in `export default` declarations ([#6133] by [@duailibe])\n\nPrettier was removing parenthesis from some expressions in `export default`, but if those are complex expressions that start with `function` or `class`, the parenthesis are required.\n\nSee below some practical examples, including one affecting TypeScript.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nexport default (function log() {}).toString();\nexport default (function log() {} as typeof console.log);\n\n// Output (Prettier stable)\nexport default function log() {}.toString();\nexport default function log() {} as typeof console.log; // syntax error\n\n// Output (Prettier master)\nexport default (function log() {}).toString();\nexport default (function log() {} as typeof console.log);\n```\n\n#### Address parentheses bugs for edge cases with call and `new` ([#6148] by [@bakkot])\n\nAdding all and only the necessary parentheses when mixing `new` with function calls is tricky. This change fixes two issues where necessary parentheses were omitted and one when redundant parentheses were added.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nnew (x()``.y)();\nnew (x()!.y)();\nnew e[f().x].y()\n\n// Output (Prettier stable)\nnew x()``.y();\nnew x()!.y();\nnew e[(f()).x].y();\n\n// Output (Prettier master)\nnew (x())``.y();\nnew (x())!.y();\nnew e[f().x].y();\n```\n\n#### Fix nested embeds (JS in HTML in JS) ([#6038] by [@thorn0])\n\nPreviously, if JS code embedded in HTML (via `<script>`) embedded in JS (via a template literal) contained template literals, the inner JS was not formatted.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst html = /* HTML */ `<script>var a=\\`\\`</script>`;\n\n// Output (Prettier stable)\n// SyntaxError: Expecting Unicode escape sequence \\uXXXX (1:8)\n\n// Output (Prettier master)\nconst html = /* HTML */ `\n  <script>\n    var a = \\`\\`;\n  </script>\n`;\n```\n\n#### Keep necessary parentheses around bind expressions passed to `new` expressions ([#6152] by [@sosukesuzuki])\n\nPreviously, Prettier removed necessary parentheses around a bind expression if it was passed to a `new` expression.\n\n<!-- prettier-ignore -->\n```js\n// Input\nnew (a::b)();\n\n// Output (Prettier stable)\nnew a::b();\n\n// Output (Prettier master)\nnew (a::b)();\n```\n\n#### Prevent adding unnecessary parentheses around bind expressions in member expressions' properties ([#6159] by [@duailibe])\n\n<!-- prettier-ignore -->\n```js\n// Input\nf[a::b];\n\n// Output (Prettier stable)\nf[(a::b)];\n\n// Output (Prettier master);\nf[a::b];\n```\n\n### TypeScript\n\n#### Keep trailing comma in TSX type parameters ([#6115] by [@sosukesuzuki])\n\nPreviously, a trailing comma after single type parameter in arrow function was cleaned up. The formatted result is valid as TS, but is invalid as TSX. This is now fixed in 1.19.\n\n<!-- prettier-ignore -->\n```tsx\n// Input\ntype G<T> = any;\nconst myFunc = <T,>(arg1: G<T>) => false;\n\n// Output (Prettier stable)\ntype G<T> = any;\nconst myFunc = <T>(arg1: G<T>) => false;\n\n// Output (prettier master)\ntype G<T> = any;\nconst myFunc = <T,>(arg1: G<T>) => false;\n```\n\n#### Don’t breakup call expressions when the last argument is an arrow function with a simple return type ([#6106] by [@brainkim])\n\nFixes [an edge case][#6099] where we were splitting up call expressions containing arrow functions with simple return types.\n\n<!-- prettier-ignore -->\n```js\napp.get(\"/\", (req, res): void => {\n  res.send(\"Hello World!\");\n});\n\n// Output (Prettier stable)\napp.get(\n  \"/\",\n  (req, res): void => {\n    res.send(\"Hello World!\");\n  },\n);\n\n// Output (Prettier master)\napp.get(\"/\", (req, res): void => {\n  res.send(\"Hello World!\");\n});\n```\n\n#### Keep a pair of parentheses when there are extra pairs ([#6131] by [@sosukesuzuki])\n\nPreviously, Prettier removed necessary parentheses when trying to remove unnecessary parentheses, in TypeScript.\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype G = ((keyof T))[];\n\n// Output (Prettier stable)\ntype G = keyof T[];\n\n// Output (prettier master)\ntype G = (keyof T)[];\n```\n\n#### Keep necessary parentheses around non-null assertions ([#6136] by [@sosukesuzuki], [#6140] by [@thorn0], [#6148] by [@bakkot])\n\nPreviously, Prettier removed necessary parentheses around non-null assertions if the result of the assertion expression was called as a constructor.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst b = new (c()!)();\n\n// Output (Prettier stable)\nconst b = new c()!();\n\n// Output (Prettier master)\nconst b = new (c())!();\n```\n\n#### Keep line breaks within mapped types ([#6146] by [@sosukesuzuki])\n\nPreviously, Prettier removed line breaks within mapped types. To make it similar to how we treat object literals, we will keep the line breaks if they existed in the source.\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype A<T> = {\n  readonly [P in keyof T]: T[P];\n};\n\n// Output (Prettier stable)\ntype A<T> = { readonly [P in keyof T]: T[P] };\n\n// Output (Prettier master)\ntype A<T> = {\n  readonly [P in keyof T]: T[P];\n};\n```\n\n#### Add trailing comma on tuple types with `--trailing-comma=all` ([#6172] by [@sosukesuzuki])\n\nTypeScript supports a trailing comma on tuple types since version 3.3.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nexport type Foo = [\n  number,\n  number, // comment\n];\n\n// Output (Prettier stable)\nexport type Foo = [\n  number,\n  number // comment\n];\n\n// Output (Prettier master);\nexport type Foo = [\n  number,\n  number, // comment\n];\n```\n\n### Markdown\n\n#### Determine correctly the count of backticks in inline code ([#6110] by [@belochub])\n\nBy the CommonMark spec, it is required to 'choose a string of `n` backtick characters as delimiters, where the code does not contain any strings of exactly `n` backtick characters.'\n\nThis changes the method of finding the required count of backticks from using 2 backticks, when there is a backtick string of length 1 inside the inline code block, and using 1 backtick in all other cases, to finding a minimum length backtick string that can correctly be used as a delimiter.\n\n<!-- prettier-ignore -->\n````md\n<!-- Input -->\n``` 3 ``22`` `1` ```\n\n`` 2 ```123``` `1` ``\n\n<!-- Output (Prettier stable) -->\n` 3 ``22`` `1` `\n\n` 2 ```123``` `1` `\n\n<!-- Output (Prettier master) -->\n``` 3 ``22`` `1` ```\n\n`` 2 ```123``` `1` ``\n````\n\n### Handlebars\n\nWhile the Handlebars support is still in beta, [@GavinJoyce] is putting out some fixes so we can finally get to a stable release!\n\n#### Avoid adding unwanted whitespace after components ([#6178] by [@GavinJoyce])\n\nPreviously, Prettier added a space before `/>` and a line break after, even when at the start of a line. Now, that extra space and line break is no longer present.\n\n<!-- prettier-ignore -->\n```hbs\n// Input\n<div>\n  <UserGreeting\n    @aVeryLongArgumentNameThatIsStillGoing={{@alsoAVeryLongArgument}}\n  />\n</div>\n\n// Output (Prettier stable)\n<div>\n  <UserGreeting\n    @aVeryLongArgumentNameThatIsStillGoing={{@alsoAVeryLongArgument}}\n   />\n\n</div>\n\n// Output (Prettier master)\n<div>\n  <UserGreeting\n    @aVeryLongArgumentNameThatIsStillGoing={{@alsoAVeryLongArgument}}\n  />\n</div>\n```\n\n### API\n\n#### Prettier now works in Atom again ([#6129] by [@duailibe])\n\nAtom has a security feature where code containing `eval` is not allowed to be run. One of Prettier's dependencies uses `eval` to prevent bundlers from including debug code. We've now made sure that this `eval` does not end up in the code we ship to npm, making Prettier play nice with Atom again.\n\n[#5947]: https://github.com/prettier/prettier/pull/5947\n[#5979]: https://github.com/prettier/prettier/pull/5979\n[#6038]: https://github.com/prettier/prettier/pull/6038\n[#6086]: https://github.com/prettier/prettier/pull/6086\n[#6088]: https://github.com/prettier/prettier/pull/6088\n[#6089]: https://github.com/prettier/prettier/pull/6089\n[#6099]: https://github.com/prettier/prettier/pull/6099\n[#6106]: https://github.com/prettier/prettier/pull/6106\n[#6110]: https://github.com/prettier/prettier/pull/6110\n[#6115]: https://github.com/prettier/prettier/pull/6115\n[#6116]: https://github.com/prettier/prettier/pull/6116\n[#6119]: https://github.com/prettier/prettier/pull/6119\n[#6127]: https://github.com/prettier/prettier/pull/6127\n[#6129]: https://github.com/prettier/prettier/pull/6129\n[#6130]: https://github.com/prettier/prettier/pull/6130\n[#6131]: https://github.com/prettier/prettier/pull/6131\n[#6133]: https://github.com/prettier/prettier/pull/6133\n[#6136]: https://github.com/prettier/prettier/pull/6136\n[#6138]: https://github.com/prettier/prettier/pull/6138\n[#6140]: https://github.com/prettier/prettier/pull/6140\n[#6146]: https://github.com/prettier/prettier/pull/6146\n[#6148]: https://github.com/prettier/prettier/pull/6148\n[#6152]: https://github.com/prettier/prettier/pull/6152\n[#6159]: https://github.com/prettier/prettier/pull/6159\n[#6172]: https://github.com/prettier/prettier/pull/6172\n[#6178]: https://github.com/prettier/prettier/pull/6178\n[@belochub]: https://github.com/belochub\n[@brainkim]: https://github.com/brainkim\n[@duailibe]: https://github.com/duailibe\n[@evilebottnawi]: https://github.com/evilebottnawi\n[@hongrich]: https://github.com/hongrich\n[@jridgewell]: https://github.com/jridgewell\n[@jwbay]: https://github.com/jwbay\n[@sosukesuzuki]: https://github.com/sosukesuzuki\n[@thorn0]: https://github.com/thorn0\n[@bakkot]: https://github.com/bakkot\n[@gavinjoyce]: https://github.com/GavinJoyce"
    },
    {
      "id": "/2019/04/12/1.17.0",
      "metadata": {
        "permalink": "/blog/2019/04/12/1.17.0",
        "source": "@site/blog/2019-04-12-1.17.0.md",
        "title": "Prettier 1.17: More quotes options and support for shared configs",
        "description": "This release brings long-requested flexibility to quotes around object properties, allows Prettier configuration to be shared in the form of packages, adds a [LWC] parser, adds support for new GraphQL syntax and fixes lots of formatting bugs.",
        "date": "2019-04-12T00:00:00.000Z",
        "formattedDate": "April 12, 2019",
        "tags": [],
        "readingTime": 5.795,
        "truncated": true,
        "authors": [
          {
            "name": "Lucas Duailibe (@duailibe)",
            "url": "https://github.com/duailibe"
          }
        ],
        "frontMatter": {
          "author": "Lucas Duailibe (@duailibe)",
          "authorURL": "https://github.com/duailibe",
          "title": "Prettier 1.17: More quotes options and support for shared configs"
        },
        "prevItem": {
          "title": "Prettier 1.18: Lots of fixes and OpenCollective",
          "permalink": "/blog/2019/06/06/1.18.0"
        },
        "nextItem": {
          "title": "Prettier 1.16: HTML improvements and better CRLF handling",
          "permalink": "/blog/2019/01/20/1.16.0"
        }
      },
      "content": "This release brings long-requested flexibility to quotes around object properties, allows Prettier configuration to be shared in the form of packages, adds a [LWC] parser, adds support for new GraphQL syntax and fixes lots of formatting bugs.\n\n[lwc]: https://developer.salesforce.com/docs/component-library/documentation/lwc\n\n<!--truncate-->\n\n## Highlights\n\n### JavaScript\n\n#### Add an option to modify when Prettier quotes object properties ([#5934] by [@azz])\n\n**`--quote-props <as-needed|preserve|consistent>`**\n\n`as-needed` **(default)** - Only add quotes around object properties where required. Current behaviour.\n`preserve` - Respect the input. This is useful for users of Google's Closure Compiler in Advanced Mode, which treats quoted properties differently.\n`consistent` - If _at least one_ property in an object requires quotes, quote all properties - this is like ESLint's [`consistent-as-needed`](https://eslint.org/docs/rules/quote-props) option.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst headers = {\n  accept: \"application/json\",\n  \"content-type\": \"application/json\",\n  \"origin\": \"prettier.io\"\n};\n\n// Output (Prettier 1.16 or --quote-props=as-needed)\nconst headers = {\n  accept: \"application/json\",\n  \"content-type\": \"application/json\",\n  origin: \"prettier.io\"\n};\n\n// Output (--quote-props=consistent)\nconst headers = {\n  \"accept\": \"application/json\",\n  \"content-type\": \"application/json\",\n  \"origin\": \"prettier.io\"\n};\n\n// Output (--quote-props=preserve)\nconst headers = {\n  accept: \"application/json\",\n  \"content-type\": \"application/json\",\n  \"origin\": \"prettier.io\"\n};\n```\n\n### Config\n\n#### Support shared configurations ([#5963] by [@azz])\n\nSharing a Prettier configuration is simple: just publish a module that exports a configuration object, say `@company/prettier-config`, and reference it in your `package.json`:\n\n```json\n{\n  \"name\": \"my-cool-library\",\n  \"version\": \"9000.0.1\",\n  \"prettier\": \"@company/prettier-config\"\n}\n```\n\nIf you don't want to use `package.json`, you can use any of the supported extensions to export a string, e.g. `.prettierrc.json`:\n\n```json\n\"@company/prettier-config\"\n```\n\n[@azz] has created an example configuration package. You can [see the source on GitHub](https://github.com/azz/prettier-config) or [install it via npm](https://www.npmjs.com/package/@azz/prettier-config).\n\n> Note: This method does **not** offer a way to _extend_ the configuration to overwrite some properties from the shared configuration. If you need to do that, import the file in a `.prettierrc.js` file and export the modifications, e.g:\n>\n> ```js\n> module.exports = {\n>   ...require(\"@company/prettier-config\"),\n>   semi: false,\n> };\n> ```\n\n## General\n\n### JavaScript\n\n#### Respect newlines between parameters ([#5836] by [@evilebottnawi])\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction foo(\n  one,\n\n  two,\n  three,\n  four,\n\n\n  five,\n  six,\n  seven,\n  eight,\n  nine,\n  ten,\n\n  eleven\n\n) {}\n\n// Output (Prettier 1.16)\nfunction foo(\n  one,\n  two,\n  three,\n  four,\n  five,\n  six,\n  seven,\n  eight,\n  nine,\n  ten,\n  eleven\n) {}\n\n// Output (Prettier 1.17)\nfunction foo(\n  one,\n\n  two,\n  three,\n  four,\n\n  five,\n  six,\n  seven,\n  eight,\n  nine,\n  ten,\n\n  eleven\n) {}\n```\n\n#### Fix multiline dynamic import comments ([#6025] by [@noahsug])\n\n<!-- prettier-ignore -->\n```js\n// Input\nimport(\n  /* Hello */\n  'something'\n  /* Hello */\n)\nimport(\n  'myreallylongdynamicallyloadedmodulenamemyreallylongdynamicallyloadedmodulename'\n)\n\n// Output (Prettier stable)\nimport(/* Hello */\n\"something\");\n/* Hello */\nimport('myreallylongdynamicallyloadedmodulenamemyreallylongdynamicallyloadedmodulename');\n\n// Output (Prettier master)\nimport(\n  /* Hello */\n  'something'\n  /* Hello */\n)\nimport(\n  'myreallylongdynamicallyloadedmodulenamemyreallylongdynamicallyloadedmodulename'\n);\n```\n\n#### Add parentheses for immediately-constructed functions and class ([#5996] by [@bakkot])\n\n<!-- prettier-ignore -->\n```js\n// Input\nnew class {};\nnew function() {}\n\n// Output (Prettier stable)\nnew class {}();\nnew function() {}();\n\n// Output (Prettier master)\nnew (class {})();\nnew (function() {})();\n```\n\n#### Fix parens logic for optional chaining expressions and closure type casts ([#5843] by [@yangsu])\n\nLogic introduced in #4542 will print parens in the wrong places and produce invalid code for optional chaining expressions (with more than 2 nodes) or closure type casts that end in function calls.\n\n<!-- prettier-ignore -->\n```js\n// Input\n(a?.b[c]).c();\nlet value = /** @type {string} */ (this.members[0]).functionCall();\n\n// Output (Prettier stable)\na(?.b[c]).c();\nlet value = /** @type {string} */ this(.members[0]).functionCall();\n\n// Output (Prettier master)\n(a?.b[c]).c();\nlet value = /** @type {string} */ (this.members[0]).functionCall();\n```\n\n### Markdown\n\n#### Do not align table contents if it exceeds the print width and `--prose-wrap never` is set ([#5701] by [@chenshuai2144])\n\nThe aligned table is less readable than the compact one if it's particularly long and the word wrapping is not enabled in the editor so we now print them as compact tables in these situations.\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n| Property | Description | Type | Default |\n| -------- | ----------- | ---- | ------- |\n| bordered | Toggles rendering of the border around the list | boolean | false |\n| itemLayout | The layout of list, default is `horizontal`, If a vertical list is desired, set the itemLayout property to `vertical` | string | - |\n\n<!-- Output (Prettier stable, --prose-wrap never) -->\n| Property   | Description                                                                                                           | Type    | Default |\n| ---------- | --------------------------------------------------------------------------------------------------------------------- | ------- | ------- |\n| bordered   | Toggles rendering of the border around the list                                                                       | boolean | false   |\n| itemLayout | The layout of list, default is `horizontal`, If a vertical list is desired, set the itemLayout property to `vertical` | string  | -       |\n\n<!-- Output (Prettier master, --prose-wrap never) -->\n| Property | Description | Type | Default |\n| --- | --- | --- | --- |\n| bordered | Toggles rendering of the border around the list | boolean | false |\n| itemLayout | The layout of list, default is `horizontal`, If a vertical list is desired, set the itemLayout property to `vertical` | string | - |\n```\n\n### TypeScript\n\n#### Support `readonly` operator ([#6027] by [@ikatyang])\n\n<!-- prettier-ignore -->\n```ts\n// Input\ndeclare const array: readonly number[];\n\n// Output (Prettier stable)\n// SyntaxError: ',' expected.\n\n// Output (Prettier master)\ndeclare const array: readonly number[];\n```\n\n### HTML\n\n#### Add support for Lightning Web Components ([#5800] by [@ntotten])\n\nSupports [Lightning Web Components (LWC)][lwc] template format for HTML attributes by adding a new parser called `lwc`.\n\n<!-- prettier-ignore -->\n```html\n// Input\n<my-element data-for={value}></my-element>\n\n// Output (Prettier stable)\n<my-element data-for=\"{value}\"></my-element>\n\n// Output (Prettier master)\n<my-element data-for={value}></my-element>\n```\n\n#### Angular: Don't add unnecessary parentheses to pipes ([#5929] by [@voithos])\n\nIn some cases, wrapping parentheses were being added to certain pipes inside attributes, but they are no longer added when they don't affect the result of the expression.\n\n<!-- prettier-ignore -->\n```html\n// Input\n<div *ngIf=\"isRendered | async\"></div>\n\n// Output (Prettier stable)\n<div *ngIf=\"(isRendered | async)\"></div>\n\n// Output (Prettier master)\n<div *ngIf=\"isRendered | async\"></div>\n```\n\n### GraphQL\n\n#### Support variable directives ([#6020] by [@adek05])\n\nPrettier now supports formatting variable directives.\n\n<!-- prettier-ignore -->\n```\n// Input\nquery Q($variable: Int   @directive) {node}\n\n// Output (Prettier stable)\nquery Q($variable: Int) {\n  node\n}\n\n// Output (Prettier master)\nquery Q($variable: Int @directive) {\n  node\n}\n```\n\n#### Support GraphQL fragment variables ([#6016] by [@adek05])\n\nPrettier now supports formatting fragment variables.\n\n```\n// Input\nfragment F($var: Int) on Type { node }\n\n// Output (Prettier stable)\n// Fails to parse\n\n// Output (Prettier master)\nfragment F($var: Int) on Type {\n   node\n}\n```\n\n### CLI\n\n#### Automatically discover scoped plugins ([#5945] by [@Kocal])\n\nPrettier now supports automatically loading scoped plugins named `@scope-name/prettier-plugin-*`.\n\n[@adek05]: https://github.com/adek05\n[@azz]: https://github.com/azz\n[@bakkot]: https://github.com/bakkot\n[@chenshuai2144]: https://github.com/chenshuai2144\n[@evilebottnawi]: https://github.com/evilebottnawi\n[@ikatyang]: https://github.com/ikatyang\n[@kocal]: https://github.com/Kocal\n[@noahsug]: https://github.com/noahsug\n[@ntotten]: https://github.com/ntotten\n[@voithos]: https://github.com/voithos\n[@yangsu]: https://github.com/yangsu\n[#5836]: https://github.com/prettier/prettier/pull/5836\n[#5701]: https://github.com/prettier/prettier/pull/5701\n[#5800]: https://github.com/prettier/prettier/pull/5800\n[#5843]: https://github.com/prettier/prettier/pull/5843\n[#5929]: https://github.com/prettier/prettier/pull/5929\n[#5934]: https://github.com/prettier/prettier/pull/5934\n[#5945]: https://github.com/prettier/prettier/pull/5945\n[#5963]: https://github.com/prettier/prettier/pull/5963\n[#5996]: https://github.com/prettier/prettier/pull/5996\n[#6016]: https://github.com/prettier/prettier/pull/6016\n[#6020]: https://github.com/prettier/prettier/pull/6020\n[#6025]: https://github.com/prettier/prettier/pull/6025\n[#6027]: https://github.com/prettier/prettier/pull/6027"
    },
    {
      "id": "/2019/01/20/1.16.0",
      "metadata": {
        "permalink": "/blog/2019/01/20/1.16.0",
        "source": "@site/blog/2019-01-20-1.16.0.md",
        "title": "Prettier 1.16: HTML improvements and better CRLF handling",
        "description": "This release improves HTML formatting and contains better CRLF handling, new",
        "date": "2019-01-20T00:00:00.000Z",
        "formattedDate": "January 20, 2019",
        "tags": [],
        "readingTime": 9.58,
        "truncated": true,
        "authors": [
          {
            "name": "Ika (@ikatyang)",
            "url": "https://github.com/ikatyang"
          }
        ],
        "frontMatter": {
          "author": "Ika (@ikatyang)",
          "authorURL": "https://github.com/ikatyang",
          "title": "Prettier 1.16: HTML improvements and better CRLF handling"
        },
        "prevItem": {
          "title": "Prettier 1.17: More quotes options and support for shared configs",
          "permalink": "/blog/2019/04/12/1.17.0"
        },
        "nextItem": {
          "title": "Prettier 1.15: HTML, Vue, Angular and MDX Support",
          "permalink": "/blog/2018/11/07/1.15.0"
        }
      },
      "content": "This release improves HTML formatting and contains better CRLF handling, new\nsyntax features, and fixes several bugs.\n\n<!--truncate-->\n\n## Highlights\n\n### HTML\n\n#### Respect surrounding linebreaks ([#5596] by [@ikatyang])\n\nPreviously, Prettier always put elements in a single line if they didn’t\ngo past the `printWidth`, but this doesn’t work for elements that are used as\n`if`-`else` blocks or are intended to contain several items. To solve this\nproblem, we’ll respect surrounding linebreaks for all elements since there is\nno reliable way to determine if they’re being used in these ways.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div class=\"list\">\n  <div class=\"item\">Jan</div>\n</div>\n<a v-if=\"i !== -1\" href=\"#\" @click.prevent=\"select(i)\">\n  {{ i }}\n</a>\n<span v-else>\n  <slot name=\"ellipsis\">&hellip;</slot>\n</span>\n\n<!-- Output (Prettier 1.15) -->\n<div class=\"list\"><div class=\"item\">Jan</div></div>\n<a v-if=\"i !== -1\" href=\"#\" @click.prevent=\"select(i)\"> {{ i }} </a>\n<span v-else> <slot name=\"ellipsis\">&hellip;</slot> </span>\n\n<!-- Output (Prettier 1.16) -->\n<div class=\"list\">\n  <div class=\"item\">Jan</div>\n</div>\n<a v-if=\"i !== -1\" href=\"#\" @click.prevent=\"select(i)\">\n  {{ i }}\n</a>\n<span v-else>\n  <slot name=\"ellipsis\">&hellip;</slot>\n</span>\n```\n\n### General\n\n#### Better CRLF handling ([#5494] by [@ikatyang])\n\nYou might have noticed a few weird formatting issues that only occurred on Windows.\nMany of these issues were caused by our handling of CR-LF line endings.\nIn this release, we were able to resolve these issues by normalizing linebreaks\nboth before and after formatting.\n\n### JavaScript\n\n#### Improve the pattern used by React hooks ([#5608] by [@j-f1])\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction helloWorld() {\n  useEffect(() => {\n    // do something\n  }, [props.value])\n}\n\n// Output (Prettier 1.15)\nfunction helloWorld() {\n  useEffect(\n    () => {\n      // do something\n    },\n    [props.value]\n  );\n}\n\n// Output (Prettier 1.16)\nfunction helloWorld() {\n  useEffect(() => {\n    // do something\n  }, [props.value]);\n}\n```\n\n#### Rename `babylon` parser to `babel` ([#5647] by [@wuweiweiwu])\n\nBabel’s parser, `babylon`, was renamed to `@babel/parser` in Babel 7. We’ve\nrenamed our `babylon` parser to `babel` as well to reduce confusion.\n\nThe `babylon` parser name is now deprecated but it still works.\n\nIf you need to change your config due to this change, please take a second to read\n[our docs on the `parser` option], especially the note at the bottom.\n\n[our docs on the `parser` option]: https://prettier.io/docs/en/configuration.html#setting-the-parser-docs-en-optionshtml-parser-option\n\n### Flow\n\n#### Add `babel-flow` parser ([#5685] by [@ikatyang])\n\nBoth the `babel` and `flow` parsers support Flow syntax by default, but there are a few\nedge cases where Flow syntax is ambiguous. By default, Babel’s Flow parser will parse the\nambiguous code as regular JS, while the native Flow parser will parse it as Flow syntax.\nTo address this issue, we added the `babel-flow` parser option, which uses Babel’s parser,\nbut prefers Flow syntax when ambiguities arise.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst Theme = React.createContext<\"light\" | \"dark\">(\"light\");\n\n// Output (Prettier 1.15, --parser babylon)\nconst Theme = (React.createContext < \"light\") | (\"dark\" > \"light\");\n\n// Output (Prettier 1.16, --parser babel-flow)\nconst Theme = React.createContext<\"light\" | \"dark\">(\"light\");\n```\n\n### CLI\n\n#### Add a `--check` flag ([#5629] by [@kachkaev])\n\nPassing `--list-different` to the `prettier` CLI command will cause Prettier to\nexit with an error code if one or more of the files passed to it has not been\nformatted with Prettier. This works great, but it doesn’t provide any information\nin the output except for the files which aren’t properly formatted. This isn’t\nvery friendly for new contributors and users in general, so we added a `--check`\noption that produces more human-friendly output.\n\n<code style=\"display: block; background: #282a36; color: #f1f1f0\">\n<span style=\"color: #686868\"># Prettier 1.15</span><br />\n$ <span style=\"color: #5af78e\">prettier</span> <span style=\"color: #57c7ff\">\\*.js</span> --list-different<br />\nunformatted.js<br />\n<br />\n<span style=\"color: #686868\"># Prettier 1.16</span><br />\n$ <span style=\"color: #5af78e\">prettier</span> <span style=\"color: #57c7ff\">\\*.js</span> --check<br />\nChecking formatting...<br />\nunformatted.js<br />\nCode style issues found in the above file(s). Forgot to run Prettier?<br />\n</code>\n\n## Other changes\n\n### General\n\n#### Fix unexpected formatting caused by range format ([#5632] by [@lhchavez])\n\n<!-- prettier-ignore -->\n```js\n// Input\nsomething(\"something\", () => {\n  const something = {\n    something: [\n      {\n        long1: \"longlonglonglonglonglonglonglonglonglonglonglong\",\n        long2: \"longlonglonglonglonglonglonglonglonglonglonglong\",\n      }\n    ]\n  };\n});\n\n// Output (Prettier 1.15, --range-start 100 --range-end 120)\nsomething(\"something\", () => {\n  const something = { something: [{ long1: \"longlonglonglonglonglonglonglonglonglonglonglong\", long2: \"longlonglonglonglonglonglonglonglonglonglonglong\" }] };\n});\n\n// Output (Prettier 1.16, --range-start 100 --range-end 120)\nsomething(\"something\", () => {\n  const something = {\n    something: [\n      {\n        long1: \"longlonglonglonglonglonglonglonglonglonglonglong\",\n        long2: \"longlonglonglonglonglonglonglonglonglonglonglong\",\n      }\n    ]\n  };\n});\n```\n\n### API\n\n#### Allow plugin instances to be passed in the `plugins` field of format options ([#5763] by [@Kingwl])\n\nPreviously, plugin instances were somehow disallowed to be passed in the\n`plugins` field of format options but it should be allowed. We've fixed this\nissue in Prettier 1.16.\n\n```js\nconst prettier = require(\"prettier\");\nconst fooPlugin = require(\"./path/to/foo-plugin\");\nconst formatted = prettier.format(\"foo-code\", {\n  plugins: [fooPlugin],\n  parser: \"foo-parser\",\n});\n// Prettier 1.15: Error\n// Prettier 1.16: No error\n```\n\n### Standalone\n\n#### Remove the dynamic `require()` call in the standalone bundle ([#5612] by [@j-f1])\n\nPreviously, a dynamic `require()` call was present in the `standalone.js` file designed\nfor usage in browsers. It was used in a way where it wasn’t actually called, but\ntools like webpack to throw a warning. We adjusted the build script to remove\nthis `require()` call in the standalone bundle in Prettier 1.16.\n\n### TypeScript\n\n#### Correctly handle `//` in TSX ([#5728] by [@JamesHenry])\n\nPreviously, putting `//` as a child of a JSX element in TypeScript led to an error\nbecause it was interpreted as a comment. Prettier 1.16 fixes this issue.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst link = <a href=\"example.com\">http://example.com</a>\n\n// Output (Prettier 1.15)\n// Error: Comment location overlaps with node location\n\n// Output (Prettier 1.16)\nconst link = <a href=\"example.com\">http://example.com</a>;\n```\n\n#### Remove redundant parentheses around type annotations ([#5724] by [@flurmbo])\n\n<!-- prettier-ignore -->\n```js\n// Input\nclass Foo {\n  bar: (() => boolean);\n}\n\n// Output (Prettier 1.15)\nclass Foo {\n  bar: (() => boolean);\n}\n\n// Output (Prettier 1.16)\nclass Foo {\n  bar: () => boolean;\n}\n```\n\n### JavaScript\n\n#### Do not treat `something.connect()` as functional composition ([#5739] by [@makepost])\n\nA special format for `connect()` calls was introduced to improve formatting of Redux\nseveral versions ago, but there are many other uses for functions named `connect` that\nshouldn’t be formatted that way. Since most of these cases involved a `connect` method,\nwe no longer treat `foo.connect()` calls as functional composition.\n\n<!-- prettier-ignore -->\n```js\n// Input\napp.connect(\"activate\", async () => {\n  await data.load();\n  win.show_all();\n});\nconst ConnectedComponent = connect(\n  bar,\n  baz\n)(foo);\n\n// Output (Prettier 1.15)\napp.connect(\n  \"activate\",\n  async () => {\n    await data.load();\n    win.show_all();\n  }\n);\nconst ConnectedComponent = connect(\n  bar,\n  baz\n)(foo);\n\n// Output (Prettier 1.16)\napp.connect(\"activate\", async () => {\n  await data.load();\n  win.show_all();\n});\nconst ConnectedComponent = connect(\n  bar,\n  baz\n)(foo);\n```\n\n#### Add support for class private methods ([#5637] by [@existentialism])\n\n```js\n// Input\nclass Hello {\n  #world() {}\n}\n\n// Output (Prettier 1.15)\n// SyntaxError\n\n// Output (Prettier 1.16)\nclass Hello {\n  #world() {}\n}\n```\n\n#### Correct indentation for expressions in root template ([#5607] by [@ikatyang])\n\n<!-- prettier-ignore -->\n```js\n// Input\nif (a) {\n  return `\nhello\n${foo({\n  bar,\n  baz\n})}\nworld\n`;\n}\n\n// Output (Prettier 1.15)\nif (a) {\n  return `\nhello\n${foo({\n    bar,\n    baz\n  })}\nworld\n`;\n}\n\n// Output (Prettier 1.16)\nif (a) {\n  return `\nhello\n${foo({\n  bar,\n  baz\n})}\nworld\n`;\n}\n```\n\n#### Remove unnecessary linebreaks from HTML template literals ([#5771] by [@ikatyang])\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction HelloWorld() {\n  return html`\n    <h3>Bar List</h3>\n    ${bars.map(bar => html`\n       <p>${bar}</p>\n    `)}\n  `;\n}\n\n// Output (Prettier 1.15)\nfunction HelloWorld() {\n  return html`\n    <h3>Bar List</h3>\n    ${\n      bars.map(\n        bar => html`\n          <p>${bar}</p>\n        `\n      )\n    }\n  `;\n}\n\n// Output (Prettier 1.16)\nfunction HelloWorld() {\n  return html`\n    <h3>Bar List</h3>\n    ${bars.map(\n      bar => html`\n        <p>${bar}</p>\n      `\n    )}\n  `;\n}\n```\n\n### TypeScript/Flow\n\n#### Correctly recognize `/* HTML */` templates ([#5658] by [@ikatyang])\n\nWe [added support] for HTML template literal formatting using the `/* HTML */` pseudo-tag\nin Prettier 1.15, but due to a bug, it only worked for JavaScript code. We’ve fixed this\nissue in Prettier 1.16.\n\n[added support]: https://prettier.io/blog/2018/11/07/1.15.0.html#html-template-literal-in-javascript\n\n### CSS\n\n#### Fix broken output for lists caused by comments ([#5710] by [@jsnajdr])\n\n<!-- prettier-ignore -->\n```scss\n// Input\n$my-list2:\n  a // a\n  b\n  c;\n\n// Output (Prettier 1.15)\n$my-list2: a// a\n  bc;\n\n// Output (Prettier 1.16)\n$my-list2: a // a\n  b c;\n```\n\n#### Correctly handle backslashes ([#5597] by [@sh7dm])\n\n<!-- prettier-ignore -->\n```less\n// Input\n.figcaption {\n    .margin-top-1\\/2;\n    .large\\:none;\n}\n\n// Output (Prettier 1.15)\n.figcaption {\n  .margin-top-1\\ / 2;\n  .large\\: none;\n}\n\n// Output (Prettier 1.16)\n.figcaption {\n  .margin-top-1\\/2;\n  .large\\: none;\n}\n```\n\n### MDX\n\n#### Correctly handle inline html ([#5704] by [@ikatyang])\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n| Column 1 | Column 2 |\n|---|---|\n| Text | <Hello>Text</Hello> |\n\n<!-- Output (Prettier 1.15) -->\n<!-- SyntaxError -->\n\n<!-- Output (Prettier 1.16) -->\n| Column 1 | Column 2            |\n| -------- | ------------------- |\n| Text     | <Hello>Text</Hello> |\n```\n\n### HTML\n\n#### Format script with type \"application/ld+json\" ([#5642] by [@ikatyang])\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<script type=\"application/ld+json\">\n  {   \"json\":true  }\n</script>\n\n<!-- Output (Prettier 1.15) -->\n<script type=\"application/ld+json\">\n  {   \"json\":true  }\n</script>\n\n<!-- Output (Prettier 1.16) -->\n<script type=\"application/ld+json\">\n  { \"json\": true }\n</script>\n```\n\n#### Treat `.mjml` files as HTML ([#5505] by [@n1ru4l])\n\nMJML is a markup language that uses the same syntax as HTML. We added the `.mjml`\nfile extension to the list of extensions that are recognized as HTML, so Prettier\nwill format it.\n\n#### Smart quote for attributes ([#5590] by [@ikatyang])\n\nPreviously, the quotes around HTML attribute values were always printed as double\nquotes. To improve readability, they are now printed as the quote type that results\nin fewer escape characters being required in the string, like we do for other strings.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<div x='123\"456'></div>\n<div x=\"123'456\"></div>\n\n<!-- Output (Prettier 1.15) -->\n<div x=\"123&quot;456\"></div>\n<div x=\"123'456\"></div>\n\n<!-- Output (Prettier 1.16) -->\n<div x='123\"456'></div>\n<div x=\"123'456\"></div>\n```\n\n### Vue\n\n#### Tag names are case-sensitive ([#5606] by [@ikatyang])\n\nPreviously, we lowercased tag names before querying tag definition while\nparsing, which caused `<Input>` component to be recognized as a native `<input>`.\nThis would produce a syntax error when `</Input>` was encountered since `<input>`\nis a void element, and void elements can’t have closing elements.\nWe’ve fixed this issue in 1.16.\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input -->\n<template>\n  <Input></Input>\n</template>\n\n<!-- Output (Prettier 1.15) -->\n<!-- SyntaxError -->\n\n<!-- Output (Prettier 1.16) -->\n<template>\n  <Input></Input>\n</template>\n```\n\n### Vue/Angular\n\n#### Add parentheses to avoid unexpected `}}` in interpolations ([#5657] by [@ikatyang])\n\n`}}` is not allowed to be used in a interpolation since it’ll be recognized as the\nend of the interpolation. Prettier 1.15 would sometimes output code that broke this\nrule. Prettier 1.16 now adds parentheses to prevent `}}` from appearing in interpolations.\n\n<!-- prettier-ignore -->\n```html\n<!-- Input -->\n<p>{{ foo({ bar: {} }) }}</p>\n\n<!-- First Output (Prettier 1.15, --no-bracket-spacing) -->\n<p>{{ foo({bar: {}}) }}</p>\n\n<!-- Second Output (Prettier 1.15, --no-bracket-spacing) -->\n<!-- SyntaxError -->\n\n<!-- Output (Prettier 1.16, --no-bracket-spacing) -->\n<p>{{ foo({bar: ({})}) }}</p>\n```\n\n[@existentialism]: https://github.com/existentialism\n[@flurmbo]: https://github.com/flurmbo\n[@ikatyang]: https://github.com/ikatyang\n[@j-f1]: https://github.com/j-f1\n[@jameshenry]: https://github.com/JamesHenry\n[@jsnajdr]: https://github.com/jsnajdr\n[@kachkaev]: https://github.com/kachkaev\n[@kingwl]: https://github.com/Kingwl\n[@lhchavez]: https://github.com/lhchavez\n[@makepost]: https://github.com/makepost\n[@n1ru4l]: https://github.com/n1ru4l\n[@sh7dm]: https://github.com/sh7dm\n[@wuweiweiwu]: https://github.com/wuweiweiwu\n[#5494]: https://github.com/prettier/prettier/pull/5494\n[#5505]: https://github.com/prettier/prettier/pull/5505\n[#5590]: https://github.com/prettier/prettier/pull/5590\n[#5596]: https://github.com/prettier/prettier/pull/5596\n[#5597]: https://github.com/prettier/prettier/pull/5597\n[#5606]: https://github.com/prettier/prettier/pull/5606\n[#5607]: https://github.com/prettier/prettier/pull/5607\n[#5608]: https://github.com/prettier/prettier/pull/5608\n[#5612]: https://github.com/prettier/prettier/pull/5612\n[#5629]: https://github.com/prettier/prettier/pull/5629\n[#5632]: https://github.com/prettier/prettier/pull/5632\n[#5637]: https://github.com/prettier/prettier/pull/5637\n[#5642]: https://github.com/prettier/prettier/pull/5642\n[#5647]: https://github.com/prettier/prettier/pull/5647\n[#5657]: https://github.com/prettier/prettier/pull/5657\n[#5658]: https://github.com/prettier/prettier/pull/5658\n[#5685]: https://github.com/prettier/prettier/pull/5685\n[#5704]: https://github.com/prettier/prettier/pull/5704\n[#5710]: https://github.com/prettier/prettier/pull/5710\n[#5724]: https://github.com/prettier/prettier/pull/5724\n[#5728]: https://github.com/prettier/prettier/pull/5728\n[#5739]: https://github.com/prettier/prettier/pull/5739\n[#5763]: https://github.com/prettier/prettier/pull/5763\n[#5771]: https://github.com/prettier/prettier/pull/5771"
    },
    {
      "id": "/2018/11/07/1.15.0",
      "metadata": {
        "permalink": "/blog/2018/11/07/1.15.0",
        "source": "@site/blog/2018-11-07-1.15.0.md",
        "title": "Prettier 1.15: HTML, Vue, Angular and MDX Support",
        "description": "This release adds support for HTML, Vue, Angular and MDX.",
        "date": "2018-11-07T00:00:00.000Z",
        "formattedDate": "November 7, 2018",
        "tags": [],
        "readingTime": 32.19,
        "truncated": true,
        "authors": [
          {
            "name": "Ika (@ikatyang)",
            "url": "https://github.com/ikatyang"
          }
        ],
        "frontMatter": {
          "author": "Ika (@ikatyang)",
          "authorURL": "https://github.com/ikatyang",
          "title": "Prettier 1.15: HTML, Vue, Angular and MDX Support"
        },
        "prevItem": {
          "title": "Prettier 1.16: HTML improvements and better CRLF handling",
          "permalink": "/blog/2019/01/20/1.16.0"
        },
        "nextItem": {
          "title": "Prettier 1.14: YAML Support",
          "permalink": "/blog/2018/07/29/1.14.0"
        }
      },
      "content": "This release adds support for HTML, Vue, Angular and MDX.\nIt also respects decorator position,\nadds an option for JSX single quotes,\nallows parser inference via shebang,\nadds support for several new syntax features, and has a few formatting tweaks.\n\n<!--truncate-->\n\n## Highlights\n\n### HTML/Vue/Angular\n\n#### Support HTML, Vue, and Angular ([#5259] by [@ikatyang], [#4753] by [@evilebottnawi], [#2083] by [@azz])\n\nPrettier can now format HTML, Vue and Angular files! 🎉\n\nWe use [angular-html-parser][angular-html-parser], an HTML parser extracted from [Angular][@angular/compiler/ml_parser],\nto parse these HTML and HTML template files so it should be highly compliant with the HTML spec thanks to the Angular team.\n\n[angular-html-parser]: https://github.com/ikatyang/angular-html-parser/tree/master/packages/angular-html-parser\n[@angular/compiler/ml_parser]: https://github.com/angular/angular/tree/master/packages/compiler/src/ml_parser\n\nA few highlights:\n\n##### Whitespace-sensitive formatting\n\nAs you may notice during daily HTML works, the following two cases won't produce the same output:\n\n|                |      html      |    output    |\n| -------------- | :------------: | :----------: |\n| with spaces    | `1<b> 2 </b>3` | 1<b> 2 </b>3 |\n| without spaces |  `1<b>2</b>3`  |  1<b>2</b>3  |\n\nThis happens because whitespace is significant in inline elements.\n\nFor this reason, we cannot safely format\n\n<!-- prettier-ignore -->\n```html\n<a href=\"https://prettier.io/\">Prettier is an opinionated code formatter.</a>\n```\n\ninto\n\n<!-- prettier-ignore -->\n```html\n<a href=\"https://prettier.io/\">\n  Prettier is an opinionated code formatter.\n</a>\n```\n\nsince it may modify the displayed output in the browser.\n\nInstead of breaking your code or just doing nothing, we introduce _whitespace-sensitive formatting_, which:\n\n- follows the default CSS `display` value for every element to identify if the whitespace inside it is significant,\n- and wraps the tags in such a way as to avoid adding or removing significant whitespace.\n\nFor example:\n\n<!-- prettier-ignore -->\n```html\n<!-- <span> is an inline element, <div> is a block element -->\n\n<!-- input -->\n<span class=\"dolorum atque aspernatur\">Est molestiae sunt facilis qui rem.</span>\n<div class=\"voluptatem architecto at\">Architecto rerum architecto incidunt sint.</div>\n\n<!-- output -->\n<span class=\"dolorum atque aspernatur\"\n  >Est molestiae sunt facilis qui rem.</span\n>\n<div class=\"voluptatem architecto at\">\n  Architecto rerum architecto incidunt sint.\n</div>\n```\n\nWe also allow magic comments (e.g., `<!-- display: block -->`) to tell Prettier how to format elements\ndue to the fact that CSS display can be changed:\n\n<!-- prettier-ignore -->\n```html\n<!-- input -->\n<!-- display: block -->\n<span class=\"dolorum atque aspernatur\">Est molestiae sunt facilis qui rem.</span>\n\n<!-- output -->\n<!-- display: block -->\n<span class=\"dolorum atque aspernatur\">\n  Est molestiae sunt facilis qui rem.\n</span>\n```\n\nThere's also an option for the global whitespace sensitivity\nin case you may want maximum safety or you just don't care about that whitespace:\n\n`--html-whitespace-sensitivity` (defaults to `css`)\n\n- `css` - Respect the default value of CSS `display` property.\n- `strict` - All whitespace is considered significant.\n- `ignore` - All whitespace is considered insignificant.\n\n##### Automatic parser inference\n\nPrettier uses filename to infer which parser to use. Here's the default patterns for HTML, Vue, and Angular:\n\n- `*.html`: `--parser html`\n- `*.component.html`: `--parser angular`\n- `*.vue`: `--parser vue`\n\nMake sure your filename matches the correct parser (especially for Angular users); if it does not,\nyou will have to manually specify which parser to use via the [overrides] field.\n\n[overrides]: https://prettier.io/docs/en/configuration.html#configuration-overrides\n\nNote that framework-specific formatting won't be triggered in `--parser html`.\n\n##### HTML template literal in JavaScript\n\nThis release also adds support for the `html` template tag (or a “tag” comment containing `HTML`):\n\n- `` html`code` ``\n- `` /* HTML */ `code` ``\n\n<!-- prettier-ignore -->\n```js\n// input\nconst foo = html`<div class=\"voluptatem architecto at\">Architecto rerum ${interpolation} architecto incidunt sint.</div>`;\n\n// output\nconst foo = html`\n  <div class=\"voluptatem architecto at\">\n    Architecto rerum ${interpolation} architecto incidunt sint.\n  </div>\n`;\n```\n\n##### Vue formatting\n\nThe following Vue-specific syntax structures are supported:\n\n- interpolation\n  - `{{ something }}`\n- attribute\n  - `v-something`\n  - `:something`\n  - `@something`\n  - `v-for`\n  - `slot-scope`\n\n##### Angular formatting\n\nThe following Angular-specific syntax structures are supported:\n\n- interpolation\n  - `{{ something }}`\n- attribute\n  - `(something)`\n  - `[something]`\n  - `[(something)]`\n  - `*something`\n- inline template\n  - `` @Component({ template: `<div>Hello World</div>` }) ``\n\n### MDX\n\n#### Support MDX ([#4975] by [@ikatyang])\n\n[MDX](https://mdxjs.com/) is a markdown extension that lets you use JSX to build cool documentation.\nYou can now use Prettier to format it, and we’ll format both the Markdown and JS pieces for you!\n\n<!-- prettier-ignore -->\n```jsx\n<!-- Input -->\n\nimport { \n  colors } from \n   './theme'\nimport     Palette from     './components/palette'\n\n#      Colors\n\n<Palette colors={\n      colors} \n  />\n\n<!-- Output -->\n\nimport { colors } from \"./theme\";\nimport Palette from \"./components/palette\";\n\n# Colors\n\n<Palette colors={colors} />\n```\n\n### JavaScript\n\n#### Flatten else-branch for nested ternaries ([#5039] by [@suchipi], [#5272] by [@duailibe], [#5333] by [@ikatyang])\n\nPreviously, nested ternaries were always indented, which caused increasing levels of indentation for deeply-nested ternaries.\nTo solve this problem, we flattened the else-branch for nested ternaries in a fashion similar to how `if..else if..else` blocks are formatted.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst example1 =\n    someValue === 'a' ? 'hello world, branch a'\n  : someValue === 'b' ? 'hello world, branch a && b'\n  : someValue === 'c' ? 'hello world, branch a && b && c'\n  : someValue === 'd' ? 'hello world, branch a && b && c && d'\n  : null;\n\nconst example2 =\n  someValue === 'a'\n    ? someValue === 'b'\n      ? someValue === 'c'\n        ? 'hello world, branch a && b && c'\n        : 'hello world, branch a && b && !c'\n      : 'hello world, branch a && !b' \n    : null;\n\n// Output (Prettier 1.14)\nconst example1 =\n  someValue === \"a\"\n    ? \"hello world, branch a\"\n    : someValue === \"b\"\n      ? \"hello world, branch a && b\"\n      : someValue === \"c\"\n        ? \"hello world, branch a && b && c\"\n        : someValue === \"d\"\n          ? \"hello world, branch a && b && c && d\"\n          : null;\n\nconst example2 =\n  someValue === \"a\"\n    ? someValue === \"b\"\n      ? someValue === \"c\"\n        ? \"hello world, branch a && b && c\"\n        : \"hello world, branch a && b && !c\"\n      : \"hello world, branch a && !b\"\n    : null;\n\n// Output (Prettier 1.15)\nconst example1 =\n  someValue === \"a\"\n    ? \"hello world, branch a\"\n    : someValue === \"b\"\n    ? \"hello world, branch a && b\"\n    : someValue === \"c\"\n    ? \"hello world, branch a && b && c\"\n    : someValue === \"d\"\n    ? \"hello world, branch a && b && c && d\"\n    : null;\n\nconst example2 =\n  someValue === \"a\"\n    ? someValue === \"b\"\n      ? someValue === \"c\"\n        ? \"hello world, branch a && b && c\"\n        : \"hello world, branch a && b && !c\"\n      : \"hello world, branch a && !b\"\n    : null;\n```\n\n#### Keep decorators inline if they were written inline ([#5188] by [@duailibe])\n\nPrior to Prettier 1.14, we were always placing decorators on the same line as what they were decorating.\n\nWe received feedback from some users that this was not ideal formatting, so after consideration, we changed it and in Prettier 1.14, decorators were always placed on a separate line from what they were decorating.\n\nHowever, we received feedback from other users that this formatting was not ideal in all cases.\n\nWe want to have consistent formatting in Prettier when we can, so we tried to think of a heuristic that we could use to decide when to put decorators on the same line and when to put them on another line.\n\nHowever, after a long discussion in [#4924], we concluded that there's no reliable way to identify which should be inlined and which shouldn't be, so in Prettier 1.15 we decided to respect the original style that the user wrote. So if they put a newline between the decorator and what it decorates, we will print a newline there. If they didn't, we won't.\n\n<!-- prettier-ignore -->\n```js\n// Input\nclass Hello {\n  @decorator inline = 'value';\n\n  @decorator\n  ownLine = 'value';\n  \n  @decorator({\n    hello: 'world'\n  }) multiLine = 'value';\n}\n\n// Output (Prettier 1.14)\nclass Hello {\n  @decorator\n  inline = \"value\";\n\n  @decorator\n  ownLine = \"value\";\n\n  @decorator({\n    hello: \"world\"\n  })\n  multiLine = \"value\";\n}\n\n// Output (Prettier 1.15)\nclass Hello {\n  @decorator inline = \"value\";\n\n  @decorator\n  ownLine = \"value\";\n\n  @decorator({\n    hello: \"world\"\n  })\n  multiLine = \"value\";\n}\n```\n\n#### Respect original decorator order ([#5207] by [@duailibe])\n\nDecorators are still not part of the official ECMA standard and\n[where decorators on exported classes should go] is a question whose answer has not yet been decided.\nTo help proposal authors to get feedback,\nBabel 7 added support for both decorators before and after the exported classes.\nPrettier 1.15 adds support for them and respects where you put the decorator(s).\n(Once the spec is standardized, we'll change it to be consistent and not respect user input.)\n\n<!-- prettier-ignore -->\n```js\n// decorator before export\n@decorator export class Bar {}\n\n// decorator after export\nexport @decorator class Foo {}\n```\n\n[where decorators on exported classes should go]: https://babeljs.io/blog/2018/09/17/decorators#where-should-decorators-on-exported-classes-go\n\n#### Improved object-break heuristic ([#5205] by [@j-f1])\n\nPreviously, Prettier would automatically break objects onto multiple lines if they didn’t fit within the print width.\nPrettier would also keep objects broken onto multiple lines if there was a newline somewhere inside them in the input code.\nThis made it difficult to collapse an object since you had to manually merge the object onto one line.\nSince manual formatting changes are a task Prettier aims to eliminate, we’ve changed the behavior to only check for a newline between the `{` and the first key:\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst data = {  foo: 'bar',\n  baz: 'quux'\n}\n/* You’d get this format by deleting the newline after the `{` */\n\n// Output (Prettier 1.14)\nconst data = {\n  foo: 'bar',\n  baz: 'quux'\n}\n\n// Output (Prettier 1.15)\nconst data = { foo: 'bar', baz: 'quux' }\n```\n\n### JSX\n\n#### Option to use single quotes in JSX ([#4798] by [@smirea])\n\nAfter [huge demand] from the community,\nPrettier 1.15 adds an option for printing single quotes in JSX: `--jsx-single-quote` (or `jsxSingleQuote` in the config/API).\n\n[huge demand]: https://github.com/prettier/prettier/issues/1080\n\n<!-- prettier-ignore -->\n```jsx\n// with --jsx-single-quote\n<div class='hello'>world</div>\n\n// without --jsx-single-quote\n<div class=\"hello\">world</div>\n```\n\n#### Split JSX text correctly ([#5006] by [@yuliaHope])\n\nPrettier 1.14 accidentally introduced some very unfortunate line breaks in JSX. Those cases have now been fixed.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n<div>\n  Sales tax estimated using a rate of {salesTax * 100}%.\n</div>;\n<BasicText light>(avg. {value}/5)</BasicText>;\n<Link to={orgURL(this.props.org.name)}>\n  Go to {this.props.org.name}'s profile\n</Link>;\n\n// Output (Prettier 1.14)\n<div>\n  Sales tax estimated using a rate of {salesTax * 100}\n  %.\n</div>;\n<BasicText light>\n  (avg. {value}\n  /5)\n</BasicText>;\n<Link to={orgURL(this.props.org.name)}>\n  Go to {this.props.org.name}\n  's profile\n</Link>;\n\n// Output (Prettier 1.15)\n<div>Sales tax estimated using a rate of {salesTax * 100}%.</div>;\n<BasicText light>(avg. {value}/5)</BasicText>;\n<Link to={orgURL(this.props.org.name)}>\n  Go to {this.props.org.name}'s profile\n</Link>;\n```\n\n### Flow\n\n#### Support inexact ([#5304] by [@jbrown215], [#5356] by [@existentialism])\n\nThe Flow team [plans to treat all object types as _exact_ by default][inexact] in the future,\nso they introduced a new syntax to indicate if an object type is inexact.\nThis syntax is now supported in Prettier 1.15.\n\n[inexact]: https://medium.com/flow-type/on-the-roadmap-exact-objects-by-default-16b72933c5cf\n\n<!-- prettier-ignore -->\n```ts\ntype T = {\n  a: number,\n  ...\n}\n```\n\n#### Do not break Flow typecast comments ([#5280], [#5290] by [@swac])\n\nPreviously, parentheses that surrounds Flow typecast comments were sometimes removed,\nwhich would break Flow's comment syntax. This issue has been fixed in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\n(obj /*: Class */).property\n\n// Output (Prettier 1.14)\nobj /*: Class */.property;\n\n// Output (Prettier 1.15)\n(obj /*: Class */).property;\n```\n\n### Markdown\n\n#### Preserve math syntax ([#5050], [#5220] by [@ikatyang])\n\nPreviously, some of [remark-math]'s syntax structures were mangled since we treated them as normal text.\nThey are now preserved in Prettier 1.15 so you can safely use math syntax.\n\n[remark-math]: https://github.com/Rokt33r/remark-math\n\n<!-- prettier-ignore -->\n```md\n$inline-math$\n\n$$\nblock-math\n$$\n```\n\n## Other changes\n\n### API/CLI\n\n#### Infer parser via shebang if there's no extension in the filename ([#5149] by [@haggholm])\n\nPreviously, we used filename and extension to infer which parser to use,\nbut often there's no extension for CLI scripts,\nso the user has to specify the parser manually, which is not ideal.\nIn Prettier 1.15,\nwhen formatting a file with no extension,\nwe'll look at the first line of the file,\nand if there's a shebang,\nwe'll use it to infer which parser to use.\n\n<code style=\"display: block; background: #282a36; color: #f1f1f0\">\n<span style=\"color: #686868\"># Input</span><br />\n$ <span style=\"color: #5af78e\">cat</span> <u>bin/example</u><br />\n\\#!/usr/bin/env node<br />\n&nbsp;&nbsp;require ( \"../src/cli\" ) . run ( )<br />\n<br />\n$ <span style=\"color: #5af78e\">prettier</span> <u>bin/example</u><br />\n<br />\n<span style=\"color: #686868\"># Output (Prettier 1.14)</span><br />\n[<span style=\"color: #ff5c57\">error</span>] No parser could be inferred for file: bin/example<br />\n<br />\n<span style=\"color: #686868\"># Output (Prettier 1.15)</span><br />\n#!/usr/bin/env node<br />\nrequire(\"../src/cli\").run();\n</code>\n\n#### Add a new `trim` command to trim whitespaces in the current line ([#4772] by [@warrenseine])\n\nPreviously in the plugin API, there was no method to delete the current line’s indentation.\nIt's possible to use some workarounds to achieve the same goal, but there wasn't a reliable workaround,\nso we introduced a new [`trim`] command to trim whitespaces in a reliable way.\n\n[`trim`]: https://github.com/prettier/prettier/blob/master/commands.md#trim\n\n#### Colorful validation message ([#5020], [#5057] by [@ikatyang])\n\nPreviously, there was no color for the option validation error message,\nso it wasn’t easy to see what option had an invalid value passed to it, and what the valid values were.\nIn Prettier 1.15, you should be able to understand what's going on at a glance.\n\n<code style=\"display: block; background: #282a36; color: #f1f1f0\">\n<span style=\"color: #686868\"># Input</span><br />\n$ <span style=\"color: #5af78e\">prettier</span> <u>filename.js</u> --trailing-comma wow<br />\n<br />\n<span style=\"color: #686868\"># Output (Prettier 1.14)</span><br />\n[<span style=\"color: #ff5c57\">error</span>] Invalid \\`\\`--trailing-comma\\`\\` value. Expected \"all\", \"es5\" or \"none\", but received \\`\"wow\"\\`.\n<br /><br />\n<span style=\"color: #686868\"># Output (Prettier 1.15)</span><br />\n[<span style=\"color: #ff5c57\">error</span>] Invalid <span style=\"color: #ff5c57\">--trailing-comma</span> value. Expected <span style=\"color: #57c7ff\">\"all\", \"es5\" or \"none\"</span>, but received <span style=\"color: #ff5c57\">\"wow\"</span>.\n</code>\n\n#### Allow printer to preprocess the AST ([#5041] by [@ikatyang])\n\nSometimes we need to transform the AST to make it easier to print.\nPreviously, it was done in the parser but this way it also exposed the internal stuff to external users,\nwho may have tried to build a custom parser, which is not ideal.\nIn Prettier 1.15, you can now use `printer.preprocess` to preprocess the AST without exposing any internals of the API.\n\n```ts\ninterface Printer {\n  preprocess(ast: AST, options: object): AST;\n}\n```\n\n#### Better error message for unsupported config format ([#4969] by [@ikatyang])\n\nPreviously, loading a config file of an unsupported format would throw an error message\nthat looks like a bug in Prettier, so we improved the message in Prettier 1.15.\n\n<code style=\"display: block; background: #282a36; color: #f1f1f0\">\n<span style=\"color: #686868\"># Input</span><br />\n$ <span style=\"color: #5af78e\">prettier</span> <u>filename.js</u> --config <u>.prettierrc.wow</u><br />\n<br />\n<span style=\"color: #686868\"># Output (Prettier 1.14)</span><br />\n[<span style=\"color: #ff5c57\">error</span>] Invalid configuration file: Cannot read property 'sync' of undefined\n<br /><br />\n<span style=\"color: #686868\"># Output (Prettier 1.15)</span><br />\n[<span style=\"color: #ff5c57\">error</span>] Invalid configuration file: No sync loader specified for extension \".wow\"\n</code>\n\n#### Add an option to enforce line endings ([#5327] by [@kachkaev])\n\nPreviously, Prettier always respected your original line endings, which is fine in the most cases.\nBut when people collaborate on a project from different operating systems,\nit becomes easy to end up with mixed line endings in the central git repository and cause large diffs.\nPrettier 1.15 adds an option `--end-of-line <auto|lf|crlf|cr>` to help you deal with these line ending issues.\n\n### JavaScript\n\n#### Treat single-star comments as JSDoc ([#5206] by [@j-f1], [#5330] by [@lydell])\n\nPrettier will now properly indent JSDoc-style comments with only a single `*` on the first line (`/*` vs `/**`) when the comment’s indentation changes:\n\n<!-- prettier-ignore -->\n```js\n// Input\nif (true) {\n    /*\n     * Oh no\n     */\n}\n\n// Output (Prettier 1.14)\nif (true) {\n  /*\n   \t * Oh no\n \t   */\n}\n\n// Output (Prettier 1.15)\nif (true) {\n  /*\n \t * Oh no\n \t */\n}\n```\n\n#### Correct parentheses for mixed exponentiation/modulo ([#5243] by [@bakkot])\n\nPreviously, parentheses for mixed exponentiation/modulo were wrongly removed,\nbut we fixed this in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst val = (n % 10) ** 2\n\n// Output (Prettier 1.14)\nconst val = n % 10 ** 2;\n\n// Output (Prettier 1.15)\nconst val = (n % 10) ** 2;\n```\n\n#### Correctly print comments in `try..finally` ([#5252] by [@aquibm])\n\nIn previous versions, some comments in a `try`-`finally` statement were printed in the wrong order.\nPrettier now prints them correctly.\n\n<!-- prettier-ignore -->\n```js\n// Input\n// comment 1\ntry {\n    // comment 2\n}\n// comment 3\nfinally // comment 4\n{\n    // comment 5\n}\n\n// Output (Prettier 1.14)\n// comment 1\ntry {\n  // comment 2\n} finally { // comment 4\n  // comment 3\n  // comment 5\n}\n\n// Output (Prettier 1.15)\n// comment 1\ntry {\n  // comment 2\n} finally {\n  // comment 3\n  // comment 4\n  // comment 5\n}\n```\n\n#### Printing comments in catch clause to the correct place ([#5202] by [@duailibe])\n\nComments in `catch` clauses are now printed on their own line just like other clauses.\n\n<!-- prettier-ignore -->\n```js\n// Input\ntry {} catch (\n  // comment\n  e\n) {}\n\n// Output (Prettier 1.14)\ntry {\n} catch (// comment\ne) {}\n\n// Output (Prettier 1.15)\ntry {\n} catch (\n  // comment\n  e\n) {}\n```\n\n#### Inline the argument if it's an arrow function with conditional expression as body ([#5209] by [@duailibe])\n\nThere's no need to add an extra indentation level for\na function call argument that's an arrow function with conditional expression as body.\nWe now inline them in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nx.then(() => a ?\n  veryVerVeryveryVerVeryveryVerVeryveryVerVeryLong:\n  veryVerVeryveryVerVeryveryVerVeryveryVerVeryLong\n);\n\n// Output (Prettier 1.14)\nx.then(\n  () =>\n    a\n      ? veryVerVeryveryVerVeryveryVerVeryveryVerVeryLong\n      : veryVerVeryveryVerVeryveryVerVeryveryVerVeryLong\n);\n\n// Output (Prettier 1.15)\nx.then(() =>\n  a\n    ? veryVerVeryveryVerVeryveryVerVeryveryVerVeryLong\n    : veryVerVeryveryVerVeryveryVerVeryveryVerVeryLong\n);\n```\n\n#### Fix unexpected indentation in variable declarator caused by comments ([#5190] by [@duailibe])\n\nIn previous versions, comments in variable declarations caused variable declarators to be printed without indentation,\nbut this has been fixed in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst // Comment\n\ta = 1;\n\n// Output (Prettier 1.14)\nconst // Comment\na = 1;\n\n// Output (Prettier 1.15)\nconst // Comment\n  a = 1;\n```\n\n#### Do not remove parens for ternary in optional member expression ([#5179] by [@existentialism])\n\nPrettier 1.14 was incorrectly removing parens around ternary operators when they appeared within optional member expressions (`?.`). Those cases are now printed correctly in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\n(a ? b : c)?.d;\n\n// Output (Prettier 1.14)\na ? b : c?.d;\n\n// Output (Prettier 1.15)\n(a ? b : c)?.d;\n```\n\n#### Escape `${` as well as backticks in GraphQL tags ([#5137] by [@lydell])\n\nPreviously, interpolation-like strings were wrongly unescaped in embedded GraphQL,\nwhich led to JavaScript treating it as an interpolation. They're correctly escaped in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst schema = gql`\ntype Project {\n    \"Pattern: \\`\\${project}\\`\"\n    pattern: String\n}\n`;\n\n// Output (Prettier 1.14)\nconst schema = gql`\n  type Project {\n    \"Pattern: \\`${project}\\`\"\n    pattern: String\n  }\n`;\n\n// Output (Prettier 1.15)\nconst schema = gql`\n  type Project {\n    \"Pattern: \\`\\${project}\\`\"\n    pattern: String\n  }\n`;\n```\n\n#### Do not strip quotes in keys if they're not es5 compatible ([#5157] by [@koba04])\n\nPreviously, Prettier stripped quotes in keys if they weren’t necessary in ES2015,\nwhich caused the output to be incompatible with ES5.\nPrettier 1.15 only strips them if they're not necessary in ES5.\n\n<!-- prettier-ignore -->\n```js\n// Input\nvar obj = {\n  \"𐊧\": 'ok',\n  𐊧: 'ok'\n};\n\n// Output (Prettier 1.14)\nvar obj = {\n  𐊧: \"ok\",\n  𐊧: \"ok\"\n};\n\n// Output (Prettier 1.15)\nvar obj = {\n \"𐊧\": \"ok\",\n  𐊧: \"ok\"\n};\n```\n\n#### Do not hug arguments if the second argument in function is a ternary ([#5151] by [@onurtemizkan])\n\nWe have some special cases that will _hug_ function call arguments\nif the first one is a function and the second one is a not a complex expression,\nbut we considered ternaries non-complex expressions. They actually can be complex,\nso we’ve changed this in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunc(\n  () => { thing(); },\n  something(longArgumentName, anotherLongArgumentName) ? someOtherThing() : somethingElse(true, 0)\n);\n\n// Output (Prettier 1.14)\nfunc(() => {\n  thing();\n}, something(longArgumentName, anotherLongArgumentName) ? someOtherThing() : somethingElse(true, 0));\n\n// Output (Prettier 1.15)\nfunc(\n  () => {\n    thing();\n  },\n  something(longArgumentName, anotherLongArgumentName)\n    ? someOtherThing()\n    : somethingElse(true, 0)\n);\n```\n\n#### Add support for timeouts passed as numbers to test functions ([#5085] by [@j-f1])\n\nThis preserves Prettier’s special formatting for testing functions when a timeout (number) is passed as a third parameter:\n\n<!-- prettier-ignore -->\n```js\n// Input\nit('Handles at least 10k untracked files without failing', async () => {\n  hello()\n}, 25000)\n\n// Output (Prettier 1.14)\nit(\n  \"Handles at least 10k untracked files without failing\",\n  async () => {\n    hello();\n  },\n  25000\n);\n\n// Output (Prettier 1.15)\nit('Handles at least 10k untracked files without failing', async () => {\n  hello()\n}, 25000)\n```\n\n#### Format beforeEach-like calls like regular function calls ([#5011] by [@ericsakmar])\n\nPreviously, arguments in `beforeEach` were wrongly hugged. We've fixed this issue in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nbeforeEach(done =>\n  startService()\n    .pipe(tap(service => (instance = service)))\n    .subscribe(() => done()),\n);\n\n// Output (Prettier 1.14)\nbeforeEach(done =>\n  startService()\n    .pipe(tap(service => (instance = service)))\n    .subscribe(() => done()));\n\n// Output (Prettier 1.15)\nbeforeEach(done =>\n  startService()\n    .pipe(tap(service => (instance = service)))\n    .subscribe(() => done())\n);\n```\n\n#### Print pipeline operator's leading comment on its own line ([#5015] by [@flxwu])\n\nIn Prettier 1.14, a comment in front of a pipeline operator causes the right argument to be not indented.\nThis issue has been fixed in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction pipeline() {\n\t0\n\t// Comment\n\t|> x\n}\n\n// Output (Prettier 1.14)\nfunction pipeline() {\n  0\n    |> // Comment\n    x;\n}\n\n// Output (Prettier 1.15)\nfunction pipeline() {\n  0 |>\n    // Comment\n    x;\n}\n```\n\n#### Preserve dangling comments in `new` expressions ([#5017] by [@flxwu])\n\nPassing a comment instead of an expression to a `new` call is now preserved\ninstead of being pulled out of the parens.\n\n<!-- prettier-ignore -->\n```js\n// Input\nnew Thing(/* comment */)\n\n// Output (Prettier 1.14)\nnew Thing /* comment */();\n\n// Output (Prettier 1.15)\nnew Thing(/* comment */);\n```\n\n#### Remove redundant ASI protection for bind expression ([#4970] by [@TitanSnow])\n\nUnnecessary semicolons for bind expressions are removed with `--no-semi` in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\na::b.c\n\n// Output (Prettier 1.14)\n;a::b.c\n\n// Output (Prettier 1.15)\na::b.c\n```\n\n#### Do not remove necessary parens in bind expression ([#4964] by [@TitanSnow])\n\nNecessary parens in bind expressions are preserved in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\na::(b.c());\n\n// Output (Prettier 1.14)\na::b.c();\n\n// Output (Prettier 1.15)\na::(b.c());\n```\n\n#### Fix indentation for ternary in function call ([#4368] by [@malcolmsgroves])\n\nLogical expressions in a ternary in a function call are now indented correctly.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfn(\n  bifornCringerMoshedPerplexSawder,\n  askTrovenaBeenaDependsRowans,\n  glimseGlyphsHazardNoopsTieTie === averredBathersBoxroomBuggyNurl &&\n    anodyneCondosMalateOverateRetinol // <--\n    ? annularCooeedSplicesWalksWayWay\n    : kochabCooieGameOnOboleUnweave\n);\n\n// Output (Prettier 1.14)\nfn(\n  bifornCringerMoshedPerplexSawder,\n  askTrovenaBeenaDependsRowans,\n  glimseGlyphsHazardNoopsTieTie === averredBathersBoxroomBuggyNurl &&\n  anodyneCondosMalateOverateRetinol // <--\n    ? annularCooeedSplicesWalksWayWay\n    : kochabCooieGameOnOboleUnweave\n);\n\n// Output (Prettier 1.15)\nfn(\n  bifornCringerMoshedPerplexSawder,\n  askTrovenaBeenaDependsRowans,\n  glimseGlyphsHazardNoopsTieTie === averredBathersBoxroomBuggyNurl &&\n    anodyneCondosMalateOverateRetinol // <--\n    ? annularCooeedSplicesWalksWayWay\n    : kochabCooieGameOnOboleUnweave\n);\n```\n\n#### Do not move comments in `import`s ([#5016] by [@ericsakmar])\n\nComments in `import`s won't be moved output of the `import`.\n\n<!-- prettier-ignore -->\n```js\n// Input\nimport x, {\n  // comment\n  y\n} from 'z';\n\n\n// Output (Prettier 1.14)\nimport x, { y } from \"z\";\n// comment\n\n// Output (Prettier 1.15)\nimport x, {\n  // comment\n  y\n} from \"z\";\n```\n\n#### Fix unstable `while` comment ([#5251] by [@jaideng123])\n\nComments in `while` are now correctly formatted\nso that it does not need to be formatted twice to get to a stable output.\n\n<!-- prettier-ignore -->\n```js\n// Input\nwhile(\n    true\n    // Comment\n) {}\n\n// First Output (Prettier 1.14)\nwhile (true) // Comment\n{}\n\n// Second Output (Prettier 1.14)\nwhile (\n  true // Comment\n) {}\n\n// First & Second Output (Prettier 1.15)\nwhile (\n  true\n  // Comment\n) {}\n```\n\n#### Stably print comments between function declaration and its body ([#5250] by [@jaideng123])\n\nComments between a function declaration and its body do not need to be formatted twice to get the final result now.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction foo() // this is a function\n{\n  return 42\n}\n\n// First Output (Prettier 1.14)\nfunction foo() { // this is a function\n  return 42;\n}\n\n// Second Output (Prettier 1.14)\nfunction foo() {\n  // this is a function\n  return 42;\n}\n\n// First & Second Output (Prettier 1.15)\nfunction foo() {\n  // this is a function\n  return 42;\n}\n```\n\n### JSX\n\n#### Do not break logical expression chain in JSX ([#5092] by [@duailibe])\n\nUnnecessary indentations for logical expression chains in JSX are now prevented.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst TestComponent = () => {\n  return (\n    <>\n      {cats && memes && (\n        <Foo bar><Trololol /></Foo>\n      )}\n    </>\n  );\n}\n\n// Output (Prettier 1.14)\nconst TestComponent = () => {\n  return (\n    <>\n      {cats &&\n        memes && (\n          <Foo bar>\n            <Trololol />\n          </Foo>\n        )}\n    </>\n  );\n};\n\n// Output (Prettier 1.15)\nconst TestComponent = () => {\n  return (\n    <>\n      {cats && memes && (\n        <Foo bar>\n          <Trololol />\n        </Foo>\n      )}\n    </>\n  );\n};\n```\n\n#### Do not change non-breaking whitespace into the regular one ([#5165] by [@vjeux], [#5334] by [@ikatyang])\n\nPreviously, non-breaking whitespaces were treated as regular whitespaces,\nwhich caused them to be replaced with regular whitespaces.\nThis issue has been fixed in Prettier 1.15.\n\n(`·` represents a non-breaking whitespace)\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction OhMyWhitespace() {\n  return (\n    <Dialog>\n      <p>\n        Supprimer l’objectif «·{goal.name}·»·?\n      </p>\n    </Dialog>\n  )\n}\n\n// Output (Prettier 1.14)\nfunction OhMyWhitespace() {\n  return (\n    <Dialog>\n      <p>\n        Supprimer l’objectif «\n        {goal.name}\n        ·»·?\n      </p>\n    </Dialog>\n  );\n}\n\n// Output (Prettier 1.15)\nfunction OhMyWhitespace() {\n  return (\n    <Dialog>\n      <p>Supprimer l’objectif «·{goal.name}·»·?</p>\n    </Dialog>\n  );\n}\n```\n\n#### Do not break simple jsx opening tag ([#5078] by [@duailibe])\n\nSimple jsx opening tags are no longer broken onto multiple lines.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nfunction HelloWorld() {\n  const listItemText = (\n    <ListItemText\n      primary={\n        <PrimaryText>{`Two Factor Authentication is ${enabledText}`}</PrimaryText>\n      }\n    />\n  );\n}\n\n// Output (Prettier 1.14)\nfunction HelloWorld() {\n  const listItemText = (\n    <ListItemText\n      primary={\n        <PrimaryText\n        >{`Two Factor Authentication is ${enabledText}`}</PrimaryText>\n      }\n    />\n  );\n}\n\n// Output (Prettier 1.15)\nfunction HelloWorld() {\n  const listItemText = (\n    <ListItemText\n      primary={\n        <PrimaryText>{`Two Factor Authentication is ${enabledText}`}</PrimaryText>\n      }\n    />\n  );\n}\n```\n\n#### Fix a regression for arrow function in jsx expression ([#5063] by [@ikatyang])\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n<div className=\"search-filter-chips\">\n    {scopes.filter(scope => scope.value !== \"\").map((scope, i) => (\n        <FilterChip\n            query={this.props.query}\n            onFilterChosen={this.onSearchScopeClicked}\n        />\n    ))}\n</div>;\n\n// Output (Prettier 1.14)\n<div className=\"search-filter-chips\">\n  {scopes.filter(scope => scope.value !== \"\").map((scope, i) => (\n    <FilterChip\n      query={this.props.query}\n      onFilterChosen={this.onSearchScopeClicked}\n    />\n  ))}\n</div>;\n\n// Output (Prettier 1.15)\n<div className=\"search-filter-chips\">\n  {scopes\n    .filter(scope => scope.value !== \"\")\n    .map((scope, i) => (\n      <FilterChip\n        query={this.props.query}\n        onFilterChosen={this.onSearchScopeClicked}\n      />\n    ))}\n</div>;\n```\n\n### Flow\n\n#### Inline generics with a single identifier ([#5066] by [@duailibe])\n\nGenerics with a single identifier are now always inlined.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst longVariableName: Array<number> = this.foo.bar.baz.collider.body.vertices.reduce();\n\n// Output (Prettier 1.14)\nconst longVariableName: Array<\n  number\n> = this.foo.bar.baz.collider.body.vertices.reduce();\n\n// Output (Prettier 1.15)\nconst longVariableName: Array<number> = this.foo.bar.baz.collider.body.vertices.reduce();\n```\n\n#### Do not always inline classes in `extends` ([#5244] by [@aquibm])\n\nClasses in `extends` are now correctly broken into multiple lines.\n\n<!-- prettier-ignore -->\n```ts\n// Input\ndeclare interface ExtendsMany extends Interface1, Interface2, Interface3, Interface4, Interface5, Interface6, Interface7 {\n  x: string;\n}\n\n// Output (Prettier 1.14)\ndeclare interface ExtendsMany\n  extends Interface1, Interface2, Interface3, Interface4, Interface5, Interface6, Interface7 {\n  x: string;\n}\n\n// Output (Prettier 1.15)\ndeclare interface ExtendsMany\n  extends Interface1,\n    Interface2,\n    Interface3,\n    Interface4,\n    Interface5,\n    Interface6,\n    Interface7 {\n  x: string;\n}\n```\n\n#### Do not add unnecessary parens for async function in `export default` ([#5303] by [@jbrown215])\n\nUnnecessary parens around `export default async function` are now removed.\nThis error occurred only when using the `flow` parser.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nexport default async function foo() {};\n\n// Output (Prettier 1.14)\nexport default (async function foo() {});\n\n// Output (Prettier 1.15)\nexport default async function foo() {}\n```\n\n### TypeScript\n\n#### Add ASI protection for non-null assertion ([#5262] by [@duailibe])\n\nNecessary semicolons for non-null assertions won't be removed in `--no-semi` mode.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst el = ReactDOM.findDOMNode(ref)\n;(el as HTMLElement)!.style.cursor = 'pointer'\n\n// Output (Prettier 1.14)\nconst el = ReactDOM.findDOMNode(ref)\n(el as HTMLElement)!.style.cursor = \"pointer\"\n\n// Output (Prettier 1.15)\nconst el = ReactDOM.findDOMNode(ref)\n;(el as HTMLElement)!.style.cursor = \"pointer\"\n```\n\n#### Do not add extra semicolon for method signature when `prettier-ignore` is used ([#5160] by [@onurtemizkan])\n\nExtra semicolon for method signature is removed in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```ts\n// Input\ninterface SharedWorkerGlobalScope extends WorkerGlobalScope {\n    // prettier-ignore\n    addEventListener(): void;\n    addEventListener(type: string): void;\n}\n\n// Output (Prettier 1.14)\ninterface SharedWorkerGlobalScope extends WorkerGlobalScope {\n  // prettier-ignore\n  addEventListener(): void;;\n  addEventListener(type: string): void;\n}\n\n// Output (Prettier 1.15)\ninterface SharedWorkerGlobalScope extends WorkerGlobalScope {\n  // prettier-ignore\n  addEventListener(): void;\n  addEventListener(type: string): void;\n}\n```\n\n#### Do not print invalid parens for destructuring with default value ([#5096] by [@ikatyang])\n\nPreviously, Prettier printed invalid parens for destructuring with default value, we fixed this issue in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```ts\n// Input\n({ prop: toAssign = \"default\" } = { prop: \"propval\" });\n\n// Output (Prettier 1.14)\n({ prop: (toAssign = \"default\") } = { prop: \"propval\" });\n\n// Output (Prettier 1.15)\n({ prop: toAssign = \"default\" } = { prop: \"propval\" });\n```\n\n#### Do not print semicolon for class properties with modifiers in `--no-semi` mode ([#5083] by [@ikatyang])\n\nIn Prettier 1.14, semicolons are added to the end of a class property\nwhen there are modifiers in its next property, however these semicolons are not needed.\nUnnecessary semicolons are removed in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nclass Reader {\n  private [kBuffer]: Buffer\n  private [kOffset]: number\n}\n\n// Output (1.14)\nclass Reader {\n  private [kBuffer]: Buffer;\n  private [kOffset]: number\n}\n\n// Output (1.15)\nclass Reader {\n  private [kBuffer]: Buffer\n  private [kOffset]: number\n}\n```\n\n#### Do not remove parens for complex nodes in ClassExpression's `extends` ([#5074] by [@ikatyang])\n\nPreviously, parens for complex nodes in class expression's `extends` were wrongly removed, producing invalid code.\nThis issue has been fixed in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nlet Subclass2 = class extends (Superclass as AssertedSuperclass) {};\n\n// Output (Prettier 1.14)\nlet Subclass2 = class extends Superclass as AssertedSuperclass {};\n\n// Output (Prettier 1.15)\nlet Subclass2 = class extends (Superclass as AssertedSuperclass) {};\n```\n\n#### Do not remove necessary parens for TSOptionalType ([#5056] by [@ikatyang])\n\nPreviously, necessary parens for optional types in tuple were wrongly removed, producing invalid code.\nThis issue has been fixed in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype T = [(\"a\" | \"b\")?];\n\n// Output (Prettier 1.14)\ntype T = [\"a\" | \"b\"?];\n\n// Output (Prettier 1.15)\ntype T = [(\"a\" | \"b\")?];\n```\n\n### CSS\n\n#### Do not print wrong output if both front matter and `/* prettier-ignore */` exist ([#5103] by [@ikatyang])\n\nIn Prettier 1.14, location information in the AST were wrongly shifted\ndue to how we extract front matters from the source,\nwhich led to `/* prettier-ignore */` producing invalid output.\nWe've fixed this issue in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n---\nhello: world\n---\n\n/* prettier-ignore */\n.foo {}\n\n/* Output (Prettier 1.14) */\n---\nhello: world\n---\n\n/* prettier-ignore */\n pretti\n\n/* Output (Prettier 1.15) */\n---\nhello: world\n---\n\n/* prettier-ignore */\n.foo {}\n```\n\n#### Keep newlines in CSS-in-JS Templates ([#5240] by [@onurtemizkan])\n\nInterpolations in CSS-in-JS templates could be anything, so we keep newlines for them in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst foo = styled.div`\n  ${secondary}\n  flex: 0 0 auto;\n`;\n\n// Output (Prettier 1.14)\nconst foo = styled.div`\n  ${secondary} flex: 0 0 auto;\n`;\n\n// Output (Prettier 1.15)\nconst foo = styled.div`\n  ${secondary}\n  flex: 0 0 auto;\n`;\n```\n\n### Markdown\n\n#### Trailing spaces for front matters' delimiters are allowed ([#5107] by [@ikatyang])\n\nPreviously, we only detected front matters which did not use trailing spaces for their delimiters,\nwhich led to an issue where thematic breaks (i.e., `---`) were wrongly recognized as the end of the front matter.\nWe've fixed this issue by allowing trailing spaces for front matters' delimiters in Prettier 1.15,\nwhich is also the way how GitHub processes front matters.\n\n(`·` represents a whitespace)\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n---\nTitle: Title\n---···\n\n__strong__ **strong**\n\n---\n\n<!-- Output (Prettier 1.14) -->\n---\nTitle: Title\n---···\n__strong__ **strong**\n---\n\n<!-- Output (Prettier 1.15) -->\n---\nTitle: Title\n---···\n\n**strong** **strong**\n\n---\n```\n\n#### Do not add whitespaces between Latin and Hangul ([#5040] by [@ikatyang])\n\nPreviously, we always inserted whitespace between Latin and CJK characters to improve readability,\nbut according to feedback we received, Korean uses conventional spaces,\nand inserting whitespaces would cause issues for them,\nso we disabled this behavior for Hangul in Prettier 1.15. Behavior is not changing for Chinese or Japanese.\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n예문Latin예문Latin 예문Latin예문 Latin예문Latin 예문 Latin 예문\n\n<!-- Output (Prettier 1.14) -->\n예문 Latin 예문 Latin 예문 Latin 예문 Latin 예문 Latin 예문 Latin 예문\n\n<!-- Output (Prettier 1.15) -->\n예문Latin예문Latin 예문Latin예문 Latin예문Latin 예문 Latin 예문\n```\n\n#### Preserve leading and trailing newlines in fenced code block ([#5038] by [@ikatyang])\n\nIn Prettier 1.14, leading and trailing newlines are removed in fenced code block,\nwhich causes other plugins (e.g., php) to fail to format these code blocks.\nLeading and trailing newlines are preserved in Prettier 1.15.\n\n<!-- prettier-ignore -->\n````md\n<!-- Input -->\n```\n\nhello\n\n```\n\n<!-- Output (Prettier 1.14) -->\n```\nhello\n```\n\n<!-- Output (Prettier 1.15) -->\n```\n\nhello\n\n```\n````\n\n#### Inline footnote definition if there's only a single line paragraph ([#5025] by [@ikatyang])\n\nPreviously, anything that did not fit within the print width in a footnote definition was broken into multiple lines,\nbut breaking a single line paragraph out onto its own was not much of a readability improvement, so we always inline them in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n[^1]: In eos repellat fugit dolor veritatis doloremque nobis. Provident ut est illo.\n\n<!-- Output (Prettier 1.14) -->\n[^1]:\n\n  In eos repellat fugit dolor veritatis doloremque nobis. Provident ut est illo.\n\n<!-- Output (Prettier 1.15) -->\n[^1]: In eos repellat fugit dolor veritatis doloremque nobis. Provident ut est illo.\n```\n\n#### Correctly print lists in front of whitespace-only trailing newlines ([#5024] by [@ikatyang])\n\nIn Prettier 1.14, lists in front of whitespace-only trailing newlines\nare wrongly recognized as [loose](https://spec.commonmark.org/0.28/#loose) lists.\nThis caused an issue where the user would need to format their code twice to get it stable, but when the code stabilized, it would produce the wrong output.\nThis issue has been fixed in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```js\n// Input\nif (condition) {\n  md`\n- 123\n  - 456\n`;\n}\n\n// First Output (Prettier 1.14)\nif (condition) {\n  md`\n- 123\n  - 456\n  `;\n}\n\n// Second Output (Prettier 1.14)\nif (condition) {\n  md`\n- 123\n\n  - 456\n  `;\n}\n\n// First & Second Output (Prettier 1.15)\nif (true) {\n  md`\n- 123\n  - 456\n  `;\n}\n```\n\n### YAML\n\n#### Escape quotes correctly ([#5236] by [@ikatyang])\n\nPreviously, string with escaped quotes in doubleQuote would cause invalid output.\nThey're now correctly escaped in Prettier 1.15.\n\n<!-- prettier-ignore -->\n```yaml\n# Input\n\"'a\\\"b\"\n\n# Output (Prettier 1.14)\n''a\"b'\n\n# Output (Prettier 1.15)\n'''a\"b'\n```\n\n#### Preserve trailing comments for document and document head ([#5027] by [@ikatyang])\n\nIn Prettier 1.14, there were some situations where trailing comments for document and document head may be moved.\nIn Prettier 1.15, they're now always preserved.\n\n<!-- prettier-ignore -->\n```yml\n# Input\n--- # hello\n... # world\n\n# Output (Prettier 1.14)\n# hello\n# world\n\n# Output (Prettier 1.15)\n--- # hello\n... # world\n```\n\n#### Do not throw error for flow mapping item with long value ([#5027] by [@ikatyang])\n\nPreviously, long flow mapping values were wrongly recognized as keys,\nwhich produced syntax errors since implicit keys with more than [1024 characters] are not allowed.\nThis issue has been fixed in Prettier 1.15.\n\n(`long` represents a long text that is more than 1024 characters)\n\n[1024 characters]: http://yaml.org/spec/1.2/spec.html#id2792501\n\n<!-- prettier-ignore -->\n```yml\n# Input\n{x: long}\n\n# Output (Prettier 1.14)\nSyntaxError: The \"undefine...ndefined\" key is too long\n\n# Output (Prettier 1.15)\n{\n  x: long\n}\n```\n\n#### Prefer implicit key for empty mapping value ([#4972] by [@ikatyang])\n\nPreviously, a mapping item with an empty value was always printed with an [explicit key],\nwhich is not that common and this confused people.\nIn Prettier 1.15, we always print it with an implicit key in that situations.\n\n[explicit key]: http://yaml.org/spec/1.2/spec.html#id2798425\n\n<!-- prettier-ignore -->\n```yaml\n# Input\na:\n  b:\n\n# Output (Prettier 1.14)\na:\n  ? b\n\n# Output (Prettier 1.15)\na:\n  b:\n```\n\n## Thanks! ❤️\n\nThanks to everyone who contributed to this release,\nas well as those who raised issues and gave us feedback.\nPrettier is a community-driven project\nand is only able to continue to exist thanks to people like you. Thank you!\n\nSpecial thanks to [@j-f1], [@suchipi] and [@existentialism] for reviewing this blog post!\n\n[@aquibm]: https://github.com/aquibm\n[@azz]: https://github.com/azz\n[@bakkot]: https://github.com/bakkot\n[@duailibe]: https://github.com/duailibe\n[@ericsakmar]: https://github.com/ericsakmar\n[@evilebottnawi]: https://github.com/evilebottnawi\n[@existentialism]: https://github.com/existentialism\n[@flxwu]: https://github.com/flxwu\n[@haggholm]: https://github.com/haggholm\n[@ikatyang]: https://github.com/ikatyang\n[@j-f1]: https://github.com/j-f1\n[@jaideng123]: https://github.com/jaideng123\n[@jbrown215]: https://github.com/jbrown215\n[@kachkaev]: https://github.com/kachkaev\n[@koba04]: https://github.com/koba04\n[@lydell]: https://github.com/lydell\n[@malcolmsgroves]: https://github.com/malcolmsgroves\n[@onurtemizkan]: https://github.com/onurtemizkan\n[@onurtemizkan]: https://github.com/onurtemizkan\n[@smirea]: https://github.com/smirea\n[@suchipi]: https://github.com/suchipi\n[@swac]: https://github.com/swac\n[@titansnow]: https://github.com/TitanSnow\n[@vjeux]: https://github.com/vjeux\n[@warrenseine]: https://github.com/warrenseine\n[@yuliahope]: https://github.com/yuliaHope\n[#2083]: https://github.com/prettier/prettier/pull/2083\n[#4368]: https://github.com/prettier/prettier/pull/4368\n[#4753]: https://github.com/prettier/prettier/pull/4753\n[#4772]: https://github.com/prettier/prettier/pull/4772\n[#4798]: https://github.com/prettier/prettier/pull/4798\n[#4924]: https://github.com/prettier/prettier/pull/4924\n[#4964]: https://github.com/prettier/prettier/pull/4964\n[#4969]: https://github.com/prettier/prettier/pull/4969\n[#4970]: https://github.com/prettier/prettier/pull/4970\n[#4972]: https://github.com/prettier/prettier/pull/4972\n[#4975]: https://github.com/prettier/prettier/pull/4975\n[#5006]: https://github.com/prettier/prettier/pull/5006\n[#5011]: https://github.com/prettier/prettier/pull/5011\n[#5015]: https://github.com/prettier/prettier/pull/5015\n[#5016]: https://github.com/prettier/prettier/pull/5016\n[#5017]: https://github.com/prettier/prettier/pull/5017\n[#5020]: https://github.com/prettier/prettier/pull/5020\n[#5024]: https://github.com/prettier/prettier/pull/5024\n[#5025]: https://github.com/prettier/prettier/pull/5025\n[#5027]: https://github.com/prettier/prettier/pull/5027\n[#5038]: https://github.com/prettier/prettier/pull/5038\n[#5039]: https://github.com/prettier/prettier/pull/5039\n[#5040]: https://github.com/prettier/prettier/pull/5040\n[#5041]: https://github.com/prettier/prettier/pull/5041\n[#5050]: https://github.com/prettier/prettier/pull/5050\n[#5056]: https://github.com/prettier/prettier/pull/5056\n[#5057]: https://github.com/prettier/prettier/pull/5057\n[#5063]: https://github.com/prettier/prettier/pull/5063\n[#5066]: https://github.com/prettier/prettier/pull/5066\n[#5074]: https://github.com/prettier/prettier/pull/5074\n[#5078]: https://github.com/prettier/prettier/pull/5078\n[#5083]: https://github.com/prettier/prettier/pull/5083\n[#5085]: https://github.com/prettier/prettier/pull/5085\n[#5092]: https://github.com/prettier/prettier/pull/5092\n[#5096]: https://github.com/prettier/prettier/pull/5096\n[#5103]: https://github.com/prettier/prettier/pull/5103\n[#5107]: https://github.com/prettier/prettier/pull/5107\n[#5137]: https://github.com/prettier/prettier/pull/5137\n[#5149]: https://github.com/prettier/prettier/pull/5149\n[#5151]: https://github.com/prettier/prettier/pull/5151\n[#5157]: https://github.com/prettier/prettier/pull/5157\n[#5160]: https://github.com/prettier/prettier/pull/5160\n[#5165]: https://github.com/prettier/prettier/pull/5165\n[#5179]: https://github.com/prettier/prettier/pull/5179\n[#5188]: https://github.com/prettier/prettier/pull/5188\n[#5190]: https://github.com/prettier/prettier/pull/5190\n[#5202]: https://github.com/prettier/prettier/pull/5202\n[#5205]: https://github.com/prettier/prettier/pull/5205\n[#5206]: https://github.com/prettier/prettier/pull/5206\n[#5207]: https://github.com/prettier/prettier/pull/5207\n[#5209]: https://github.com/prettier/prettier/pull/5209\n[#5220]: https://github.com/prettier/prettier/pull/5220\n[#5236]: https://github.com/prettier/prettier/pull/5236\n[#5240]: https://github.com/prettier/prettier/pull/5240\n[#5243]: https://github.com/prettier/prettier/pull/5243\n[#5244]: https://github.com/prettier/prettier/pull/5244\n[#5250]: https://github.com/prettier/prettier/pull/5250\n[#5251]: https://github.com/prettier/prettier/pull/5251\n[#5252]: https://github.com/prettier/prettier/pull/5252\n[#5259]: https://github.com/prettier/prettier/pull/5259\n[#5262]: https://github.com/prettier/prettier/pull/5262\n[#5272]: https://github.com/prettier/prettier/pull/5272\n[#5280]: https://github.com/prettier/prettier/pull/5280\n[#5290]: https://github.com/prettier/prettier/pull/5290\n[#5303]: https://github.com/prettier/prettier/pull/5303\n[#5304]: https://github.com/prettier/prettier/pull/5304\n[#5327]: https://github.com/prettier/prettier/pull/5327\n[#5330]: https://github.com/prettier/prettier/pull/5330\n[#5333]: https://github.com/prettier/prettier/pull/5333\n[#5334]: https://github.com/prettier/prettier/pull/5334\n[#5356]: https://github.com/prettier/prettier/pull/5356"
    },
    {
      "id": "/2018/07/29/1.14.0",
      "metadata": {
        "permalink": "/blog/2018/07/29/1.14.0",
        "source": "@site/blog/2018-07-29-1.14.0.md",
        "title": "Prettier 1.14: YAML Support",
        "description": "This release adds YAML support, pragma (i.e. / @prettier */) support for every language, and improves performance on large files. It also adds support for several new syntax features, and has a few formatting tweaks to make your code even prettier. ✨",
        "date": "2018-07-29T00:00:00.000Z",
        "formattedDate": "July 29, 2018",
        "tags": [],
        "readingTime": 17.995,
        "truncated": true,
        "authors": [
          {
            "name": "Ika (@ikatyang)",
            "url": "https://github.com/ikatyang"
          }
        ],
        "frontMatter": {
          "author": "Ika (@ikatyang)",
          "authorURL": "https://github.com/ikatyang",
          "title": "Prettier 1.14: YAML Support"
        },
        "prevItem": {
          "title": "Prettier 1.15: HTML, Vue, Angular and MDX Support",
          "permalink": "/blog/2018/11/07/1.15.0"
        },
        "nextItem": {
          "title": "Prettier 1.13: Conquering the web!",
          "permalink": "/blog/2018/05/27/1.13.0"
        }
      },
      "content": "This release adds YAML support, pragma (i.e. `/** @prettier */`) support for every language, and improves performance on large files. It also adds support for several new syntax features, and has a few formatting tweaks to make your code even prettier. ✨\n\n<!--truncate-->\n\n## Highlights\n\n### YAML\n\n#### Support YAML ([#4563], [#4742], [#4773], [#4854] by [@ikatyang])\n\nPrettier can now format YAML files! 🎉\n\nThe implementation is highly compliant with the [YAML spec](http://yaml.org/spec/), and backed by the excellent [`yaml`](https://github.com/eemeli/yaml) package thanks to [@eemeli]. A few highlights:\n\n##### Word wrap\n\nJust like in Markdown, we’ll hard-wrap prose at 80-characters if it doesn’t affect the meaning of the file.\n\nInput:\n\n<!-- prettier-ignore -->\n```yaml\n>\n  Voilà! In view, a humble vaudevillian veteran cast vicariously as both victim and villain by the vicissitudes of Fate. This visage, no mere veneer of vanity, is a vestige of the vox populi, now vacant, vanished. However, this valourous visitation of a bygone vexation stands vivified and has vowed to vanquish these venal and virulent vermin vanguarding vice and vouchsafing the violently vicious and voracious violation of volition! The only verdict is vengeance; a vendetta held as a votive, not in vain, for the value and veracity of such shall one day vindicate the vigilant and the virtuous. Verily, this vichyssoise of verbiage veers most verbose, so let me simply add that it’s my very good honour to meet you and you may call me V.\n```\n\nOutput: (`--prose-wrap always`)\n\n<!-- prettier-ignore -->\n```yaml\n>\n  Voilà! In view, a humble vaudevillian veteran cast vicariously as both victim\n  and villain by the vicissitudes of Fate. This visage, no mere veneer of\n  vanity, is a vestige of the vox populi, now vacant, vanished. However, this\n  valourous visitation of a bygone vexation stands vivified and has vowed to\n  vanquish these venal and virulent vermin vanguarding vice and vouchsafing the\n  violently vicious and voracious violation of volition! The only verdict is\n  vengeance; a vendetta held as a votive, not in vain, for the value and\n  veracity of such shall one day vindicate the vigilant and the virtuous.\n  Verily, this vichyssoise of verbiage veers most verbose, so let me simply add\n  that it’s my very good honour to meet you and you may call me V.\n```\n\n> Note: the [`proseWrap`](https://prettier.io/docs/en/options.html#prose-wrap) option is set to `preserve` by default so you’ll have to specify `always` or `never` to enable this feature.\n\n##### Ignore a portion of the file\n\nIf for some reason you don’t want to format a part of the YAML file, you can always put an ignore comment before it:\n\n<!-- prettier-ignore -->\n```yaml\n# prettier-ignore\nkey  : value\nhello: world\n```\n\n### Front Matter\n\n#### Format YAML front matter ([#4773] by [@ikatyang])\n\nPrettier can now format `---`-delimited YAML front matter in CSS and Markdown files:\n\nInput & Output (Prettier 1.13):\n\n<!-- prettier-ignore -->\n```markdown\n---\nkey  : value\n---\n\n# heading\n\ncontent\n```\n\nOutput (Prettier 1.14):\n\n<!-- prettier-ignore -->\n```markdown\n---\nkey: value\n---\n\n# heading\n\ncontent\n```\n\n### Pragma\n\n#### Support `requirePragma`/`insertPragma` in every language ([#4688], [#4699], [#4713] by [@ikatyang])\n\nPrettier 1.7.0 and 1.8.0 introduced two new options:\n[`--require-pragma`](https://prettier.io/docs/en/options.html#require-pragma) and\n[`--insert-pragma`](https://prettier.io/docs/en/options.html#insert-pragma).\nHowever, these options were only supported in a few languages.\nNow these options are available in every language, including YAML!\n\n- YAML\n\n  <!-- prettier-ignore -->\n  ```yaml\n  # @prettier\n\n  key: value\n  ```\n\n- CSS/Less/SCSS\n\n  <!-- prettier-ignore -->\n  ```css\n  /** @prettier */\n\n  .class {\n    display: none;\n  }\n  ```\n\n- GraphQL\n\n  <!-- prettier-ignore -->\n  ```gql\n  # @prettier\n\n  query Browse($offset: Int) {\n    browse(offset: $offset)\n  }\n  ```\n\n- Vue\n\n  <!-- prettier-ignore -->\n  ```html\n  <!-- @prettier -->\n\n  <template>\n    <div>Template</div>\n  </template>\n  ```\n\n### JavaScript\n\n#### Never inline decorators unless they’re lone parameter decorators ([#4830] by [@suchipi])\n\nPreviously, decorators were always inlined since MobX inlined them by convention,\nbut reports from the community led us to discover that MobX is the only major library that follows this convention.\nPrettier now puts decorators on their own lines unless they’re parameter decorators.\n\n<!-- prettier-ignore -->\n```ts\n// Input\n@observer\nclass OrderLine {\n  @observable\n  price: number = 0;\n  @observable amount: number = 1;\n\n  foo(@required name) {\n    console.log(name);\n  }\n}\n\n// Output (Prettier 1.13)\n@observer\nclass OrderLine {\n  @observable price: number = 0;\n  @observable amount: number = 1;\n\n  foo(@required name) {\n    console.log(name);\n  }\n}\n\n// Output (Prettier 1.14)\n@observer\nclass OrderLine {\n  @observable\n  price: number = 0;\n  @observable\n  amount: number = 1;\n\n  foo(@required name) {\n    console.log(name);\n  }\n}\n```\n\n#### Handle JSX whitespace separately from fbt whitespace ([#4717] by [@karl])\n\nPreviously, JSX whitespace was always preserved\nsince Facebook has a custom translation pipeline (`fbt`) that uses JSX syntax but treats whitespace differently than regular JSX,\nwhich meant we couldn’t change JSX whitespace without breaking the Facebook codebase.\nIn Prettier 1.14, we now detect Facebook `fbt` tags and handle whitespace for them differently from other JSX tags,\nimproving the consistency across different but equivalent inputs.\n\n<!-- prettier-ignore -->\n```jsx\n// Input and Output from Prettier 1.13\nfirst = (\n  <div>\n    Text<br />\n    More text<br />\n    And more<br />\n  </div>\n);\n\nsecond = (\n  <div>\n    Text<br />More text<br />And more<br />\n  </div>\n);\n\nthird = (\n  <div>\n    Text\n    <br />\n    More text\n    <br />\n    And more\n    <br />\n  </div>\n);\n\n// Output from Prettier 1.14\nfirst = (\n  <div>\n    Text\n    <br />\n    More text\n    <br />\n    And more\n    <br />\n  </div>\n);\n\nsecond = (\n  <div>\n    Text\n    <br />\n    More text\n    <br />\n    And more\n    <br />\n  </div>\n);\n\nthird = (\n  <div>\n    Text\n    <br />\n    More text\n    <br />\n    And more\n    <br />\n  </div>\n);\n```\n\nWhen the text separating tags or expressions is just a single character\nwe print the entire group on a single line where possible.\n\n<!-- prettier-ignore -->\n```jsx\n// Input and Output from Prettier 1.13\nx = (\n  <div>\n    {hour}:{minute}:{second}\n  </div>\n);\n\nx = (\n  <div>\n    {hour}\n    :\n    {minute}\n    :\n    {second}\n  </div>\n);\n\nx = (\n  <div>\n    {hour}:\n    {minute}:\n    {second}\n  </div>\n);\n\n// Output from Prettier 1.14\nx = (\n  <div>\n    {hour}:{minute}:{second}\n  </div>\n);\n\nx = (\n  <div>\n    {hour}:{minute}:{second}\n  </div>\n);\n\nx = (\n  <div>\n    {hour}:{minute}:{second}\n  </div>\n);\n```\n\nIt also improves the output of edges cases like this:\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nthis_really_should_split_across_lines =\n  <div>\n    before{stuff}after{stuff}after{stuff}after{stuff}after{stuff}after{stuff}after{stuff}after\n  </div>\n\n// Output (Prettier 1.13)\nthis_really_should_split_across_lines = (\n  <div>\n    before{stuff}after{stuff}after{stuff}after{stuff}after{stuff}after{stuff}after{\n      stuff\n    }after\n  </div>\n);\n\n\n// Output (Prettier 1.14)\nthis_really_should_split_across_lines = (\n  <div>\n    before\n    {stuff}\n    after\n    {stuff}\n    after\n    {stuff}\n    after\n    {stuff}\n    after\n    {stuff}\n    after\n    {stuff}\n    after\n    {stuff}\n    after\n  </div>\n);\n```\n\n#### Break JSX in arrow functions in JSX expressions ([#4601] by [@duailibe])\n\nIn previous versions, JSX in arrow functions in JSX expressions followed the general fit-or-break rule,\nbut it’s less readable when iterating over an array.\nPrettier 1.14 forces these arrow functions to break, improving readability.\n\n<!-- prettier-ignore -->\n```jsx\n// Input\nconst UsersList = ({ users }) => (\n  <section>\n    <h2>Users list</h2>\n    <ul>\n      {users.map(user => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  </section>\n)\n\n// Output (Prettier 1.13)\nconst UsersList = ({ users }) => (\n  <section>\n    <h2>Users list</h2>\n    <ul>{users.map(user => <li key={user.id}>{user.name}</li>)}</ul>\n  </section>\n);\n\n// Output (Prettier 1.14)\nconst UsersList = ({ users }) => (\n  <section>\n    <h2>Users list</h2>\n    <ul>\n      {users.map(user => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  </section>\n);\n```\n\n### TypeScript\n\n#### Support for TypeScript 3.0 ([#4625], [#4757] by [@ikatyang])\n\nA few new features that include new syntax are added in the upcoming TypeScript 3.0:\nthe [`unknown` type](https://github.com/Microsoft/TypeScript/pull/24439) and\n[tuples in rest parameters and spread expressions](https://github.com/Microsoft/TypeScript/pull/24897).\nPrettier 1.14 adds support for them so you can format them when TypeScript 3.0 is released.\n\n<!-- prettier-ignore -->\n```ts\n// UnknownType\nconst json: unknown = JSON.parse(jsonText);\n\n// RestType\ntype Foo = [string, number];\ntype Bar = [boolean, ...Foo];\n\n// OptionalType\ntype Baz = [string, number?];\n```\n\n### JSON\n\n#### Do not put values on a separate line from the key ([#4852] by [@ikatyang])\n\nPutting long values on new rows is the core feature of Prettier,\nbut we found that it doesn’t improve readability for objects with long string values inside JSON files.\nPrettier 1.14 will not move an object’s string value regardless if it fits the print width or not.\n\n<!-- prettier-ignore -->\n```json5\n// Input\n{\n  \"description\": \"a long long long long long long long long long long long long long long long long long paragraph\"\n}\n\n// Output (Prettier 1.13)\n{\n  \"description\":\n    \"a long long long long long long long long long long long long long long long long long paragraph\"\n}\n\n// Output (Prettier 1.14)\n{\n  \"description\": \"a long long long long long long long long long long long long long long long long long paragraph\"\n}\n```\n\n### Markdown\n\n#### Only align lists if they’re already aligned ([#4893] by [@ikatyang])\n\nPreviously, we always align lists for [better indenting experience and\nas a workaround for indented codeblock mis-parsing](https://prettier.io/blog/2018/02/26/1.11.0.html#respect-tabwidth-for-list-items-3990-by-ikatyang),\nbut this introduced double spaces in front of ordered lists, which is not common in markdown.\nIn Prettier 1.14, we only align lists in the following cases:\n\n- They’re already aligned.\n- There’re at least two spaces in front of the first list item.\n- There’s an indented codeblock inside of it.\n\nInput:\n\n<!-- prettier-ignore -->\n```md\n1.  123\n1.  123\n\n---\n\n1.   123\n1. 123\n\n---\n\n11. 123\n1.  123\n\n---\n\n11. 123\n1. 123\n\n---\n\n1. 123\n1. 123\n```\n\nOutput: (Prettier 1.13)\n\n<!-- prettier-ignore -->\n```md\n1.  123\n1.  123\n\n---\n\n1.  123\n1.  123\n\n---\n\n11. 123\n1.  123\n\n---\n\n11. 123\n1.  123\n\n---\n\n1.  123\n1.  123\n```\n\nOutput: (Prettier 1.14)\n\n<!-- prettier-ignore -->\n```md\n1.  123\n1.  123\n\n---\n\n1.  123\n1.  123\n\n---\n\n11. 123\n1.  123\n\n---\n\n11. 123\n1. 123\n\n---\n\n1. 123\n1. 123\n```\n\n### Performance\n\n#### Performance improvement on big files ([#4790], [#4848] by [@sompylasar])\n\nThe core feature of Prettier is to wrap lines when they go past the print width,\nand to do this we need to calculate the visual width of every character.\nThe easiest way to count them is by using JavaScript’s `String#length` property\nbut some non-ASCII characters like CJK characters have widths larger than a Latin character.\nAs a workaround, we replaced those 2-char-wide characters with 2 spaces before calculating the string’s length.\nThis works fine but it also slows down Prettier because we have to run the replacement on every token.\nIn Prettier 1.14, we check if the string contains only ASCII characters\nso we don’t need to perform unnecessary string replacement.\nThis results in a **20% speed-up** on large files.\n\n## Other changes\n\n### API/CLI\n\n#### Support relative paths for `plugins` and `pluginSearchDirs` in config files ([#4667] by [@ikatyang])\n\nIn Prettier 1.13, we introduced a new `pluginSearchDirs` option that changes where Prettier looks for plugins.\nIt worked well when specified in the CLI since it was always relative to the current directory,\nbut relative paths didn’t work in config files.\nIn Prettier 1.14, relative paths for `pluginSearchDirs` and `plugins` in config files are now supported.\n\n#### Do not throw error if `prettier` installed in a directory not named `prettier` ([#4706] by [@asottile])\n\nWe added support for globally installed plugins in Prettier 1.13 by searching up the directory tree to\nfind the nearest `node_modules` from `prettier`. We assumed that there would always be a `prettier` directory\nwhich caused Prettier to crash if it was in a differently-named directory.\nWe changed our searching logic in Prettier 1.14 so you should now be able to rename the `prettier` directory if you need to\n(for example if publishing a fork to npm).\n\n#### Support `filepath` in browser ([#4721] by [@ikatyang])\n\nIn Prettier 1.13, we added first-class support for running Prettier in the browser, but the only way to\nchoose which parser to use was via the `parser` option. Prettier 1.14 adds support for the `filepath` option in the browser\nAPI, which will allow Prettier to infer which parser to use, just like the it can with the Node.js API. This\nshould be especially useful for web editor applications!\n\n#### Expose `isPreviousLineEmpty` to plugins ([#4748] by [@warrenseine])\n\nPreviously, we exposed `isNextLineEmpty` to plugins but not `isPreviousLineEmpty`.\nPrettier 1.14 exposes it, because it can be useful for some scenarios like directives in C#.\n\n### JavaScript\n\n#### Support BigInt literals ([#4697] by [@ikatyang])\n\n[BigInt](https://github.com/tc39/proposal-bigint) literals are now supported in the default `babylon` parser.\n\n<!-- prettier-ignore -->\n```js\nconst bigInt = 1n;\n```\n\n#### Support `throw` expressions ([#4695] by [@VojtechStep])\n\n[Throw expressions](https://github.com/tc39/proposal-throw-expressions) are now supported in the default `babylon` parser.\n\n<!-- prettier-ignore -->\n```js\nconst assert = x => x || throw new Error('...');\n```\n\n#### Always expand the first argument if the second argument is also a call expression ([#4657] by [@duailibe])\n\nPreviously, we had a special case to not break function calls\nif there were only 2 parameters passed and the first parameter was a function.\nThis worked well, but if the second parameter was also a function, it didn’t look very good.\n\n<!-- prettier-ignore -->\n```js\n// Input\nsomePromise.then((args) => {\n  this.props.receiveFavoritesActions(id, [].concat(...args));\n}, ({ isCanceled }) => !isCanceled && logger.warn(`Error getting actions for the product: ${id}`));\n\n// Output (Prettier 1.13)\nsomePromise.then(args => {\n  this.props.receiveFavoritesActions(id, [].concat(...args));\n}, ({ isCanceled }) => !isCanceled && logger.warn(`Error getting actions for the product: ${id}`));\n\n// Output (Prettier 1.14)\nsomePromise.then(\n  args => {\n    this.props.receiveFavoritesActions(id, [].concat(...args));\n  },\n  ({ isCanceled }) =>\n    !isCanceled && logger.warn(`Error getting actions for the product: ${id}`)\n);\n```\n\n#### Add parens for await in bind ([#4778] by [@ikatyang])\n\nPreviously, Prettier wrongly removed the necessary parentheses for `await` in the experimental bind syntax,\ncausing its meaning to be change. Prettier 1.14 now preserves the parentheses correctly.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst doBothThings = async () => {\n    const request = doAsyncThing();\n    return (await request)::doSyncThing();\n};\n\n// Output (Prettier 1.13)\nconst doBothThings = async () => {\n    const request = doAsyncThing();\n    return await request::doSyncThing(); // means `await (request::doSyncThing)`\n};\n\n// Output (Prettier 1.14)\nconst doBothThings = async () => {\n    const request = doAsyncThing();\n    return (await request)::doSyncThing();\n};\n```\n\n#### Allow top level `super` and `await` ([#4823] by [@ikatyang])\n\n`super` and `await` are not allowed to be in places other than classes and async functions, respectively,\nbut our [range format](https://prettier.io/docs/en/options.html#range) option didn’t quite work properly when selecting the contents of a function.\nPrettier 1.14 allows them to be everywhere.\n\n<!-- prettier-ignore -->\n```js\nsuper();\n\nawait doSomething();\n```\n\n#### Blacklist `this` and `super` in functional composition heuristics ([#4836] by [@princed])\n\nIn Prettier 1.13, we improved the formatting for functional composition functions (e.g., `pipe`, `compose`, etc.)\nby putting their parameters on their own line, but this introduced false positives for functions with the same name in classes.\nPrettier 1.14 blacklists `this` and `super` in functional composition heuristics.\n\n<!-- prettier-ignore -->\n```js\n// Input\nclass X {\n  x() {\n    this.compose(a(), b);\n    super.compose(a(), b);\n  }\n}\n\n// Output (Prettier 1.13)\nclass X {\n  x() {\n    this.compose(\n      a(),\n      b\n    );\n    super.compose(\n      a(),\n      b\n    );\n  }\n}\n\n// Output (Prettier 1.14)\nclass X {\n  x() {\n    this.compose(a(), b);\n    super.compose(a(), b);\n  }\n}\n```\n\n### TypeScript\n\n#### Support `import.meta` ([#4762] by [@ikatyang])\n\nIn Prettier 1.13, the version of the TypeScript parser we used did not support parsing `import.meta` syntax.\nWe updated our TypeScript parser in Prettier 1.14 so they are now parsed and formatted correctly.\n\n<!-- prettier-ignore -->\n```js\nconsole.log(import.meta.url);\n```\n\n#### Optional property with StringLiteral key in class ([#4762] by [@ikatyang])\n\nIn the prior version, the `?` in an optional property with a string literal as the key was wrongly removed.\nWe fixed this bug in Prettier 1.14 so it won’t be removed.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nexport class ClassExample {\n  \"a-prop\"?: boolean;\n}\n\n// Output (Prettier 1.13)\nexport class ClassExample {\n  \"a-prop\": boolean;\n}\n\n// Output (Prettier 1.14)\nexport class ClassExample {\n  \"a-prop\"?: boolean;\n}\n```\n\n#### Throw error on multiple super classes in class ([#4762] by [@ikatyang])\n\nClasses are only allowed to have one parent class\nbut the TypeScript AST allows for multiple since the `extends` clause\nhas the same structure internally as the `implements` clause.\nPreviously, any extra super classes were silently dropped during printing,\nwhich may have caused confusion after formatting.\nIn Prettier 1.14, they are now marked as syntax errors instead.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nclass Foo extends BarComponent, BazService, QuuxProvider {}\n\n// Output (Prettier 1.13)\nclass Foo extends BarComponent {}\n\n// Output (Prettier 1.14)\n/*\n  SyntaxError: Classes can only extend a single class.\n*/\n```\n\n#### Support JSX spread child ([#4885] by [@ikatyang])\n\nPreviously, the `...` in children spread in JSX expressions were wrongly removed.\nWe fixed this issue in Prettier 1.14.\n\n<!-- prettier-ignore -->\n```tsx\n// Input\nconst x = <div>{...[0]}</div>\n\n// Output (Prettier 1.13)\nconst x = <div>{[0]}</div>;\n\n// Output (Prettier 1.14)\nconst x = <div>{...[0]}</div>;\n```\n\n### Flow\n\n#### Support `.js.flow` extension ([#4777] by [@ikatyang])\n\n[`.js.flow`](https://flow.org/en/docs/libdefs/creation/#toc-declaring-a-module)\nis the extension for Flow declaration files but previously we didn’t recognize it.\nIn Prettier 1.14, they should be picked up automatically\nso you don’t need to add overrides for them in config files.\n\n### CSS/Less/SCSS\n\n#### Handle newline between front-matter and comment correctly ([#4701] by [@evilebottnawi])\n\nMultiple newlines between front matter and a CSS comment were replaced with a space in Prettier 1.13.\nIn Prettier 1.14, we print a newline between them instead.\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n---\nkey: value\n---\n\n/* comment */\n.class {\n  display: none;\n}\n\n/* Output (Prettier 1.13) */\n---\nkey: value\n---\n /* comment */\n.class {\n  display: none;\n}\n\n/* Output (Prettier 1.14) */\n---\nkey: value\n---\n\n/* comment */\n.class {\n  display: none;\n}\n```\n\n#### Support at-rule ends with right curly bracket ([#4733] by [@davidgomes])\n\nIn the prior version, at-rules that ended with `}` were not parsed correctly.\nPrettier 1.14 now correctly recognizes and formats them.\n\n<!-- prettier-ignore -->\n```scss\n/* Input */\n@mixin placeholder {\n    &::placeholder {@content}\n}\n\n/* Output (Prettier 1.13) */\n/*\n  SyntaxError: CssSyntaxError Unclosed block\n*/\n\n/* Output (Prettier 1.14) */\n@mixin placeholder {\n  &::placeholder {\n    @content;\n  }\n}\n```\n\n### Markdown\n\n#### Preserve email autolink ([#4740] by [@ikatyang])\n\nAutolinks are formatted as their url in the prior version, which is fine.\nBut there’s a special case for email links that they’ll be resolved as `mailto:` links.\nIn Prettier 1.14, email autolinks are preserved.\n\n<!-- prettier-ignore -->\n```md\n<!-- Input -->\n<hello@example.com>\n\n<!-- Output (Prettier 1.13) -->\n<mailto:hello@example.com>\n\n<!-- Output (Prettier 1.14) -->\n<hello@example.com>\n```\n\n#### Do not require space after markdown block language name ([#4783] by [@kachkaev])\n\nIn Prettier 1.12, we added the support for fenced codeblock lang followed by attributes,\nwhich requires them to be separated by whitespaces.\nBut this introduced the inconsistency for codeblock highlighting in Atom that\ncodeblocks are highlighted but we do not format them.\nWe updated our detection logic in Prettier 1.14 so they should behave the same now.\n\n<!-- prettier-ignore -->\n````md\n<!-- Input -->\n```js{something=something}\nconst x   =   1;\n```\n\n<!-- Output (Prettier 1.13) -->\n```js{something=something}\nconst x   =   1;\n```\n\n<!-- Output (Prettier 1.14) -->\n```js{something=something}\nconst x = 1;\n```\n````\n\n#### Use language aliases to find parser for markdown codeblocks ([#4734] by [@ikatyang])\n\nPreviously, we used the language `name` and `extensions` to determine which parser to use for codeblock formatting,\nbut we found that it’s impossible to format `JSON with Comments` codeblocks and keep syntax highlighter working at the same time\nsince they share the same `.json` extension with `JSON` and the comment syntax highlighting is only available in `JSON5`.\nWe added the support for using the language `aliases` to find parser in Prettier 1.14\nso you should be able to use `jsonc` to format and trigger syntax highlighting for `JSON with Comments` codeblocks.\n\n<!-- prettier-ignore -->\n````md\n<!-- Input -->\n```jsonc\n// comment\n{\"a\":1}\n```\n\n<!-- Output (Prettier 1.13) -->\n```jsonc\n// comment\n{\"a\":1}\n```\n\n<!-- Output (Prettier 1.14) -->\n```jsonc\n// comment\n{ \"a\": 1 }\n```\n````\n\n#### Preserve entity for encoded character if its code point is greater than U+FFFF ([#4832] by [@ikatyang])\n\nThe markdown parser we use (`remark`) parses every encoded character into a single AST node\nso that we’re able to restore the encoded character by detecting if the value in the AST node is in length of 1.\nBut there’s an exception that a single character can be in length of 2 if its code point is greater than 0xffff\nsince JavaScript uses UTF-16 (2 bytes) to encode strings.\nPrettier 1.14 correctly recognizes these characters so they won’t be transformed into the literal character.\n\n<!-- prettier-ignore -->\n````md\n<!-- Input -->\n&#x1F609;\n\n<!-- Output (Prettier 1.13) -->\n😉\n\n<!-- Output (Prettier 1.14) -->\n&#x1F609;\n````\n\n### Vue\n\n#### Support range format for Vue files ([#4868] by [@ikatyang])\n\nPreviously, [range formatting](https://prettier.io/docs/en/options.html#range) was not available in Vue,\nbut Prettier 1.14 adds support for it.\n\n### GraphQL\n\n#### Preserve linebreak in non-block stringValue ([#4808] by [@ikatyang])\n\nNon-block string values are only allowed to be in a single line\nbut Prettier 1.13 wrongly transformed the escaped `\\n` into a real newline.\nPrettier 1.14 now correctly prints `\\n`.\n\n<!-- prettier-ignore -->\n```gql\n# Input\n{\n  foo(input: {multiline: \"ab\\ncd\"}) { id }\n}\n\n# Output (Prettier 1.13)\n{\n  foo(input: { multiline: \"ab\ncd\" }) {\n    id\n  }\n}\n\n# Output (Prettier 1.14)\n{\n  foo(input: { multiline: \"ab\\ncd\" }) {\n    id\n  }\n}\n```\n\n[@asottile]: https://github.com/asottile\n[@davidgomes]: https://github.com/davidgomes\n[@duailibe]: https://github.com/duailibe\n[@eemeli]: https://github.com/eemeli\n[@evilebottnawi]: https://github.com/evilebottnawi\n[@ikatyang]: https://github.com/ikatyang\n[@kachkaev]: https://github.com/kachkaev\n[@karl]: https://github.com/karl\n[@princed]: https://github.com/princed\n[@sompylasar]: https://github.com/sompylasar\n[@suchipi]: https://github.com/@suchipi\n[@vojtechstep]: https://github.com/VojtechStep\n[@warrenseine]: https://github.com/warrenseine\n[#4563]: https://github.com/prettier/prettier/pull/4563\n[#4601]: https://github.com/prettier/prettier/pull/4601\n[#4625]: https://github.com/prettier/prettier/pull/4625\n[#4657]: https://github.com/prettier/prettier/pull/4657\n[#4667]: https://github.com/prettier/prettier/pull/4667\n[#4688]: https://github.com/prettier/prettier/pull/4688\n[#4695]: https://github.com/prettier/prettier/pull/4695\n[#4697]: https://github.com/prettier/prettier/pull/4697\n[#4699]: https://github.com/prettier/prettier/pull/4699\n[#4701]: https://github.com/prettier/prettier/pull/4701\n[#4706]: https://github.com/prettier/prettier/pull/4706\n[#4713]: https://github.com/prettier/prettier/pull/4713\n[#4717]: https://github.com/prettier/prettier/pull/4717\n[#4721]: https://github.com/prettier/prettier/pull/4721\n[#4733]: https://github.com/prettier/prettier/pull/4733\n[#4734]: https://github.com/prettier/prettier/pull/4734\n[#4740]: https://github.com/prettier/prettier/pull/4740\n[#4742]: https://github.com/prettier/prettier/pull/4742\n[#4748]: https://github.com/prettier/prettier/pull/4748\n[#4757]: https://github.com/prettier/prettier/pull/4757\n[#4762]: https://github.com/prettier/prettier/pull/4762\n[#4773]: https://github.com/prettier/prettier/pull/4773\n[#4777]: https://github.com/prettier/prettier/pull/4777\n[#4778]: https://github.com/prettier/prettier/pull/4778\n[#4783]: https://github.com/prettier/prettier/pull/4783\n[#4790]: https://github.com/prettier/prettier/pull/4790\n[#4808]: https://github.com/prettier/prettier/pull/4808\n[#4823]: https://github.com/prettier/prettier/pull/4823\n[#4830]: https://github.com/prettier/prettier/pull/4830\n[#4832]: https://github.com/prettier/prettier/pull/4832\n[#4836]: https://github.com/prettier/prettier/pull/4836\n[#4848]: https://github.com/prettier/prettier/pull/4848\n[#4852]: https://github.com/prettier/prettier/pull/4852\n[#4854]: https://github.com/prettier/prettier/pull/4854\n[#4868]: https://github.com/prettier/prettier/pull/4868\n[#4885]: https://github.com/prettier/prettier/pull/4885\n[#4893]: https://github.com/prettier/prettier/pull/4893"
    },
    {
      "id": "/2018/05/27/1.13.0",
      "metadata": {
        "permalink": "/blog/2018/05/27/1.13.0",
        "source": "@site/blog/2018-05-27-1.13.0.md",
        "title": "Prettier 1.13: Conquering the web!",
        "description": "This releases adds support for several new syntax features, formatting fixes and first-class support for working in the browser.",
        "date": "2018-05-27T00:00:00.000Z",
        "formattedDate": "May 27, 2018",
        "tags": [],
        "readingTime": 22.83,
        "truncated": true,
        "authors": [
          {
            "name": "Lucas Duailibe (@duailibe)",
            "url": "https://twitter.com/duailibe"
          }
        ],
        "frontMatter": {
          "author": "Lucas Duailibe (@duailibe)",
          "authorURL": "https://twitter.com/duailibe",
          "title": "Prettier 1.13: Conquering the web!"
        },
        "prevItem": {
          "title": "Prettier 1.14: YAML Support",
          "permalink": "/blog/2018/07/29/1.14.0"
        },
        "nextItem": {
          "title": "Prettier 1.12: Fixes, Features, and Formatting, Oh My!",
          "permalink": "/blog/2018/04/11/1.12.0"
        }
      },
      "content": "This releases adds support for several new syntax features, formatting fixes and first-class support for working in the browser.\n\n<!--truncate-->\n\n## Highlights\n\n### API/CLI\n\n#### Prettier works in the browser!\n\nThis has been long wanted by the team and our users and we're finally announcing Prettier 1.13 has first-class support for running in the browser. In the past it required several hacks, but as of today you can just load the core bundle and the parsers you want to use.\n\n<!-- prettier-ignore -->\n```html\n<script src=\"https://unpkg.com/prettier@1.13.0/standalone.js\"></script>\n<script src=\"https://unpkg.com/prettier@1.13.0/parser-babylon.js\"></script>\n<script src=\"https://unpkg.com/prettier@1.13.0/parser-graphql.js\"></script>\n<script type=\"text/javascript\">\nvar formatButton = document.querySelector(\"#format\");\nvar textInput = document.querySelector(\"#input\");\nformatButton.addEventListener(\"click\", function() {\n  var value = textInput.value;\n  textInput.value = prettier.format(value, {\n    parser: \"babylon\",\n    plugins: prettierPlugins\n  });\n});</script>\n```\n\nRead more about it in the [docs](https://prettier.io/docs/en/browser.html) or try it on this [JS Bin](https://jsbin.com/vabiyomoso/edit?html,output).\n\n#### Don't default to the JavaScript parser ([#4528] by [@duailibe])\n\nIn Prettier 1.12 and earlier, when running Prettier on a file without a file extension, Prettier would assume the file contained JavaScript. This lead to a couple of confusing bugs, namely:\n\n- If you ran prettier on your `.git` directory, it would reformat files and break your git repo.\n- If you tried to run prettier on html files, it would sometimes throw an error, but other times parse the HTML as JSX, and format it as if it was JSX (which was often unsafe).\n\nIn Prettier 1.13, we are changing this behavior. If Prettier cannot determine what language a file is from its extension, and the user has not manually specified a parser to use, Prettier will skip the file.\n\nIf you need to format files with unsupported or nonstandard extensions, you can use the `--parser` option to specify which parser to use. If you are piping file contents into `stdin`, make sure to include `--stdin-filepath` so that prettier can use the file extension to detect what language to parse the input as.\n\nWhen using the JavaScript API, `prettier.format` and `prettier.formatWithCursor` will now throw an error if you do not include either `parser` or `filepath` in the options you pass in. It will also throw an error if you include `filepath` but not `parser` and the correct parser cannot be inferred from the file path.\n\n#### `prettier.getFileInfo()` method and `--file-info` CLI option ([#4341] by [@kachkaev])\n\nWhen invoking Prettier from the API, there was no way to find out if a file should be ignored or not (for `.prettierignore`) so editor integration plugins would have to implement this logic. Also, there was no way to find out if a file was supported by Prettier, so users would need to call Prettier anyway. In 1.13 there's a way to check if a parser will be inferred (and which one) and if the file is ignored or not before actually calling `format`.\n\nYou can read more about this in the [docs](https://prettier.io/docs/en/api.html#prettiergetfileinfofilepath-options).\n\n#### Support for global Prettier and plugins ([#4192] by [@kachkaev])\n\nWhen installing Prettier and plugins globally, Prettier was not able to automatically load plugins because it searched for them in the nearest `package.json`. Now Prettier will look for plugins in the `node_modules` directory it's installed in. Additionally, for cases where Prettier can't find the plugins automatically (because of other setups we haven't added support for), a new `--plugin-search-dir` option was added so you can specify where Prettier should search for plugins.\n\nYou can read more about this in the [Plugin docs](https://prettier.io/docs/en/plugins.html#using-plugins).\n\n#### Improve cursor offset tracking ([#4397] by [@ds300])\n\nPrettier 1.13 vastly improves the cursor offset tracking for several cases where Prettier was outputting the wrong location, making editor integrations move the cursor to an incorrect location.\n\n### JavaScript\n\n#### Insert more parentheses in math expressions ([#4413] and [#4407] by [@duailibe])\n\nPrettier will now add parens around module operations when they're inside an additive operation or when mixing two different multiplicative operations, even though they're not necessary. This is to help more quickly understand a code snippet.\n\n<!-- prettier-ignore -->\n```js\n// Input\na % 10 - 5;\n2 / 3 * 10 / 2 + 2;\n\n// Output with Prettier 1.13\n(a % 10) - 5;\n((2 / 3) * 10) / 2 + 2;\n```\n\n#### Inline AngularJS tests that use `inject` ([#4495] by [@thorn0])\n\nPrettier will now keep AngularJS tests with dependency injection in a single line, like it does for our other tests.\n\n<!-- prettier-ignore -->\n```js\n// Input:\nit(\"has calculated the answer correctly\", inject(function(DeepThought) {\n  expect(DeepThought.answer).toBe(42);\n}));\n\n// Output with Prettier 1.12.1:\nit(\n  \"has calculated the answer correctly\",\n  inject(function(DeepThought) {\n    expect(DeepThought.answer).toBe(42);\n  })\n);\n\n// Output with Prettier 1.13:\nit(\"has calculated the answer correctly\", inject(function(DeepThought) {\n  expect(DeepThought.answer).toBe(42);\n}));\n```\n\n#### Nicer line wrapping for D3 ([#4285] by [@1wheel], [#4505] by [@duailibe])\n\nIn Prettier 1.12 and earlier, chains that started with `d3` and other short names were broken before the first `.`. In Prettier 1.13, we will not add a newline after the name if it is shorter than the indentation width.\n\n<!-- prettier-ignore -->\n```js\n// Input\nd3.select('body')\n  .append('circle')\n  .at({ width: 30, fill: '#f0f' })\n  .st({ fontWeight: 600 })\n\n// Output with Prettier 1.12.1:\nd3\n  .select(\"body\")\n  .append(\"circle\")\n  .at({ width: 30, fill: \"#f0f\" })\n  .st({ fontWeight: 600 });\n\n// Output with Prettier 1.13:\nd3.select(\"body\")\n  .append(\"circle\")\n  .at({ width: 30, fill: \"#f0f\" })\n  .st({ fontWeight: 600 });\n```\n\n#### Format new `describe.each` table in Jest 23 ([#4423] by [@ikatyang])\n\nJest 23 introduced a new feature called [data driven tests](https://facebook.github.io/jest/docs/en/api.html#describeeachtable-name-fn) where you can describe examples to test in a table. Prettier 1.13 includes support for this feature, and will automatically indent the table when using data driven tests.\n\n<!-- prettier-ignore -->\n```js\n// Input\ndescribe.each`\na|b|expected\n${11   } | ${  1  }|${222}\n${1-1}|${2+2}|${ 3333}\n${2+1+2}|${1111}|${3}\n`('$a + $b', ({a, b, expected}) => {\n  test(`returns ${expected}`, () => {\n    expect(a + b).toBe(expected);\n  });\n\n  test(`returned value not be greater than ${expected}`, () => {\n    expect(a + b).not.toBeGreaterThan(expected);\n  });\n\n  test(`returned value not be less than ${expected}`, () => {\n    expect(a + b).not.toBeLessThan(expected);\n  });\n});\n\n// Output with Prettier 1.13\ndescribe.each`\n  a            | b        | expected\n  ${11}        | ${1}     | ${222}\n  ${1 - 1}     | ${2 + 2} | ${3333}\n  ${2 + 1 + 2} | ${1111}  | ${3}\n`(\"$a + $b\", ({ a, b, expected }) => {\n  test(`returns ${expected}`, () => {\n    expect(a + b).toBe(expected);\n  });\n\n  test(`returned value not be greater than ${expected}`, () => {\n    expect(a + b).not.toBeGreaterThan(expected);\n  });\n\n  test(`returned value not be less than ${expected}`, () => {\n    expect(a + b).not.toBeLessThan(expected);\n  });\n});\n```\n\n#### Format functional composition more nicely ([#4431] by[@suchipi])\n\nOne of the most requested changes in Prettier was to format function composition better. This pattern is pretty common in functional programming libraries like RxJS, Redux, Lodash, and Ramda. In 1.13, Prettier now has an heuristic to detect this type of function composition and format it such that the composed functions are each on their own line. This improves readability when using functions like `pipe`, `compose`, `flowRight`, etc.\n\n<!-- prettier-ignore -->\n```js\n// Input\ncompose(\n  sortBy(x => x),\n  flatten,\n  map(x => [x, x * 2])\n);\n\npipe(\n  filter(x => x % 2 === 0),\n  map(x => x + x),\n  scan((acc, x) => acc + x, 0)\n);\n\n// Output with Prettier 1.12.1\ncompose(sortBy(x => x), flatten, map(x => [x, x * 2]));\n\npipe(filter(x => x % 2 === 0), map(x => x + x), scan((acc, x) => acc + x, 0));\n\n// Output with Prettier 1.13\ncompose(\n  sortBy(x => x),\n  flatten,\n  map(x => [x, x * 2])\n);\n\npipe(\n  filter(x => x % 2 === 0),\n  map(x => x + x),\n  scan((acc, x) => acc + x, 0)\n);\n```\n\n#### Keep parens around `do` expressions when needed and improve their formatting ([#4479] by [@existentialism])\n\nIn Prettier 1.12 and earlier, there were some cases where Prettier would remove parens around `do` expressions where it was not safe to do so, which would cause the code to become invalid. Those cases are now fixed in 1.13. Also, formatting of `do` expressions has been improved in general with this release.\n\n<!-- prettier-ignore -->\n```js\n// Input\n(do {});\n(do {} + 1);\n(1 + do {});\n\n() => do {\n  var obj = { foo: \"bar\", bar: \"foo\" };\n  for (var key in obj) {\n    obj[key];\n  }\n};\n\n// Output with Prettier 1.12\ndo {\n};\ndo {\n} + 1;\n1 +\n  do {\n  };\n\n() =>\n  do {\n    var obj = { foo: \"bar\", bar: \"foo\" };\n    for (var key in obj) {\n      obj[key];\n    }\n  };\n\n// Output with Prettier 1.13\n(do {});\n(do {} + 1);\n1 + do {};\n\n() => do {\n  var obj = { foo: \"bar\", bar: \"foo\" };\n  for (var key in obj) {\n    obj[key];\n  }\n};\n```\n\n### Flow\n\n#### Print classes mixins and implements correctly ([#4326] by [@existentialism])\n\nIn versions 1.12 and earlier, Prettier would incorrectly remove `mixins` and `implements` from flow libdef classes, which would change the meaning of the code. This has been fixed in 1.13.\n\n<!-- prettier-ignore -->\n```js\n// Input\ndeclare class A implements B {}\ndeclare class C mixins D {}\n\n// Output with Prettier 1.12\ndeclare class A {}\ndeclare class C {}\n\n// Output with Prettier 1.13\ndeclare class A implements B {}\ndeclare class C mixins D {}\n```\n\n#### Added support for the nullish coalescing operator and literal numeric separators ([#4536] by [@vjeux])\n\nThese JS features were already supported when using the default Babylon parser, but Prettier 1.13 adds support for them when using the Flow parser.\n\n#### Added support for Flow new syntax features ([#4543], [#4540] and [#4551] by [@existentialism])\n\nNew features added to Flow are now supported by Prettier:\n\n- inline interfaces\n\n  <!-- prettier-ignore -->\n  ```ts\n  type A = interface { p: string};\n  ```\n\n- explicit type arguments\n\n  <!-- prettier-ignore -->\n  ```ts\n  fnCall<string>(\"name\");\n  ```\n\n- proto modifier syntax\n\n  <!-- prettier-ignore -->\n  ```ts\n  declare class A { proto: T }\n  ```\n\n### TypeScript\n\n#### Added support for TypeScript import types ([#4429] and [#4438] by [@ikatyang])\n\nA new feature added in TypeScript 2.9 for describing the shapes of a module imported dynamically.\n\n```ts\n// Input\nexport const x: import(\"./foo\") = { x: 0, y: 0 };\n\nexport let y: import(\"./foo2\").Bar.I = { a: \"\", b: 0 };\n\nexport let shim: typeof import(\"./foo2\") = { Bar: Bar2 };\n\n// Output with Prettier 1.13\nexport const x: import(\"./foo\") = { x: 0, y: 0 };\n\nexport let y: import(\"./foo2\").Bar.I = { a: \"\", b: 0 };\n\nexport let shim: import(\"./foo2\") = { Bar: Bar2 };\n```\n\n#### Added support for generic JSX elements in TypeScripts ([#4268] by [@ikatyang])\n\nAnother feature added in TypeScript 2.9 is the support for generics in JSX elements and Prettier 1.13 can now format them.\n\n<!-- prettier-ignore -->\n```ts\n// Example:\n<MyComponent<number> data={12} />\n```\n\n#### Added support for TaggedTemplateExpression typeParameters ([#4353] by [@ikatyang])\n\nAlso added in TypeScript 2.9, it's now possible to pass type parameters to template expression tags.\n\n<!-- prettier-ignore -->\n```ts\n// Example:\nexport const RedBox = styled.div<{ foo: string }>`\n  background: red;\n  ${props => props.foo};\n`;\n```\n\n#### Improve format of type casts with generics and unions ([#4219] by [@kpdonn])\n\n<!-- prettier-ignore -->\n```ts\n// Input\nconst finalConfiguration =\n  <Immutable.Map<string, any>>someExistingConfigMap.mergeDeep(fallbackOpts);\n\n// Output with Prettier 1.12\nconst finalConfiguration = <Immutable.Map<\n  string,\n  any\n>>someExistingConfigMap.mergeDeep(fallbackOpts);\n\n// Output with Prettier 1.13\nconst finalConfiguration = <Immutable.Map<string, any>>(\n  someExistingConfigMap.mergeDeep(fallbackOpts)\n);\n```\n\n### JSON\n\n#### Split JSON and JSON5 parsers ([#4367] and [#4371] by [@ikatyang], [#4333] by [@duailibe])\n\nJSON5 is a superset of JSON that supports comments, trailing commas and unquoted property keys. Some files (like `.babelrc`) use JSON5, so comments, trailing commas, and unquoted property keys are allowed in those files. Other files (like `package.json`) do not use JSON5, so comments, trailing commas, and unquoted property keys are not allowed. Prettier previously had one parser and printer called `JSON` which was used for both, but maintaining both together led to some subtle bugs being introduced, notably around the `/* @prettier */` pragma comment detection and insertion. With the two split apart, these bugs are fixed and Prettier is more robust.\n\n#### Added `json-stringify` parser for `JSON.stringify`-style formatting ([#4450] by [@ikatyang])\n\nOne common complain with prettier was that it would format `package.json` and `package-lock.json` differently from how `npm` and `yarn` would, so if you ran an `npm` or `yarn` command, it could introduce prettier violations, and editing `package.json` could add line breaks that would later be removed when you next ran an `npm` or `yarn` command. This led to a lot of unnecessary diff noise and a bad user experience. In Prettier 1.13, a new parser/printer called `json-stringify` has been added that behaves the same as `JSON.stringify`, so that changes will not flip-flop back and forth when using prettier and npm/yarn. Also, this is now the default parser/printer for `package.json` and `package-lock.json`, so if you upgrade to the latest version of prettier, these noisy diffs will stop appearing without any configuration change on your part.\n\n### CSS/Less/SCSS\n\n#### Improve format for SCSS maps ([#4487] by [@evilebottnawi])\n\n<!-- prettier-ignore -->\n```less\n/* Output with Prettier 1.12 */\na {\n  @include section-type-1(\n    $header: (margin: 0 0 $margin-base, text-align: left),\n    $decoration:\n      (\n        type: base,\n        margin: 0 auto -1px 0,\n        primary-color: $brand-primary,\n        secondary-color: $gray-light\n      ),\n    $title:\n      (\n        margin: 0 0 $margin-small,\n        color: false,\n        font-size: $font-size-h3,\n        font-weight: false,\n        line-height: $line-height-h3\n      )\n  );\n}\n\n/* Output with Prettier 1.13 */\na {\n  @include section-type-1(\n    $header: (\n      margin: 0 0 $margin-base,\n      text-align: left\n    ),\n    $decoration: (\n      type: base,\n      margin: 0 auto -1px 0,\n      primary-color: $brand-primary,\n      secondary-color: $gray-light\n    ),\n    $title: (\n      margin: 0 0 $margin-small,\n      color: false,\n      font-size: $font-size-h3,\n      font-weight: false,\n      line-height: $line-height-h3\n    )\n  );\n}\n```\n\n#### Improve format for `@support` at-rule ([#4372] by [@evilebottnawi])\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n@supports (transform-style: preserve) or (-moz-transform-style: preserve) or (-o-transform-style: preserve) or (-webkit-transform-style: preserve) {}\n\n/* Output with Prettier 1.12 */\n@supports (transform-style: preserve) or (-moz-transform-style: preserve) or (-o-transform-style: preserve) or (-webkit-transform-style: preserve) {\n}\n\n/* Output with Prettier 1.13 */\n@supports (transform-style: preserve) or (-moz-transform-style: preserve) or\n  (-o-transform-style: preserve) or (-webkit-transform-style: preserve) {\n}\n```\n\n### Markdown\n\n#### Change unordered list symbol to a hyphen ([#4440] by [@ikatyang])\n\nWith the release of Markdown support in Prettier, we used [GitHub BigQuery data](https://cloud.google.com/bigquery/public-data/github) and discovered that the `*` symbol was marginally more used than `-` for unordered lists. Since then, we have received massive feedback from the community that the `-` is actually preferred. Prettier 1.13 will now format unordered lists using the `-` symbol.\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\n* Top level list item 1\n* Top level list item 2\n  * Nested List item 1\n  * Nested List item 2\n    * Sub-Nested List item 1\n    * Sub-Nested List item 2\n\n<!-- Output with Prettier 1.12.1 -->\n* Top level list item 1\n* Top level list item 2\n  * Nested List item 1\n  * Nested List item 2\n    * Sub-Nested List item 1\n    * Sub-Nested List item 2\n\n<!-- Output with Prettier 1.13 -->\n- Top level list item 1\n- Top level list item 2\n  - Nested List item 1\n  - Nested List item 2\n    - Sub-Nested List item 1\n    - Sub-Nested List item 2\n```\n\n#### Preserve Liquid tag contents ([#4484] by [@duailibe])\n\nLiquid is a templating language popular among static site generators such as Jekyll. In Prettier 1.12 and earlier, Liquid tags in markdown files were not properly handled, because Prettier thought they were just text. This would sometimes alter the contents of the tags, changing their meaning. Now Prettier 1.13 understands Liquid tags and will not change their contents.\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\n{% include_relative _installations/tarball.md %}\n\n{% cloudinary nice_prefix_-_for_the_filename.jpg %}\n\n<!-- Output with Prettier 1.12 -->\n{% include_relative \\_installations/tarball.md %}\n\n{% cloudinary nice*prefix*-\\_for_the_filename.jpg %}\n\n<!-- Output with Prettier 1.13 -->\n{% include_relative _installations/tarball.md %}\n\n{% cloudinary nice_prefix_-_for_the_filename.jpg %}\n```\n\n#### Break link definitions onto multiple lines when needed ([#3531] by [@j-f1])\n\nLink definitions will be broken onto multiple lines when used with `--prose-wrap always` if they exceed the print width.\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\n[just-url]: https://example.com\n[url-with-short-title]: https://example.com \"title\"\n[url-with-long-title]: https://example.com \"a long, long title. It's really really long. Here have words.\"\n\n[long]: https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx\n[long-with-title]: https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx \"look a title!\"\n\n<!-- Output with Prettier 1.12 -->\n[just-url]: https://example.com\n[url-with-short-title]: https://example.com \"title\"\n[url-with-long-title]: https://example.com \"a long, long title. It's really really long. Here have words.\"\n[long]: https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx\n[long-with-title]: https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx \"look a title!\"\n\n<!-- Output with Prettier 1.13 -->\n[just-url]: https://example.com\n[url-with-short-title]: https://example.com \"title\"\n[url-with-long-title]:\n  https://example.com\n  \"a long, long title. It's really really long. Here have words.\"\n[long]:\n  https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx\n[long-with-title]:\n  https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx\n  \"look a title!\"\n```\n\n### GraphQL\n\n#### Only add blank lines after top-level definitions if present in the original source ([#4512] by [@ad1992])\n\nIn Prettier 1.12 and earlier, we would always print a blank line between top level definitions. In 1.13, we would only output a blank line if it was there originally. This behavior is similar to how Prettier formats JavaScript.\n\n<!-- prettier-ignore -->\n```graphql\n# Input\ntype TypeA {\n  fieldA: string\n}\ntype TypeB {\n  fieldB: string\n}\n\ntype TypeC {\n  fieldC: string\n}\n\n# Output with Prettier 1.12.1\ntype TypeA {\n  fieldA: string\n}\n\ntype TypeB {\n  fieldB: string\n}\n\ntype TypeC {\n  fieldC: string\n}\n\n# Output with Prettier 1.13\ntype TypeA {\n  fieldA: string\n}\ntype TypeB {\n  fieldB: string\n}\n\ntype TypeC {\n  fieldC: string\n}\n```\n\n## Other changes\n\n### API/CLI\n\n#### Don't format range if required pragma is missing in the file ([#3996] by [@josephfrazier])\n\nIn Prettier 1.12 and earlier, if a file didn't have a `/** @prettier */` pragma and Prettier was called only for a range with `--require-pragma`, it would format it anyway. Now Prettier will check if the file has the pragma even when only formatting a range.\n\n#### Improve plugin resolution when path does not start with `./` ([#4451] by [@kachkaev])\n\nWhen passing `--plugin=path/to/plugin` Prettier 1.12 and earlier would crash because it looked for a `path/to/plugin` in `node_modules` folder. Prettier 1.13 will look in the current directory first and failing that will look in `node_modules`.\n\n#### Adding plugin interface for isBlockComment ([#4347] by [@mgrip])\n\nA block comment is a comment that can be printed inline (for JS, it's `/* comment */`) with code. Since Prettier is responsible for printing comments we needed to let plugins determine if a comment is a block comment. Read more in our [docs](plugins.md).\n\n### JavaScript\n\n#### Apply destructuring rules in functions to catch param ([#4385] by [@duailibe])\n\nIn 1.12 we formatted destructuring in `catch` arguments like destructuring in assignments, but the code looks better if we treat it like destructuring in function parameters instead, so we made that change:\n\n<!-- prettier-ignore -->\n```js\n// Input\ntry {\n  doSomething();\n} catch ({data: {message}}) {\n  handleError(message.errors);\n}\n\ntry {\n  doSomething();\n} catch ({data: {message: {errors}}}) {\n  handleError(errors);\n}\n\n// Output with Prettier 1.12.1\ntry {\n  doSomething();\n} catch ({\n  data: { message }\n}) {\n  handleError(message.errors);\n}\n\ntry {\n  doSomething();\n} catch ({\n  data: {\n    message: { errors }\n  }\n}) {\n  handleError(errors);\n}\n\n// Output with Prettier 1.13\ntry {\n  doSomething();\n} catch ({ data: { message } }) {\n  handleError(message.errors);\n}\n\ntry {\n  doSomething();\n} catch ({\n  data: {\n    message: { errors }\n  }\n}) {\n  handleError(errors);\n}\n```\n\n#### Escape backslashes correctly for Markdown in JS ([#4381] by [@ikatyang])\n\nPrettier 1.12 and earlier was incorrectly removing backslashes in Markdown template literals in some cases. Prettier 1.13 will print them correctly.\n\n<!-- prettier-ignore -->\n```js\n// Input\nmarkdown`\n  const cssString = css\\`\n    background-color: \\$\\{color('base')\\}\n  \\`;\n`\n// Output with Prettier 1.12.1\nmarkdown`\n  const cssString = css\\`background-color: ${color('base')}\\`;\n`;\n\n// Output with Prettier 1.13\nmarkdown`\n  const cssString = css\\`background-color: \\$\\{color('base')\\}\\`;\n`;\n```\n\n#### Support styled-components ` Foo.extend.attrs()`` ` ([#4434] by [@duailibe])\n\nIn Prettier 1.12.1, Prettier did not detect that the template literal passed to the `styled-components` function `Foo.extends.attrs()` was CSS. In 1.13, Prettier now supports this syntax and will format the contents of the template literal as CSS.\n\n<!-- prettier-ignore -->\n```js\n// Input\nButton.extend.attrs({})`\nborder-color : black;\n`;\n\n// Output with Prettier 1.12\nButton.extend.attrs({})`\nborder-color : black;\n`;\n\n// Output with Prettier 1.13\nButton.extend.attrs({})`\n  border-color: black;\n`;\n```\n\n#### Added support for the GraphQL comment tag ([#4395] by [@tjallingt])\n\nWe format GraphQL in tagged template literals but there are GraphQL libraries that use untagged template literals. Many GraphQL editor plugins have settled on using the comment `/* GraphQL */` before an untagged template literal to detect GraphQL. In 1.13, Prettier now also detects that comment and formats the GraphQL code.\n\n<!-- prettier-ignore -->\n```js\n// Input\nconst query = /* GraphQL */`\n      {\n    user(   id :   5  )  {\n      firstName\n      lastName\n    }\n  }\n`;\n\n// Output with Prettier 1.13\nconst query = /* GraphQL */ `\n  {\n    user(id: 5) {\n      firstName\n      lastName\n    }\n  }\n`;\n```\n\n#### Format Angular Component styles ([#4361] by [@JamesHenry])\n\nPrettier 1.13 formats the inline styles of Angular components.\n\n<!-- prettier-ignore -->\n```js\n// Input\n@Component({\n       selector: 'app-test',\n  styles: [   `\n\n :host {\n   color: red;\n }\n div { background: blue\n }\n`\n\n]\n})\nclass     TestComponent {}\n\n// Output with Prettier 1.13\n@Component({\n  selector: \"app-test\",\n  styles: [\n    `\n      :host {\n        color: red;\n      }\n      div {\n        background: blue;\n      }\n    `,\n  ],\n})\nclass TestComponent {\n```\n\n#### Correctly break class property initializers ([#4442] by [@nicolo-ribaudo])\n\nPrettier 1.12 did not indent the following lines when breaking a class property initializer. This is now fixed in 1.13.\n\n<!-- prettier-ignore -->\n```js\n// Input\nclass Something {\n  someInstanceProperty = this.props.foofoofoofoofoofoo &&\n  \tthis.props.barbarbarbar;\n}\n\n// Output with Prettier 1.12\nclass Something {\n  someInstanceProperty = this.props.foofoofoofoofoofoo &&\n  this.props.barbarbarbar;\n}\n\n// Output with Prettier 1.13\nclass Something {\n  someInstanceProperty = this.props.foofoofoofoofoofoo &&\n  \tthis.props.barbarbarbar;\n}\n```\n\n#### Fix long name method in bind expressions ([#4447] by [@misoguy])\n\nPrettier 1.13 improves formatting of long member expression chains in a bind expression.\n\n<!-- prettier-ignore -->\n```js\n// Input\nfunction Foo() {\n\tconst longVariableName = ::veryLongObjectName.veryLongObjectChain.veryLongObjectProperty;\n}\n\n// Output with Prettier 1.12\nfunction Foo() {\n  const longVariableName = ::veryLongObjectName.veryLongObjectChain\n    .veryLongObjectProperty;\n}\n\n// Output with Prettier 1.13\nfunction Foo() {\n  const longVariableName =\n    ::veryLongObjectName.veryLongObjectChain.veryLongObjectProperty;\n}\n```\n\n#### Stop removing parens for the `?.` operator ([#4542] by [@duailibe])\n\nThere's an [edge case](https://github.com/tc39/proposal-optional-chaining#edge-case-grouping) in the optional chaining proposal that wrapping in parens has a difference in the runtime behavior. Prettier 1.12 and earlier were removing the parens in that case, which is now fixed in 1.13.\n\n<!-- prettier-ignore -->\n```js\n// Input\n(a?.b).c\n\n// Output with Prettier 1.12\na?.b.c\n\n// Output with Prettier 1.13\n(a?.b).c\n```\n\n### Flow\n\n#### Wrap `?() => T` in parens when needed. ([#4475] by [@nicolo-ribaudo])\n\nPrettier 1.12 and earlier unintentionally changed the meaning of types when using nullable operator because of the precedence of operators. This is now fixed in Prettier 1.13.\n\n<!-- prettier-ignore -->\n```ts\n// Input\ntype Foo = { arg: ?(() => void) | string };\n\n// Output with Prettier 1.12\ntype Foo = { arg: ?() => void | string };\n// which is equivalent to:\ntype Foo = { arg: ?() => (void | string) };\n\n// Output with Prettier 1.13\ntype Foo = { arg: ?(() => void) | string };\n```\n\n### TypeScript\n\n#### Preserve quoted class properties ([#4517] by [@ikatyang])\n\nStrict property initialization checks are not applied to quoted class properties in TypeScript. In Prettier 1.13 we'll preserve the quotes if they were originally in the code.\n\n<!-- prettier-ignore -->\n```ts\n// Input\nclass Username {\n  age: number;\n  \"username\": string;\n}\n\n// Output with Prettier 1.12\nclass Username {\n  age: number;\n  username: string;\n}\n\n// Output with Prettier 1.13\nclass Username {\n  age: number;\n  \"username\": string;\n}\n```\n\n### Markdown\n\n#### Remove newline in empty `.md` files ([#4388] by [@huyvohcmc])\n\nIn Prettier 1.12.1, a newline would be printed when formatting an empty markdown file. This is now fixed in 1.13.\n\n#### Prevent merge continuous CJK text with `--prose-wrap preserve` ([#4504] by [@ikatyang])\n\nWhen using `--prose-wrap preserve`, Prettier will no longer merge continuous CJK text broken across multiple lines.\n\n<!-- prettier-ignore -->\n```markdown\n<!-- Input -->\n::: warning 注意\n该网站在国外无法访问，故以下演示无效\n:::\n\n<!-- Output with Prettier 1.12 -->\n::: warning 注意该网站在国外无法访问，故以下演示无效\n:::\n\n<!-- Output with Prettier 1.13 -->\n::: warning 注意\n该网站在国外无法访问，故以下演示无效\n:::\n```\n\n### CSS/SCSS/Less\n\n#### Print trailing commas in SCSS list and maps ([#4317] by [@ad1992])\n\nPrettier now prints trailing commas in lists and maps in SCSS if `trailingComma` is not `\"none\"` and the list or map is broken onto multiple lines.\n\n<!-- prettier-ignore -->\n```css\n/* Input */\n$list: (a);\n$colors: (\n  \"red\",\n  \"blue\"\n);\n$map: (\n  'medium': (min-width: 800px),\n  'large': (min-width: 1000px),\n  'huge': (min-width: 1200px),\n);\n\n/* Output with Prettier 1.13 */\n$list: (a);\n$colors: (\n  \"red\",\n  \"blue\",\n);\n$map: (\n  \"medium\": (min-width: 800px),\n  \"large\": (min-width: 1000px),\n  \"huge\": (min-width: 1200px),\n);\n```\n\n#### Fix empty front-matter ([#4392] and [#4457] by [@eliasmeire])\n\nPrettier 1.12 was released with support for front-matter blocks in CSS/SCSS/Less files, but it was removing empty blocks (or blocks with only comments). This is now fixed in 1.13.\n\n#### Don't format SCSS string interpolation ([#4490] by [@evilebottnawi])\n\nPrettier would break SCSS code when formatting a string with interpolation for some cases. Prettier 1.13 will print the original code.\n\n<!-- prettier-ignore -->\n```less\n/* Input\na {\n content: \"#{my-fn(\"_\")}\";\n}\n\n/* Output with Prettier 1.12 */\na {\n content: \"#{my-fn(\" _ \")}\";\n}\n\n/* Output with Prettier 1.13 */\na {\n content: \"#{my-fn(\"_\")}\";\n}\n```\n\n#### Escape characters correctly ([#4472] by [@evilebottnawi])\n\nPrettier 1.12 would not escape characters correctly in some cases.\n\n<!-- prettier-ignore -->\n```less\n/* Input */\n@media only screen and (max-width: 767px) {\n    @include widths(2 3 4, \\@small);\n}\n\n$widths-breakpoint-separator: \\@small;\n\n/* Output with Prettier 1.12 */\n@media only screen and (max-width: 767px) {\n  @include widths(2 3 4, \\ @small);\n}\n\n$widths-breakpoint-separator: \\ @small;\n\n/* Output with Prettier 1.13 */\n@media only screen and (max-width: 767px) {\n    @include widths(2 3 4, \\@small);\n}\n\n$widths-breakpoint-separator: \\@small;\n```\n\n#### Fix SCSS interpolation in CSS variables ([#4471] by [@evilebottnawi])\n\n<!-- prettier-ignore -->\n```less\n/* Input */\na {\n  --bg: var(--#{$type});\n}\n\n/* Output with Prettier 1.12 */\na {\n  --bg: var(-- #{$type});\n}\n\n/* Output with Prettier 1.13 */\na {\n  --bg: var(--#{$type});\n}\n```\n\n#### Fix spacing issue in PostCSS computed variables ([#4408] by [@ad1992])\n\n<!-- prettier-ignore -->\n```less\n/* Input */\nbackground-color: $$(style)Color;\n\n/* Output with Prettier 1.12 */\nbackground-color: $$(style) Color;\n\n/* Output with Prettier 1.13 */\nbackground-color: $$(style)Color;\n```\n\n[@1wheel]: https://github.com/1wheel\n[@ad1992]: https://github.com/ad1992\n[@ds300]: https://github.com/ds300\n[@duailibe]: https://github.com/duailibe\n[@eliasmeire]: https://github.com/eliasmeire\n[@evilebottnawi]: https://github.com/evilebottnawi\n[@existentialism]: https://github.com/existentialism\n[@huyvohcmc]: https://github.com/huyvohcmc\n[@ikatyang]: https://github.com/ikatyang\n[@j-f1]: https://github.com/j-f1\n[@josephfrazier]: https://github.com/josephfrazier\n[@kachkaev]: https://github.com/kachkaev\n[@kpdonn]: https://github.com/kpdonn\n[@mgrip]: https://github.com/mgrip\n[@misoguy]: https://github.com/misoguy\n[@n8n8baby]: https://github.com/n8n8baby\n[@nicolo-ribaudo]: https://github.com/nicolo-ribaudo\n[@suchipi]: https://github.com/suchipi\n[@thorn0]: https://github.com/thorn0\n[@tjallingt]: https://github.com/tjallingt\n[@vjeux]: https://github.com/vjeux\n[@jameshenry]: https://github.com/JamesHenry\n[#3531]: https://github.com/prettier/prettier/pull/3531\n[#3996]: https://github.com/prettier/prettier/pull/3996\n[#4192]: https://github.com/prettier/prettier/pull/4192\n[#4219]: https://github.com/prettier/prettier/pull/4219\n[#4268]: https://github.com/prettier/prettier/pull/4268\n[#4285]: https://github.com/prettier/prettier/pull/4285\n[#4288]: https://github.com/prettier/prettier/pull/4288\n[#4317]: https://github.com/prettier/prettier/pull/4317\n[#4326]: https://github.com/prettier/prettier/pull/4326\n[#4333]: https://github.com/prettier/prettier/pull/4333\n[#4341]: https://github.com/prettier/prettier/pull/4341\n[#4347]: https://github.com/prettier/prettier/pull/4347\n[#4353]: https://github.com/prettier/prettier/pull/4353\n[#4361]: https://github.com/prettier/prettier/pull/4361\n[#4367]: https://github.com/prettier/prettier/pull/4367\n[#4371]: https://github.com/prettier/prettier/pull/4371\n[#4372]: https://github.com/prettier/prettier/pull/4372\n[#4381]: https://github.com/prettier/prettier/pull/4381\n[#4385]: https://github.com/prettier/prettier/pull/4385\n[#4388]: https://github.com/prettier/prettier/pull/4388\n[#4392]: https://github.com/prettier/prettier/pull/4392\n[#4395]: https://github.com/prettier/prettier/pull/4395\n[#4397]: https://github.com/prettier/prettier/pull/4397\n[#4407]: https://github.com/prettier/prettier/pull/4407\n[#4408]: https://github.com/prettier/prettier/pull/4408\n[#4413]: https://github.com/prettier/prettier/pull/4413\n[#4414]: https://github.com/prettier/prettier/pull/4414\n[#4418]: https://github.com/prettier/prettier/pull/4418\n[#4423]: https://github.com/prettier/prettier/pull/4423\n[#4429]: https://github.com/prettier/prettier/pull/4429\n[#4431]: https://github.com/prettier/prettier/pull/4431\n[#4434]: https://github.com/prettier/prettier/pull/4434\n[#4435]: https://github.com/prettier/prettier/pull/4435\n[#4438]: https://github.com/prettier/prettier/pull/4438\n[#4440]: https://github.com/prettier/prettier/pull/4440\n[#4442]: https://github.com/prettier/prettier/pull/4442\n[#4447]: https://github.com/prettier/prettier/pull/4447\n[#4450]: https://github.com/prettier/prettier/pull/4450\n[#4451]: https://github.com/prettier/prettier/pull/4451\n[#4457]: https://github.com/prettier/prettier/pull/4457\n[#4471]: https://github.com/prettier/prettier/pull/4471\n[#4472]: https://github.com/prettier/prettier/pull/4472\n[#4475]: https://github.com/prettier/prettier/pull/4475\n[#4479]: https://github.com/prettier/prettier/pull/4479\n[#4484]: https://github.com/prettier/prettier/pull/4484\n[#4487]: https://github.com/prettier/prettier/pull/4487\n[#4490]: https://github.com/prettier/prettier/pull/4490\n[#4495]: https://github.com/prettier/prettier/pull/4495\n[#4504]: https://github.com/prettier/prettier/pull/4504\n[#4505]: https://github.com/prettier/prettier/pull/4505\n[#4512]: https://github.com/prettier/prettier/pull/4512\n[#4517]: https://github.com/prettier/prettier/pull/4517\n[#4528]: https://github.com/prettier/prettier/pull/4528\n[#4536]: https://github.com/prettier/prettier/pull/4536\n[#4542]: https://github.com/prettier/prettier/pull/4542\n[#4540]: https://github.com/prettier/prettier/pull/4540\n[#4543]: https://github.com/prettier/prettier/pull/4543\n[#4551]: https://github.com/prettier/prettier/pull/4551"
    },
    {
      "id": "/2018/04/11/1.12.0",
      "metadata": {
        "permalink": "/blog/2018/04/11/1.12.0",
        "source": "@site/blog/2018-04-11-1.12.0.md",
        "title": "Prettier 1.12: Fixes, Features, and Formatting, Oh My!",
        "description": "Hello everyone, and welcome to Prettier 1.12.0! This release contains a lot of bugfixes, formatting adjustments, new features for our plugin API, and new Markdown features.",
        "date": "2018-04-11T00:00:00.000Z",
        "formattedDate": "April 11, 2018",
        "tags": [],
        "readingTime": 16.075,
        "truncated": true,
        "authors": [
          {
            "name": "Suchipi (@suchipi)",
            "url": "https://twitter.com/suchipi"
          }
        ],
        "frontMatter": {
          "author": "Suchipi (@suchipi)",
          "authorURL": "https://twitter.com/suchipi",
          "title": "Prettier 1.12: Fixes, Features, and Formatting, Oh My!"
        },
        "prevItem": {
          "title": "Prettier 1.13: Conquering the web!",
          "permalink": "/blog/2018/05/27/1.13.0"
        },
        "nextItem": {
          "title": "Prettier for PHP 0.1: First alpha release 🎉",
          "permalink": "/blog/2018/04/09/plugin-php-0.1"
        }
      },
      "content": "Hello everyone, and welcome to Prettier 1.12.0! This release contains a lot of bugfixes, formatting adjustments, new features for our plugin API, and new Markdown features.\n\n<!--truncate-->\n\n## Highlights\n\n### JavaScript\n\n#### Break nested ternaries ([#4120](https://github.com/prettier/prettier/pull/4120) by [@duailibe](https://github.com/duailibe))\n\nWhen ternaries are nested, depending on the print width and indentation level, sometimes the outer ternary could get broken across multiple lines, while the inner ternary was left on one line:\n\n<!-- prettier-ignore -->\n```js\n// Input:\nconst platformString = Platform.OS == \"ios\" ? \"iOS\"\n  : Platform.OS == \"android\" ? \"Android\" : \"unknown\";\n\n// Formatted (Prettier 1.11.1):\nconst platformString =\n  Platform.OS == \"ios\"\n    ? \"iOS\"\n    : Platform.OS == \"android\" ? \"Android\" : \"unknown\";\n```\n\nThis looked a bit odd, so to increase readability, we will now make all nested ternaries multi-line if any of them become multiline:\n\n<!-- prettier-ignore -->\n```js\n// Formatted (Prettier 1.12.0):\nconst platformString =\n  Platform.OS == \"ios\"\n    ? \"iOS\"\n    : Platform.OS == \"android\"\n      ? \"Android\"\n      : \"unknown\";\n```\n\n#### Handle comments before `else` ([#4264](https://github.com/prettier/prettier/pull/4264) by [@duailibe](https://github.com/duailibe))\n\nA bug that has been open for a long time deals with the behavior around printing comments before `else`. Comments before the `else` keyword were moved inside the `else` block, which could be confusing when the comment was explaining the condition instead of the block. Additionally, it got in the way when commenting out a portion of an if/else chain.\n\n##### Input:\n\n<!-- prettier-ignore -->\n```js\nif (obj.foo) {\n  return foo;\n}\n// Use bar as a fallback\nelse if (obj.bar) {\n  return bar;\n}\n\nif (a == 2) {\n  console.log('2');\n}\n// else if (a == 3) {\n//   console.log('3');\n// }\nelse if (a == 4) {\n  console.log('4');\n}\n```\n\n##### Formatted (Prettier 1.11.1):\n\n<!-- prettier-ignore -->\n```js\nif (obj.foo) {\n  return foo;\n} else if (obj.bar) {\n  // Use bar as a fallback\n  return bar;\n}\n\nif (a == 2) {\n  console.log(\"2\");\n} else if (a == 4) {\n  // else if (a == 3) {\n  //   console.log('3');\n  // }\n  console.log(\"4\");\n}\n```\n\nIt was annoying that these comments got moved, but we weren't sure what to do here because we wanted to consistently format else blocks in this style: `} else {`.\n\nWe decided with this release to make an exception to the normal formatting and format `else` differently, but only if a comment appears in-between the `else` and the opening brace. This seems like the best solution:\n\n##### Formatted (Prettier 1.12.0):\n\n<!-- prettier-ignore -->\n```js\nif (obj.foo) {\n  return foo;\n}\n// Use bar as a fallback\nelse if (obj.bar) {\n  return bar;\n}\n\nif (a == 2) {\n  console.log(\"2\");\n}\n// else if (a == 3) {\n//   console.log('3');\n// }\nelse if (a == 4) {\n  console.log(\"4\");\n}\n```\n\n#### Inline Angular async tests and beforeEach, etc. ([#4241](https://github.com/prettier/prettier/pull/4241) by [@ad1992](https://github.com/ad1992))\n\nIn Prettier 1.11.1, Angular tests using the `async` testing helper were formatted with an unnecessary number of line breaks. We've made a change to keep functions wrapped with this helper in-line, which prevents these unnecessary line breaks.\n\n<!-- prettier-ignore -->\n```js\n// Input:\nimport { TestBed, async } from '@angular/core/testing';\nimport { AppComponent } from './app.component';\n\ndescribe('AppComponent', () => {\n  beforeEach(async(() => {\n    TestBed.configureTestingModule({\n      declarations: [AppComponent]\n    }).compileComponents();\n  }));\n  it('should create the app', async(() => {\n    const fixture = TestBed.createComponent(AppComponent);\n    const app = fixture.debugElement.componentInstance;\n    expect(app).toBeTruthy();\n  }));\n});\n\n// Formatted (Prettier 1.11.1):\nimport { TestBed, async } from \"@angular/core/testing\";\nimport { AppComponent } from \"./app.component\";\n\ndescribe(\"AppComponent\", () => {\n  beforeEach(\n    async(() => {\n      TestBed.configureTestingModule({\n        declarations: [AppComponent]\n      }).compileComponents();\n    })\n  );\n  it(\n    \"should create the app\",\n    async(() => {\n      const fixture = TestBed.createComponent(AppComponent);\n      const app = fixture.debugElement.componentInstance;\n      expect(app).toBeTruthy();\n    })\n  );\n});\n\n// Formatted (Prettier 1.12.0):\nimport { TestBed, async } from \"@angular/core/testing\";\nimport { AppComponent } from \"./app.component\";\n\ndescribe(\"AppComponent\", () => {\n  beforeEach(async(() => {\n    TestBed.configureTestingModule({\n      declarations: [AppComponent]\n    }).compileComponents();\n  }));\n  it(\"should create the app\", async(() => {\n    const fixture = TestBed.createComponent(AppComponent);\n    const app = fixture.debugElement.componentInstance;\n    expect(app).toBeTruthy();\n  }));\n});\n```\n\n#### Break `ObjectPattern`s with nested `ObjectPattern`s ([#4267](https://github.com/prettier/prettier/pull/4267) by [@duailibe](https://github.com/duailibe))\n\nWe received a lot of community feedback that object and array destructuring syntax sometimes did not format very well. As a first step towards improving this, we have made a change so that any nested non-leaf object or array patterns in a destructuring pattern will get multi-lined if any of their parents do:\n\n<!-- prettier-ignore -->\n```js\n// Input:\nconst {\n  name: {\n    first,\n    last,\n  },\n  organisation: {\n    address: {\n      street: orgStreetAddress,\n      postcode: orgPostcode,\n    },\n  },\n} = user;\n\n// Formatted (Prettier 1.11.1):\nconst {\n  name: { first, last },\n  organisation: { address: { street: orgStreetAddress, postcode: orgPostcode } }\n} = user;\n\n// Formatted (Prettier 1.12.0):\nconst {\n  name: { first, last },\n  organisation: {\n    address: { street: orgStreetAddress, postcode: orgPostcode }\n  }\n} = user;\n```\n\n### Markdown\n\n#### Support hasPragma/insertPragma ([#4275](https://github.com/prettier/prettier/pull/4275) by [@ikatyang](https://github.com/ikatyang))\n\nPrettier 1.7.0 and 1.8.0 introduced two new options, [`--require-pragma`](https://prettier.io/docs/en/options.html#require-pragma) and [`--insert-pragma`](https://prettier.io/docs/en/options.html#insert-pragma). However, these options were only supported in JavaScript. Now these options are available in Markdown, too!\n\n```md\n<!-- @prettier -->\n\n# My Markdown Document\n\nA long time ago, in my hometown of Ericsburgh...\n```\n\n#### Support top-level `prettier-ignore-start`/`prettier-ignore-end` ([#4202](https://github.com/prettier/prettier/pull/4202) by [@ikatyang](https://github.com/ikatyang))\n\nWhen using tools such as [all-contributors](https://github.com/kentcdodds/all-contributors) or [markdown-toc](https://github.com/jonschlinkert/markdown-toc), users were running into situations where autogenerated Markdown content was formatted oddly by Prettier, or Prettier's `--list-different` mode was flagging autogenerated content that the user didn't care about formatting.\n\nTo solve these problems, we have added a new type of ignore comment to Markdown, called [Range Ignore](https://prettier.io/docs/en/ignore.html#range-ignore):\n\n<!-- prettier-ignore -->\n```md\n<!-- prettier-ignore-start -->\n<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->\n| [<img src=\"https://avatars1.githubusercontent.com/u/12345?v=4\" width=\"100px;\"/><br /><sub><b>Alice</b></sub>](https://github.com/example-alice)<br /> [💻](https://github.com/my/repo/commits?author=example-alice \"Code\") [📖](https://github.com/my/repo/commits?author=example-alice \"Documentation\") [⚠️](https://github.com/my/repo/commits?author=example-alice \"Tests\") | [<img src=\"https://avatars3.githubusercontent.com/u/12346?v=4\" width=\"100px;\"/><br /><sub><b>Bob</b></sub>](https://github.com/example-bob)<br /> [🐛](https://github.com/my/repo/issues?q=author%3Aexample-bob \"Bug reports\") | [<img src=\"https://avatars3.githubusercontent.com/u/123457?v=4\" width=\"100px;\"/><br /><sub><b>Jeffrey</b></sub>](https://github.com/example-jeffrey)<br /> [🐛](https://github.com/my/repo/issues?q=author%3Aexample-jeffrey \"Bug reports\") | [<img src=\"https://avatars2.githubusercontent.com/u/123458?v=4\" width=\"100px;\"/><br /><sub><b>Sarah</b></sub>](https://github.com/example-sarah)<br /> [🐛](https://github.com/my/repo/issues?q=author%3Aexample-sarah \"Bug reports\") |\n| :---: | :---: | :---: | :---: |\n<!-- ALL-CONTRIBUTORS-LIST:END -->\n<!-- prettier-ignore-end -->\n```\n\nYou can put `prettier-ignore-start` and `prettier-ignore-end` comments around autogenerated content, and prettier will ignore everything in-between. Please note that this feature is currently only available in Markdown, and can only be used at the top-level.\n\n### GraphQL\n\n#### Allow new interface style for GraphQL. ([#4012](https://github.com/prettier/prettier/pull/4012) by [@ruiaraujo](https://github.com/ruiaraujo))\n\nThe GraphQL Schema Definition Language recently changed the syntax for multiple inherited interfaces to use `&` instead of `,`:\n\n<!-- prettier-ignore -->\n```gql\n// Old style\ntype Foo implements Bar, Baz { field: Type }\n\n// New style\ntype Foo implements Bar & Baz { field: Type }\n```\n\nPrettier 1.11.1 failed to parse the new style; we now support both styles.\n\n### Plugin API (Beta)\n\n#### Move pragma detection/insertion to plugins ([#3685](https://github.com/prettier/prettier/pull/3685) by [@duailibe](https://github.com/duailibe))\n\nPrettier plugins can now include a `hasPragma` function in their [parser](https://prettier.io/docs/en/plugins.html#parsers) and an `insertPragma` function in their [printer](https://prettier.io/docs/en/plugins.html#printers) to opt-in to `--insert-pragma` and `--require-pragma` support. These are their signatures:\n\n```ts\nfunction hasPragma(text: string): boolean;\nfunction insertPragma(text: string): string;\n```\n\n#### Enable plugin-specific comment functionality ([#4182](https://github.com/prettier/prettier/pull/4182) by [@mgrip](https://github.com/mgrip))\n\nPlugins can now override prettier's built-in comment printing algorithm on a case-by-case basis in order to better support comment formatting for their language. This API is not yet documented, but you can view how this feature is used in the recently-released [Prettier PHP Plugin](https://github.com/prettier/plugin-php) [here](https://github.com/prettier/plugin-php/blob/c6be52c3f0b85789006f28c553b40f7076284031/src/comments.js) and [here](https://github.com/prettier/plugin-php/blob/c6be52c3f0b85789006f28c553b40f7076284031/src/index.js).\n\n## Other Changes\n\n### JavaScript\n\n#### Upgrade flow to 0.69 and enable ?. support ([#4296](https://github.com/prettier/prettier/pull/4296) by [@vjeux](https://github.com/vjeux))\n\nOptional chaining (`?.`) is now supported when using the `flow` parser:\n\n<!-- prettier-ignore -->\n```js\nconst name = this.model?.user?.firstName || \"No Name Set\"\n```\n\n#### Stop marking all comments in named exports as leading comments ([#4292](https://github.com/prettier/prettier/pull/4292) by [@duailibe](https://github.com/duailibe))\n\nThis change fixes a bug where ignored comments in named exports were duplicated on every format:\n\n<!-- prettier-ignore -->\n```js\n// Input:\n\n// prettier-ignore\nexport {\n  foo, // comment\n  bar, // comment\n}\n\n// Formatted (Prettier 1.11.1):\n\n// prettier-ignore\n// comment\n// comment\nexport {\n  foo, // comment\n  bar, // comment\n}\n\n// Formatted (Prettier 1.12.0):\n\n// prettier-ignore\nexport {\n  foo, // comment\n  bar, // comment\n}\n```\n\n#### Handle ContinueStatement and BreakStatement comments ([#4279](https://github.com/prettier/prettier/pull/4279) by [@duailibe](https://github.com/duailibe))\n\nPrettier was mistakenly not printing some comments near the `continue` and `break` keywords. This has been fixed:\n\n<!-- prettier-ignore -->\n```js\n// Input:\nfor (let i = 0; i < 5; i++) {\n  continue /* Comment */;\n}\n\nfor (let i = 0; i < 10; i++) {\n  break /* Comment */;\n}\n\n// Output (Prettier 1.11.1):\n/*\n  Error: Comment \"Comment\" was not printed. Please report this error!\n    at https://prettier.io/lib/index.js:2312:75\n    at Array.forEach (<anonymous>)\n    at ensureAllCommentsPrinted (https://prettier.io/lib/index.js:2312:22)\n    at _formatWithCursor (https://prettier.io/lib/index.js:2313:949)\n    at _format (https://prettier.io/lib/index.js:2314:239)\n    at formatRange (https://prettier.io/lib/index.js:2331:215)\n    at _formatWithCursor (https://prettier.io/lib/index.js:2313:288)\n    at _format (https://prettier.io/lib/index.js:2314:239)\n    at Object.format (https://prettier.io/lib/index.js:2333:277)\n    at formatCode (https://prettier.io/worker.js:130:21)\n    at self.onmessage (https://prettier.io/worker.js:80:19)\n*/\n\n// Formatted (Prettier 1.12.0):\nfor (let i = 0; i < 5; i++) {\n  continue; /* Comment */\n}\n\nfor (let i = 0; i < 10; i++) {\n  break; /* Comment */\n}\n```\n\n#### Fix embedded GraphQL in JS with backticks ([#4265](https://github.com/prettier/prettier/pull/4265) by [@duailibe](https://github.com/duailibe), [#4278](https://github.com/prettier/prettier/pull/4278) by [@duailibe](https://github.com/duailibe))\n\nIn Prettier 1.11.1, a bug caused GraphQL containing escaped backtick strings to not be formatted. This has been fixed in Prettier 1.12.0:\n\n<!-- prettier-ignore -->\n```js\n// Input:\ngql`\n  \"\\`foo\\` mutation payload.\"\n  type FooPayload { bar: String\n  }\n`\n\n// Formatted (Prettier 1.11.1):\ngql`\n  \"\\`foo\\` mutation payload.\"\n  type FooPayload { bar: String\n  }\n`;\n\n// Formatted (Prettier 1.12.0):\ngql`\n  \"\\`foo\\` mutation payload.\"\n  type FooPayload {\n    bar: String\n  }\n`;\n```\n\n#### Don't mix up expressions when using `prettier-ignore` inside template literal ([#4220](https://github.com/prettier/prettier/pull/4220) by [@evilebottnawi](https://github.com/evilebottnawi))\n\nA bug in Prettier 1.11.1 caused expressions nested in template literals to get moved around when using `prettier-ignore` comments within the literal, under certain conditions:\n\n<!-- prettier-ignore -->\n```js\n// Input:\nstyled.div`\n  color: ${props => props.theme.colors.paragraph};\n  /* prettier-ignore */\n  ${props => props.small ? 'font-size: 0.8em;' : ''};\n`\n\n// Formatted (Prettier 1.11.1):\nstyled.div`\n  color: ${props => (props.small ? \"font-size: 0.8em;\" : \"\")};\n  /* prettier-ignore */\n  ${props => props.theme.colors.paragraph};\n`;\n```\n\nNote that the two functions receiving `props` have switched places.\n\nThis bug has been fixed in prettier 1.12.0:\n\n<!-- prettier-ignore -->\n```js\n// Formatted (Prettier 1.12.0):\nstyled.div`\n  color: ${props => props.theme.colors.paragraph};\n  /* prettier-ignore */\n  ${props => (props.small ? \"font-size: 0.8em;\" : \"\")};\n`;\n```\n\n#### Prevent \"over-indenting\" class properties values ([#4085](https://github.com/prettier/prettier/pull/4085) by [@duailibe](https://github.com/duailibe))\n\nIn Prettier 1.11.1, there was an issue where the indentation level for binary expressions (things like `2 + 2`, `4 * 4`, etc) would increase with each line break under certain conditions. This has been fixed in Prettier 1.12.0:\n\n<!-- prettier-ignore -->\n```js\n// Input:\nclass EnterpriseQualityClass {\n\tfoobar = \n    // we get foo and multiply by 3\n    this.foo * 3 +\n    // then add bar and multiply by 90 time foo plus 2\n    (this.bar * 90) * (this.foo + 2)  \t\n}\n\n// Formatted (Prettier 1.11.1):\nclass EnterpriseQualityClass {\n  foobar =\n    // we get foo and multiply by 3\n    this.foo * 3 +\n      // then add bar and multiply by 90 time foo plus 2\n      this.bar * 90 * (this.foo + 2);\n}\n\n// Formatted (Prettier 1.12.0):\nclass EnterpriseQualityClass {\n  foobar =\n    // we get foo and multiply by 3\n    this.foo * 3 +\n    // then add bar and multiply by 90 time foo plus 2\n    this.bar * 90 * (this.foo + 2);\n}\n```\n\n#### Improve switch formatting ([#4165](https://github.com/prettier/prettier/pull/4165) by [@evilebottnawi](https://github.com/evilebottnawi))\n\nWhen the discriminant of a switch statement was very long, we were not printing it very pretty. The formatting has been improved in Prettier 1.12.0:\n\n<!-- prettier-ignore -->\n```js\n// Input:\nswitch (longLongLongLongLongLongLongVariable &&\n    longLongLongLongLongLongLongVariable) {\n  case (1): {\n    console.log(\"hi\");\n  }\n}\n\n// Formatted (Prettier 1.11.1):\nswitch (longLongLongLongLongLongLongVariable &&\n  longLongLongLongLongLongLongVariable) {\n  case 1: {\n    console.log(\"hi\");\n  }\n}\n\n// Formatted (Prettier 1.12.0):\nswitch (\n  longLongLongLongLongLongLongVariable && longLongLongLongLongLongLongVariable\n) {\n  case 1: {\n    console.log(\"hi\");\n  }\n}\n```\n\n### TypeScript\n\n#### Never print a semicolon after `export default interface Foo {}` ([#4128](https://github.com/prettier/prettier/pull/4128) by [@j-f1](https://github.com/j-f1))\n\nIn Prettier 1.11.1, semicolons were mistakenly printed after default-exported interfaces. This has been resolved in Prettier 1.12.0:\n\n<!-- prettier-ignore -->\n```ts\n// Input:\nexport default interface Foo {\n  readonly bar?: string;\n}\n\n// Formatted (Prettier 1.11.1):\nexport default interface Foo {\n  readonly bar?: string;\n};\n\n// Formatted (Prettier 1.12.0):\nexport default interface Foo {\n  readonly bar?: string;\n}\n```\n\n#### Require parenthesis around \"TSAsExpression\" inside an \"UpdateExpression\" ([#4183](https://github.com/prettier/prettier/pull/4183) by [@UselessPickles](https://github.com/UselessPickles))\n\nPrettier 1.11.1 was mistakenly removing parens around typecast update expressions, which caused a syntax error. This issue has been fixed in Prettier 1.12.0:\n\n<!-- prettier-ignore -->\n```ts\n// Input:\n(obj.value as any)++\n\n// Formatted (Prettier 1.11.1):\nobj.value as any++;\n\n// Formatted (Prettier 1.12.0):\n(obj.value as any)++;\n```\n\n### Markdown\n\n#### Remove unnecessary empty line in front matter ([#4280](https://github.com/prettier/prettier/pull/4280) by [@ikatyang](https://github.com/ikatyang))\n\nPrettier 1.11.1 was printing an unnecessary empty line when formatting a markdown document containing empty yaml/toml front-matter; this line is no longer printed:\n\n##### Input:\n\n<!-- prettier-ignore -->\n```md\n---\n---\n\nHello\n```\n\n##### Formatted (Prettier 1.11.1):\n\n<!-- prettier-ignore -->\n```md\n---\n\n---\n\nHello\n```\n\n##### Formatted (Prettier 1.12.0):\n\n<!-- prettier-ignore -->\n```md\n---\n---\n\nHello\n```\n\n#### Support fenced codeblock lang followed by attributes ([#4153](https://github.com/prettier/prettier/pull/4153) by [@ikatyang](https://github.com/ikatyang))\n\nSome markdown documents use attributes listed after the language for special purposes; for example, they are used by [markdown-preview-enhanced](https://shd101wyy.github.io/markdown-preview-enhanced/#/code-chunk) to modify display options and specify code execution parameters.\n\nCode block language attributes look like this:\n\n<!-- prettier-ignore -->\n``````md\n```js {cmd=node .line-numbers}\nconsole.log(\"hello world\");\n```\n``````\n\nPrettier was not formatting the contents of these markdown blocks before, because it could no longer detect the language of a code block when attributes were present. Now, prettier correctly detects the language.\n\n#### Correct nested html indentation ([#4115](https://github.com/prettier/prettier/pull/4115) by [@ikatyang](https://github.com/ikatyang))\n\nIn Prettier 1.11.1, HTML nested underneath a list item was not formatted correctly; the indentation level changed each time you re-formatted the code. This is now fixed.\n\n<!-- prettier-ignore -->\n```md\n<!-- Input: -->\n1.  A list item\n\n    <table class=\"table table-striped\">\n    <tr>\n    <th>Test</th>\n    <th>Table</th>\n    </tr>\n    <tbody>\n        <tr>\n        <td>Test</td>\n        <td>Data</td>\n        </tr>\n    </tbody>\n    </table>\n\n<!-- Output (Prettier 1.11.1): -->\n1.  A list item\n\n    <table class=\"table table-striped\">\n<tr>\n<th>Test</th>\n<th>Table</th>\n</tr>\n<tbody>\n    <tr>\n    <td>Test</td>\n    <td>Data</td>\n    </tr>\n</tbody>\n</table>\n\n<!-- Output (Prettier 1.12.0): -->\n1.  A list item\n\n    <table class=\"table table-striped\">\n    <tr>\n    <th>Test</th>\n    <th>Table</th>\n    </tr>\n    <tbody>\n        <tr>\n        <td>Test</td>\n        <td>Data</td>\n        </tr>\n    </tbody>\n    </table>\n```\n\n#### Print literalline for newline instead of hardline ([#4083](https://github.com/prettier/prettier/pull/4083) by [@ikatyang](https://github.com/ikatyang))\n\nIn Prettier 1.11.1, when embedding CSS or JSX in markdown, there was an issue that caused the indentation level of block comments to be set incorrectly in some situations. This issue has been fixed in Prettier 1.12.0:\n\n<!-- prettier-ignore -->\n``````md\n<!-- Input: -->\n```pcss\n.Avatar {\n    @container (width > 100px) {\n      /*\n      Change some styles on the image element when the container is\n      wider than 100px\n      */\n    }\n}\n```\n\n<!-- Formatted (Prettier 1.11.1): -->\n```pcss\n.Avatar {\n  @container (width > 100px) {\n    /*\n          Change some styles on the image element when the container is\n          wider than 100px\n          */\n  }\n}\n```\n\n<!-- Formatted (Prettier 1.12.0): -->\n```pcss\n.Avatar {\n  @container (width > 100px) {\n    /*\n      Change some styles on the image element when the container is\n      wider than 100px\n      */\n  }\n}\n```\n``````\n\n### CSS/SCSS/Less\n\n#### Don't lowercase the variable name of custom selectors #4254 ([#4255](https://github.com/prettier/prettier/pull/4255) by [@Coobaha](https://github.com/Coobaha))\n\nPrettier 1.11.1 was mistakenly changing the variable name of custom selectors to be lower-case. This issue has been fixed in Prettier 1.12.0:\n\n<!-- prettier-ignore -->\n```scss\n/* Input: */\n@custom-selector :--camelCase .my-css-selector;\n\n:--camelCase {\n color: red;\n}\n\n/* Formatted (Prettier 1.11.1): */\n@custom-selector :--camelCase .my-css-selector;\n\n:--camelcase {\n  color: red;\n}\n\n/* Formatted (Prettier 1.12.0): */\n@custom-selector :--camelCase .my-css-selector;\n\n:--camelCase {\n  color: red;\n}\n```\n\n#### Don't break value property with inlined URL ([#4236](https://github.com/prettier/prettier/pull/4236) by [@evilebottnawi](https://github.com/evilebottnawi))\n\nIn Prettier 1.11.1, there was an issue where Prettier would print `url()`s incorrectly when they appeared in shorthand properties. This has been fixed in Prettier 1.12.0.\n\n<!-- prettier-ignore -->\n```css\n/* Input: */\n.search-icon {\n  background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMTMuNzQzIDEyLjU3NEw5LjkxIDguNzRhNS40MjUgNS40MjUgMCAwIDAgMS4wNS0zLjIzMkE1LjUzMiA1LjUzMiAwIDAgMCA1LjQ2IDAgNS40MzYgNS40MzYgMCAwIDAgMCA1LjQ2OGE1LjUzMiA1LjUzMiAwIDAgMCA1LjUgNS41MDggNS40MDggNS40MDggMCAwIDAgMy4yNDItMS4wNjFsLjAwNC0uMDAzIDMuODMgMy44MzFhLjgyNi44MjYgMCAxIDAgMS4xNjctMS4xNjl6TTUuNDk2IDkuODc4YTQuNDI2IDQuNDI2IDAgMCAxLTQuNC00LjQwNiA0LjM1IDQuMzUgMCAwIDEgNC4zNjgtNC4zNzQgNC40MjUgNC40MjUgMCAwIDEgNC40IDQuNDA2IDQuMzUgNC4zNSAwIDAgMS00LjM2OCA0LjM3NHoiCiAgICAgICAgZmlsbD0iIzhFOEU5MyIgZmlsbC1ydWxlPSJldmVub2RkIiAvPgo8L3N2Zz4K) center center no-repeat;\n}\n\n/* Formatted (Prettier 1.11.1): */\n.search-icon {\n  background: url(\n      data:image/svg+xml;base64,\n      PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMTMuNzQzIDEyLjU3NEw5LjkxIDguNzRhNS40MjUgNS40MjUgMCAwIDAgMS4wNS0zLjIzMkE1LjUzMiA1LjUzMiAwIDAgMCA1LjQ2IDAgNS40MzYgNS40MzYgMCAwIDAgMCA1LjQ2OGE1LjUzMiA1LjUzMiAwIDAgMCA1LjUgNS41MDggNS40MDggNS40MDggMCAwIDAgMy4yNDItMS4wNjFsLjAwNC0uMDAzIDMuODMgMy44MzFhLjgyNi44MjYgMCAxIDAgMS4xNjctMS4xNjl6TTUuNDk2IDkuODc4YTQuNDI2IDQuNDI2IDAgMCAxLTQuNC00LjQwNiA0LjM1IDQuMzUgMCAwIDEgNC4zNjgtNC4zNzQgNC40MjUgNC40MjUgMCAwIDEgNC40IDQuNDA2IDQuMzUgNC4zNSAwIDAgMS00LjM2OCA0LjM3NHoiCiAgICAgICAgZmlsbD0iIzhFOEU5MyIgZmlsbC1ydWxlPSJldmVub2RkIiAvPgo8L3N2Zz4K\n    )\n    center center no-repeat;\n}\n\n/* Formatted (Prettier 1.12.0): */\n.search-icon {\n  background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMTMuNzQzIDEyLjU3NEw5LjkxIDguNzRhNS40MjUgNS40MjUgMCAwIDAgMS4wNS0zLjIzMkE1LjUzMiA1LjUzMiAwIDAgMCA1LjQ2IDAgNS40MzYgNS40MzYgMCAwIDAgMCA1LjQ2OGE1LjUzMiA1LjUzMiAwIDAgMCA1LjUgNS41MDggNS40MDggNS40MDggMCAwIDAgMy4yNDItMS4wNjFsLjAwNC0uMDAzIDMuODMgMy44MzFhLjgyNi44MjYgMCAxIDAgMS4xNjctMS4xNjl6TTUuNDk2IDkuODc4YTQuNDI2IDQuNDI2IDAgMCAxLTQuNC00LjQwNiA0LjM1IDQuMzUgMCAwIDEgNC4zNjgtNC4zNzQgNC40MjUgNC40MjUgMCAwIDEgNC40IDQuNDA2IDQuMzUgNC4zNSAwIDAgMS00LjM2OCA0LjM3NHoiCiAgICAgICAgZmlsbD0iIzhFOEU5MyIgZmlsbC1ydWxlPSJldmVub2RkIiAvPgo8L3N2Zz4K)\n    center center no-repeat;\n}\n\n```\n\n#### Fix inline comments in lists and maps ([#4205](https://github.com/prettier/prettier/pull/4205) by [@evilebottnawi](https://github.com/evilebottnawi))\n\nPrettier 1.11.0 was breaking code when inline comments appeared within SCSS lists or maps. This has been fixed in Prettier 1.12.0. Note: This formatting style is still not ideal, but this fixes the code breaking.\n\n<!-- prettier-ignore -->\n```scss\n// Input:\n$my-list:\n  'foo', // Foo\n  'bar'; // Bar\n\n$my-map: (\n  'foo': 1, // Foo\n  'bar': 2, // Bar\n);\n\n// Formatted (Prettier 1.11.1):\n$my-list: \"foo\", / / Foo \"bar\"; // Bar\n\n$my-map: (\n  \"foo\": 1,\n  / / Foo \"bar\": 2,\n  / / Bar\n);\n\n// Formatted (Prettier 1.12.0):\n$my-list: \"foo\",\n  // Foo\n    \"bar\"; // Bar\n\n$my-map: (\n  \"foo\": 1,\n  // Foo\n    \"bar\": 2,\n  // Bar\n);\n```\n\n#### Don't lowercase exported variable in css modules ([#4152](https://github.com/prettier/prettier/pull/4152) by [@evilebottnawi](https://github.com/evilebottnawi))\n\nPrettier 1.11.1 was incorrectly lower-casing names of CSS variables exported from CSS modules. This would cause issues when attempting to import the variable from the module on the JavaScript side.\n\n<!-- prettier-ignore -->\n```scss\n/* Input: */\n:export {\n  myColor: red;\n}\n\n/* Formatted (Prettier 1.11.1): */\n:export {\n  mycolor: red;\n}\n```\n\nThis has been fixed in Prettier 1.12.0:\n\n<!-- prettier-ignore -->\n```scss\n/* Formatted (Prettier 1.12.0): */\n:export {\n  myColor: red;\n}\n```\n\n#### Handle `unicode-range` ([#4117](https://github.com/prettier/prettier/pull/4117) by [@evilebottnawi](https://github.com/evilebottnawi))\n\nPrettier 1.11.1 was printing `unicode-range` rules incorrectly. This has been fixed in Prettier 1.12.0.\n\n<!-- prettier-ignore -->\n```css\n/* Input: */\n@font-face {\n  unicode-range: U+00-FF;\n}\n\n/* Formatted (Prettier 1.11.1): */\n@font-face {\n  unicode-range: U + 00-FF;\n}\n\n/* Formatted (Prettier 1.12.0): */\n@font-face {\n  unicode-range: U+00-FF;\n}\n```\n\n### HTML/Handlebars/Vue\n\n#### Support comment at the top of an HTML document ([#4141](https://github.com/prettier/prettier/pull/4141) by [@evilebottnawi](https://github.com/evilebottnawi))\n\nPrettier's team is continuing to work on our not-yet-production-ready HTML formatter. This release includes a fix where a comment at the top of a document (like an `htmlhint` comment) caused the document to not be formatted properly. This issue has been fixed.\n\n#### Fix Handlebars `else if` ([#4256](https://github.com/prettier/prettier/pull/4256) by [@n8n8baby](https://github.com/n8n8baby))\n\nOur handlebars formatter is also not yet ready for public consumption, but a fix was added during this release cycle so that `else if` blocks are printed correctly. Prettier 1.11.1 mistakenly converted them into `if`s.\n\n#### Fix self-closing style tags in vue ([#4108](https://github.com/prettier/prettier/pull/4108) by [@duailibe](https://github.com/duailibe))\n\nPrettier 1.11.1 did not handle self-closing style or script tags correctly in vue files; it would print things in an unexpected way. This has been fixed in Prettier 1.12.0.\n\n<!-- prettier-ignore -->\n```vue\n<!-- Input: -->\n<template>\n  <span :class=\"$style.root\"><slot /></span>\n</template>\n\n<style src=\"./style.css\" module />\n\n<!-- Formatted (Prettier 1.11.1): -->\n<template>\n  <span :class=\"$style.root\"><slot /></span>\n</template>\n\n<style src=\"./style.css\" module />\n<template><span : class= \"$style.root\" ><slot / ></span> </template> <style src=\n  \"./style.css\" module / >;\n<template>\n  <span :class=\"$style.root\"><slot /></span>\n</template>\n\n<style src=\"./style.css\" module />\n\n<!-- Formatted (Prettier 1.12.0): -->\n<template>\n  <span :class=\"$style.root\"><slot /></span>\n</template>\n\n<style src=\"./style.css\" module />\n```\n\n### Misc\n\n#### Playground: Add support for rangeStart and rangeEnd ([#4216](https://github.com/prettier/prettier/pull/4216) by [@JamesHenry](https://github.com/JamesHenry))\n\n`--range-start` and `--range-end` can now be specified in the playground thanks to work by [@JamesHenry](https://github.com/JamesHenry). This will help the prettier community, because it streamlines the bug reporting process for bugs related to formatting a selection in the editor.\n\n#### Fix printing ignored files with --debug-check ([#4066](https://github.com/prettier/prettier/pull/4066) by [@duailibe](https://github.com/duailibe))\n\nPrettier 1.11.1 was mistakenly outputting the contents of ignored files when the [`--debug-check`](https://prettier.io/docs/en/cli.html#debug-check) flag was used. In Prettier 1.12.0, the contents of ignored files are no longer written to stdout.\n\n---\n\nTo Prettier's amazing community of users, contributors, and maintainers, thank you! This is something that we can only build together ❤️"
    },
    {
      "id": "/2018/04/09/plugin-php-0.1",
      "metadata": {
        "permalink": "/blog/2018/04/09/plugin-php-0.1",
        "source": "@site/blog/2018-04-09-plugin-php-0.1.md",
        "title": "Prettier for PHP 0.1: First alpha release 🎉",
        "description": "After more than 200 merged pull requests since mid December 2017, we're happy to announce the first alpha release of Prettier for PHP. In this blog post, we'd like to give a short overview of how the plugin works, its philosophy, and what to expect in the future.",
        "date": "2018-04-09T00:00:00.000Z",
        "formattedDate": "April 9, 2018",
        "tags": [],
        "readingTime": 2.45,
        "truncated": true,
        "authors": [
          {
            "name": "Christian Zosel (@chrzosel)",
            "url": "https://twitter.com/chrzosel"
          }
        ],
        "frontMatter": {
          "author": "Christian Zosel (@chrzosel)",
          "authorURL": "https://twitter.com/chrzosel",
          "title": "Prettier for PHP 0.1: First alpha release 🎉"
        },
        "prevItem": {
          "title": "Prettier 1.12: Fixes, Features, and Formatting, Oh My!",
          "permalink": "/blog/2018/04/11/1.12.0"
        },
        "nextItem": {
          "title": "Prettier 1.11: CSS fixes and new TypeScript feature support",
          "permalink": "/blog/2018/02/26/1.11.0"
        }
      },
      "content": "After more than 200 merged pull requests since mid December 2017, we're happy to announce the first alpha release of [Prettier for PHP](https://github.com/prettier/plugin-php). In this blog post, we'd like to give a short overview of how the plugin works, its philosophy, and what to expect in the future.\n\n<!--truncate-->\n\n## How does it work?\n\nAdding support for a new language to Prettier requires two things:\n\n- A parser, which turns your source code into an abstract syntax tree (AST). Since Prettier is written in JavaScript, we're using [php-parser](https://github.com/glayzzle/php-parser), which is a PHP parser written in JS.\n\n- A printer, that turns the AST into a special format called `doc` that Prettier requires to do its magic. It is basically your source code plus some information about where linebreaks can be added, how it should be indented, and so on.\n\nWhile we could benefit from existing work on the parsing side, the printer had to be developed from scratch to support all of PHP's various AST node types. Our first alpha release today means that we are confident that the printer can re-print your code without breaking it.\n\nIf you'd like to read more about the plugin API, see [the docs](https://prettier.io/docs/en/plugins.html).\n\n## Philosophy\n\nWhen building a code formatter, it can be tempting to add many options to account for all the different code styles there are. The PHP plugin sticks to Prettier's opinionated philosophy and doesn't add any new options. Instead, we identified [PSR-1, PSR-2 and PSR-12](https://www.php-fig.org/psr/) as one of the most popular coding styles in the PHP community, and decided to use this as our guide when it came to formatting our re-printed PHP code.\n\nFrom the experience gained with Prettier for JavaScript, we believe that offering as few configuration options as possible is one of Prettier's biggest strengths. After our first stable release, we will consider adding a very limited set of options for the most controversial styling decisions (e.g. [brace style](https://github.com/prettier/plugin-php/issues/107)), but remain conservative about it.\n\n## What's next\n\nFor our first stable release, the following milestones still have to be reached:\n\n1.  100% safety that we're not breaking code during formatting.\n\n    We're quite close to this goal already today.\n\n2.  Pretty output\n\n    The plugin doesn't deserve its name if the output isn't pretty. While it is already quite good today, handling all the edge cases will require some more work.\n\n3.  Integrations\n\n    Today, you can try the plugin from the command line by following the [instructions in the README](https://github.com/prettier/plugin-php#install). Plugin support in your favorite editor might not work yet, though (see the related issues for [VS Code](https://github.com/prettier/prettier-vscode/issues/395), [Atom](https://github.com/prettier/prettier-atom/issues/395) and [Vim](https://github.com/prettier/vim-prettier/issues/119)). Also, the PHP plugin is not integrated in Prettier's [playground](https://prettier.io/playground/) yet.\n\nAre you excited about Prettier for PHP? Then we'd love you to help us reach our first stable release by\n\n- Trying it on your code base\n- [Reporting any issues](https://github.com/prettier/plugin-php/issues) you find with it\n- Contributing ([how to get started](https://github.com/prettier/plugin-php/blob/master/CONTRIBUTING.md))\n- Spreading the word 😉"
    },
    {
      "id": "/2018/02/26/1.11.0",
      "metadata": {
        "permalink": "/blog/2018/02/26/1.11.0",
        "source": "@site/blog/2018-02-26-1.11.0.md",
        "title": "Prettier 1.11: CSS fixes and new TypeScript feature support",
        "description": "This release features a ton of CSS formatting fixes as well as support for some new TypeScript features, in addition to some general bugfixes for other languages.",
        "date": "2018-02-26T00:00:00.000Z",
        "formattedDate": "February 26, 2018",
        "tags": [],
        "readingTime": 18.855,
        "truncated": true,
        "authors": [
          {
            "name": "Suchipi (@suchipi)",
            "url": "https://github.com/suchipi"
          }
        ],
        "frontMatter": {
          "author": "Suchipi (@suchipi)",
          "authorURL": "https://github.com/suchipi",
          "title": "Prettier 1.11: CSS fixes and new TypeScript feature support"
        },
        "prevItem": {
          "title": "Prettier for PHP 0.1: First alpha release 🎉",
          "permalink": "/blog/2018/04/09/plugin-php-0.1"
        },
        "nextItem": {
          "title": "Prettier 1.10: One Year of Prettier 🎂",
          "permalink": "/blog/2018/01/10/1.10.0"
        }
      },
      "content": "This release features a ton of CSS formatting fixes as well as support for some new TypeScript features, in addition to some general bugfixes for other languages.\n\nSince the last release, the [Prettier website](https://prettier.io) has gotten an all-new design thanks to [@orta](https://github.com/orta)!\n\n### Facebook is 💯% Prettier\n\nAnother exciting announcement is that all the JavaScript files in the Facebook codebase have now been converted to Prettier! What's mind-blowing is that there hasn't been a concerted push to convert the codebase to Prettier, we just added the tooling in place and documentation on how to migrate a folder to Prettier and people just started converting their piece of the codebase.\n\nIn 8 months, 75% of the codebase was organically converted and last week we did a final push to convert the rest and enforce that every file from now on is using Prettier! It shows that Prettier is robust to support all the crazy edge cases you can imagine and also that it provides a lot of value given the crazy adoption rate.\n\n<!--truncate-->\n\n## Highlights\n\n### CSS/SCSS/Less\n\nOur CSS formatting got a lot of love from [@evilebottnawi] during this release!\n\n#### Format at-rules ([#3828] by [@evilebottnawi])\n\nPreviously, some at-rules (like `@if` and `@include`) were not formatted by Prettier and were instead printed as-is. They are now formatted:\n\n<!-- prettier-ignore -->\n```scss\n// Before:\n.selector {\n  @include absolute($top: $long-variable-name, $right: $long-variable-name, $left: auto, $bottom: auto);\n}\n\n// After:\n.selector {\n  @include absolute(\n    $top: $long-variable-name,\n    $right: $long-variable-name,\n    $left: auto,\n    $bottom: auto\n  );\n}\n```\n\n#### Support popular PostCSS plugins ([#3959] by [@evilebottnawi])\n\nSome popular PostCSS plugins like [postcss-mixins](https://github.com/postcss/postcss-mixins) were not working due to how Prettier was formatting CSS. These plugins are now respected:\n\n<!-- prettier-ignore -->\n```scss\n// Before\n$theme: blue;\n\na {\n  @mixin $(theme) -colors;\n}\n\n// After\n$theme: blue;\n\na {\n  @mixin $(theme)-colors;\n}\n```\n\n#### Support YAML front-matter block in SCSS ([#3802] by [@evilebottnawi])\n\nJekyll relies on YAML front-matter to detect SCSS files, but Prettier was removing it, which would break Jekyll sites when deployed. The YAML front-matter is now preserved, which preserves styling:\n\n<!-- prettier-ignore -->\n```scss\n---\ntitle: Title\ndescription: Description\n---\n\na {\n  color: red;\n}\n```\n\n### TypeScript\n\n#### Support definite assignment (`!:`) ([#4020] by [@ikatyang])\n\nTypeScript 2.7 added a new feature called definite assignment that can be used in class property initializers. It informs TypeScript that even though a class property does not have an initializer, we can be sure that at runtime it will have a value, rather than `undefined`:\n\n<!-- prettier-ignore -->\n```ts\nclass MyComponent {\n  ngModel!: ng.INgModelController;\n}\n```\n\nPrettier 1.10.2 couldn't parse this syntax:\n\n<!-- prettier-ignore -->\n```ts\nSyntaxError: '=' expected. (2:10)\n  1 | class MyComponent {\n> 2 |   ngModel!: ng.INgModelController;\n    |          ^\n  3 | }\n```\n\nBut it is now supported in Prettier 1.11.0.\n\n#### Support `unique symbol` ([#3967] by [@ikatyang])\n\nTypeScript 2.7 also added a new `unique symbol` type:\n\n<!-- prettier-ignore -->\n```ts\ninterface SymbolConstructor {\n  readonly iterator: unique symbol;\n}\n```\n\nPrettier 1.10.2 couldn't parse this syntax:\n\n<!-- prettier-ignore -->\n```ts\nSyntaxError: ';' expected. (2:29)\n  1 | interface SymbolConstructor {\n> 2 |   readonly iterator: unique symbol;\n    |                             ^\n  3 | }\n  4 |\n```\n\nBut it is now supported in Prettier 1.11.0.\n\n#### Support condition types ([#4006] by [@Cryrivers])\n\nTypeScript 2.8 will add support for conditional types, which look like ternaries but appear in a type position:\n\n<!-- prettier-ignore -->\n```ts\nexport type DeepReadonly<T> =\n    T extends any[] ? DeepReadonlyArray<T[number]> :\n    T extends object ? DeepReadonlyObject<T> :\n    T;\n```\n\nPrettier 1.10.2 couldn't parse these:\n\n<!-- prettier-ignore -->\n```ts\nSyntaxError: ';' expected. (2:7)\n  1 | export type DeepReadonly<T> =\n> 2 |     T extends any[] ? DeepReadonlyArray<T[number]> :\n    |       ^\n  3 |     T extends object ? DeepReadonlyObject<T> :\n  4 |     T;\n```\n\nBut this syntax is supported in Prettier 1.11.0.\n\n### JavaScript\n\n#### Ternaries were indented incorrectly with `--use-tabs` ([#3745] by [@ikatyang])\n\nBecause tabs can be represented as different widths, Prettier was sometimes indenting ternaries incorrectly when using tabs. Now we calculate the indentation properly:\n\n<!-- prettier-ignore -->\n```js\n// Before:\nconst abc = props.something\n\t? xyz\n\t: {\n\t\t\tprop1: a,\n\t\t\tprop2: b,\n\t\t\tprop3: false,\n\t\t};\n\n// After:\nconst abc = props.something\n\t? xyz\n\t: {\n\t\t\tprop1: a,\n\t\t\tprop2: b,\n\t\t\tprop3: false\n\t  };\n```\n\n## Other Changes\n\n### CSS/SCSS/Less\n\n#### Lists of lists now have cleaner formatting ([#3930] by [@evilebottnawi])\n\nWe weren't handling lists of lists very well in SCSS. Now we handle them better.\n\n<!-- prettier-ignore -->\n```scss\n// Before:\n$space-scale: (0, \"0\") (0.25, \"0-25\") (0.5, \"0-5\") (0.75, \"0-75\") (1, \"1\")\n  (\n    1.25,\n    \"1-25\"\n  ) (1.5, \"1-5\") (1.75, \"1-75\") (2, \"2\") (2.25, \"2-25\") (2.5, \"2-5\")\n  (\n    2.75,\n    \"2-75\"\n  ) (3, \"3\") (3.25, \"3-25\") (3.5, \"3-5\") (3.75, \"3-75\") (4, \"4\");\n\n// After:\n$space-scale: (0, \"0\") (0.25, \"0-25\") (0.5, \"0-5\") (0.75, \"0-75\") (1, \"1\")\n  (1.25, \"1-25\") (1.5, \"1-5\") (1.75, \"1-75\") (2, \"2\") (2.25, \"2-25\")\n  (2.5, \"2-5\") (2.75, \"2-75\") (3, \"3\") (3.25, \"3-25\") (3.5, \"3-5\")\n  (3.75, \"3-75\") (4, \"4\");\n```\n\n#### Preserve comment in font-face declaration ([#3906] by [@evilebottnawi])\n\nPreviously, if you had code like this:\n\n<!-- prettier-ignore -->\n```css\n@font-face {\n  font-family: \"Prettier\";\n  src: local(\"Prettier\"), /* Local */\n    url(\"http://prettier.com/font.woff\") /* Network*/\n}\n```\n\nThen the \"Local\" comment was removed by Prettier:\n\n<!-- prettier-ignore -->\n```css\n@font-face {\n  font-family: \"Prettier\";\n  src: local(\"Prettier\"), url(\"http://prettier.com/font.woff\"); /* Network*/\n}\n```\n\nIt is now preserved:\n\n<!-- prettier-ignore -->\n```css\n@font-face {\n  font-family: \"Prettier\";\n  src: local(\"Prettier\"), /* Local */ url(\"http://prettier.com/font.woff\"); /* Network*/\n}\n```\n\n#### CSS indentation no longer indents with 3 spaces when line starts with a paren ([#3930] by [@evilebottnawi])\n\nIf a line of CSS was to be indented and the first character in that line was a paren, the CSS was mistakenly indented with 3 spaces instead of the expected 2. Now it's indented with 2 spaces.\n\n<!-- prettier-ignore -->\n```scss\n// Before:\n$longVariable: (\n   (mobile $mobile) (tablet $tablet) (desktop $desktop) (wide $wide)\n);\n\n// After:\n$longVariable: (\n  (mobile $mobile) (tablet $tablet) (desktop $desktop) (wide $wide)\n);\n```\n\n#### Extra space is no longer added inside maps ([#3814] by [@evilebottnawi])\n\nPrettier was mistakenly adding spaces inside SCSS maps. They are no longer printed.\n\n<!-- prettier-ignore -->\n```scss\n// Before:\n$map: map-merge($map,  ($key: $value));\n\n// After:\n$map: map-merge($map, ($key: $value));\n```\n\n#### SCSS comments in selector lists no longer break formatting ([#3909] by [@evilebottnawi])\n\nPrettier was formatting trailing SCSS comments in CSS selector lists incorrectly, breaking code:\n\n<!-- prettier-ignore -->\n```scss\n// Before formatting:\n.field {\n  &[data-field-id=\"1\"], // Name\n  &[data-field-id=\"2\"], // Email\n  &[data-field-id=\"3\"], // Postal Code\n  {\n    background: green;\n  }\n}\n\n// After formatting (Prettier 1.10.2):\n.field {\n  &[data-field-id=\"1\"],\n  // Name &[data-field-id=\"2\"],\n  // Email &[data-field-id=\"3\"] {\n    background: green;\n  }\n}\n```\n\nPrettier now handles these comments correctly:\n\n<!-- prettier-ignore -->\n```scss\n// After formatting (Prettier 1.11.0):\n.field {\n  &[data-field-id=\"1\"], // Name\n  &[data-field-id=\"2\"], // Email\n  &[data-field-id=\"3\"], // Postal Code\n {\n    background: green;\n  }\n}\n```\n\n#### Comma no longer added after `@import` url ([#3770] by [@evilebottnawi])\n\nPrettier was mistakenly adding a comma after `@import` urls. This is no longer added:\n\n<!-- prettier-ignore -->\n```css\n/* Before */\n@import url(\"responsive/gt768.css\"), screen and (min-width: 768px);\n\n/* After */\n@import url(\"responsive/gt768.css\") screen and (min-width: 768px);\n```\n\n#### Handle `!default` directive properly ([#3724] by [@evilebottnawi])\n\nPrettier was printing the `!default` directive in an odd way:\n\n<!-- prettier-ignore -->\n```css\n$theme-checkbox-colors: (\n    default: $theme-color-border,\n    checked: $theme-color-checked,\n    disabled: $theme-color-disabled,\n    disabled-font: $theme-color-font-secondary\n  )\n  !default;\n```\n\nIt's now handled properly:\n\n<!-- prettier-ignore -->\n```css\n$theme-checkbox-colors: (\n  default: $theme-color-border,\n  checked: $theme-color-checked,\n  disabled: $theme-color-disabled,\n  disabled-font: $theme-color-font-secondary\n) !default;\n```\n\n#### Don't format contents of `@warn` and `@error` directives ([#3769] by [@evilebottnawi])\n\nSCSS has a feature that lets you output some text at build-time using `@warn` or `@error`:\n\n<!-- prettier-ignore -->\n```scss\n// Unformatted code:\n@if ($error) {\n  @error 'An error occurred: (#{$error}).';\n}\n```\n\nUnfortunately, Prettier was treating these directives as media queries, formatting their contents in unexpected ways (in this example, a space is added before the period):\n\n<!-- prettier-ignore -->\n```scss\n// Formatted code (Prettier 1.10.2):\n@if ($error) {\n  @error 'error (#{$error}) .';\n}\n```\n\nPrettier now handles these directives correctly, and will not change the contents of the string:\n\n<!-- prettier-ignore -->\n```scss\n// Formatted code (Prettier 1.11.0):\n@if ($error) {\n  @error \"error (#{$error}).\";\n}\n```\n\n#### Don't remove semicolon in Less ruleset declaration ([#3841] by [@evilebottnawi])\n\nPrettier was mistakenly removing semicolons after Less ruleset declarations, which needed to stay, or else compilation errors would occur. They are now preserved:\n\n<!-- prettier-ignore -->\n```less\n// Before:\n@detached-ruleset: {\n  background: red;\n}\n\n// After:\n@detached-ruleset: {\n  background: red;\n};\n```\n\n#### Don't add newline to empty CSS file ([#3723] by [@hudochenkov])\n\nPrettier was previously adding an end-of-file newline to CSS files. We didn't do this for JS files, so we decided to make this behavior consistent in CSS so that it wouldn't introduce surprising source control changes when adding Prettier to a project.\n\n#### Ignore `media` params with SCSS interpolation ([#3801] by [@evilebottnawi])\n\nPrettier was mistakenly breaking code when a media query contained SCSS interpolation. It is now preserved:\n\n<!-- prettier-ignore -->\n```scss\n// Unformatted code:\n$sm-only: '(min-width: 768px) and (max-width: 991px)';\n$lg-and-up: '(min-width: 1200px)';\n\n@media screen and #{$sm-only, $lg-and-up} {\n    color: #000;\n}\n\n// Formatted code (Prettier 1.10.2):\n@media screen and,  {\n\tcolor: #000;\n}\n\n// Formatted code (Prettier 1.11.0):\n$sm-only: \"(min-width: 768px) and (max-width: 991px)\";\n$lg-and-up: \"(min-width: 1200px)\";\n\n@media screen and #{$sm-only, $lg-and-up} {\n  color: #000;\n}\n```\n\n#### Don't print two spaces between selector operator and opening bracket ([#3738] by [@evilebottnawi])\n\nPrettier was mistakenly printing an extra space when a CSS selector ended in an operator (a feature supported by SCSS). This has been fixed:\n\n<!-- prettier-ignore -->\n```scss\n// Unformatted code:\n.this > .ends > .with > .an > .operator > {\n  // content\n}\n\n// Formatted code (Prettier 1.10.2):\n.this > .ends > .with > .an > .operator >  {\n  // content\n}\n\n// Formatted code (Prettier 1.11.0):\n.this > .ends > .with > .an > .operator > {\n  // content\n}\n```\n\n#### Don't change case of SCSS function names ([#3768] by [@evilebottnawi])\n\nPrettier was mistakenly lowercasing SCSS function names in certain cases. This has been fixed.\n\n<!-- prettier-ignore -->\n```scss\n// Unformatted code:\n@include breakpoint (getBp(md)) {\n  &:nth-child(2n + 3) {\n    clear: both;\n  }\n}\n\n// Formatted code (Prettier 1.10.2):\n@include breakpoint (getbp(md)) {\n  &:nth-child(2n + 3) {\n    clear: both;\n  }\n}\n\n// Formatted code (Prettier 1.11.0):\n@include breakpoint(getBp(md)) {\n  &:nth-child(2n + 3) {\n    clear: both;\n  }\n}\n```\n\n#### Keep space around Vue deep selector `>>>` ([#3792] by [@evilebottnawi])\n\nPrettier was mistakenly stripping spaces around Vue's deep selector:\n\n<!-- prettier-ignore -->\n```html\n<!-- Unformatted code: -->\n<style scoped>\n  .box >>> .child-component {\n    font-size: 24px;\n  }\n</style>\n\n<!-- Formatted code (Prettier 1.10.2): -->\n<style scoped>\n  .box>>>.child-component {\n    font-size: 24px;\n  }\n</style>\n\n<!-- Formatted code (Prettier 1.11.0): -->\n<style scoped>\n.box >>> .child-component {\n  font-size: 24px;\n}\n</style>\n```\n\n#### Fix `@nest` at-rule ([#3975] by [@evilebottnawi])\n\nPrettier was mistakenly adding spaces around the `&` character in selectors passed to `@nest`, which changed which selector the rule compiled into. This has been fixed:\n\n<!-- prettier-ignore -->\n```scss\n// Unformatted code:\n.title {\n  @nest :global(h1)& {\n    background: red;\n  }\n}\n\n// Formatted code (Prettier 1.10.2):\n.title {\n  @nest :global(h1) & {\n    background: red;\n  }\n}\n\n// Formatted code (Prettier 1.11.0):\n.title {\n  @nest :global(h1)& {\n    background: red;\n  }\n}\n```\n\n#### Format `progid:DXImageTransform.Microsoft.gradient` as-is ([#4028] by [@evilebottnawi])\n\nIn Prettier 1.10.2, we had a lot of logic to handle formatting of Microsoft-browser-specific filter values, but they still weren't formatting very well. Since they are non-standard and infrequently used, we've decided to print them as-is without attempting to format them.\n\n#### Don't lowercase nesting selector ([#4048] by [@evilebottnawi])\n\nIn Prettier 1.10.2, we were incorrectly lower-casing nesting SCSS selectors:\n\n<!-- prettier-ignore -->\n```scss\n// Unformatted code:\n.foo {\n  &-1Bar {\n  }\n}\n\n// Formatted code: (Prettier 1.10.2):\n.foo {\n  &-1bar {\n  }\n}\n```\n\nThis has been fixed in Prettier 1.11.0:\n\n<!-- prettier-ignore -->\n```scss\n// Formatted code: (Prettier 1.11.0):\n.foo {\n  &-1Bar {\n  }\n}\n\n```\n\n### JavaScript\n\n#### Don't print odd-looking parens around return argument with comment ([#3665] by [@duailibe])\n\nPrettier was printing parens around the argument to a `return` statement in an odd way when the argument contained a comment. These parens are now formatted better.\n\n<!-- prettier-ignore -->\n```js\n// Unformatted code:\nfunc1(function() {\n  return func2\n      //comment\n      .bar();\n});\n\n// Formatted code (Prettier 1.10.2):\nfunc1(function() {\n  return (func2\n      //comment\n      .bar() );\n});\n\n// Formatted code (Prettier 1.11.0):\nfunc1(function() {\n  return (\n    func2\n      //comment\n      .bar()\n  );\n});\n```\n\n#### Respect 0-indent markdown-in-js ([#3676] by [@ikatyang])\n\nPrettier's markdown-in-js formatting (triggered by using a template literal tag named `md` was inserting indentation):\n\n<!-- prettier-ignore -->\n```js\n// Unformatted code\nmd`\nThis is some markdown\n`\n\n// Formatted code (Prettier 1.10.2)\nmd`\n  This is some markdown\n`;\n```\n\nThis was desired and acceptable behavior for many markdown template tag functions, such as `react-markings`, but it broke some other in-house markdown formatters.\n\nPrettier 1.11.0 will now respect the indentation level you set in your markdown, so users of template tag functions like the one provided by `react-markings` can continue to indent their code, and users of other template tag functions which do not support indentation can choose not to.\n\n#### Format AMD define calls like CJS require calls ([#3830] by [@salemhilal])\n\nWhen using AMD modules, one pattern is to use `define` to specify the dependencies of an anonymous module like so:\n\n<!-- prettier-ignore -->\n```js\ndefine([\n  \"jquery\",\n  \"common/global.context\",\n  \"common/log.event\",\n  \"some_project/square\",\n  \"some_project/rectangle\",\n  \"some_project/triangle\",\n  \"some_project/circle\",\n  \"some_project/star\"\n], function($, Context, EventLogger, Square, Rectangle, Triangle, Circle, Star) {\n  console.log(\"some code\");\n});\n```\n\nPrettier 1.10.2 was breaking this onto multiple lines, which introduced a lot of top-level indentation:\n\n<!-- prettier-ignore -->\n```js\ndefine(\n  [\n    \"jquery\",\n    \"common/global.context\",\n    \"common/log.event\",\n    \"some_project/square\",\n    \"some_project/rectangle\",\n    \"some_project/triangle\",\n    \"some_project/circle\",\n    \"some_project/star\"\n  ],\n  function($, Context, EventLogger, Square, Rectangle, Triangle, Circle, Star) {\n    console.log(\"some code\");\n  }\n);\n```\n\nPrettier 1.11.0 will now make the array and function expression \"hug\", which decreases the indentation level:\n\n<!-- prettier-ignore -->\n```js\ndefine([\n  \"jquery\",\n  \"common/global.context\",\n  \"common/log.event\",\n  \"some_project/square\",\n  \"some_project/rectangle\",\n  \"some_project/triangle\",\n  \"some_project/circle\",\n  \"some_project/star\"\n], function(\n  $,\n  Context,\n  EventLogger,\n  Square,\n  Rectangle,\n  Triangle,\n  Circle,\n  Star\n) {\n  console.log(\"some code\");\n});\n```\n\n#### Format QUnit's `skip` like `test` ([#3735] by [@tmquinn])\n\nPrettier was special-casing formatting for `describe`, `it`, and `test` to improve formatting in tests based on user expectations and requests. However, we were not formatting QUnit's `skip` method using the same logic, which led to mixed formatting when switching a test between `test` and `skip`:\n\n<!-- prettier-ignore -->\n```js\n// Unformatted code\ntest(\"this is a really long description of some test I want to go here\", function (assert) {\n  assert(\"something\");\n});\n\nskip(\"this is a really long description of some test I want to go here\", function (assert) {\n  assert(\"something\");\n});\n\n// Formatted code (Prettier 1.10.2):\ntest(\"this is a really long description of some test I want to go here\", function(assert) {\n  assert(\"something\");\n});\n\nskip(\n  \"this is a really long description of some test I want to go here\",\n  function(assert) {\n    assert(\"something\");\n  }\n);\n```\n\nWe now treat `skip` the same as `describe`, `it`, and `test`, which makes QUnit tests look more uniform:\n\n<!-- prettier-ignore -->\n```js\n// Formatted code (Prettier 1.11.0):\ntest(\"this is a really long description of some test I want to go here\", function(assert) {\n  assert(\"something\");\n});\n\nskip(\"this is a really long description of some test I want to go here\", function(assert) {\n  assert(\"something\");\n});\n```\n\n#### Break JSX element if a string literal prop has a newline ([#4011] by [@duailibe])\n\nNewline characters are allowed within a JSX string literal according to the JSX spec, but Prettier was not treating a JSX element as multi-line when one of its attribute values was a string containing a newline character. Prettier will now treat these elements as multi-line as expected:\n\n<!-- prettier-ignore -->\n```jsx\n// Unformatted code:\n<path d=\"M4.765 16.829l3.069-2.946 5.813 5.748\n  11.33-11.232 3.006 3.18-14.36 14.080z\"\n/>;\n\n// Formatted code (Prettier 1.10.2):\n<path d=\"M4.765 16.829l3.069-2.946 5.813 5.748\n  11.33-11.232 3.006 3.18-14.36 14.080z\" />;\n\n// Formatted code (Prettier 1.11.0):\n<path\n  d=\"M4.765 16.829l3.069-2.946 5.813 5.748\n  11.33-11.232 3.006 3.18-14.36 14.080z\"\n/>;\n```\n\n#### Support JSX children spread with flow parser ([#3899] by [@vjeux])\n\nUsing a spread operator in a JSX children expression container position caused a parsing error in Prettier 1.10.2 when using the flow parser:\n\n<!-- prettier-ignore -->\n```jsx\n<JSX>\n  {...edges}\n</JSX>\n```\n\n<!-- prettier-ignore -->\n```jsx\nSyntaxError: Unexpected token ... (2:4)\n  1 | <JSX>\n> 2 |   {...edges}\n    |    ^^^\n  3 | </JSX>\n```\n\nIn Prettier 1.11.0, this syntax is supported with the flow parser.\n\n#### Fix error when printing flow maybe object return type ([#3948] by [@azz])\n\nIn Prettier 1.10.2, this code caused an error to be thrown:\n\n<!-- prettier-ignore -->\n```ts\nfunction getScaledData({x}): ?{foo: number} {}\n```\n\nIt has been fixed in Prettier 1.11.0.\n\n#### `--insert-pragma` no longer removes duplicate pragmas ([#3947] by [@azz])\n\nUsing `--insert-pragma` on code with duplicate pragmas was removing all but one of the duplicates. This has been fixed:\n\n<!-- prettier-ignore -->\n```js\n// Unformatted code:\n/**\n * @x 1\n * @x 2\n */\n\n// Formatted code (Prettier 1.10.2):\n/**\n * @format\n * @x 2\n */\n\n// Formatted code (Prettier 1.11.0):\n/**\n * @format\n * @x 1\n * @x 2\n */\n```\n\n#### Wrap flow-typecasted ternaries in parens ([#3940] by [@j-f1])\n\nTo improve code clarity, typecast ternaries will now be wrapped in parens:\n\n<!-- prettier-ignore -->\n```js\n// Unformatted code:\nconst foo = ((1?2:3): number);\n\n// Formatted code (Prettier 1.10.2):\nconst foo = (1 ? 2 : 3: number);\n\n// Formatted code (Prettier 1.11.0):\nconst foo = ((1 ? 2 : 3): number);\n```\n\n#### Fix cases with missing semi when printing DeclareExportDeclaration ([#3979] by [@existentialism])\n\nSemicolons were being mistakenly removed from `declare export default` statements in flow library definition files. This has been fixed.\n\n### TypeScript\n\n#### Don't remove parens from `(void 0)!` ([#3989] by [@azz])\n\nPrettier was mistakenly removing parens from `(void 0)!`, which changed the AST of the program. This has been fixed.\n\n#### Properly chain when there is a TSNonNullExpression ([#4005] by [@ericanderson])\n\nPrettier was not using its chaining formatting style when the chain included a TypeScript `!` non-null expression. This has been fixed:\n\n<!-- prettier-ignore -->\n```ts\n// Unformatted code:\nthis.tokenLoads.get(locator).get(start).push({});\n\nthis.tokenLoads.get(locator)!.get(start).push({});\n\n// Formatted code (Prettier 1.10.2):\nthis.tokenLoads\n  .get(locator)\n  .get(start)\n  .push({});\n\nthis.tokenLoads.get(locator)!.get(start).push({});\n\n// Formatted code (Prettier 1.11.0):\nthis.tokenLoads\n  .get(locator)\n  .get(start)\n  .push({});\n\nthis.tokenLoads\n  .get(locator)!\n  .get(start)\n  .push({});\n```\n\n### Markdown\n\n#### Heading after list item gets merged into list ([#3780] by [@ikatyang])\n\nPrettier was mistakenly merging a heading beneath a list item into the list. Now it is treated as a header:\n\n<!-- prettier-ignore -->\n```md\n<!-- Unformatted code -->\n* Something\n### Some heading\n\n<!-- Formatted code (Prettier 1.10.2) -->\n* Something\n  ### Some heading\n\n<!-- Formatted code (Prettier 1.11.0) -->\n* Something\n\n### Some heading\n```\n\n#### Don't parse HTML entities in link URLs ([#3780] by [@ikatyang])\n\nLinks whose URL contained HTML entities were mistakenly being changed when run through Prettier. They are now preserved.\n\n<!-- prettier-ignore -->\n```md\n<!-- Unformatted code -->\n[Test](http://localhost:8080/test?language=DE&currency=EUR)\n\n<!-- Formatted code (Prettier 1.10.2) -->\n[Test](http://localhost:8080/test?language=DE¤cy=EUR)\n\n<!-- Formatted code (Prettier 1.11.0) -->\n[Test](http://localhost:8080/test?language=DE&currency=EUR)\n```\n\n#### Fix indentation of template strings within code blocks ([#3676] by [@ikatyang])\n\nIndentation of JS tagged template string content within markdown code blocks was being calculated incorrectly:\n\n<!-- prettier-ignore -->\n```md\n<!-- Unformatted code: -->\n- 1\n  - 2\n    - 3\n      ```js\n      something`\n      asd\n\n      asd\n\n      asd\n      `\n      ```\n\n<!-- Formatted code (Prettier 1.10.2): -->\n* 1\n\n  * 2\n\n    * 3\n\n      ```js\n      something`\nasd\n\nasd\n\nasd\n`;\n      ```\n```\n\nIt has been fixed in Prettier 1.11.0:\n\n<!-- prettier-ignore -->\n```md\n<!-- Formatted code (Prettier 1.11.0): -->\n* 1\n\n  * 2\n\n    * 3\n\n      ```js\n      something`\n      asd\n\n      asd\n\n      asd\n      `;\n      ```\n```\n\n#### Print multiline content correctly in footnoteDefinition ([#3787] by [@ikatyang])\n\nPrettier was mistakenly using the incorrect level of indentation when printing a footnote that contained a code block. This has been fixed:\n\n<!-- prettier-ignore -->\n``````md\n<!-- Unformatted code: -->\nSome text.[^fn]\n\n[^fn]: Here is a footnote which includes code.\n\n    ```rs\n    fn main() {\n        println!(\"this is some Rust!\");\n    }\n    ```\n\n<!-- Formatted code (Prettier 1.10.2): -->\nSome text.[^fn]\n\n[^fn]: Here is a footnote which includes code.\n\n```rs\nfn main() {\n    println!(\"this is some Rust!\");\n}\n```\n\n<!-- Formatted code (Prettier 1.11.0): -->\nSome text.[^fn]\n\n[^fn]: Here is a footnote which includes code.\n\n  ```rs\n  fn main() {\n      println!(\"this is some Rust!\");\n  }\n  ```\n``````\n\n#### Respect `tabWidth` for list items ([#3990] by [@ikatyang])\n\nWe've discovered that CommonMark diverges from the original Markdown syntax for code blocks in list items. This leads to scenarios where indented code-blocks in Markdown where being rendered as regular paragraphs. This change uses the `tabWidth` option to determine how much indentation to use in list items. Have a read through [#3459] if you're interested in the details.\n\n<!-- prettier-ignore -->\n```md\n<!-- before -->\n1. Change to your home directory:\n\n   cd\n\n<!-- after -->\n1. Change to your home directory:\n\n        cd\n```\n\nThis change should also improve indentation in text editors:\n\n![](/blog/assets/markdown-list-indent.gif)\n\n### API\n\n#### Support options in plugins ([#3775] by [@ikatyang])\n\nAs part of fleshing out our beta plugin API for community-made language plugins, we have added support for plugins to define their own options!\n\nPlugin options can now be printed in help:\n\n```sh\nprettier --plugin @prettier/plugin-python --help\n```\n\nLikewise, plugin options can be specified on the command-line:\n\n```sh\nprettier --plugin my-cool-prettier-plugin --my-custom-option\n```\n\nAnd plugin options can also be defined in `.prettierrc`:\n\n```json\n{ \"plugins\": [\"foo-plugin\"], \"fooOption\": \"bar\" }\n```\n\n#### Don't allow kebab-cased options in config files ([#3622] by [@ikatyang])\n\nPrettier was mistakenly allowing kebab-case variations of options in `.prettierrc` files:\n\n```json\n{ \"print-width\": 100 }\n```\n\nThis was not intended to be allowed, and has been reverted (in this case, you would need to use `printWidth`).\n\n### Configuration\n\n#### Respect EditorConfig when `--config` is passed ([#3992] by [@josephfrazier])\n\nThis is a minor change to the the way `.editorconfig` files are handled. Previously when `--config` was provided, `.editorconfig` was ignored.\n\n---\n\nThanks to all of Prettier's contributors and the community for making Prettier a successful and productive open-source project! We couldn't do it without everyone ❤️\n\n[@evilebottnawi]: https://github.com/evilebottnawi\n[@ikatyang]: https://github.com/ikatyang\n[@cryrivers]: https://github.com/Cryrivers\n[@hudochenkov]: https://github.com/hudochenkov\n[@tmquinn]: https://github.com/tmquinn\n[@duailibe]: https://github.com/duailibe\n[@vjeux]: https://github.com/vjeux\n[@azz]: https://github.com/azz\n[@j-f1]: https://github.com/j-f1\n[@existentialism]: https://github.com/existentialism\n[@ericanderson]: https://github.com/ericanderson\n[@josephfrazier]: https://github.com/josephfrazier\n[@salemhilal]: https://github.com/salemhilal\n[#3459]: https://github.com/prettier/prettier/issues/3459\n[#3828]: https://github.com/prettier/prettier/pull/3828\n[#3959]: https://github.com/prettier/prettier/pull/3959\n[#3802]: https://github.com/prettier/prettier/pull/3802\n[#4020]: https://github.com/prettier/prettier/pull/4020\n[#3967]: https://github.com/prettier/prettier/pull/3967\n[#4006]: https://github.com/prettier/prettier/pull/4006\n[#3745]: https://github.com/prettier/prettier/pull/3745\n[#3930]: https://github.com/prettier/prettier/pull/3930\n[#3906]: https://github.com/prettier/prettier/pull/3906\n[#3930]: https://github.com/prettier/prettier/pull/3930\n[#3814]: https://github.com/prettier/prettier/pull/3814\n[#3909]: https://github.com/prettier/prettier/pull/3909\n[#3770]: https://github.com/prettier/prettier/pull/3770\n[#3724]: https://github.com/prettier/prettier/pull/3724\n[#3769]: https://github.com/prettier/prettier/pull/3769\n[#3841]: https://github.com/prettier/prettier/pull/3841\n[#3723]: https://github.com/prettier/prettier/pull/3723\n[#3801]: https://github.com/prettier/prettier/pull/3801\n[#3738]: https://github.com/prettier/prettier/pull/3738\n[#3768]: https://github.com/prettier/prettier/pull/3768\n[#3792]: https://github.com/prettier/prettier/pull/3792\n[#3975]: https://github.com/prettier/prettier/pull/3975\n[#3665]: https://github.com/prettier/prettier/pull/3665\n[#3676]: https://github.com/prettier/prettier/pull/3676\n[#3735]: https://github.com/prettier/prettier/pull/3735\n[#4011]: https://github.com/prettier/prettier/pull/4011\n[#3899]: https://github.com/prettier/prettier/pull/3899\n[#3948]: https://github.com/prettier/prettier/pull/3948\n[#3947]: https://github.com/prettier/prettier/pull/3947\n[#3940]: https://github.com/prettier/prettier/pull/3940\n[#3979]: https://github.com/prettier/prettier/pull/3979\n[#3989]: https://github.com/prettier/prettier/pull/3989\n[#4005]: https://github.com/prettier/prettier/pull/4005\n[#3780]: https://github.com/prettier/prettier/pull/3780\n[#3780]: https://github.com/prettier/prettier/pull/3780\n[#3676]: https://github.com/prettier/prettier/pull/3676\n[#3787]: https://github.com/prettier/prettier/pull/3787\n[#3775]: https://github.com/prettier/prettier/pull/3775\n[#3622]: https://github.com/prettier/prettier/pull/3622\n[#3990]: https://github.com/prettier/prettier/pull/3990\n[#3992]: https://github.com/prettier/prettier/pull/3992\n[#4028]: https://github.com/prettier/prettier/pull/4028\n[#3830]: https://github.com/prettier/prettier/pull/3830\n[#4048]: https://github.com/prettier/prettier/pull/4048"
    },
    {
      "id": "/2018/01/10/1.10.0",
      "metadata": {
        "permalink": "/blog/2018/01/10/1.10.0",
        "source": "@site/blog/2018-01-10-1.10.0.md",
        "title": "Prettier 1.10: One Year of Prettier 🎂",
        "description": "Happy Prettier-versary! It's pretty incredible that Prettier was only released a year ago and has already seen such a massive adoption and great number of contributors. For this special release, we're going to do a small retrospective around the project.",
        "date": "2018-01-10T00:00:00.000Z",
        "formattedDate": "January 10, 2018",
        "tags": [],
        "readingTime": 14.43,
        "truncated": true,
        "authors": [
          {
            "name": "Christopher Chedeau (@vjeux)",
            "url": "https://twitter.com/vjeux"
          }
        ],
        "frontMatter": {
          "author": "Christopher Chedeau (@vjeux)",
          "authorURL": "https://twitter.com/vjeux",
          "title": "Prettier 1.10: One Year of Prettier 🎂"
        },
        "prevItem": {
          "title": "Prettier 1.11: CSS fixes and new TypeScript feature support",
          "permalink": "/blog/2018/02/26/1.11.0"
        },
        "nextItem": {
          "title": "Prettier 1.9: JSX Fragments, EditorConfig and Arrow Parens",
          "permalink": "/blog/2017/12/05/1.9.0"
        }
      },
      "content": "Happy Prettier-versary! It's pretty incredible that Prettier was only released a year ago and has already seen such a massive adoption and great number of contributors. For this special release, we're going to do a small retrospective around the project.\n\nIt's also an exciting release in itself because Prettier now has partial support for `.vue` files and the internals have been refactored such that there's a proper plugin API in order to support different languages!\n\n<!--truncate-->\n\n## Retrospective\n\nEver since gofmt came out in 2013, I ([@vjeux]) became obsessed with the idea of automatic formatting. I started seeing problems that would be solved by an automatic formatter all the time: arguing about coding style, having to format the code manually, difficulty to write codemod tools…\n\nWhen last December there were not one but two people independently working on a JavaScript pretty printer, it was a sign! Pieter Vanderwerff built one in Reason based on Flow infrastructure and James Long in JavaScript. I played the role of a cheerleader by setting up the same test suite for the two projects as well as running their pretty printer on existing codebases and extracting lists of [things that](https://github.com/prettier/prettier/issues/2) were [not printed well](https://github.com/prettier/prettier/issues/6).\n\nSadly, after the holidays were over, both of them had to go back to work on their real job :( I decided to step in and convince my manager to work on it full time. James had open sourced his project (Prettier) and I was more familiar with JavaScript so I decided that this was the one I would work on!\n\nHere's a list of some of the things that worked well during this project.\n\n### Spend time on release notes\n\nRelease notes have an interesting property that they are very often shared, even if the content is terrible. Everyone seems to want to know that version 1.5.8 of some software has been released. This is a very good opportunity to also sell your project.\n\nFor Prettier releases, I spent a lot of time explaining the rationale behind all the changes and talked about some things that would likely have been written as a separate blog post (like this!). Plus, you're likely going to be lazy and find all the excuses in the world not to write that blog post, but you really want to publish that new version, so it's a good forcing function.\n\n### Clear decision-making process\n\nStyle rules are one of the most controversial subjects and at the same time a lot of decisions needed to be made. I tried to design a decision-making process that would let us make progress.\n\nPeople find all sort of emotional arguments in order to convince you that their opinion on style is the best. We needed to have something purely rational so that even though it's not what people would prefer, they couldn’t argue against the methodology.\n\nThe best I could find was to count how many times each variant was used in the Facebook codebase. It’s easy for me to run and provide relative numbers (style A is used 5x more than style B) to convince people. If such a big codebase that has been written by thousands of people over the years has a winner, it may not be the best but is likely not going to be hugely controversial.\n\nNot everything could be solved this way, some things didn't have a clear winner or it was not obvious how to come up with an algorithm to print it well. In those cases, it was important to have an escalation process with a single person making the decision at the end (me). This way we could make progress without needing to find a consensus which would have likely been very hard.\n\n### Open source as guinea pigs\n\nA total pretty printer is one of those projects where you need it to be close to perfect to bring it to a big codebase like Facebook. The first impression is extremely important and it's very hard to get something that will be correct (it won't introduce invalid JavaScript or code that would behave differently) for all the edge cases.\n\nMy initial plan was to work on it alone in a cave hidden from the outside world for 6 months until I got everything just right and then get people to adopt it. What I didn't expect is that people in open source didn't have that same quality bar and started using it way earlier than that. The risks of using it on a side project are vastly different than on millions of lines of code at Facebook.\n\nIt ended up being very beneficial for the project to get feedback along the way until it was finally ready to be used at Facebook.\n\n### Open source as contributors\n\nFor the first 6 months of the project, I was working full time on it and ended up writing only half of the commits. This is pretty mind-blowing in itself! Not only was the throughput two times better on the project itself, but people ended up working on things that I wouldn't have spent time on like integrations with all the editors on earth, a fuzzer to find bugs, TypeScript support, infrastructure to support parsing multiple languages in the same file, and more.\n\nEven though we don't use all those things at Facebook, many of them ended up being useful. CSS-in-JS support made it easy to get GraphQL fragments in template literals formatted. The large number of users was also a great way to surface obscure bugs that we would eventually hit and many different people chimed in to fix them.\n\nThe best thing is that I stopped working on the project full time 6 months ago and the project kept going under the leadership of [@azz]. I'd like to thank all the people that helped in various ways, this is so exciting to make history together!\n\nOpen source has been doing wonders for the project, delivering a ton of value for Facebook (almost all our JavaScript files are now pretty printed) and for the industry at large as seen by the huge adoption.\n\n### Tooling: Jest Snapshot Tests & Playground\n\nAll those contributions were possible because it was easy to report errors, contribute and review code. The two tools that were most impactful in this project were jest snapshot tests and the playground.\n\nSnapshot tests are a wonder for a pretty printer. Adding new tests is dead easy, just create a file in the test folder with the code you want to format and run jest, voila! Anytime you change something, you can see how a bunch of examples would be printed differently, then it's up to you to decide if it's better or not. For a reviewer, it's also really nice, you can look at the before/after of all the things it changed. I've come to pay more attention to the snapshots than the actual implementation.\n\n[The playground](https://prettier.io/playground) is a really nice way to get to a repro or play with Prettier without having to install the development environment, being on the right branch... This has proven to be extremely valuable to get people to provide really good bug reports that are actionable.\n\n## Highlights\n\n### Support for Vue Single File Components ([#3563]) by [@vjeux]\n\nThere's a lot of demand for Vue SFC ([#2097]). We've introduced partial support for them: All the HTML is printed as is, but now the `<script>` and `<style>` tags are printed using Prettier.\n\nTo use it, just run `prettier` on your `*.vue` files!\n\n### Prettier Plugin API ([#3536]) by [@azz]\n\nAs Prettier for JavaScript has become stable, we've recently had contributors wanting to add new languages to Prettier, notably we had pull requests to add Python support and PHP support. We want to keep the core `prettier` package portable and maintainable, but we also want to give people the opportunity to run Prettier on more languages. To that end we've introduced a [plugin API]! Prettier plugins can contribute parsers and/or printers to the Prettier formatter. They are treated as first-class citizens and can even contribute to the embedding support (e.g. formatting your language inside Markdown).\n\nUsing plugins is as simple as installing them via `npm`/`yarn`, and running Prettier as you usually would, there's no additional configuration to worry about!\n\nThere are three official plugins under development:\n\n- [`@prettier/plugin-python`](https://github.com/prettier/prettier-python)\n- [`@prettier/plugin-php`](https://github.com/prettier/prettier-php)\n- [`@prettier/plugin-swift`](https://github.com/prettier/prettier-swift)\n\nAll three of these plugins are still under active development and aren't ready to throw production code at, but keep an eye on them as they're progressing!\n\nIf you're interested in helping build those plugins, check out their repository issues list or run it against your own code and start raising bugs! Similarly, if you're interested in building a new language in Prettier and need some help getting it off the ground, [create an issue in the prettier repo](https://github.com/prettier/prettier/issues/new) and let us help you out.\n\nPrettier's in-built languages have been refactored to be expressed in terms of the plugin API, this way we can guarantee going forward that the core API is generic.\n\nCheck [the docs][plugin api] for more information.\n\n> Please note that as this is a new, significantly large feature, we're releasing this under a **beta** label in the documentation. While we don't anticipate anything significant, this means that we may make breaking changes in the next release.\n\n## Other Changes\n\n### TypeScript\n\n#### Support numeric separators ([#3580]) by [@azz]\n\nNumeric separators are a [stage 3 ECMAScript proposal](https://github.com/tc39/proposal-numeric-separator). Support has been added for them in TypeScript 2.7, and Prettier will now preserve them.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nSyntaxError: ',' expected. (1:10)\n> 1 | var a = 1_000_000_000;\n    |          ^\n  2 | var b = 0b1101_0101_1001;\n  3 | var c = 0xAE_FE_2F;\n\n// After\nvar a = 1_000_000_000;\nvar b = 0b1101_0101_1001;\nvar c = 0xAE_FE_2F;\n```\n\n### Flow\n\n#### Print flow type annotation comments as comments ([#3449]) by [@duailibe]\n\nFlow [type annotation comments](https://flow.org/en/docs/types/comments/#toc-comment-type-annotation) are a nice way to get type checking without having to transpile your files. Before this release, Prettier, using the flow parser, would not print the type annotation as comments, making it impossible to use that feature. Now, Prettier will correctly detect if the type annotation was a comment and print accordingly for `/*: ... */` type comments. Work is in progress for `/*:: ... */` comments.\n\n```ts\n// Input\nlet foo /*: string */ = \"a\";\n\n// Before\nlet foo: string = \"a\";\n\n// After\nlet foo /*: string */ = \"a\";\n```\n\n#### Print comment after arrow function params ([#3444]) by [@duailibe]\n\nIf you are using the babylon parser, there are different kind of issues with flow comments where comments are moved around. One of them was fixed during this release. We're now getting closer to be able to support that feature.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nconst run = (cmd /*: string */ /*: Promise<void> */) => {};\n\n// After\nconst run = (cmd /*: string */) /*: Promise<void> */ => {};\n```\n\n#### Print parens in FunctionTypeAnnotation when arrowParens is \"always\" ([#3616]) by [@duailibe]\n\nIn the [last release](https://prettier.io/blog/2017/12/05/1.9.0.html) we added a new `arrowParens` option. One place were it was overlooked is in flow function type annotations. Now when `arrowParens` is set to `always` we will put parenthesis around single arguments.\n\n<!-- prettier-ignore -->\n```ts\n// --arrow-parens always\n\n// Before\ntype SomeType = {\n  something: number => number\n};\n\n// After\ntype SomeType = {\n  something: (number) => number\n};\n```\n\n### JSX\n\n#### Inline do expressions inside of JSX ([#3607]) by [@vjeux]\n\n\"Do expressions\" are a [stage 1 ECMAScript proposal](https://github.com/tc39/proposal-do-expressions), and they're particularly useful in JSX, however the extra level of indentation isn't required, so we've inlined them into the expression container.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n{\n  do {\n    // ...\n  }\n}\n\n// After\n{do {\n // ...\n}}\n```\n\n#### Prevent adding softline after arrow attribute with comments ([#3641]) by [@duailibe]\n\nThis fixes a minor issue where an additional line break would appear in JSX attributes.\n\n<!-- prettier-ignore -->\n```jsx\n// --print-width 13 (for demonstration)\n\n// Before\n<span\n  attr={\n    // comment\n    () =>\n      true\n\n  }\n/>;\n\n// After\n<span\n  attr={\n    // comment\n    () =>\n      true\n  }\n/>;\n```\n\n#### Don't wrap JSX elements as attribute in `()` ([#3640]) by [@duailibe]\n\nThe [JSX spec](http://facebook.github.io/jsx/) has a hidden feature that allows passing an element as an attribute to another element and Prettier was adding parens around, causing a syntax error. This was fixed in this release. Note while some parsers are parsing this feature, none of the jsx transforms allow it. The first one that will support it will be Babel 7 which is currently in beta.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<Foo\n  content=(\n    <div>\n      <div />\n    </div>\n  )\n/>\n\n// After\n<Foo\n  content=<div>\n    <div />\n  </div>\n/>\n```\n\n### SCSS\n\n#### Print comments inside of selector as is ([#3649]) by [@vjeux]\n\nUnfortunately the CSS parser we're using for selectors does not support comments. As such there was a case where comments where selectors could be moved onto lines with comments. This has now been fixed.\n\n<!-- prettier-ignore -->\n```scss\n/* Before */\n\n// Foo\n.foo,\n// Bar .bar {\n    display: block;\n}\n\n/* After */\n\n// Foo\n.foo,\n// Bar\n.bar {\n  display: block;\n}\n```\n\n### GraphQL\n\n#### Update GraphQL parser ([#3605]) by [@vjeux]\n\nThe GraphQL specification is evolving and prettier now supports the three new features:\n\nThe ability to annotate types with string descriptions\n\n<!-- prettier-ignore -->\n```gql\n\"\"\"\nType description\n\"\"\"\ntype Foo {\n  \"some description\"\n  someProperty: String!\n\n  \"\"\"\n  some really\n  long description\n  \"\"\"\n  someOtherProperty: [String!]!\n}\n```\n\nOmitting `{}` when there is no content.\n\n<!-- prettier-ignore -->\n```gql\nextend enum Site @onEnum\n```\n\nBeing able to extend all the types\n\n<!-- prettier-ignore -->\n```gql\nextend input InputType {\n  other: Float = 1.23e4\n}\n```\n\n### Markdown\n\n#### Replace newlines with hardlines in multiparser ([#3611]) by [@ikatyang]\n\nWhen embedding JavaScript inside a Markdown blockquote, the blockquote's `>` character was removed. This has now been corrected.\n\n<!-- prettier-ignore -->\n`````md\n<!-- before -->\n\n> ````md\n> <!-- prettier-ignore -->\n> ```js\nugly   ( code ) ;\n```\n> ````\n\n<!-- after -->\n\n> ````md\n> <!-- prettier-ignore -->\n> ```js\n> ugly   ( code ) ;\n> ```\n> ````\n`````\n\n#### Conform the quotes in Markdown link titles to the singleQuote option ([#3481]) by [@j-f1]\n\nPreviously all link titles were quoted in `\"`, now it will respect the `singleQuote` option. We'll use `()`-style quotes if the title has both `'` and `\"` in it.\n\n<!-- prettier-ignore -->\n```md\n<!-- --single-quote -->\n\n<!-- Before -->\n\n[ref]: https://prettier.io \"Prettier\"\n[other-ref]: https://example.com \"Shakespeare's \\\"Romeo and Juliet\\\" is a famous play\"\n\n<!-- after -->\n\n[ref]: https://prettier.io 'Prettier'\n[other-ref]: https://example.com (Shakespeare's \"Romeo and Juliet\" is a famous play)\n````\n\n#### Print imageReference with no alt in Markdown ([#3643]) by [@duailibe]\n\nWe've fixed an edge case with image references with no alt text, which cause Prettier to crash.\n\n<!-- prettier-ignore -->\n```md\n<!-- before -->\nTypeError: doc is null\n\n<!-- after -->\n![][logo]\n\n[logo]: https://github.com/prettier/prettier-logo/blob/master/images/prettier-logo-light.png?raw=true\n```\n\n#### Respect `tabWidth` for list indentation ([#3694]) by [@ikatyang]\n\nWe used to enforce 2-space for list indentation, now we take `tadWidth` in to account.\n\n<!-- prettier-ignore -->\n```md\n<!-- --tab-width 4 -->\n\n<!-- before -->\n* one\n  * two\n\n<!-- after -->\n* one\n    * two\n```\n\n### API\n\n#### Add `options` field to `getSupportInfo()` ([#3433]) by [@ikatyang]\n\n`prettier.getSupportInfo().options` will now contain an array of the options that Prettier supports.\n\n#### Only search for `.editorconfig` up to the VCS directory ([#3559]) by [@josephfrazier]\n\nIt can be quite confusing to diagnose an issue where Prettier is formatting code differently between two people with the same repository. Because Prettier supports `.editorconfig` files, and we searched all the way up to `~/.editorconfig`, this had the unintended side-effect of changing the way some people's code is formatted. We now only look up to the root directory of your project.\n\n### CLI\n\n#### Make all CLI logging go through a logger ([#3515]) by [@azz]\n\nThe `--loglevel` option wasn't respected in a handful of cases, now it is respected for all CLI logging.\n\n```shellsession\n# Before\n$ prettier --loglevel silent --write test.js\ntest.js 91ms\n\n# After\n$ prettier --loglevel silent --write test.js\n```\n\n#### Output files as-is if ignored ([#3618]) by [@duailibe]\n\nWe've fixed up the behavior of the CLI when it comes to ignored files. Previously when a file was ignored by `.prettierignore`, the CLI would output nothing. This affected editor integrations. The behaviour is now:\n\n- With `--write`, don't read or write to the ignored file.\n- Without `--write`, read the ignored file and output as-is.\n\n### Editor Integrations\n\n#### Add PostCSS extensions to `getSupportInfo()` ([#3454]) by [@ardevelop]\n\nSome editor integrations use Prettier's `getSupportInfo` function to dynamically support all of Prettier's languages. This adds support for `*.pcss` files.\n\n#### Add \"JSON with comments\" to `getSupportInfo()` ([#3496]) by [@thorn0]\n\nSimilarly, \"JSON with comments\" will also be detected.\n\n---\n\n<h1 style=\"padding: 0; margin-bottom: -2rem\">🎂</h1>\n\n[@azz]: https://github.com/azz\n[@ardevelop]: https://github.com/ardevelop\n[@duailibe]: https://github.com/duailibe\n[@ikatyang]: https://github.com/ikatyang\n[@josephfrazier]: https://github.com/josephfrazier\n[@j-f1]: https://github.com/j-f1\n[@thorn0]: https://github.com/thorn0\n[@vjeux]: https://github.com/vjeux\n[#2097]: https://github.com/prettier/prettier/issues/2097\n[#3433]: https://github.com/prettier/prettier/pull/3433\n[#3444]: https://github.com/prettier/prettier/pull/3444\n[#3449]: https://github.com/prettier/prettier/pull/3449\n[#3454]: https://github.com/prettier/prettier/pull/3454\n[#3481]: https://github.com/prettier/prettier/pull/3481\n[#3496]: https://github.com/prettier/prettier/pull/3496\n[#3515]: https://github.com/prettier/prettier/pull/3515\n[#3536]: https://github.com/prettier/prettier/pull/3536\n[#3559]: https://github.com/prettier/prettier/pull/3559\n[#3563]: https://github.com/prettier/prettier/pull/3563\n[#3580]: https://github.com/prettier/prettier/pull/3580\n[#3605]: https://github.com/prettier/prettier/pull/3605\n[#3607]: https://github.com/prettier/prettier/pull/3607\n[#3611]: https://github.com/prettier/prettier/pull/3611\n[#3616]: https://github.com/prettier/prettier/pull/3616\n[#3618]: https://github.com/prettier/prettier/pull/3618\n[#3640]: https://github.com/prettier/prettier/pull/3640\n[#3641]: https://github.com/prettier/prettier/pull/3641\n[#3643]: https://github.com/prettier/prettier/pull/3643\n[#3649]: https://github.com/prettier/prettier/pull/3649\n[#3694]: https://github.com/prettier/prettier/pull/3694\n[plugin api]: https://prettier.io/docs/en/plugins.html"
    },
    {
      "id": "/2017/12/05/1.9.0",
      "metadata": {
        "permalink": "/blog/2017/12/05/1.9.0",
        "source": "@site/blog/2017-12-05-1.9.0.md",
        "title": "Prettier 1.9: JSX Fragments, EditorConfig and Arrow Parens",
        "description": "This release adds an option for arrow function parens in arguments, support for the new JSX fragment syntax (`), support for .editorconfig` files, and nice additions to our GraphQL and Markdown support.",
        "date": "2017-12-05T00:00:00.000Z",
        "formattedDate": "December 5, 2017",
        "tags": [],
        "readingTime": 7.435,
        "truncated": true,
        "authors": [
          {
            "name": "Lucas Duailibe (@duailibe)",
            "url": "https://twitter.com/duailibe"
          }
        ],
        "frontMatter": {
          "author": "Lucas Duailibe (@duailibe)",
          "authorURL": "https://twitter.com/duailibe",
          "title": "Prettier 1.9: JSX Fragments, EditorConfig and Arrow Parens"
        },
        "prevItem": {
          "title": "Prettier 1.10: One Year of Prettier 🎂",
          "permalink": "/blog/2018/01/10/1.10.0"
        },
        "nextItem": {
          "title": "Prettier 1.8: Markdown Support",
          "permalink": "/blog/2017/11/07/1.8.0"
        }
      },
      "content": "This release adds an option for arrow function parens in arguments, support for the [new JSX fragment syntax (`<>`)](https://reactjs.org/blog/2017/11/28/react-v16.2.0-fragment-support.html), support for `.editorconfig` files, and nice additions to our GraphQL and Markdown support.\n\n<!--truncate-->\n\n## Highlights\n\n### JavaScript\n\n#### Option to add parens in arrow function arguments ([#3324](https://github.com/prettier/prettier/pull/3324)) by [@rattrayalex](https://github.com/rattrayalex) and [@suchipi](https://github.com/suchipi)\n\nWhen printing arrow functions, Prettier omitted parens around the arguments if they weren’t strictly necessary, like so:\n\n<!-- prettier-ignore -->\n```js\n// no parens\nfoo => {};\n\n// parens\n(foo: Number) => {};\n\n// parens\n({ foo }) => {}\n\n// parens\n(foo = 5) => {}\n```\n\nThis lead to the [most commented thread](https://github.com/prettier/prettier/issues/812) in our issue tracker. Prettier now has the `--arrow-parens` option (`arrowParens` in the config) that can assume two values today:\n\n- `\"avoid\"` - (default) preserve the behavior that omits parens when possible\n- `\"always\"` - always includes parens\n\n#### JSX fragment syntax ([#3237](https://github.com/prettier/prettier/pull/3237)) by [@duailibe](https://github.com/duailibe)\n\nPrettier will now recognize and format JSX with the [new fragment syntax](https://github.com/facebook/jsx/issues/84), like the code below:\n\n<!-- prettier-ignore -->\n```jsx\nfunction MyComponent() {\n  return (\n    <>\n      <Children1 />\n      <Children2 />\n      <Children3 />\n    </>\n  );\n}\n```\n\n#### Fix slow formatting long texts in JSX ([#3268](https://github.com/prettier/prettier/pull/3268), [#3273](https://github.com/prettier/prettier/pull/3273)) by [@duailibe](https://github.com/duailibe)\n\nWe received feedback that formatting a JSX file with a really long text (~1000 lines) was really slow and noticed there was two performance bottlenecks in our `fill` primitive, which prints text until it reaches the print width and then insert a line break.\n\n### Markdown\n\n#### Add an option to preserve text line breaks ([#3340](https://github.com/prettier/prettier/pull/3340)) by [@ikatyang](https://github.com/ikatyang)\n\nAfter the release of our Markdown support, we received feedback that breaking text to respect the print width could affect some renderers that could be sensitive to line breaks. In _1.8.2_ we released a new option `proseWrap: false` that would print a paragraph in a single line, and users would rely on the \"soft wrapping\" feature of editors.\n\nIn _1.9_ we are releasing a new option `proseWrap: \"preserve\"` which will respect the original line breaks of text, and lets the users decide where the text should break.\n\n[WARNING] `proseWrap` with boolean value is deprecated, use `\"always\"`, `\"never\"` or `\"preserve\"` instead.\n\n**[BREAKING CHANGE]** `proseWrap` option now defaults to `\"preserve\"` as some renderers are linebreak-sensitive.\n\n### GraphQL\n\n#### Support top-level interpolations ([#3370](https://github.com/prettier/prettier/pull/3370)) by [@lydell](https://github.com/lydell)\n\nWhen GraphQL support was released, Prettier did not support interpolation so it would skip formatting if any interpolations were present, because interpolations make formatting very difficult. While that works well for the most part, users of the [Apollo Client](https://www.apollographql.com/) were missing out on Prettier’s GraphQL support sometimes, because Apollo Client uses interpolation to share fragments between queries. The good news is that only _top-level_ interpolations are allowed, and that was way easier to add support for in Prettier.\n\nIn _1.9_ we format GraphQL queries with top-level interpolation:\n\n<!-- prettier-ignore -->\n```js\ngql`\n  query User {\n    user(id: \"Bob\") {\n      ...UserDetails\n    }\n  }\n\n  ${UserDetailsFragment}\n`\n```\n\n(Prettier will continue to skip formatting if the interpolation is inside a query or mutation or so.)\n\n#### Preserve intentional new lines in GraphQL ([#3252](https://github.com/prettier/prettier/pull/3252)) by [@duailibe](https://github.com/duailibe)\n\nPrettier will now respect intentional line breaks inside GraphQL queries (but limit to 1), where before it would remove them.\n\n<!-- prettier-ignore -->\n```graphql\nquery User {\n  name\n\n  age\n}\n```\n\n### CSS\n\n#### Don't lowercase element names and attribute names in selectors ([#3317](https://github.com/prettier/prettier/pull/3317)) by [@lydell](https://github.com/lydell)\n\nCSS is mostly case insensitive, so Prettier has been lowercasing stuff for a while to keep things consistent. Turns out we overlooked a detail in the CSS spec. Element and attribute names in selectors depend on the markup language: In HTML they are case insensitive, but in SVG (XML) they are not. Previously Prettier would incorrectly lowercase element and attribute names, but now we don’t anymore.\n\n### Configuration\n\n#### Add EditorConfig support ([#3255](https://github.com/prettier/prettier/pull/3255)) by [@josephfrazier](https://github.com/josephfrazier)\n\nIt's taken a while, but Prettier will finally respect your `.editorconfig` file. This includes:\n\n- `indent_style`\n- `indent_size`/`tab_width`\n- `max_line_length`\n\nThe `prettier` CLI respects `.editorconfig` by default, but you can opt out with `--no-editorconfig`.\nHowever, the API _doesn't_ respect `.editorconfig` by default, in order to avoid potential editor integration issues (see [here](https://github.com/prettier/prettier/pull/3255#discussion_r152259674) for details). To opt in, add `editorconfig: true` to the `prettier.resolveConfig` options.\n\n## Other changes\n\n### JavaScript\n\n#### Don't break simple elements in JSX ([#3250](https://github.com/prettier/prettier/pull/3250)) by [@duailibe](https://github.com/duailibe)\n\nPrettier won't break an element with no attributes anymore, keeping elements like `<br />` as an unit.\n\n#### Don't break identifiers inside template literals expressions ([#3299](https://github.com/prettier/prettier/pull/3299)) by [@duailibe](https://github.com/duailibe)\n\nIn the previous release we tried a new strategy of breaking template literals with expressions inside to respect the print width. We've received feedback that for some cases it was actually preferred that it would exceed print width than breaking in multiple lines.\n\nFrom now on, template literals expressions that contain a single identifier won't break anymore:\n\n<!-- prettier-ignore -->\n```js\nconst foo = `Hello ${username}. Today is ${month} ${day}. You have ${newMessages} new messages`.\n```\n\n#### Fix formatting of comment inside arrow function ([#3334](https://github.com/prettier/prettier/pull/3334)) by [@jackyho112](https://github.com/jackyho112)\n\nFixes an edge case where Prettier was moving comments around breaking tools like Webpack:\n\n<!-- prettier-ignore -->\n```js\nconst API = {\n  loader: () => import('./test' /* webpackChunkName: \"test\" */),\n};\n\n// would get formatted to\n\nconst API = {\n  loader: (/* webpackChunkName: \"test\" */) => import(\"./test\")\n};\n```\n\n#### Fix printing of comments around decorators and class properties ([#3382](https://github.com/prettier/prettier/pull/3382)) by [@azz](https://github.com/azz)\n\nThere was a case where comments between a decorator and a class property were moved to an invalid position.\n\n<!-- prettier-ignore -->\n```js\n// Before\nclass Something {\n  @decorator\n  static // comment\n  property = 1;\n}\n\n// After\nclass Something {\n  @decorator\n  // comment\n  static property = 1;\n}\n```\n\n### Flow\n\n#### Do not break on empty type parameters ([#3281](https://github.com/prettier/prettier/pull/3281)) by [@Vjeux](https://github.com/Vjeux)\n\nIt won't break empty type parameters (`foo: Type<>`) anymore.\n\n#### Add support for flow mixins when using babylon ([#3391](https://github.com/prettier/prettier/pull/3391)) by [@bakkot](https://github.com/bakkot)\n\nWe were accidentally dropping flow mixins, this has been fixed, but only for the `babylon` parser.\n\n<!-- prettier-ignore -->\n```js\n// Before\nclass Foo extends Bar {}\n\n// After\nclass Foo extends Bar mixins Baz {}\n```\n\n### TypeScript\n\n#### Don't print a trailing comma after object rest spread ([#3313](https://github.com/prettier/prettier/pull/3313)) by [@duailibe](https://github.com/duailibe)\n\nThis was inconsistent with JavaScript and Flow, Prettier won't print a trailing comma in the following cases, when using the TypeScript parser:\n\n<!-- prettier-ignore -->\n```js\nconst {\n  bar,\n  baz,\n  ...rest\n} = foo;\n```\n\n#### Print parens around type assertions for decorators ([#3329](https://github.com/prettier/prettier/pull/3329)) by [@azz](https://github.com/azz)\n\nWe were omitting parens around type assertions inside decorators:\n\n<!-- prettier-ignore -->\n```typescript\n@(bind as ClassDecorator)\nclass Decorated {}\n```\n\n### Markdown\n\n#### Don't break `inlineCode` ([#3230](https://github.com/prettier/prettier/pull/3230)) by [@ikatyang](https://github.com/ikatyang)\n\nPrettier won't break text inside `inlineCode` meaning it will only break of after it.\n\n#### No extra whitespace between non-CJK and CJK-punctuation and vice-versa ([#3244](https://github.com/prettier/prettier/pull/3244), [#3249](https://github.com/prettier/prettier/pull/3249)) by [@ikatyang](https://github.com/ikatyang)\n\nFixes cases where Prettier would insert extra whitespace like in the following examples:\n\n<!-- prettier-ignore -->\n```markdown\n扩展运算符（spread ）是三个点（`...`）。\n\nThis is an english paragraph with a CJK quote \" 中文 \".\n```\n\n#### Escape all emphasis-like text ([#3246](https://github.com/prettier/prettier/pull/3246)) by [@ikatyang](https://github.com/ikatyang)\n\nFixes the case where `\\_\\_text\\_\\_` would be formatted as `__text__`.\n\n#### Handle punctuation variants ([#3254](https://github.com/prettier/prettier/pull/3254)) by [@ikatyang](https://github.com/ikatyang)\n\nPrettier now considers not only ASCII punctuation characters but Unicode as well.\n\n#### Support TOML front matter ([#3290](https://github.com/prettier/prettier/pull/3290)) by [@ikatyang](https://github.com/ikatyang)\n\nWe already supported YAML in the front matter of Markdown files and we added the TOML format as well, since some static site generators support it.\n\n<!-- prettier-ignore -->\n```markdown\n+++\ndate: '2017-10-10T22:49:47.369Z'\ntitle: 'My Post Title'\ncategories: ['foo', 'bar']\n+++\n\nThis is the markdown body of my post.\n```\n\n#### Only indent the first non-list node in checkbox list item ([#3297](https://github.com/prettier/prettier/pull/3297)) by [@ikatyang](https://github.com/ikatyang)\n\nFixes a bug where it would indent lines after a list when it shouldn't:\n\n<!-- prettier-ignore -->\n```markdown\n* parent list item\n\n     * child list item\n\n* [x] parent task list item\n\n     * [x] child task list item\n```\n\nwould become:\n\n<!-- prettier-ignore -->\n```markdown\n* parent list item\n\n  * child list item\n\n* [x] parent task list item\n\n      * [x] child task list item\n```\n\n#### Preserve non-breaking whitespaces ([#3327](https://github.com/prettier/prettier/pull/3327)) by [@ikatyang](https://github.com/ikatyang)\n\nNon-breaking whitespaces are useful to keep words separated by spaces together in the same line (i.e. number and units or multi-word product names). Prettier was wrongfully converting them to regular whitespaces.\n\n#### Do not break before special prefix ([#3347](https://github.com/prettier/prettier/pull/3347)) by [@ikatyang](https://github.com/ikatyang)\n\nFixes a bug where Prettier could break text if it went over the print width right before a number followed by `.` which would be parsed as a numbered list:\n\n<!-- prettier-ignore -->\n```markdown\nShe grew up in an isolated village in the 19th century and met her father aged\n29. Oh no, why are we in a numbered list now?\n```\n\n#### Omit semicolon in simple JSX expressions ([#3330](https://github.com/prettier/prettier/pull/3330)) by [@sapegin](https://github.com/sapegin)\n\nPrettier will omit the semicolon (before and after) inside code samples if it's a simple JSX expression:\n\n````markdown\nNo semi:\n\n<!-- prettier-ignore -->\n```jsx\n<div>Example</div>\n```\n````"
    },
    {
      "id": "/2017/11/07/1.8.0",
      "metadata": {
        "permalink": "/blog/2017/11/07/1.8.0",
        "source": "@site/blog/2017-11-07-1.8.0.md",
        "title": "Prettier 1.8: Markdown Support",
        "description": "This release adds Markdown support, a new --insert-pragma flag, fixes a number of formatting issues, adds support for some new experimental operators, and improves our editor integration support.",
        "date": "2017-11-07T00:00:00.000Z",
        "formattedDate": "November 7, 2017",
        "tags": [],
        "readingTime": 14.12,
        "truncated": true,
        "authors": [
          {
            "name": "Lucas Azzola (@azz)",
            "url": "https://twitter.com/lucasazzola"
          }
        ],
        "frontMatter": {
          "author": "Lucas Azzola (@azz)",
          "authorURL": "https://twitter.com/lucasazzola",
          "title": "Prettier 1.8: Markdown Support"
        },
        "prevItem": {
          "title": "Prettier 1.9: JSX Fragments, EditorConfig and Arrow Parens",
          "permalink": "/blog/2017/12/05/1.9.0"
        },
        "nextItem": {
          "title": "Prettier 1.7: JSX tweaks, Pragma, TypeScript and CSS fixes",
          "permalink": "/blog/2017/09/15/1.7.0"
        }
      },
      "content": "This release adds Markdown support, a new `--insert-pragma` flag, fixes a number of formatting issues, adds support for some new _experimental_ operators, and improves our editor integration support.\n\n<!--truncate-->\n\n## Highlights\n\n### Markdown Support\n\n#### Support markdown ([#2943](https://github.com/prettier/prettier/pull/2943)) by [@ikatyang](https://github.com/ikatyang)\n\nYou can now run Prettier on Markdown files! 🎉\n\nThe implementation is highly compliant with the [CommonMark spec](http://commonmark.org/), and backed by the excellent [`remark-parse`](https://github.com/wooorm/remark/tree/master/packages/remark-parse) package.\n\n**Word Wrap**\n\nOne of Prettier's core features is its ability to wrap code at a specified line length. This applies to Markdown too, which means you can maintain nice and clean 80-character-wide Markdown files without having to re-adjust line breaks manually when you add or delete words.\n\nInput:\n\n```\nVoilà! In view, a humble vaudevillian veteran cast vicariously as both victim and villain by the vicissitudes of Fate. This visage, no mere veneer of vanity, is a vestige of the vox populi, now vacant, vanished. However, this valourous visitation of a bygone vexation stands vivified and has vowed to vanquish these venal and virulent vermin vanguarding vice and vouchsafing the violently vicious and voracious violation of volition! The only verdict is vengeance; a vendetta held as a votive, not in vain, for the value and veracity of such shall one day vindicate the vigilant and the virtuous. Verily, this vichyssoise of verbiage veers most verbose, so let me simply add that it's my very good honour to meet you and you may call me V.\n```\n\nOutput:\n\n```\nVoilà! In view, a humble vaudevillian veteran cast vicariously as both victim\nand villain by the vicissitudes of Fate. This visage, no mere veneer of vanity,\nis a vestige of the vox populi, now vacant, vanished. However, this valourous\nvisitation of a bygone vexation stands vivified and has vowed to vanquish these\nvenal and virulent vermin vanguarding vice and vouchsafing the violently vicious\nand voracious violation of volition! The only verdict is vengeance; a vendetta\nheld as a votive, not in vain, for the value and veracity of such shall one day\nvindicate the vigilant and the virtuous. Verily, this vichyssoise of verbiage\nveers most verbose, so let me simply add that it's my very good honour to meet\nyou and you may call me V.\n```\n\n> ~~Note: We're considering adding an option for this, check [#3183](https://github.com/prettier/prettier/pull/3183) for discussion.~~\n> Update: We've added an option in `1.8.2` called [`--no-prose-wrap`](https://prettier.io/docs/en/options.html#prose-wrap)\n\n> Note for CJK users: If your markdown renderer does not support CJK line ending, you'll have to use plugin like [markdown-it-perfect-newline-for-cjk](https://www.npmjs.com/package/markdown-it-perfect-newline-for-cjk), [hexo-filter-fix-cjk-spacing](https://www.npmjs.com/package/hexo-filter-fix-cjk-spacing), etc. to remove additional spaces.\n>\n> ```\n> // Source\n> 一二三\n> 四五六\n> 七八九\n>\n> // Rendered content with unsupported renderer\n> 一二三 四五六 七八九\n>\n> // Rendered content with supported renderer or via plugin\n> 一二三四五六七八九\n> ```\n\n**Code Formatting**\n\nPowered by Prettier's generic \"multiparser\", Prettier will format code blocks in Markdown! We use the language code provided with the code block to determine which language it is, and thus we can format any language that Prettier supports (including Markdown itself, if you're into that).\n\nInput:\n\n<!-- prettier-ignore -->\n````md\n```js\nreallyUgly    (\njavascript\n  )\n```\n\n```css\n.h1 {     color : red }\n```\n````\n\nOutput:\n\n````md\n```js\nreallyUgly(javascript);\n```\n\n```css\n.h1 {\n  color: red;\n}\n```\n````\n\n<!-- prettier-ignore -->\n> Note: In some cases you may not want to format your code in Markdown, and just like in other languages, in Markdown you can use an ignore comment before the code block to ignore it from formatting:\n>\n> ````md\n> <!-- prettier-ignore -->\n> ```js\n> ugly   ( code ) ;\n> ```\n> ````\n\n**Lists**\n\nWhen rearranging list items, after running Prettier all the numbers will be fixed!\n\n![Markdown Lists](/blog/assets/markdown-lists.gif)\n\n> Note: you can actually opt out of this by using `1.` for all list items if you want to optimize for cleaner diffs.\n\n**Tables**\n\nTables will also automatically be adjusted to fit their contents. This could be completely unmaintainable without an automated tool.\n\n![Markdown Tables](/blog/assets/markdown-tables.gif)\n\n**Markdown-in-JS**\n\nBy using either `md` or `markdown` tagged template literals, you can format markdown code inside JavaScript.\n\n<!-- prettier-ignore -->\n```js\nconst markdown = md`\n  # heading\n\n  1. list item\n`;\n```\n\n### CLI\n\n#### Add option to insert `@format` to first docblock if absent ([#2865](https://github.com/prettier/prettier/pull/2865)) by [@samouri](https://github.com/samouri)\n\nIn 1.7, we added an option called `--require-pragma` to require files contain an `/** @format */` pragma to be formatted. In order to add this pragma to a large set of files you can now use [`--insert-pragma`](https://prettier.io/docs/en/cli.html#insert-pragma) flag.\n\n```\nprettier --write \"folder/**/*.js\" --insert-pragma\n```\n\n#### Add `--loglevel` option ([#2992](https://github.com/prettier/prettier/pull/2992)) by [@ikatyang](https://github.com/ikatyang)\n\nThis [nifty feature](https://prettier.io/docs/en/cli.html#loglevel) allows you to opt in (or out) of Prettier's logging. We've also cleaned up the logging substantially since 1.7.\n\n<!-- prettier-ignore -->\n```bash\n$ prettier --loglevel=debug blarg\n$ ./bin/prettier.js --loglevel=debug blarg\n[debug] normalized argv: {\"_\":[\"blarg\"],\"bracket-spacing\":false,\"color\":true,\"debug-check\":false,\"debug-print-doc\":false,\"flow-parser\":false,\"insert-pragma\":false,\"jsx-bracket-same-line\":false,\"list-different\":false,\"require-pragma\":false,\"semi\":false,\"single-quote\":false,\"stdin\":false,\"use-tabs\":false,\"version\":false,\"with-node-modules\":false,\"write\":false,\"loglevel\":\"debug\",\"ignore-path\":\".prettierignore\",\"config-precedence\":\"cli-override\"}\n[error] No matching files. Patterns tried: blarg !**/node_modules/** !./node_modules/**\n\n```\n\n### JavaScript\n\n#### Fix indentation for JSDoc comments ([#2470](https://github.com/prettier/prettier/pull/2470)) by [@maxdeviant](https://github.com/maxdeviant)\n\nThis has been a long-time known issue with Prettier. When formatting code that results in a change of indentation level, the JSDoc comments would end up being out of alignment. We're happy to report this is now fixed!\n\n<!-- prettier-ignore -->\n```js\n// Before\nfunction theFunction2(action$, store) {\n  /*\n     * comments\n     */\n  return true;\n}\n\n// After\nfunction theFunction2(action$, store) {\n  /*\n   * comments\n   */\n  return true;\n}\n```\n\n#### Print pipeline and nullish-coalescing operators ([#3036](https://github.com/prettier/prettier/pull/3036)) by [@azz](https://github.com/azz)\n\nWe've added support for two new proposed operators to Prettier: the _pipeline operator_ and the _nullish coalescing operator_.\n\nThe [pipeline operator](https://github.com/tc39/proposal-pipeline-operator/) is currently a stage one proposal.\n\n> This proposal introduces a new operator |> similar to F#, OCaml, Elixir, Elm, Julia, Hack, and LiveScript, as well as UNIX pipes. It's a backwards-compatible way of streamlining chained function calls in a readable, functional manner, and provides a practical alternative to extending built-in prototypes.\n\n<!-- prettier-ignore -->\n```js\n// Before\nlet result = exclaim(capitalize(doubleSay(\"hello\")));\n\n// After\nlet result = \"hello\"\n  |> doubleSay\n  |> capitalize\n  |> exclaim;\n```\n\nThe [nullish coalescing operator](https://github.com/tc39-transfer/proposal-nullish-coalescing) is another stage one proposal.\n\n> When performing optional property access in a nested structure in conjunction with the optional chaining operator, it is often desired to provide a default value if the result of that property access is null or undefined.\n\nThis operator is similar to `||` except it only evaluates the right-hand-side if the left is `undefined` or `null`, not `\"\"`, `0`, `NaN`, etc.\n\n<!-- prettier-ignore -->\n```js\nconst foo = object.foo ?? \"default\";\n```\n\n#### Improved template literal expressions line breaks ([#3124](https://github.com/prettier/prettier/pull/3124)) by [@duailibe](https://github.com/duailibe)\n\nThis was another known issue with Prettier, when printing a template literal string with expressions inside that went over the print width, it would wrap the code in weird places inside the expressions. Now, if Prettier needs to insert a line break, it should happen right between `${` and `}`.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\nconst description = `The value of the ${cssName} css of the ${this\n  ._name} element`;\n\nconst foo = `mdl-textfield mdl-js-textfield ${className} ${content.length > 0\n  ? \"is-dirty\"\n  : \"\"} combo-box__input`;\n\n// After\nconst description = `The value of the \\${cssName} css of the \\${\n  this._name\n} element`;\n\nconst foo = `mdl-textfield mdl-js-textfield ${className} ${\n  content.length > 0 ? 'is-dirty' : ''\n} combo-box__input`\n```\n\n### JSX\n\n#### Don't inline trailing `}` for arrow functions attributes ([#3110](https://github.com/prettier/prettier/pull/3110)) by [@duailibe](https://github.com/duailibe)\n\nIn order to align closer to the [Airbnb style guide](https://github.com/airbnb/javascript/), and since it was never intentionally printed this way, we've moved the `}` from to the next line in JSX. This is more diff friendly, and makes it easier to move code around by shifting lines in your editor.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<BookingIntroPanel\n  logClick={data =>\n    doLogClick(\"long_name_long_name_long_name\", \"long_name_long_name_long_name\", data)}\n/>;\n\n// After\n<BookingIntroPanel\n  logClick={data =>\n    doLogClick(\"long_name_long_name_long_name\", \"long_name_long_name_long_name\", data)\n  }\n/>;\n```\n\n## Other Changes\n\n### JavaScript\n\n#### Make the factory detection handle multiple elements ([#3112](https://github.com/prettier/prettier/pull/3112)) by [@vjeux](https://github.com/vjeux)\n\nThere was a bug in the heuristic that Prettier uses to determine whether an expression is a factory or not. It now works correctly with longer member expressions.\n\n<!-- prettier-ignore -->\n```js\n// Before\nwindow.FooClient\n  .setVars({\n    locale: getFooLocale({ page }),\n    authorizationToken: data.token\n  })\n  .initVerify(\"foo_container\");\n\n// After\nwindow.FooClient.setVars({\n  locale: getFooLocale({ page }),\n  authorizationToken: data.token\n}).initVerify(\"foo_container\");\n```\n\n#### Handle comments between function name and open paren ([#2979](https://github.com/prettier/prettier/pull/2979)) by [@azz](https://github.com/azz)\n\nPrinting comments in the right place is an endless challenge 😉. This fix ensures that comments next to function names are re-printed correctly.\n\n<!-- prettier-ignore -->\n```js\n// Before\nfunction f(/* comment*/ promise) {}\n\n// After\nfunction f /* comment*/(promise) {}\n```\n\n#### Support sequential CallExpressions in member chains ([#2990](https://github.com/prettier/prettier/pull/2990)) by [@chrisvoll](https://github.com/chrisvoll)\n\nMember chains are one of the most complex parts of Prettier. This PR fixes an issue where repeated calls lead to the next method not being pushed to the next line.\n\n<!-- prettier-ignore -->\n```js\n// Before\nwrapper\n  .find(\"SomewhatLongNodeName\")\n  .prop(\"longPropFunctionName\")().then(function() {\n  doSomething();\n});\n\n// After\nwrapper\n  .find(\"SomewhatLongNodeName\")\n  .prop(\"longPropFunctionName\")()\n  .then(function() {\n    doSomething();\n  });\n```\n\n#### Account for empty lines in long member call chain ([#3035](https://github.com/prettier/prettier/pull/3035)) by [@jackyho112](https://github.com/jackyho112)\n\nPreviously, Prettier would delete all newlines within a member chain. Now we keep up to one if it's in the source. This is nice for fluent APIs that you want to break up over multiple lines.\n\n<!-- prettier-ignore -->\n```js\nangular\n  .module(\"AngularAppModule\")\n\n  // Constants.\n  .constant(\"API_URL\", \"http://localhost:8080/api\")\n\n  // App configuration.\n  .config(appConfig)\n  .run(appRun);\n```\n\n#### Fix issue where first argument is left behind when line breaks ([#3079](https://github.com/prettier/prettier/pull/3079)) by [@mutdmour](https://github.com/mutdmour)\n\nThis addresses an issue where due to our special object inline behaviour, the indentation missing from the function call.\n\n<!-- prettier-ignore -->\n```js\n// Before\ndb.collection(\"indexOptionDefault\").createIndex({ a: 1 },\n{\n  indexOptionDefaults: true\n},\nfunction(err) {\n  // code\n});\n\n// After\ndb.collection(\"indexOptionDefault\").createIndex(\n  { a: 1 },\n  {\n    indexOptionDefaults: true\n  },\n  function(err) {\n    // code\n  }\n);\n```\n\n#### Break parens for binaries in member expression ([#2958](https://github.com/prettier/prettier/pull/2958)) by [@duailibe](https://github.com/duailibe)\n\nSimilarly, there was another edge case where indentation was missing from logical expressions. This is fixed, too.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst someLongVariable = (idx(\n  this.props,\n  props => props.someLongPropertyName\n) || []\n).map(edge => edge.node);\n\n// After\nconst someLongVariable = (\n  idx(this.props, props => props.someLongPropertyName) || []\n).map(edge => edge.node);\n```\n\n#### Prevent breaking MemberExpression inside NewExpression ([#3075](https://github.com/prettier/prettier/pull/3075)) by [@duailibe](https://github.com/duailibe)\n\nThere are so many ways to break a line. Some of them look much worse than others. Breaking between in this case looked really weird, so it has been fixed!\n\n<!-- prettier-ignore -->\n```js\n// Before\nfunction functionName() {\n  if (true) {\n    this._aVeryLongVariableNameToForceLineBreak = new this\n      .Promise((resolve, reject) => {\n        // do something\n      });\n  }\n}\n\n// After\nfunction functionName() {\n  if (true) {\n    this._aVeryLongVariableNameToForceLineBreak = new this.Promise(\n      (resolve, reject) => {\n        // do something\n      }\n    );\n  }\n}\n```\n\n#### Fix array accessors in method chains ([#3137](https://github.com/prettier/prettier/pull/3137)) by [@duailibe](https://github.com/duailibe)\n\nIn a method chain we split lines by grouping elements together and accessing an array should be printed in the end of a group instead of the beginning.\n\n<!-- prettier-ignore -->\n```js\n// Before\nfind('.org-lclp-edit-copy-url-banner__link')\n  [0].getAttribute('href')\n  .indexOf(this.landingPageLink)\n\n// After\nfind('.org-lclp-edit-copy-url-banner__link')[0]\n  .getAttribute('href')\n  .indexOf(this.landingPageLink)\n```\n\n### Flow and TypeScript\n\n#### Fix indentation of intersection object types ([#3074](https://github.com/prettier/prettier/pull/3074)) by [@duailibe](https://github.com/duailibe)\n\nThis was a minor alignment bug in intersection types, and has now been fixed.\n\n<!-- prettier-ignore -->\n```js\n// Before\ntype intersectionTest = {\n  propA: X\n} & {\n  propB: X\n} & {\n    propC: X\n  } & {\n    propD: X\n  };\n\n// After\ntype Props = {\n  propA: X\n} & {\n  propB: X\n} & {\n  propC: X\n} & {\n  propD: X\n};\n```\n\n#### Keep parens around TSAsExpression in ConditionalExpression ([#3053](https://github.com/prettier/prettier/pull/3053)) by [@azz](https://github.com/azz)\n\nWe missed a case where we need to keep the parenthesis with TypeScript's `as` assertions. This is now fixed.\n\n<!-- prettier-ignore -->\n```ts\n// Before\naValue as boolean ? 0 : -1;\n\n// After\n(aValue as boolean) ? 0 : -1;\n```\n\n### JSX\n\n#### Collapse multiple JSX whitespaces ([#2973](https://github.com/prettier/prettier/pull/2973)) by [@karl](https://github.com/karl)\n\nThis fixes up the issue where JSX formatting occasionally needed to be run twice to become stable. This occurred when you had multiple JSX whitespace elements or JSX whitespace followed by a space.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<div>\n    {\" \"} <Badge src={notificationIconPng} />\n</div>;\n\n// After\n<div>\n  {\" \"}\n  <Badge src={notificationIconPng} />\n</div>\n```\n\n#### Don't print JSX bracket on same line when it has trailing comments ([#3088](https://github.com/prettier/prettier/pull/3088)) by [@azz](https://github.com/azz)\n\nThis was an issue with the `--jsx-bracket-same-line` option. Turns out you can't _always_ put the bracket on the same line...\n\n<!-- prettier-ignore -->\n```jsx\n// Input\n<div\n  // comment\n>\n  {foo}\n</div>\n\n// Before\n<div>\n// comment\n  {foo}\n</div>;\n\n// After\n<div\n// comment\n>\n  {foo}\n</div>;\n```\n\n### CSS\n\n#### Preserve line breaks in grid declarations ([#3133](https://github.com/prettier/prettier/pull/3133)) by [@duailibe](https://github.com/duailibe)\n\nPrettier will now preserve line breaks included in the source code when formatting the `grid` and `grid-template-*` rules, since those are important to keep in separate lines, but still applies the formatting like other rules (e.g., numbers and quotes).\n\n<!-- prettier-ignore -->\n```css\n/* Original Input */\ndiv {\n  grid:\n    [wide-start] 'header header header' 200.000px\n    [wide-end] \"footer footer footer\" .50fr\n    / auto 50.000px auto;\n}\n\n/* Before */\ndiv {\n  grid: [wide-start] \"header header header\" 200px [wide-end]\n    \"footer footer footer\" 0.5fr / auto 50px auto;\n}\n\n/* After */\ndiv {\n  grid:\n    [wide-start] \"header header header\" 200px\n    [wide-end] \"footer footer footer\" 0.5fr\n    / auto 50px auto;\n}\n```\n\n### SCSS\n\n#### Format SCSS maps like CSS rules ([#3070](https://github.com/prettier/prettier/pull/3070)) by [@asmockler](https://github.com/asmockler)\n\nTurns out SCSS maps are much prettier when printed over multiple lines.\n\n<!-- prettier-ignore -->\n```scss\n// Before\n$map: (color: [#111111](https://github.com/prettier/prettier/pull/111111), text-shadow: 1px 1px 0 salmon)\n\n// After\n$map: (\n  color: [#111111](https://github.com/prettier/prettier/pull/111111),\n  text-shadow: 1px 1px 0 salmon\n);\n```\n\n### CSS-in-JS\n\n#### Fix formatting styled(Foo).attrs(...)`` ([#3073](https://github.com/prettier/prettier/pull/3073)) by [@existentialism](https://github.com/existentialism)\n\nPrettier will now format the CSS in styled-components code that looks like this:\n\n<!-- prettier-ignore -->\n```js\nstyled(Component).attrs({})`\n  color: red;\n`;\n```\n\n### GraphQL\n\n#### Prevent formatting GraphQL template literals with expressions ([#2975](https://github.com/prettier/prettier/pull/2975)) by [@duailibe](https://github.com/duailibe)\n\nPrettier doesn't support formatting JavaScript expressions in GraphQL. See [#2640](https://github.com/prettier/prettier/pull/2640) for tracking. There was a bug where formatting an expression lead to invalid code, so we've completely disabled formatting GraphQL when it contains JavaScript expressions until we fully support it.\n\n<!-- prettier-ignore -->\n```js\n// Before\n(invalid code)\n\n// After\ngraphql(schema, `{ query test { id }} ${fragment}`)\n```\n\n### CLI\n\n#### Don't use ANSI codes if stdout isn't a TTY ([#2903](https://github.com/prettier/prettier/pull/2903)) by [@Narigo](https://github.com/Narigo)\n\nPreviously, piping the output of `--list-different` to other tools was troublesome due to the ANSI color codes we use to show whether a file was modified or not. This PR disables the use of color when Prettier is piped to a different process.\n\n### Configuration\n\n#### Use relative paths with CLI ([#2969](https://github.com/prettier/prettier/pull/2969)) by [@ahmedelgabri](https://github.com/ahmedelgabri)\n\nThis fixes a bug where passing a path starting with `./` to the CLI wouldn't match patterns used in `.prettierignore`.\n\n```\n## .prettierignore\npath/to/*.js\n```\n\nAfter this fix, no files will be written to when executing:\n\n<!-- prettier-ignore -->\n```bash\n$ prettier --write ./path/to/*.js\n```\n\n#### Resolve file paths relative to config file ([#3037](https://github.com/prettier/prettier/pull/3037)) by [@azz](https://github.com/azz)\n\nThis fixes an issue where `.prettierrc` overrides, under certain conditions, were not being respected for absolute paths with the `resolveConfig` API.\n\n### Core\n\n#### Respect CJK width and Combined Characters ([#3003](https://github.com/prettier/prettier/pull/3003), [#3015](https://github.com/prettier/prettier/pull/3015)) by [@ikatyang](https://github.com/ikatyang)\n\nChinese, Japanese and Korean characters are now considered two characters wide.\n\n<!-- prettier-ignore -->\n```js\n// Before (exceeds print width when CJK characters are 2x monospace chars)\nconst x = [\"中文\", \"中文\", \"中文\", \"中文\", \"中文\", \"中文\", \"中文\", \"中文\", \"中文\", \"中文\", \"中文\"];\n\n// After\nconst x = [\n  \"中文\",\n   // ...\n  \"中文\"\n];\n```\n\n#[#3015](https://github.com/prettier/prettier/pull/3015) also ensures that combining characters (e.g. `Á`) are counted as one character.\n\n### Editor Support\n\n#### Implement getSupportInfo() and use it for inference ([#3033](https://github.com/prettier/prettier/pull/3033)) by [@azz](https://github.com/azz)\n\nWe've added a new function to the API (`prettier.getSupportInfo([version])`), and the CLI `--support-info`. This can be used to interrogate Prettier to find out which languages the current version, or an older version, supports. It also provides useful information such as CodeMirror IDs, tmScopes, etc, which can be used to automate some of the work done with lookup tables in text editor integrations.\n\nInternally, we use this information to drive which extensions trigger which parsers, and support some common files that don't have extensions, like `.prettierrc`, `Jakefile`, etc.\n\n<!-- prettier-ignore -->\n```bash\n## prettier knows that this file is JSON now.\n$ prettier --write .prettierrc\n```\n\n#### Split source elements relative to their language. ([#3069](https://github.com/prettier/prettier/pull/3069)) by [@CiGit](https://github.com/CiGit)\n\nThis fixes an issue in editors that support range formatting, where formatting an object would cause Prettier to crash.\n\n---\n\n## Thanks! ❤️\n\nThanks to everyone who contributed to this release, as well as those who raised issues! Prettier has become a highly stable piece of software that a large amount of people trust with their code. We take that trust seriously, and fix rare issues that break code with the highest priority. We can't fix these issues if we don't know about them, so never be afraid to [create an issue](https://github.com/prettier/prettier/issues/new)!"
    },
    {
      "id": "/2017/09/15/1.7.0",
      "metadata": {
        "permalink": "/blog/2017/09/15/1.7.0",
        "source": "@site/blog/2017-09-15-1.7.0.md",
        "title": "Prettier 1.7: JSX tweaks, Pragma, TypeScript and CSS fixes",
        "description": "This release features some bugfixes and tweaks around JSX, TypeScript, CSS, and JavaScript formatting, as well as a couple new features.",
        "date": "2017-09-15T00:00:00.000Z",
        "formattedDate": "September 15, 2017",
        "tags": [],
        "readingTime": 6.105,
        "truncated": true,
        "authors": [
          {
            "name": "@suchipi",
            "url": "https://twitter.com/suchipi"
          }
        ],
        "frontMatter": {
          "author": "@suchipi",
          "authorURL": "https://twitter.com/suchipi",
          "title": "Prettier 1.7: JSX tweaks, Pragma, TypeScript and CSS fixes"
        },
        "prevItem": {
          "title": "Prettier 1.8: Markdown Support",
          "permalink": "/blog/2017/11/07/1.8.0"
        },
        "nextItem": {
          "title": "Prettier 1.6: Config File, JSX",
          "permalink": "/blog/2017/08/29/1.6.0"
        }
      },
      "content": "This release features some bugfixes and tweaks around JSX, TypeScript, CSS, and JavaScript formatting, as well as a couple new features.\n\n<!--truncate-->\n\n## Highlights\n\n### JSX Changes\n\nWe received a lot of community feedback about the changes we made to JSX formatting in the 1.6.0 release, and have made changes to bring formatting closer to community standards and expectations.\n\nIn 1.6.0, we added a second style for ternaries (conditional expressions, `a ? b : c`), based on a format popular in the community where parentheses are used to demarcate JSX content:\n\n<!-- prettier-ignore -->\n```jsx\nconst DinnerOptions = ({ willEatMeat, willEatEggs, willEatVegetables }) => (\n  <div>\n    <div>Let's get some dinner...</div>\n    {willEatMeat ? (\n      <FullMenu />\n    ) : willEatEggs ? (\n      <VegetarianMenu />\n    ) : willEatVegetables ? (\n      <VeganMenu />\n    ) : (\n      <BackupMenu />\n    )}\n  </div>\n);\n```\n\nBefore this was added, prettier only formatted ternaries with one consistent style:\n\n<!-- prettier-ignore -->\n```jsx\nwillEatMeat\n  ? \"Full Menu\"\n  : willEatEggs\n    ? \"Vegetarian Menu\"\n    : willEatVegetables ? \"Vegan Menu\" : \"Backup Menu\";\n```\n\nIn 1.6.0, we used the following heuristic to decide when to use the new \"JSX mode ternaries\":\n\n```\nWe should print a ternary using JSX mode if:\n  * The ternary contains some JSX in it\n  OR\n  * The ternary appears inside of some JSX\n```\n\nHowever, this heuristic caused some [unexpected formatting](https://github.com/prettier/prettier/issues/2729):\n![GitHub Diff showing a ternary containing internationalization strings appearing inside a JSX element being converted to use JSX-mode style ternaries](/blog/assets/github-diff-ternary-in-jsx.png)\n\nSo, in 1.7.0, we have revised our heuristic to just be:\n\n```\nWe should print a ternary using JSX mode if:\n  * The ternary contains some JSX in it\n```\n\nWe hope that this change will result in fewer surprising ternaries.\n\nA big thanks goes out to [@duailibe](https://github.com/duailibe) who implemented this change in addition to several other JSX-related formatting issues that were reported.\n\n### CSS Letter Case Consistency\n\nWe spent some time this release polishing our CSS formatting, and as part of that, [@lydell](https://github.com/lydell) [did some work to normalize letter case](https://github.com/prettier/prettier/issues/2653).\n\nSo now, almost everything in CSS will print using `lower case`.\n\n<!-- prettier-ignore -->\n```css\n/* Before */\nDIV.Foo {\n  HEIGHT: 12PX;\n}\n\n/* After */\ndiv.Foo {\n  height: 12px;\n}\n```\n\nDon't worry, though – Prettier won't touch your `$scss-variables`, `[@less](https://github.com/less)-variables`, or `FunctionNames()`. Preprocess on!\n\n### Pragma Support\n\nThere is a new option called `--require-pragma` (`requirePragma` via the API) which will change prettier's behavior so that it only reformats a file if it has a special \"pragma\" comment at the top of it, that looks like this:\n\n<!-- prettier-ignore -->\n```js\n/**\n * @prettier\n */\n```\n\nor\n\n<!-- prettier-ignore -->\n```js\n/**\n * @format\n */\n```\n\nThis was [@ajhyndman](https://github.com/ajhyndman)'s idea and it was implemented by [@wbinnssmith](https://github.com/wbinnssmith).\n\n## Other Changes\n\n### TypeScript\n\nThere was a bug in Prettier 1.6.1 where an error would be thrown while parsing any TypeScript using the `never` type, for example:\n\n```ts\nObservable.empty<never>();\n```\n\nAlso, Prettier 1.6.1 was incorrectly removing the `declare` keyword from `enum` declarations in `*.d.ts` files:\n\n<!-- prettier-ignore -->\n```ts\n// In\ndeclare const enum Foo {}\n\n// Out\nconst enum Foo {}\n```\n\nBoth of these issues have been fixed. Thanks to [@JamesHenry](https://github.com/JamesHenry) and [@existentialism](https://github.com/existentialism) for these fixes which support our TypeScript community!\n\n### Configuration\n\n#### Configurable Config Precedence\n\nThere is a new CLI option `--config-precedence` which configures how prettier should prioritize config sources. Valid values are:\n\n**`cli-override`** (default) - CLI options take precedence over config file\n\n**`file-override`** - Config file take precedence over CLI options\n\n**`prefer-file`** - If a config file is found will evaluate it and ignore other CLI options. If no config file is found CLI options will evaluate as normal.\n\nThis option adds support to editor integrations where users define their default configuration but want to respect project specific configuration.\n\n#### `prettier.resolveConfig.sync`\n\nPreviously, there was no way via the API to resolve configuration for a source file synchronously. Thanks to [some new additions to `cosmiconfig`](https://github.com/davidtheclark/cosmiconfig/pull/78) by [@sudo](https://github.com/sudo)-suhas, [@ikatyang](https://github.com/ikatyang) was able to add support for this to the prettier API.\n\n### PRs merged in this release\n\n- [**Update README.md**](https://github.com/prettier/prettier/pull/2690) by [@ikatyang](https://github.com/ikatyang)\n- [**Fix config file finding when using stdin**](https://github.com/prettier/prettier/pull/2692) by [@lydell](https://github.com/lydell)\n- [**docs(readme): add and sort cli options**](https://github.com/prettier/prettier/pull/2700) by [@levithomason](https://github.com/levithomason)\n- [**Add Transloadit as a user**](https://github.com/prettier/prettier/pull/2706) by [@kvz](https://github.com/kvz)\n- [**Ensure parens around LogicalExpression inside ExperimentalSpreadProperty**](https://github.com/prettier/prettier/pull/2710) by [@existentialism](https://github.com/existentialism)\n- [**Fix printing declare modifier for TS enum**](https://github.com/prettier/prettier/pull/2711) by [@existentialism](https://github.com/existentialism)\n- [**Handle +/- before numbers in CSS**](https://github.com/prettier/prettier/pull/2713) by [@xtian](https://github.com/xtian)\n- [**Add Tradeshift as a user**](https://github.com/prettier/prettier/pull/2719) by [@sampi](https://github.com/sampi)\n- [**feat(resolve-config): add `.sync()` method**](https://github.com/prettier/prettier/pull/2722) by [@ikatyang](https://github.com/ikatyang)\n- [**refactor(bin): use `resolveConfigFile.sync()`**](https://github.com/prettier/prettier/pull/2728) by [@ikatyang](https://github.com/ikatyang)\n- [**refactor(cli): separate files and make it pure as possible**](https://github.com/prettier/prettier/pull/2730) by [@ikatyang](https://github.com/ikatyang)\n- [**Fix cosmiconfig dependency branch**](https://github.com/prettier/prettier/pull/2731) by [@josephfrazier](https://github.com/josephfrazier)\n- [**Upgrade chalk to v2.1.0**](https://github.com/prettier/prettier/pull/2732) by [@josephfrazier](https://github.com/josephfrazier)\n- [**Add CLI option '--config-precedence'**](https://github.com/prettier/prettier/pull/2733) by [@mitermayer](https://github.com/mitermayer)\n- [**Normalize CSS case**](https://github.com/prettier/prettier/pull/2736) by [@lydell](https://github.com/lydell)\n- [**Make run-external-typescript-tests.js cross-platform**](https://github.com/prettier/prettier/pull/2737) by [@lydell](https://github.com/lydell)\n- [**test(integration): add more tests**](https://github.com/prettier/prettier/pull/2738) by [@ikatyang](https://github.com/ikatyang)\n- [**chore(deps): remove devDependency `cross-spawn`**](https://github.com/prettier/prettier/pull/2739) by [@ikatyang](https://github.com/ikatyang)\n- [**Ignore some things in coverage**](https://github.com/prettier/prettier/pull/2741) by [@lydell](https://github.com/lydell)\n- [**Generalize run-external-typescript-tests.js**](https://github.com/prettier/prettier/pull/2742) by [@lydell](https://github.com/lydell)\n- [**Improve lint-staged setup example by adding more filetypes**](https://github.com/prettier/prettier/pull/2746) by [@MoOx](https://github.com/MoOx)\n- [**fixes dynamic imports**](https://github.com/prettier/prettier/pull/2748) by [@rkurbatov](https://github.com/rkurbatov)\n- [**Refactor error handling**](https://github.com/prettier/prettier/pull/2750) by [@azz](https://github.com/azz)\n- [**chore(github): add issue template**](https://github.com/prettier/prettier/pull/2755) by [@ikatyang](https://github.com/ikatyang)\n- [**Fix: TypeScript never keyword (fixes [#2718](https://github.com/prettier/prettier/pull/2718))**](https://github.com/prettier/prettier/pull/2756) by [@JamesHenry](https://github.com/JamesHenry)\n- [**Group last argument if it's an empty object with a comment**](https://github.com/prettier/prettier/pull/2758) by [@duailibe](https://github.com/duailibe)\n- [**Use `files:` over `types:` in pre-commit configuration**](https://github.com/prettier/prettier/pull/2759) by [@asottile](https://github.com/asottile)\n- [**refactor(runPrettier): reduce duplicate code**](https://github.com/prettier/prettier/pull/2764) by [@ikatyang](https://github.com/ikatyang)\n- [**Change when to print ternaries in JSX mode**](https://github.com/prettier/prettier/pull/2768) by [@duailibe](https://github.com/duailibe)\n- [**Fix chained logical expressions with objects/array/etc inlined**](https://github.com/prettier/prettier/pull/2770) by [@duailibe](https://github.com/duailibe)\n- [**Add option to require @prettier or @format pragma**](https://github.com/prettier/prettier/pull/2772) by [@wbinnssmith](https://github.com/wbinnssmith)\n- [**chore(build): update ISSUE_TEMPLATE.md before publish**](https://github.com/prettier/prettier/pull/2776) by [@ikatyang](https://github.com/ikatyang)\n- [**Fix break on conditional expressions inside return**](https://github.com/prettier/prettier/pull/2779) by [@duailibe](https://github.com/duailibe)\n- [**Support graphql(schema, `query`)**](https://github.com/prettier/prettier/pull/2781) by [@azz](https://github.com/azz)\n- [**fix(prettierignore): support absolute filename**](https://github.com/prettier/prettier/pull/2783) by [@ambar](https://github.com/ambar)\n- [**Keep conditional expressions in one line on method chains**](https://github.com/prettier/prettier/pull/2784) by [@duailibe](https://github.com/duailibe)\n- [**fix(build): update ISSUE_TEMPLATE using regex `?:` instead of `?!`**](https://github.com/prettier/prettier/pull/2785) by [@ikatyang](https://github.com/ikatyang)\n- [**Break closing paren of ConditionalExpression in member chains**](https://github.com/prettier/prettier/pull/2786) by [@duailibe](https://github.com/duailibe)\n- [**fix webstorm integration guide**](https://github.com/prettier/prettier/pull/2796) by [@xsburg](https://github.com/xsburg)\n\n### Issues resolved in this release\n\n- [**Document missing CLI options**](https://github.com/prettier/prettier/issues/2698) reported by [@levithomason](https://github.com/levithomason)\n- [**Formatting of Spread Properties differs between Babylon and TypeScript**](https://github.com/prettier/prettier/issues/2708) reported by [@mariusschulz](https://github.com/mariusschulz)\n- [**Removal of the `declare` modifier from `enum`**](https://github.com/prettier/prettier/issues/2709) reported by [@mariusschulz](https://github.com/mariusschulz)\n- [**Decimal formatting doesn't get all decimals in a rule.**](https://github.com/prettier/prettier/issues/2712) reported by [@itsgreggreg](https://github.com/itsgreggreg)\n- [**Use resolveConfigFile.sync in the CLI**](https://github.com/prettier/prettier/issues/2726) reported by [@azz](https://github.com/azz)\n- [**CSS: Normalize case (lower vs upper) on stuff**](https://github.com/prettier/prettier/issues/2653) reported by [@lydell](https://github.com/lydell)\n- [**Dynamic import with webpackChunkName comment fails**](https://github.com/prettier/prettier/issues/1489) reported by [@pbomb](https://github.com/pbomb)\n- [**TypeScript: never as type parameter causes error: unknown type: undefined**](https://github.com/prettier/prettier/issues/2718) reported by [@hccampos](https://github.com/hccampos)\n- [**commented object values**](https://github.com/prettier/prettier/issues/2617) reported by [@sylvainbaronnet](https://github.com/sylvainbaronnet)\n- [**Configuring pre-commit for jsx, TypeScript, tsx**](https://github.com/prettier/prettier/issues/2745) reported by [@reywright](https://github.com/reywright)\n- [**JSX ternaries include parens**](https://github.com/prettier/prettier/issues/2729) reported by [@jasonLaster](https://github.com/jasonLaster)\n- [**Chained Short Circuit Conditionals in JSX**](https://github.com/prettier/prettier/issues/2714) reported by [@brycehill](https://github.com/brycehill)\n- [**Support @prettier pragma comment**](https://github.com/prettier/prettier/issues/2397) reported by [@ajhyndman](https://github.com/ajhyndman)\n- [**No indentation after breaking return statement**](https://github.com/prettier/prettier/issues/2777) reported by [@jwbay](https://github.com/jwbay)\n- [**Support graphql() fn and so make 2nd arg prettier**](https://github.com/prettier/prettier/issues/2780) reported by [@brikou](https://github.com/brikou)\n- [**prettierignore: cannot use absolute filename**](https://github.com/prettier/prettier/issues/2782) reported by [@ambar](https://github.com/ambar)\n- [**Weird JavaScript format**](https://github.com/prettier/prettier/issues/2775) reported by [@maxime1992](https://github.com/maxime1992)\n\n---\n\nThank you to everyone who contributed to this release, be it through issue creation, code contribution, code review, or general commenting and feedback. Prettier is a community-run project and is able to continue to exist thanks to people like you. Thank you!"
    },
    {
      "id": "/2017/08/29/1.6.0",
      "metadata": {
        "permalink": "/blog/2017/08/29/1.6.0",
        "source": "@site/blog/2017-08-29-1.6.0.md",
        "title": "Prettier 1.6: Config File, JSX",
        "description": "This release adds configuration file support to Prettier, as well as some significant enhancements to JSX printing.",
        "date": "2017-08-29T00:00:00.000Z",
        "formattedDate": "August 29, 2017",
        "tags": [],
        "readingTime": 15.16,
        "truncated": true,
        "authors": [
          {
            "name": "Christopher Chedeau (@vjeux)",
            "url": "https://twitter.com/vjeux"
          }
        ],
        "frontMatter": {
          "author": "Christopher Chedeau (@vjeux)",
          "authorURL": "https://twitter.com/vjeux",
          "title": "Prettier 1.6: Config File, JSX"
        },
        "prevItem": {
          "title": "Prettier 1.7: JSX tweaks, Pragma, TypeScript and CSS fixes",
          "permalink": "/blog/2017/09/15/1.7.0"
        },
        "nextItem": {
          "title": "Prettier 1.5: GraphQL, CSS-in-JS & JSON",
          "permalink": "/blog/2017/06/28/1.5.0"
        }
      },
      "content": "This release adds configuration file support to Prettier, as well as some significant enhancements to JSX printing.\n\n<!--truncate-->\n\nI want to give a special shout out to [@azz](https://github.com/azz) who has been maintaining the repository and implementing a bunch of the changes in this release as I had less time to devote to prettier due to vacation and switching team :)\n\n## Highlights\n\n### Configuration\n\n#### Implement cosmiconfig for workspace configuration ([#2434](https://github.com/prettier/prettier/pull/2434)) by [@azz](https://github.com/azz)\n\nSince the very first release of prettier, people have asked for a `.prettierrc` file. We've been trying to have as few options as possible and tried to avoid being one more `.dotfile` that you have to have when starting a new project.\n\nBut, the truth is, we need to have some way to configure prettier that can be kept in sync with all the integrations. By not having one, we pushed the problem to them and saw a bunch of incompatible ways of handling the problem. So now, it's handled by prettier itself.\n\n<!-- prettier-ignore -->\n```js\n// .prettierrc\n{\n  \"trailingComma\": \"es5\",\n  \"singleQuote\": true\n}\n```\n\nFor more information on configuration file support, see the [README](https://github.com/prettier/prettier/blob/master/README.md#configuration-file).\n\n#### Support .prettierignore files ([#2412](https://github.com/prettier/prettier/pull/2412)) by [@evilebottnawi](https://github.com/evilebottnawi)\n\nAlong with telling what configuration to use, you can write a file `.prettierignore` to tell which files not to convert.\n\n```\n## .prettierignore\ndist/\npackage.json\n```\n\n### JSX\n\n#### Improve JSX Formatting ([#2398](https://github.com/prettier/prettier/pull/2398)) by [@suchipi](https://github.com/suchipi)\n\nThe last big friction point from people trying to adopt prettier was around how JSX was being printed. We went through all the issues that were raised and made a bunch of changes:\n\n- Arrow Function Expressions returning JSX will now add parens when the JSX breaks\n\n<!-- prettier-ignore -->\n```jsx\n// Before\nconst Component = props =>\n  <div>\n    Hello {props.name}!\n  </div>;\n\n// After\nconst Component = props => (\n  <div>\n    Hello {props.name}!\n  </div>\n);\n```\n\n- Conditional expressions within (or containing) JSX are formatted in a different way using parenthesis\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<div>\n  {props.isVisible\n    ? <BaseForm\n        url=\"/auth/google\"\n        method=\"GET\"\n      />\n    : <Placeholder />}\n</div>;\n\n// After\n<div>\n  {props.isVisible ? (\n    <BaseForm\n      url=\"/auth/google\"\n      method=\"GET\"\n    />\n  ) : (\n    <Placeholder />\n  )}\n</div>\n```\n\n- JSX in logical expressions (|| or &&) is always wrapped in parens when the JSX breaks\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<div>\n  {props.isVisible &&\n    <BaseForm\n      url=\"/auth/google\"\n      method=\"GET\"\n    />}\n</div>;\n\n// After\n<div>\n  {props.isVisible && (\n    <BaseForm\n      url=\"/auth/google\"\n      method=\"GET\"\n    />\n  )}\n</div>\n```\n\nHopefully this is going to be more in line with how the majority of the community is writing JSX and we can have prettier be used in more place ;)\n\n#### Inline single expressions in JSX ([#2442](https://github.com/prettier/prettier/pull/2442)) by [@karl](https://github.com/karl)\n\nWith JSX, we started by respecting a lot of line breaks that were in the original source. This had the advantage of doing fewer changes to your codebase but chipped away the value of a consistent pretty printer as the same semantic code could be written in two ways.\n\nDuring each new release we've tightened this and made decisions around how to always print a piece of code. The latest of those is what happens if there's a single child in a JSX object, we're now always going to inline it.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\nreturn (\n  <div>\n    {this.props.test}\n  </div>\n);\nreturn <div>{this.props.test}</div>;\n\n// After\nreturn <div>{this.props.test}</div>;\nreturn <div>{this.props.test}</div>;\n```\n\n#### Ensure there is a line break after leading JSX white space ([#2348](https://github.com/prettier/prettier/pull/2348)) by [@karl](https://github.com/karl)\n\nLeading JSX empty spaces are now on their own line. It looked weird to have them before a tag as it \"indented\" it differently compared to the rest.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<span className=\"d1\">\n  {' '}<a\n    href=\"https://github.schibsted.io/finn/troika\"\n    className=\"link\"\n  />\n</span>\n\n// After\n<span className=\"d1\">\n  {' '}\n  <a\n    href=\"https://github.schibsted.io/finn/troika\"\n    className=\"link\"\n  />\n</span>\n```\n\n## Other Changes\n\n### JSON\n\n#### Use babylon.parseExpression for JSON ([#2476](https://github.com/prettier/prettier/pull/2476)) by [@josephfrazier](https://github.com/josephfrazier)\n\nWe used to use a strict JSON parser that would throw if there was a comment or a trailing comma. This was inconvenient as many JSON files in practice are parsed using JavaScript or json5 that are not as strict. Now, we have relaxed this and are using the JavaScript parser to parse and print JSON. This means that comments will be maintained if there were some.\n\nNote that this is purely additive, if your original file was JSON compliant, it will keep printing a valid JSON.\n\n<!-- prettier-ignore -->\n```js\n// Before\nSyntax error\n\n// After\n{ /* some comment */ \"a\": 1 }\n```\n\n### JavaScript\n\n#### Print 3 or more chained calls on multiple lines ([#2673](https://github.com/prettier/prettier/pull/2673)) by [@azz](https://github.com/azz)\n\nThis was a longstanding issue with the way we print long member chains. Prettier would try and cram all but the final callback onto one line, which reduced the readability. The solution we landed on was to always break over multiple lines if there are three or more function calls in a method chain.\n\n<!-- prettier-ignore -->\n```js\n// Before\nPromise.resolve(0).catch(function(err) {}).then(function(res) {\n  //\n});\n\n// After\nPromise.resolve(0)\n  .catch(function(err) {})\n  .then(function(res) {\n    //\n  });\n```\n\n#### Add more supervisory parens ([#2423](https://github.com/prettier/prettier/pull/2423)) by [@azz](https://github.com/azz)\n\nParenthesis are a hot topic because they are not part of the AST, so prettier ignores all the ones you are putting and re-creating them from scratch. We went through all the things that people reported and came up with a few edge cases that were very confusing when comparisons were chained and `%` was mixed with `*` or `/`.\n\nOne thing that we are not changing is the fact that we remove extra parenthesis around combinations of basic arithmetic operators: `+-*/`.\n\n<!-- prettier-ignore -->\n```js\n// Before\nx !== y === z;\nx * y % z;\n\n// After\n(x !== y) === z;\n(x * y) % z;\n```\n\n#### Implement prettier-ignore inside JSX ([#2487](https://github.com/prettier/prettier/pull/2487)) by [@azz](https://github.com/azz)\n\nIt's useful to be able to ignore pieces of JSX, it's now possible to add a comment inside of a JSX expression to ignore the formatting of the next element.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<Component>\n  {/*prettier-ignore*/}\n  <span ugly format=\"\" />\n</Component>\n\n// Before\n<Component>\n  {/*prettier-ignore*/}\n  <span     ugly  format=''   />\n</Component>\n```\n\n#### Do not swallow prettier-ignore comments ([#2664](https://github.com/prettier/prettier/pull/2664))\n\nIn order to support some edge cases, in the internals, we have the ability to avoid printing comments in a generic way and print them in the call site instead. It turns out that when we used `prettier-ignore`, we didn't print the comments at all! This is now fixed.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\npush(\n  <td> :)\n  </td>,\n);\n\n// After\npush(\n  // prettier-ignore\n  <td> :)\n  </td>,\n);\n```\n\n#### Fix indentation of a do-while condition ([#2359](https://github.com/prettier/prettier/pull/2359)) by [@jsnajdr](https://github.com/jsnajdr)\n\nIt took 6 months for someone to report that do-while were broken when the while condition is multi-line, it confirms my hunch that this construct is not widely used in practice.\n\n<!-- prettier-ignore -->\n```js\n// Before\ndo {} while (\n  someVeryLongFunc(\n  someVeryLongArgA,\n  someVeryLongArgB,\n  someVeryLongArgC\n)\n);\n\n// After\ndo {} while (\n  someVeryLongFunc(\n    someVeryLongArgA,\n    someVeryLongArgB,\n    someVeryLongArgC\n  )\n);\n```\n\n#### Break sequence expressions ([#2388](https://github.com/prettier/prettier/pull/2388)) by [@bakkot](https://github.com/bakkot)\n\nAnother underused feature of JavaScript is sequence expressions. We used to do a bad job at printing them when they would go multi-line, this has been corrected :)\n\n<!-- prettier-ignore -->\n```js\n// Before\n(a = b ? c : \"lllllllllllllllllllllll\"), (a = b\n  ? c\n  : \"lllllllllllllllllllllll\"), (a = b ? c : \"lllllllllllllllllllllll\"), (a = b\n  ? c\n  : \"lllllllllllllllllllllll\"), (a = b ? c : \"lllllllllllllllllllllll\");\n\n// After\n(a = b ? c : 'lllllllllllllllllllllll'),\n  (a = b ? c : 'lllllllllllllllllllllll'),\n  (a = b ? c : 'lllllllllllllllllllllll'),\n  (a = b ? c : 'lllllllllllllllllllllll'),\n  (a = b ? c : 'lllllllllllllllllllllll')\n```\n\n#### Trim trailing whitespace from comments ([#2494](https://github.com/prettier/prettier/pull/2494)) by [@azz](https://github.com/azz)\n\nWe took the stance with prettier to remove all the trailing whitespaces. We used to not touch comments because it's user generated, but that doesn't mean that they should have whitespace :)\n\n<!-- prettier-ignore -->\n```js\n// Before\n// There is some space here ->______________\n\n// After\n// There is some space here ->\n```\n\n#### Fix interleaved comments in class decorators ([#2660](https://github.com/prettier/prettier/pull/2660), [#2661](https://github.com/prettier/prettier/pull/2661))\n\nOur handling for comments inside of the class declaration was very naive, we would just move all the comments to the top. We now are more precise and respect the comments that are interleaved inside of decorators and around `extends`.\n\n<!-- prettier-ignore -->\n```js\n// Before\n// A\n// B\n// C\n@Foo()\n@Bar()\nclass Bar {}\n\n// After\n// A\n@Foo()\n// B\n@Bar()\n// C\nclass Bar {}\n```\n\n#### Improve bind expression formatting ([#2493](https://github.com/prettier/prettier/pull/2493)) by [@azz](https://github.com/azz)\n\nBind expressions are being discussed at TC39 and we figured we could print it with prettier. We used to be very naive about it and just chain it. Now, we use the same logic as we have for method chaining with the `.` operator for it. We also fixed some edge cases where it would output invalid code.\n\n<!-- prettier-ignore -->\n```js\n// Before\nobservable::filter(data => data.someTest)::throttle(() =>\n  interval(10)::take(1)::takeUntil(observable::filter(data => someOtherTest))\n)::map(someFunction);\n\n// After\nobservable\n  ::filter(data => data.someTest)\n  ::throttle(() =>\n    interval(10)::take(1)::takeUntil(observable::filter(data => someOtherTest))\n  )\n  ::map(someFunction);\n```\n\n#### Add support for printing optional catch binding ([#2570](https://github.com/prettier/prettier/pull/2570)) by [@existentialism](https://github.com/existentialism)\n\nIt's being discussed at TC39 to be able to make the argument of a `catch(e)` optional. Let's make sure we can support it in prettier if people use it.\n\n<!-- prettier-ignore -->\n```js\n// Before\nSyntax error\n\n// After\ntry {} catch {}\n```\n\n#### Add support for printing optional chaining syntax ([#2572](https://github.com/prettier/prettier/pull/2572)) by [@azz](https://github.com/azz)\n\nAnother new proposal being discussed at TC39 is an optional chaining syntax. This is currently a [stage 1 proposal](https://github.com/tc39/proposal-optional-chaining), so the syntax may change at any time.\n\n<!-- prettier-ignore -->\n```js\nobj?.prop       // optional static property access\nobj?.[expr]     // optional dynamic property access\nfunc?.(...args) // optional function or method call\n```\n\n#### Handle Closure Compiler type cast syntax correctly ([#2484](https://github.com/prettier/prettier/pull/2484)) by [@yangsu](https://github.com/yangsu)\n\nComments are tricky to get right, but especially when they have meaning based on where they are positioned. We're now special casing the way we deal with comments used as type cast for Closure Compiler such that they keep having the same semantics.\n\n<!-- prettier-ignore -->\n```js\n// Before\nlet assignment /** @type {string} */ = getValue();\n\n// After\nlet assignment = /** @type {string} */ (getValue());\n```\n\n#### Inline first computed property lookup in member chain ([#2670](https://github.com/prettier/prettier/pull/2670)) by [@azz](https://github.com/azz)\n\nIt looks kind of odd to have a computed property lookup on the next line, so we added a special case to inline it.\n\n<!-- prettier-ignore -->\n```js\n// Before\ndata\n  [key]('foo')\n  .then(() => console.log('bar'))\n  .catch(() => console.log('baz'));\n\n// After\ndata[key]('foo')\n  .then(() => console.log('bar'))\n  .catch(() => console.log('baz'));\n```\n\n### Flow\n\n#### Support opaque types and export star ([#2543](https://github.com/prettier/prettier/pull/2543), [#2542](https://github.com/prettier/prettier/pull/2542)) by [@existentialism](https://github.com/existentialism)\n\nThe flow team introduced two very exciting features under a new syntax. We now support them in prettier. I've personally been waiting for [opaque types](https://medium.com/flow-type/hiding-implementation-details-with-flows-new-opaque-type-aliases-feature-40e188c2a3f9) for a veerrryyyy long time!\n\n<!-- prettier-ignore -->\n```ts\n// Before\nSyntax error\n\n// After\nopaque type ID = string;\nexport type * from \"module\";\n```\n\n#### Strip away unnecessary quotes in keys in type objects and interfaces ([#2643](https://github.com/prettier/prettier/pull/2643)) by [@jackyho112](https://github.com/jackyho112)\n\nWe've been doing this on JavaScript objects since the early days of prettier but forgot to apply the same thing to Flow and TypeScript types.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype A = {\n  \"string\": \"A\";\n}\n\n// After\ntype A = {\n  string: \"A\";\n}\n```\n\n#### Print TypeParameter even when unary function type ([#2406](https://github.com/prettier/prettier/pull/2406)) by [@danwang](https://github.com/danwang)\n\nOopsy, we were dropping the generic in this very specific case.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype myFunction = A => B;\n\n// After\ntype myFunction = <T>(A) => B;\n```\n\n#### Keep parens around FunctionTypeAnnotation inside ArrayTypeAnnotation ([#2561](https://github.com/prettier/prettier/pull/2561)) by [@azz](https://github.com/azz)\n\nParenthesis... someday we'll get all of them fixed :)\n\n<!-- prettier-ignore -->\n```ts\n// Before\nconst actionArray: () => void[] = [];\n\n// After\nconst actionArray: (() => void)[] = [];\n```\n\n### TypeScript\n\n#### Support TypeScript 2.5 RC ([#2672](https://github.com/prettier/prettier/pull/2672)) by [@azz](https://github.com/azz)\n\n[TypeScript 2.5 RC](https://blogs.msdn.microsoft.com/typescript/2017/08/17/announcing-typescript-2-5-rc/) was recently announced, allowing you to use the upcoming \"optional catch binding\" syntax in TypeScript, too. 🎉\n\n#### Don't add namespace keyword to global declaration ([#2329](https://github.com/prettier/prettier/pull/2329)) by [@azz](https://github.com/azz)\n\n<!-- prettier-ignore -->\n```ts\n// Before\nnamespace global {\n  export namespace JSX {  }\n}\n\n// After\nglobal {\n  export namespace JSX {}\n}\n```\n\n#### Fix <this.Component /> ([#2472](https://github.com/prettier/prettier/pull/2472)) by [@backus](https://github.com/backus)\n\nThanks to the untyped and permissive nature of JavaScript, we've been able to concat undefined to a string and get some interesting code as a result. Now fixed for this case :)\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<undefined.Author />\n\n// After\n<this.Author />\n```\n\n#### Allow type assertions to hug ([#2439](https://github.com/prettier/prettier/pull/2439)) by [@azz](https://github.com/azz)\n\nWe want to make sure that all the special cases that we added for JavaScript and Flow also work for TypeScript constructs. In this case, objects should also hug if they are wrapped in a `as` operator.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst state = JSON.stringify(\n  {\n    next: window.location.href,\n    nonce,\n  } as State\n);\n\n// After\nconst state = JSON.stringify({\n  next: window.location.href,\n  nonce,\n} as State);\n```\n\n#### Remove parens for type assertions in binary expressions ([#2419](https://github.com/prettier/prettier/pull/2419)) by [@azz](https://github.com/azz)\n\nMost of the time we add parenthesis for correctness but in this case, we added them for nothing, so we can just get rid of them and have a cleaner code :)\n\n<!-- prettier-ignore -->\n```ts\n// Before\n(<x>a) || {};\n\n// After\n<x>a || {};\n```\n\n#### Print parens around type assertion as LHS in assignment ([#2525](https://github.com/prettier/prettier/pull/2525)) by [@azz](https://github.com/azz)\n\nYet another case of missing parenthesis. Thankfully we're getting very few of them nowadays and they are for extremely rare edge cases.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nfoo.bar as Baz = [bar];\n\n// After\n(foo.bar as Baz) = [bar];\n```\n\n#### Print declare for TSInterfaceDeclaration ([#2574](https://github.com/prettier/prettier/pull/2574)) by [@existentialism](https://github.com/existentialism)\n\nThe `declare` keyword doesn't do anything for `interface` so we never put it there. However, it felt weird if you were in a declaration file and seeing everything have `declare` before it except for interfaces. So now we reprint `declare` if it was there in the first place.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ninterface Dictionary<T> {\n  [index: string]: T\n}\n\n// After\ndeclare interface Dictionary<T> {\n  [index: string]: T\n}\n```\n\n### CSS\n\n#### Normalize quotes in CSS ([#2624](https://github.com/prettier/prettier/pull/2624)) by [@lydell](https://github.com/lydell)\n\nIn order to get a first version of CSS to ship, we kept string quotes as is. We are now respecting the `singleQuote` option of prettier. The difficulty here was to make sure that we output correct code for all the crazy escapes, unicode characters, emoji, special rules like charset which only work with double quotes...\n\n<!-- prettier-ignore -->\n```css\n// Before\ndiv {\n  content: \"abc\";\n}\n\n// After\ndiv {\n  content: 'abc';\n}\n```\n\n#### Normalize numbers in CSS ([#2627](https://github.com/prettier/prettier/pull/2627)) by [@lydell](https://github.com/lydell)\n\nAnother place where we can reuse the logic we've done for JavaScript to improve CSS printing.\n\n<!-- prettier-ignore -->\n```css\n// Before\nfoo {\n  border: 1px solid rgba(0., 0.0, .0, .3);\n}\n\n// After\nfoo {\n  border: 1px solid rgba(0, 0, 0, 0.3);\n}\n```\n\n#### Quote unquoted CSS attribute values in selectors ([#2644](https://github.com/prettier/prettier/pull/2644)) by [@lydell](https://github.com/lydell)\n\nI can never quite remember the rules behind quotes around attributes so we're now always putting quotes there.\n\n<!-- prettier-ignore -->\n```js\n// Before\na[id=test] {}\n\n// After\na[id=\"test\"] {}\n```\n\n#### Add support for css keyword ([#2337](https://github.com/prettier/prettier/pull/2337)) by [@zanza00](https://github.com/zanza00)\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst header = css`.top-bar {background: black;margin: 0;position: fixed;}`\n\n// After\nconst header = css`\n  .top-bar {\n    background: black;\n    margin: 0;\n    position: fixed;\n  }\n`;\n```\n\n#### Support styled-components with existing component ([#2552](https://github.com/prettier/prettier/pull/2552), [#2619](https://github.com/prettier/prettier/pull/2619)) by [@azz](https://github.com/azz)\n\nstyled-components has a lot of different variants for tagging template literals as CSS. It's not ideal that we've got to encode all those ways inside of prettier but since we started, might as well do it for real.\n\n<!-- prettier-ignore -->\n```js\nstyled(ExistingComponent)`\n  css: property;\n`;\n\nstyled.button.attr({})`\n  border: rebeccapurple;\n`;\n```\n\n#### Trim whitespace in descendant combinator ([#2411](https://github.com/prettier/prettier/pull/2411)) by [@azz](https://github.com/azz)\n\nThe CSS parsers we use do not give us a 100% semantic tree: in many occasions they bail and just give us what is being entered. It's up to us to make sure we clean this up while maintaining correctness. In this case, we just printed spaces between selectors as is but we know it's correct to always replace it by a single space.\n\n<!-- prettier-ignore -->\n```cs\n// Before\n.hello\n\n            .how-you-doin {\n  height: 42;\n}\n\n// After\n.hello .how-you-doin {\n  height: 42;\n}\n```\n\n#### Strip BOM before parsing ([#2373](https://github.com/prettier/prettier/pull/2373)) by [@azz](https://github.com/azz)\n\nI still have nightmares from dealing with [BOM](https://en.wikipedia.org/wiki/Byte_order_mark) in a previous life. Thankfully, in 2017 it's no longer a big issue as most tooling is now aware of it. Thanks [@azz](https://github.com/azz) for fixing an edge cases related to CSS parsing.\n\n<!-- prettier-ignore -->\n```css\n// Before\n[BOM]/* Block comment *\nhtml {\n  content: \"#{1}\";\n}\n```\n\n<!-- prettier-ignore -->\n```css\n// After\n[BOM]/* Block comment */\nhtml {\n  content: \"#{1}\";\n}\n```\n\n### GraphQL\n\n#### Add support for range-formatting GraphQL ([#2319](https://github.com/prettier/prettier/pull/2319)) by [@josephfrazier](https://github.com/josephfrazier)\n\nIf you tried to use the range formatting feature in a GraphQL file, it would throw an exception, now it properly worked again and only reformats the piece you selected.\n\n#### Add `.gql` file extension to be parsed as GraphQL ([#2357](https://github.com/prettier/prettier/pull/2357)) by [@rrdelaney](https://github.com/rrdelaney)\n\nAt Facebook, we use `.graphql` extension but it looks like it's common to have `.gql` as well, doesn't cost a lot to support it in the heuristic that figures out what parser to use.\n\n### CLI\n\n#### Support multiple patterns with ignore pattern ([#2356](https://github.com/prettier/prettier/pull/2356)) by [@evilebottnawi](https://github.com/evilebottnawi)\n\nIt was already possible to have multiple glob patterns but they would be additive, with this change, you can add a glob pattern to ignore some files. It should be very handy to ignore folders that are deeply nested.\n\n<!-- prettier-ignore -->\n```sh\nprettier --write '{**/*,*}.{js,jsx,json}' '!vendor/**'\n```\n\n#### Make --list-different to work with --stdin ([#2393](https://github.com/prettier/prettier/pull/2393)) by [@josephfrazier](https://github.com/josephfrazier)\n\nThis is a handy way of knowing if prettier would print a piece of code in a different way. We already had all the concepts in place, we just needed to wire them up correctly.\n\n<!-- prettier-ignore -->\n```shellsession\n$ echo 'call ( ) ;' | prettier --list-different\n(stdin)\n$ echo $?\n1\n```"
    },
    {
      "id": "/2017/06/28/1.5.0",
      "metadata": {
        "permalink": "/blog/2017/06/28/1.5.0",
        "source": "@site/blog/2017-06-28-1.5.0.md",
        "title": "Prettier 1.5: GraphQL, CSS-in-JS & JSON",
        "description": "This release adds GraphQL formatting support, CSS-in-JS (including styled-components), and JSON support to Prettier.",
        "date": "2017-06-28T00:00:00.000Z",
        "formattedDate": "June 28, 2017",
        "tags": [],
        "readingTime": 16.12,
        "truncated": true,
        "authors": [
          {
            "name": "Christopher Chedeau (@vjeux)",
            "url": "https://twitter.com/vjeux"
          }
        ],
        "frontMatter": {
          "author": "Christopher Chedeau (@vjeux)",
          "authorURL": "https://twitter.com/vjeux",
          "title": "Prettier 1.5: GraphQL, CSS-in-JS & JSON"
        },
        "prevItem": {
          "title": "Prettier 1.6: Config File, JSX",
          "permalink": "/blog/2017/08/29/1.6.0"
        },
        "nextItem": {
          "title": "Prettier 1.4: TypeScript and CSS support",
          "permalink": "/blog/2017/06/03/1.4.0"
        }
      },
      "content": "This release adds GraphQL formatting support, CSS-in-JS (including styled-components), and JSON support to Prettier.\n\n<!--truncate-->\n\nThis is the release I've been waiting for a very long time: one that has only minimal changes to JavaScript!\n\nFor the past 6 months, we kept doing changes to various aspects of printing JavaScript, with the hope that one day we would get to a stable place. No automated tool is going to print perfect code for all the possible edge cases. The goal is to find a good place where when people report code that is printed in a funny way, we can't make it better without making other pieces of code look worse, introduce behavior that's very hard to understand for humans and doesn't introduce some disproportionate complexity to the codebase.\n\nWe're not 100% there yet, but we're closer than ever!\n\nNow that JavaScript needs for support is trending down, it's an opportunity to support other languages that front-end developers are working on and want formatted. We've introduced TypeScript and CSS in the last release and are doing a batch of fixes for them in this release. We're also adding support for new languages: GraphQL queries, embedding CSS-in-JS and JSON are now available in prettier!\n\n#### Blog Post: [Adding a new layout strategy to Prettier](https://medium.com/geckoboard-under-the-hood/adding-a-new-layout-strategy-to-prettier-8d33084c0f99) by [@karl](https://github.com/karl)\n\nPrettier is not only a useful tool but it's also a really cool piece of technology. [@karl](https://github.com/karl) spent a bunch of time improving JSX support and in the process implemented a new primitive to prettier: `fill`. He wrote a very interesting blog post [Adding a new layout strategy to Prettier](https://medium.com/geckoboard-under-the-hood/adding-a-new-layout-strategy-to-prettier-8d33084c0f99) that I highly recommend reading if you're interested in how prettier is working behind the scenes.\n\n### GraphQL\n\nThanks to [@stubailo](https://github.com/stubailo), [@jnwng](https://github.com/jnwng), [@tgriesser](https://github.com/tgriesser) and [@azz](https://github.com/azz), prettier now supports printing GraphQL queries!\n\nIt works for `.graphql` files and within JavaScript templates that start with `graphql`, `graphql.experimental` and `gql` in order to work with [Relay](https://facebook.github.io/relay/) and [Apollo](https://www.apollodata.com/).\n\n<!-- prettier-ignore -->\n```jsx\nReactDOM.render(\n  <QueryRenderer\n    query={graphql`\n      query appQuery {\n        viewer {\n          ...TodoApp_viewer\n        }\n      }\n    `}\n    // ...\n  />,\n  mountNode\n);\n```\n\nNote that it only supports the open source syntax of GraphQL, therefore doesn't work with Relay Classic, it only works with Relay Modern.\n\n### CSS-in-JS\n\nIf you are using [styled-components](https://github.com/styled-components/styled-components) or [styled-jsx](https://github.com/zeit/styled-jsx), prettier will now reformat the CSS inside of your template expressions. Thanks to [@pomber](https://github.com/pomber) for the awesome work!\n\n<!-- prettier-ignore -->\n```js\nconst EqualDivider = styled.div`\n  margin: 0.5rem;\n  padding: 1rem;\n  background: papayawhip;\n  > * {\n    flex: 1;\n    &:not(:first-child) {\n      ${props => (props.vertical ? \"margin-top\" : \"margin-left\")}: 1rem;\n    }\n  }\n`;\n```\n\n### JSON\n\nThis was pretty straightforward to implement but nonetheless very useful. Thanks to [@josephfrazier](https://github.com/josephfrazier) for doing it :)\n\n<!-- prettier-ignore -->\n```json\n{\n  \"name\": \"prettier\",\n  \"version\": \"1.5.0\",\n  \"description\": \"Prettier is an opinionated JavaScript formatter\",\n  \"bin\": {\n    \"prettier\": \"./bin/prettier.js\"\n  }\n}\n```\n\n### CSS\n\nI'm really excited because we only put a few days to build the initial CSS support and it has worked surprisingly well. This release brings a handful of important improvements to CSS but nothing that required big changes.\n\n#### CSS: Every selector is now printed in its own line ([#2047](https://github.com/prettier/prettier/pull/2047)) by [@yuchi](https://github.com/yuchi)\n\nThe biggest unknown when printing CSS was how to deal with multiple selectors. The initial approach we took was to use the 80 columns rule where we would only split if it was bigger than that. Many people reported that they were using another strategy for this: always break after a `,`. It turns out that many popular codebases are using this approach and it feels good as you can see the structure of the selectors when layed out on-top of each others.\n\n<!-- prettier-ignore -->\n```css\n// Before\n.clusterPlannerDialog input[type=\"text\"], .clusterPlannerDialog .uiTypeahead {\n  color: #333;\n}\n\n// After\n.clusterPlannerDialog input[type=\"text\"],\n.clusterPlannerDialog .uiTypeahead {\n  color: #333;\n}\n```\n\n#### CSS: lowercase hex colors ([#2203](https://github.com/prettier/prettier/pull/2203)) by [@azz](https://github.com/azz)\n\nThe concept of code formatting has blurry boundaries. The core aspect of it is around whitespaces but some things like single vs double quotes and semi-colons are usually bundled with it. With prettier on JavaScript, we also lightly reformat strings by removing extra `\\` and normalize numbers. For CSS, we need to do a similar interpretation of where the boundary ends. For colors, we decided to turn all the letters into lowercase and stop there. Turning rgb() into hex or 6 hex into 3 hex is out of scope.\n\n<!-- prettier-ignore -->\n```css\n// Before\n.foo {\n  color: #AAA;\n  -o-color: #fabcd3;\n  -ms-color: #AABBCC;\n}\n\n// After\n.foo {\n  color: #aa;\n  -o-color: #fabcd3;\n  -ms-color: #aabbcc;\n}\n```\n\n#### CSS: Use fill for CSS values ([#2224](https://github.com/prettier/prettier/pull/2224))\n\nThe new fill primitive turned out to be very useful for CSS. For long values, instead of breaking and putting a `\\n` before every element, we can instead only put a `\\n` when it goes over the limit. It leads to much better looking code.\n\n<!-- prettier-ignore -->\n```scss\n// Before\nfoo {\n  border-left:\n    1px\n    solid\n    mix($warningBackgroundColors, $warningBorderColors, 50%);\n}\n\n// After\nfoo {\n  border-left: 1px solid\n    mix($warningBackgroundColors, $warningBorderColors, 50%);\n}\n```\n\n#### CSS: Allow long media rules to break ([#2219](https://github.com/prettier/prettier/pull/2219))\n\nThis is another small fix in the journey of properly supporting a new language. We now encode the ability to break on long `@media` rules.\n\n<!-- prettier-ignore -->\n```css\n// Before\n@media all and (-webkit-min-device-pixel-ratio: 1.5), all and (-o-min-device-pixel-ratio: 3/2), all and (min--moz-device-pixel-ratio: 1.5), all and (min-device-pixel-ratio: 1.5) {\n}\n\n// After\n@media all and (-webkit-min-device-pixel-ratio: 1.5),\n  all and (-o-min-device-pixel-ratio: 3/2),\n  all and (min--moz-device-pixel-ratio: 1.5),\n  all and (min-device-pixel-ratio: 1.5) {\n}\n```\n\n#### CSS: Print @else on same line as } ([#2088](https://github.com/prettier/prettier/pull/2088)) by [@azz](https://github.com/azz)\n\nLess and SCSS are turning into real programming languages :) Step by step, we're starting to print all their constructs in the same way as JavaScript. This time, it's the `else` placement.\n\n<!-- prettier-ignore -->\n```scss\n// Before\n@if $media == phonePortrait {\n  $k: .15625;\n}\n@else if $media == tabletPortrait {\n  $k: .065106;\n}\n\n// After\n@if $media == phonePortrait {\n  $k: .15625;\n} @else if $media == tabletPortrait {\n  $k: .065106;\n}\n```\n\n#### CSS: implement prettier-ignore ([#2089](https://github.com/prettier/prettier/pull/2089)) by [@azz](https://github.com/azz)\n\nWhile we want prettier to format the entire codebase, there are times where we \"know better\" and want an escape hatch. This is where the `prettier-ignore` comment comes in. It wasn't working for CSS but that was an oversight, now it is implemented :)\n\n<!-- prettier-ignore -->\n```css\n// Before\nfoo {\n  /* prettier-ignore */\n  thing: foo;\n  -ms-thing: foo;\n}\n\n// After\nfoo {\n  /* prettier-ignore */\n  thing:     foo;\n  -ms-thing: foo;\n}\n```\n\n#### CSS: Fix css-modules composes breaking with long line width ([#2190](https://github.com/prettier/prettier/pull/2190)) by [@tdeekens](https://github.com/tdeekens)\n\nIn order to be fast, many \"packagers\" do not parse files in order to extract dependencies but instead use a crude regex. This is a reason why we don't break long `require()` calls and it happens to also affect CSS Modules. If you add new lines in the `composes` field, it doesn't recognize it anymore. So we're no longer breaking it there, even if it goes over 80 columns.\n\n<!-- prettier-ignore -->\n```css\n// Before\n.reference {\n  composes:\n    selector\n    from\n    \"a/long/file/path/exceeding/the/maximum/length/forcing/a/line-wrap/file.css\";\n}\n\n// After\n.reference {\n  composes: selector from \"a/long/file/path/exceeding/the/maximum/length/forcing/a/line-wrap/file.css\";\n}\n```\n\n#### CSS: First try scss when there's an [@import](https://github.com/import) with comma ([#2225](https://github.com/prettier/prettier/pull/2225))\n\nWe made a decision to have only a single high level \"parser\" for CSS, SCSS and Less even though we are using `postcss-less` and `postcss-scss` under the hood. We use a regex to figure out which parser to try first and fallback to the other one if a syntax error is thrown. Unfortunately, for certain features, the first (incorrect) parser doesn't throw and instead skips some elements. So, we need to beef up the regex to make sure we are right for the early detection.\n\nThankfully, this hack is working well in practice. If we find a lot more edge cases, we'll likely want to do the right thing(tm) and split them into two parsers.\n\n<!-- prettier-ignore -->\n```scss\n// Before\n@import \"text-shadow\";\n\n// After\n@import \"rounded-corners\", \"text-shadow\";\n```\n\n### TypeScript\n\nTypeScript support is now solid, all the changes for this release are small edge cases.\n\n#### TypeScript: print arrow function type params on same line as params ([#2101](https://github.com/prettier/prettier/pull/2101)) by [@azz](https://github.com/azz)\n\nThe core algorithm of prettier is to expand a group if all the elements do not fit. It works really well in practice for most of JavaScript but there's one case it doesn't handle very well is when there are two groups side by side, in this case: `<Generics>(Arguments)`. We have to carefully create groups such that arguments expand first as this is generally what people expect.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nexport const forwardS = R.curry(<\n  V,\n  T\n>(prop: string, reducer: ReducerFunction<V, T>, value: V, state: {[name: string]: T}) =>\n  R.assoc(prop, reducer(value, state[prop]), state)\n);\n\n// After\nexport const forwardS = R.curry(\n  <V, T>(\n    prop: string,\n    reducer: ReducerFunction<V, T>,\n    value: V,\n    state: { [name: string]: T }\n  ) => R.assoc(prop, reducer(value, state[prop]), state)\n);\n```\n\n#### TypeScript: keep parens around with yield/await non-null assertion ([#2149](https://github.com/prettier/prettier/pull/2149)) by [@azz](https://github.com/azz)\n\nFor better or worse, we decided to manually handle adding parenthesis. So when a new operator is introduced, we need to make sure that we add correct parenthesis when nested with any other combination of operators. In this case, we missed await inside of TypeScript `!`.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nconst bar = await foo(false)!;\n\n// After\nconst bar = (await foo(false))!;\n```\n\n#### TypeScript: Print {} in import if it's in the source ([#2150](https://github.com/prettier/prettier/pull/2150)) by [@azz](https://github.com/azz)\n\nWe use typescript-eslint-parser project that translates TypeScript AST into estree AST in order for prettier to print it. From time to time we're going to find edge cases that it doesn't handle yet. In this case, it didn't give a way to tell that there's an empty `{}`, which apparently is important for TypeScript. Thankfully, the team is very responsive and they fixed it after we put a workaround inside of prettier.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nimport from \"@types/googlemaps\";\n\n// After\nimport {} from \"@types/googlemaps\";\n```\n\n#### TypeScript: Always break interfaces onto multiple lines ([#2161](https://github.com/prettier/prettier/pull/2161)) by [@azz](https://github.com/azz)\n\nThe code that implements `interface` is shared with the code that prints `object`s, which contains a rule to keep them expanded if there's a `\\n` inside. But, this is not the intended behavior for interfaces. We always want to expand, like we do for classes, even if it fits 80 columns.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ninterface FooBar { [id: string]: number; }\n\n// After\ninterface FooBar {\n  [id: string]: number;\n}\n```\n\n#### TypeScript: Fix extra semicolon in ambient typescript declaration emit ([#2167](https://github.com/prettier/prettier/pull/2167)) by [@azz](https://github.com/azz)\n\n`no-semi` and `semi` are often requested but on the prettier team we're one step ahead and implemented `two-semi` for you! Just kidding, it was a bug and is now fixed ;)\n\n<!-- prettier-ignore -->\n```ts\n// Before\ndeclare module \"classnames\" {\n  export default function classnames(\n    ...inputs: (string | number | false | object | undefined)[]\n  ): string;;\n}\n\n// After\ndeclare module \"classnames\" {\n  export default function classnames(\n    ...inputs: (string | number | false | object | undefined)[]\n  ): string;\n}\n```\n\n#### TypeScript: group function params in call/construct signatures ([#2169](https://github.com/prettier/prettier/pull/2169)) by [@azz](https://github.com/azz)\n\nAdding a comment before a method used to take into account the comment length and would often expand the method when it wasn't expected. Thankfully, it was a simple fix, just wrap the output in a `group`.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ninterface TimerConstructor {\n  // Line-splitting comment\n  new (\n    interval: number,\n    callback: (handler: Timer) => void\n  ): Timer;\n}\n\ninterface TimerConstructor {\n  // Line-splitting comment\n  new (interval: number, callback: (handler: Timer) => void): Timer;\n}\n```\n\n#### TypeScript: Upgrade tsep ([#2183](https://github.com/prettier/prettier/pull/2183)) by [@azz](https://github.com/azz)\n\nThis bug was very annoying if you ran into it: anytime you formatted the code, it would add one more `_` to the object key!\n\n<!-- prettier-ignore -->\n```ts\n// Before\nobj = {\n  __: 42\n  ___: 42\n};\n\n// After\nobj = {\n  _: 42\n  __: 42\n};\n```\n\n#### TypeScript: break on multiple interface extends ([#2085](https://github.com/prettier/prettier/pull/2085)) by [@azz](https://github.com/azz)\n\nUnlike in JavaScript, TypeScript lets you extend multiple classes at once. It turns out that people use this feature and prettier now does a better job at printing it.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nexport interface ThirdVeryLongAndBoringInterfaceName extends AVeryLongAndBoringInterfaceName, AnotherVeryLongAndBoringInterfaceName, AThirdVeryLongAndBoringInterfaceName {}\n\n// After\nexport interface ThirdVeryLongAndBoringInterfaceName\n  extends AVeryLongAndBoringInterfaceName,\n    AnotherVeryLongAndBoringInterfaceName,\n    AThirdVeryLongAndBoringInterfaceName {}\n```\n\n#### TypeScript: handle ObjectPattern instead of ObjectExpression inside BinaryExpression ([#2238](https://github.com/prettier/prettier/pull/2238)) by [@azz](https://github.com/azz)\n\nThis one isn't very interesting, it's an edge case that's not properly handled in the TypeScript -> estree conversion.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ncall(c => { bla: 1 }) || [];\n\n// After\ncall(c => ({ bla: 1 })) || [];\n```\n\n#### Preserve lines after directives ([#2070](https://github.com/prettier/prettier/pull/2070))\n\nBy supporting TypeScript, prettier is now being used in a lot of Angular codebases which exercises edge cases that were not properly handled. In this case, we didn't preserve empty lines after directives inside of a function.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nexport default class {\n  constructor($log, $uibModal) {\n    \"ngInject\";\n    Object.assign(this, { $log, $uibModal });\n\n// After\nexport default class {\n  constructor($log, $uibModal) {\n    \"ngInject\";\n\n    Object.assign(this, { $log, $uibModal });\n```\n\n### JavaScript\n\nThis release is very light in terms of JavaScript changes, which is awesome. We're starting to see the light at the end of the tunnel and get towards a great pretty printer. We're never going to get to a 100% perfect automatic pretty printer. The goal is that for every issue we get, there are no clear ways to improve the way it is printed without regressing other pieces.\n\n#### Allow JSX lines to be recombined ([#1831](https://github.com/prettier/prettier/pull/1831)) by [@karl](https://github.com/karl)\n\nThe goal of prettier is to have a consistent way to format your code: given an AST, we always print the same way. In two places we had to compromise and read the original format: JSX and Objects. With this change, we're no longer relying on the original input for JSX with text inside. This lets us reflow text inside of JSX.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\nconst Abc = () => {\n  return (\n    <div>\n      Please state your\n      {\" \"}\n      <b>name</b>\n      {\" \"}\n      and\n      {\" \"}\n      <b>occupation</b>\n      {\" \"}\n      for the board of directors.\n    </div>\n  );\n};\n\n// After\nconst Abc = () => {\n  return (\n    <div>\n      Please state your <b>name</b> and <b>occupation</b> for the board of\n      directors.\n    </div>\n  );\n}\n```\n\n#### Break on non-literal computed member expression ([#2087](https://github.com/prettier/prettier/pull/2087)) by [@azz](https://github.com/azz)\n\nPrinting member chains is the most complicated piece of prettier and we keep finding small tweaks we can do to make it a better experience.\n\n<!-- prettier-ignore -->\n```js\n// Before\nnock(/test/)\n  .matchHeader(\"Accept\", \"application/json\")[httpMethodNock(method)](\"/foo\")\n  .reply(200, {\n    foo: \"bar\",\n  });\n\n// After\nnock(/test/)\n  .matchHeader(\"Accept\", \"application/json\")\n  [httpMethodNock(method)](\"/foo\")\n  .reply(200, {\n    foo: \"bar\",\n  });\n```\n\n#### Indent first variable in one-var scenario ([#2095](https://github.com/prettier/prettier/pull/2095)) by [@azz](https://github.com/azz)\n\nUp until recently we haven't done much to support printing multiple variables in a single declaration as the most common practice is to do one variable declaration per variable. For single declarations, we don't want to indent it, but it turns out that we do when there are other ones afterwards, otherwise it looks weird.\n\n<!-- prettier-ignore -->\n```js\n// Before\nvar templateTagsMapping = {\n '%{itemIndex}': 'index',\n '%{itemContentMetaTextViews}': 'views'\n},\n  separator = '<span class=\"item__content__meta__separator\">•</span>';\n\n// After\nvar templateTagsMapping = {\n   '%{itemIndex}': 'index',\n   '%{itemContentMetaTextViews}': 'views'\n  },\n  separator = '<span class=\"item__content__meta__separator\">•</span>';\n```\n\n#### Allow break with both default named import ([#2096](https://github.com/prettier/prettier/pull/2096)) by [@azz](https://github.com/azz)\n\nThis one is an unfortunate regression from 1.4 where we inlined import that only contained a single element. Turns out the definition of a single element allowed a single type and a single element. This is now corrected!\n\n<!-- prettier-ignore -->\n```js\n// Before\nimport transformRouterContext, { type TransformedContextRouter } from '../../helpers/transformRouterContext';\n\n// After\nimport transformRouterContext, {\n  type TransformedContextRouter\n} from '../../helpers/transformRouterContext';\n```\n\n#### Turn allowImportExportEverywhere on ([#2207](https://github.com/prettier/prettier/pull/2207)) by [@zimme](https://github.com/zimme)\n\nThe goal of prettier is to format code people write in practice, so we enable loose/experimental modes for all the parsers we support. Babylon allows you to write import within a function, which is not part of the standard, but it doesn't cost us much to allow it.\n\n<!-- prettier-ignore -->\n```js\n// Before\nParseError\n\n// After\nfunction f() {\n  import x from 'x';\n}\n```\n\n#### Support inline template for new calls ([#2222](https://github.com/prettier/prettier/pull/2222))\n\nWe keep adding features for function calls and have to backport them to new calls as they have a different AST node type but in practice we want to treat them the same. This fix refactored the two so that they are going through the same call site, so hopefully should prevent more from sneaking in.\n\n<!-- prettier-ignore -->\n```js\n// Before\nnew Error(\n  formatErrorMessage`\n    This is a really bad error.\n    Which has more than one line.\n  `\n);\n\n// After\nnew Error(formatErrorMessage`\n  This is a really bad error.\n  Which has more than one line.\n`);\n```\n\n#### Don't indent + in object value ([#2227](https://github.com/prettier/prettier/pull/2227))\n\nWhen we switched to using the same heuristic for assignment (`a = b`) for objects (`{a: b}`), we forgot to fix the indentation. Now it's fixed.\n\n<!-- prettier-ignore -->\n```js\n// Before\nvar abc = {\n  thing:\n    \"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf\" +\n      \"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf\" +\n      \"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf\",\n}\n\n// After\nvar abc = {\n  thing:\n    \"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf\" +\n    \"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf\" +\n    \"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf\",\n}\n```\n\n#### Handle conditions inside of a ternary ([#2228](https://github.com/prettier/prettier/pull/2228))\n\nPrettier already had a special case when the expression was a conditional but it didn't apply when the conditional was the left part of a ternary. Now it does.\n\n<!-- prettier-ignore -->\n```js\n// Before\nroom = room.map((row, rowIndex) =>\n  row.map(\n    (col, colIndex) =>\n      rowIndex === 0 ||\n        colIndex === 0 ||\n        rowIndex === height ||\n        colIndex === width\n        ? 1\n        : 0\n  )\n);\n\n// After\nroom = room.map((row, rowIndex) =>\n  row.map(\n    (col, colIndex) =>\n      rowIndex === 0 ||\n      colIndex === 0 ||\n      rowIndex === height ||\n      colIndex === width\n        ? 1\n        : 0\n  )\n);\n```\n\n#### Add caching for printing ([#2259](https://github.com/prettier/prettier/pull/2259))\n\nWith the 1.0 release, we fixed a bug in the printing that introduced an exponential behavior. We've been able to mitigate the biggest issue such that reasonable code didn't time out, but it wasn't completely fixed it. By adding a caching layer at the right spot, we should now be in the clear.\n\nThis should make printing the IR of prettier using prettier in debug mode no longer time out.\n\n<!-- prettier-ignore -->\n```js\n// Before\n...times out...\n\n// After\nsomeObject.someFunction().then(function () {\n    return someObject.someFunction().then(function () {\n        return someObject.someFunction().then(function () {\n            return someObject.someFunction().then(function () {\n                return someObject.someFunction().then(function () {\n                    return someObject.someFunction().then(function () {\n                        return someObject.someFunction().then(function () {\n                            return someObject.someFunction().then(function () {\n                                return someObject.someFunction().then(function () {\n                                    anotherFunction();\n                                });\n                            });\n                        });\n                    });\n                });\n            });\n        });\n    });\n});\n```\n\n#### Fix variance location ([#2261](https://github.com/prettier/prettier/pull/2261))\n\nWe refactored the code that prints modifiers when we introduced TypeScript support and accidentally moved around the variance (`+`) part before `static` which is not valid in Flow. This is now fixed.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nclass Route {\n  +static param: T;\n}\n\n// After\nclass Route {\n  static +param: T;\n}\n```\n\n### Miscellaneous\n\n#### Various fixes for range and cursor tracking ([#2266](https://github.com/prettier/prettier/pull/2266), [#2248](https://github.com/prettier/prettier/pull/2248), [#2250](https://github.com/prettier/prettier/pull/2250), [#2136](https://github.com/prettier/prettier/pull/2136)) by [@CiGit](https://github.com/CiGit) and [@josephfrazier](https://github.com/josephfrazier)\n\nBoth those features were introduced in the last release and we discovered a bunch of issues when actually using them in production. A bunch of them got fixed, if you see more, please report them!"
    },
    {
      "id": "/2017/06/03/1.4.0",
      "metadata": {
        "permalink": "/blog/2017/06/03/1.4.0",
        "source": "@site/blog/2017-06-03-1.4.0.md",
        "title": "Prettier 1.4: TypeScript and CSS support",
        "description": "This release introduces support for TypeScript, CSS, Less, and SCSS languages to Prettier!",
        "date": "2017-06-03T00:00:00.000Z",
        "formattedDate": "June 3, 2017",
        "tags": [],
        "readingTime": 16.565,
        "truncated": true,
        "authors": [
          {
            "name": "Christopher Chedeau (@vjeux)",
            "url": "https://twitter.com/vjeux"
          }
        ],
        "frontMatter": {
          "author": "Christopher Chedeau (@vjeux)",
          "authorURL": "https://twitter.com/vjeux",
          "title": "Prettier 1.4: TypeScript and CSS support"
        },
        "prevItem": {
          "title": "Prettier 1.5: GraphQL, CSS-in-JS & JSON",
          "permalink": "/blog/2017/06/28/1.5.0"
        },
        "nextItem": {
          "title": "Prettier 1.3",
          "permalink": "/blog/2017/05/03/1.3.0"
        }
      },
      "content": "This release introduces support for TypeScript, CSS, Less, and SCSS languages to Prettier!\n\n<!--truncate-->\n\n[![prettier-revolution-conf](/blog/assets/prettier-revolution-conf.png)](https://revolutionconf.com/talk/a-prettier-printer)\n\n## TypeScript Support\n\nThis is the most requested feature for prettier. With 1.4.0, you can now use prettier to format your `.ts` and `.tsx` files!\n\nThe way prettier works is by using those project to generate an AST representation of the code and print it. Both babylon (the parser that powers babel) and flow are producing an AST approximately following the [estree](https://github.com/estree/estree) format for the JavaScript parts and then have special nodes for Flow-specific ones.\n\nTypeScript, the same way as Flow, introduces special nodes for the syntax it introduces. Unfortunately, it doesn't follow the estree format for the rest of the JavaScript language. This puts us in a rough spot with prettier as we would have to essentially completely fork it in order to print TypeScript.\n\nThis incompatibility with the AST is not a new problem and another project struggled with it: ESLint. Because the AST is different, none of the ESLint rules are working. Fortunately for us, [@JamesHenry](https://github.com/JamesHenry) and [@soda0289](https://github.com/soda0289) wrote a project called [typescript-eslint-parser](https://github.com/eslint/typescript-eslint-parser) which takes a TypeScript AST and convert it to an estree one, just what we need for prettier!\n\nAfter that project got setup inside of prettier, [@azz](https://github.com/azz), [@despairblue](https://github.com/despairblue) and [@Pajn](https://github.com/Pajn) implemented all the TypeScript-specific nodes and ensured that the 13k tests of the TypeScript test suite are correctly passing. This was a huge undertaking and it is finally ready to be used :)\n\nWe tested prettier on the biggest TypeScript projects we could find on GitHub to ensure that it prints correct code. We haven't spent a lot of time trying to optimize the way code is formatted yet, so if you see something strange, please raise an issue!\n\n## CSS, Less and SCSS Support\n\nWhile TypeScript is the most requested feature from open source, CSS is the biggest one from Facebook engineers. Once you are used to pretty print your code in one language, you want to do it everywhere!\n\nIt turns out that CSS is a much smaller language than JavaScript and supporting it only took a few days. We are using [postcss](https://github.com/postcss/postcss) by [@ai](https://github.com/ai) as the underlying parser which is able to parse CSS, Less and SCSS. We also depend on [postcss-values-parser](https://github.com/shellscape/postcss-values-parser), [postcss-selector-parser](https://github.com/postcss/postcss-selector-parser) by [@ben](https://github.com/ben)-eb [postcss-media-query-parser](https://github.com/dryoma/postcss-media-query-parser) by [@dryoma](https://github.com/dryoma).\n\nUnfortunately, postcss right now doesn't parse Sass nor Stylus. We'd be happy to support them if someone is willing to do the work of printing them.\n\nNote that prettier is currently just formatting the code, it does not respect any options yet such as `singleQuote` nor is doing any color or number normalization like we do for JavaScript.\n\n## Editor Integration\n\nThe first phase of the project was to make prettier output correct and good looking code. Now that it's in a good shape, we can spend time on making the integrations better. We just introduced support for two great features: maintain cursor position and being able to format a range instead of the entire file.\n\nNote that we just landed the support inside of prettier itself, none of the editor integrations are using it yet. Also, we haven't really tried them out in practice so we're likely going to have to fix rough edges with them!\n\n#### Add `cursorOffset` option for cursor translation ([#1637](https://github.com/prettier/prettier/pull/1637)) by [@josephfrazier](https://github.com/josephfrazier)\n\nRight now, we let editors figure out where the cursor should be, which they do an okay job at. But since we are printing the code, we can give the correct position!\n\n#### Add `--range-start/end` options to format only parts of the input ([#1609](https://github.com/prettier/prettier/pull/1609)) by [@josephfrazier](https://github.com/josephfrazier)\n\nThis one is a very often requested feature. Right now prettier only formats the entire file. Now it is possible to format a range.\n\nThe way it works is by going up through the AST in order to find the closest statement. This way you don't need to select exactly the right range that is valid. You can just drag in the rough place where the code you want to reformat it, and it's going to!\n\n#### Adding filepath option in order to enable filetype inference ([#1835](https://github.com/prettier/prettier/pull/1835)) by [@mitermayer](https://github.com/mitermayer)\n\nSince we are now formatting CSS and TypeScript, it is not convenient to have to specify the parser for every file. You can now pass the filepath of the file you are working on and prettier will read the extension and figure out the right parser to use.\n\n## Highlights\n\n#### Wrap text content inside of JSX ([#1120](https://github.com/prettier/prettier/pull/1120), [#1671](https://github.com/prettier/prettier/pull/1671), [#1827](https://github.com/prettier/prettier/pull/1827), [#1829](https://github.com/prettier/prettier/pull/1829)) by [@karl](https://github.com/karl)\n\nThe biggest remaining issue that people have with prettier when printing JSX is when it is used when printing text. The behavior of prettier used to add an ugly `{\" \"}` before and if a line was too long, just leave it alone. Now we treat each word as a token and are able to make it flow correctly.\n\nThis is an awesome piece of work by [@karl](https://github.com/karl) as not only did he implement the feature, but also introduced a new primitive inside of prettier in order to print a sequence of elements and break as soon as one hits the edge.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<div>\n  Please state your\n  {\" \"}\n  <b>name</b>\n  {\" \"}\n  and\n  {\" \"}\n  <b>occupation</b>\n  {\" \"}\n  for the board of directors.\n</div>\n\n// After\n<div>\n  Please state your <b>name</b> and <b>occupation</b> for the board of\n  directors.\n</div>\n```\n\n#### Remove parenthesis for JSX inside of arrow functions ([#1733](https://github.com/prettier/prettier/pull/1733)) by [@xixixao](https://github.com/xixixao)\n\nPeople writing functional components are going to be happy about this one. We no longer put parens for arrow functions that return JSX.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\nconst render1 = ({ styles }) => (\n  <div style={styles}>\n      Keep the wrapping parens. Put each key on its own line.\n  </div>\n);\n\n// After\nconst render1 = ({ styles }) =>\n  <div style={styles}>\n      Keep the wrapping parens. Put each key on its own line.\n  </div>;\n```\n\n#### Improve template literal printing ([#1664](https://github.com/prettier/prettier/pull/1664), [#1714](https://github.com/prettier/prettier/pull/1714)) by [@josephfrazier](https://github.com/josephfrazier)\n\nTemplate literal printing has always caused prettier a lot of difficulties. With 1.3.0 we massively improved the situation and with this release, I believe that we handle all the common situations in a good way.\n\nIn order to workaround issues, we added an utility that removes empty lines from the output, but it yielded some really weird results sometimes, this is now gone. Another tweak we've done is instead of indenting when `${` starts, we indent where the line that contains `${` starts.\n\nLet us know if you still have issues with how template literals output after this release!\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst Bar = styled.div`\n  color: ${props => (props.highlight.length > 0 ? palette([\n                 'text',\n                 'dark',\n                 'tertiary'\n               ])(props) : palette([\n                 'text',\n                 'dark',\n                 'primary'\n               ])(props))} !important;\n`\n\n// After\nconst Bar = styled.div`\n  color: ${props =>\n    props.highlight.length > 0\n      ? palette([\"text\", \"dark\", \"tertiary\"])(props)\n      : palette([\"text\", \"dark\", \"primary\"])(props)} !important;\n`\n```\n\n#### Use the same breaking rules for assignment and object values ([#1721](https://github.com/prettier/prettier/pull/1721))\n\nWe have a lot of fine-tuned logic for how to break things after assignment (eg `a = ...`). We are now using the same one for object values. This should help for multi-line boolean logic, or big conditionals. This is also a good example of how we can create a consistent printer.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst o = {\n  somethingThatsAReallyLongPropName: this.props.cardType ===\n    AwesomizerCardEnum.SEEFIRST,\n};\n\n// After\nconst o = {\n  somethingThatsAReallyLongPropName:\n    this.props.cardType === AwesomizerCardEnum.SEEFIRST,\n};\n```\n\n#### Indent conditions inside of !() ([#1731](https://github.com/prettier/prettier/pull/1731))\n\nThere's been a steady stream of people complaining about the way it was rendered and was put on the list of things that are probably hard to do, will check later. It turned out to be super easy, so here you go!\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst anyTestFailures = !(aggregatedResults.numFailedTests === 0 &&\n  aggregatedResults.numRuntimeErrorTestSuites === 0);\n\n// After\nconst anyTestFailures = !(\n  aggregatedResults.numFailedTests === 0 &&\n  aggregatedResults.numRuntimeErrorTestSuites === 0\n);\n```\n\n## Formatting Fixes\n\n#### Put loop bodies on the same line when possible ([#1498](https://github.com/prettier/prettier/pull/1498))\n\nWe were already doing this for if statements, we should be consistent and also do it for loops.\n\n<!-- prettier-ignore -->\n```js\n// Before\nfor (a in b)\n  var c = {};\n\n// After\nfor (a in b) var c = {};\n```\n\n#### Fix empty line with flow union ([#1511](https://github.com/prettier/prettier/pull/1511)) by [@existentialism](https://github.com/existentialism)\n\nWe shouldn't indent things twice ;)\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype Foo = Promise<\n\n    | { ok: true, bar: string, baz: SomeOtherLongType }\n    | { ok: false, bar: SomeOtherLongType }\n>;\n\n// After\ntype Foo = Promise<\n  { ok: true, bar: string, baz: SomeOtherLongType } |\n  { ok: false, bar: SomeOtherLongType }\n>;\n```\n\n#### Do not put parens for single argument with end of line comment ([#1518](https://github.com/prettier/prettier/pull/1518))\n\nThe detection code for whether an arrow function should be written without parenthesis just checked if there was a comment, but instead we only want comments that are inline like `(/* comment */ num)`, not end of line comments.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\nKEYPAD_NUMBERS.map((num) => ( // Buttons 0-9\n  <div />\n));\n\nKEYPAD_NUMBERS.map(num => ( // Buttons 0-9\n  <div />\n));\n```\n\n#### Do not indent nested ternaries ([#1822](https://github.com/prettier/prettier/pull/1822))\n\nThis avoids making it seems like it is indented by 4 characters instead of two. The downside is that if the condition is multi-line it's not going to be properly aligned, but I feel it's a better trade-offs. If you are doing nested ternaries, you usually have small conditions.\n\n<!-- prettier-ignore -->\n```js\n// Before\naaaaaaaaaaaaaaa\n  ? bbbbbbbbbbbbbbbbbb\n  : ccccccccccccccc\n      ? ddddddddddddddd\n      : eeeeeeeeeeeeeee ? fffffffffffffff : gggggggggggggggg;\n\n// After\naaaaaaaaaaaaaaa\n  ? bbbbbbbbbbbbbbbbbb\n  : ccccccccccccccc\n    ? ddddddddddddddd\n    : eeeeeeeeeeeeeee ? fffffffffffffff : gggggggggggggggg;\n```\n\n#### Inline chained conditionals inside of jsx attribute ([#1519](https://github.com/prettier/prettier/pull/1519))\n\nWe don't need to use the indentation to disambiguate another block as nothing can come after.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<div\n  src={\n    !isEnabled &&\n      diffUpdateMessageInput != null &&\n      this.state.isUpdateMessageEmpty\n  }\n/>;\n\n// After\n<div\n  src={\n    !isEnabled &&\n    diffUpdateMessageInput != null &&\n    this.state.isUpdateMessageEmpty\n  }\n/>;\n```\n\n#### Unescape unnecessarily escaped characters in strings ([#1575](https://github.com/prettier/prettier/pull/1575)) by [@josephfrazier](https://github.com/josephfrazier)\n\nWe are already trying to cleanup strings in various ways, this is another small addition that's going to remove `\\` that are not needed.\n\n<!-- prettier-ignore -->\n```js\n// Before\na = 'hol\\a';\n\n// After\na = 'hola';\n```\n\n#### Fix boolean for empty objects ([#1590](https://github.com/prettier/prettier/pull/1590)) by [@dmitrika](https://github.com/dmitrika)\n\nWe want to inline objects inside of a boolean expression as it looks weird to have `{` on its own line. But it turns out that it leads to weird behaviors for empty objects. So we keep them on their own line if they are empty.\n\n<!-- prettier-ignore -->\n```js\nconst x = firstItemWithAVeryLongNameThatKeepsGoing ||\nsecondItemWithALongNameAsWell || {};\n\n// After\nconst x =\n  firstItemWithAVeryLongNameThatKeepsGoing ||\n  secondItemWithALongNameAsWell ||\n  {};\n```\n\n#### Remove Parens from SequenceExpressions in ForStatements ([#1597](https://github.com/prettier/prettier/pull/1597)) by [@k15a](https://github.com/k15a)\n\nIt is common to assign multiple values inside of a for loop, now we don't add parenthesis anymore.\n\n<!-- prettier-ignore -->\n```js\n// Before\nfor ((i = 0), (len = arr.length); i < len; i++) {\n\n// After\nfor (i = 0, len = arr.length; i < len; i++) {\n```\n\n#### Do not inline arrow when argument has a leading comment ([#1660](https://github.com/prettier/prettier/pull/1660))\n\nIf you put block comments inside of arrow functions, we no longer mess everything up!\n\n<!-- prettier-ignore -->\n```js\n// Before\nexport const bem = block => /**\n   * @param {String} [element] - the BEM Element within that block; if undefined, selects the block itself.\n   */\nelement => /**\n     * @param {?String} [modifier] - the BEM Modifier for the Block or Element; if undefined, selects the Block or Element unmodified.\n     */\nmodifier =>\n\n// After\nexport const bem = block =>\n  /**\n   * @param {String} [element] - the BEM Element within that block; if undefined, selects the block itself.\n   */\n  element =>\n    /**\n     * @param {?String} [modifier] - the BEM Modifier for the Block or Element; if undefined, selects the Block or Element unmodified.\n     */\n    modifier =>\n```\n\n#### Fix last comments of imports ([#1677](https://github.com/prettier/prettier/pull/1677))\n\nAnother place where we have to do special logic for comments!\n\n<!-- prettier-ignore -->\n```js\n// Before\nimport {\n  ExecutionResult,\n  DocumentNode,\n  /* tslint:disable */\n  SelectionSetNode,\n} /* tslint:enable */ from 'graphql';\n\n// After\nimport {\n  DocumentNode,\n  /* tslint:disable */\n  SelectionSetNode,\n  /* tslint:enable */\n} from 'graphql';\n```\n\n#### Handle comments in member chain ([#1686](https://github.com/prettier/prettier/pull/1686), [#1691](https://github.com/prettier/prettier/pull/1691))\n\nWe handled some placements before and kept adding places where they could appear, now we switch to a more general approach. Hopefully those issues shouldn't crop up in the future anymore.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst configModel = this.baseConfigurationService.getCache().consolidated // global/default values (do NOT modify)\n  .merge(this.cachedWorkspaceConfig);\n\n// After\nconst configModel = this.baseConfigurationService\n  .getCache()\n  .consolidated // global/default values (do NOT modify)\n  .merge(this.cachedWorkspaceConfig);\n```\n\n#### Use expandLast for nested arrow functions ([#1720](https://github.com/prettier/prettier/pull/1720))\n\n<!-- prettier-ignore -->\n```js\n// Before\nf(action => next =>\n    next(action));\n\n// After\nf(action => next =>\n    next(action),\n);\n```\n\n#### Put JSX comments inside of the parenthesis ([#1712](https://github.com/prettier/prettier/pull/1712))\n\nThis mostly affects Facebook engineers where we automatically add `$FlowFixMe` when pushing a new version of flow. Now it no longer messes up those comments.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\nconst aDiv = /* $FlowFixMe */\n(\n  <div className=\"foo\">\n    Foo bar\n  </div>\n);\n\n// After\nconst aDiv = (\n  /* $FlowFixMe */\n  <div className=\"foo\">\n    Foo bar\n  </div>\n);\n```\n\n#### Force \\n for multiple variable declarations ([#1723](https://github.com/prettier/prettier/pull/1723))\n\nThis one has been very often requested. We used to only break multiple variable declarations if the line was > 80 columns. Now we do it regardless if there's at least one with an assignment.\n\n<!-- prettier-ignore -->\n```js\n// Before\nvar numberValue1 = 1, numberValue2 = 2;\n\n// After\nvar numberValue1 = 1,\n numberValue2 = 2;\n```\n\n#### Inline | null and | void ([#1734](https://github.com/prettier/prettier/pull/1734))\n\nThe expanded version of flow union looks good when they are many objects but if it's used for nullability, then it looks very weird. We're now inlining `| null` and `| void`.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ninterface RelayProps {\n  articles:\n    | Array<\n      | {\n        __id: string,\n      }\n      | null\n    >\n    | null\n}\n\n// After\ninterface RelayProps {\n  articles: Array<{\n    __id: string,\n  } | null> | null,\n}\n```\n\n#### Break on implements instead of extends ([#1730](https://github.com/prettier/prettier/pull/1730))\n\nWe no longer break on `extends`. This should make classes with extends that can break look less wonky.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nclass MyContractSelectionWidget\n  extends React.Component<\n    void,\n    MyContractSelectionWidgetPropsType,\n    void\n  > {\n  method() {}\n}\n\n// After\nclass MyContractSelectionWidget extends React.Component<\n  void,\n  MyContractSelectionWidgetPropsType,\n  void\n> {\n  method() {}\n}\n```\n\n#### Inline single import ([#1729](https://github.com/prettier/prettier/pull/1729))\n\nThe same way we don't break long `require` calls, we no longer break `import` statements if there is only a single thing being imported.\n\n<!-- prettier-ignore -->\n```js\n// Before\nimport somethingSuperLongsomethingSuperLong\n  from \"somethingSuperLongsomethingSuperLongsomethingSuperLong\";\n\n// After\nimport somethingSuperLongsomethingSuperLong from \"somethingSuperLongsomethingSuperLongsomethingSuperLong\";\n```\n\n#### Add the ability for SequenceExpression to break ([#1749](https://github.com/prettier/prettier/pull/1749))\n\nDid you know that if none of your code were statements, you could use `()` instead of `{}` and `,` instead of `;`? Now you do. Some people exploit this fact when returning things from arrow functions. This is not recommended but it's easy to support in prettier so might as well ¯\\\\\\_(ツ)\\_/¯\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst f = (argument1, argument2, argument3) =>\n  (doSomethingWithArgument(argument1), doSomethingWithArgument(\n    argument2\n  ), argument1);\n\n// After\nconst f = (argument1, argument2, argument3) => (\n  doSomethingWithArgument(argument1),\n  doSomethingWithArgument(argument2),\n  argument1\n);\n```\n\n#### Don't force line break in empty loop bodies ([#1815](https://github.com/prettier/prettier/pull/1815))\n\nLoops with empty body no longer have their `{}` split into two lines.\n\n<!-- prettier-ignore -->\n```js\n// Before\nwhile (true) {\n}\n\n// After\nwhile (true) {}\n```\n\n#### Preserve empty lines between switch cases with comments ([#1708](https://github.com/prettier/prettier/pull/1708))\n\n<!-- prettier-ignore -->\n```js\n// Before\nswitch (true) {\n  case true:\n  // Good luck getting here\n  case false:\n}\n\n// After\nswitch (true) {\n  case true:\n\n  // Good luck getting here\n  case false:\n}\n```\n\n## Correctness\n\n#### Remove ast-types ([#1743](https://github.com/prettier/prettier/pull/1743), [#1744](https://github.com/prettier/prettier/pull/1744), [#1745](https://github.com/prettier/prettier/pull/1745), [#1746](https://github.com/prettier/prettier/pull/1746), [#1747](https://github.com/prettier/prettier/pull/1747))\n\nWe used to find where to put comments by traversing the AST using the definition from ast-types. This occasionally caused issues when some field wasn't declared, we wouldn't find the node and either print comments in an incorrect location or throw an error. It turns out that we don't need to keep this mapping and can just traverse the objects and if a node has a `type` field, then it's a node.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nError: did not recognize object of type \"ObjectTypeSpreadProperty\"\n\n// After\ntype X = {...Y/**/};\ntype X = {/**/...Y};\n```\n\n#### Preserve unusual unicode whitespace ([#1658](https://github.com/prettier/prettier/pull/1658), [#1165](https://github.com/prettier/prettier/pull/1165)) by [@karl](https://github.com/karl) and [@yamafaktory](https://github.com/yamafaktory)\n\nIf you were adding invisible characters inside of JSX text, we would replace them by regular spaces. I don't know why anyone would ever want to do that, but now we print it back as is!\n\n#### Don't let trailing template literal comments escape ([#1580](https://github.com/prettier/prettier/pull/1580), [#1713](https://github.com/prettier/prettier/pull/1713), [#1598](https://github.com/prettier/prettier/pull/1598), [#1713](https://github.com/prettier/prettier/pull/1713)) by [@josephfrazier](https://github.com/josephfrazier) and [@k15a](https://github.com/k15a)\n\nWe used to have some pretty complicated (and not working well) code to handle comments inside of template literals. We introduced a really nice solution for JSX `{}` expressions. The idea is to introduce a boundary before the end of the `}` and if we still have unprinted comments, then flush them all at once, put a \\n and print the `}`. We are now using this logic for template literals :)\n\n<!-- prettier-ignore -->\n```js\n// Before\n`${0} // comment`;\n\n// After\n`${\n0\n// comment\n}`;\n```\n\n#### Parenthesize await correctly ([#1513](https://github.com/prettier/prettier/pull/1513), [#1595](https://github.com/prettier/prettier/pull/1595), [#1593](https://github.com/prettier/prettier/pull/1593)) by [@bakkot](https://github.com/bakkot) and [@existentialism](https://github.com/existentialism)\n\nWe don't have an automated way to put parenthesis, we instead specify all the possible combinations of nodes and when they should or shouldn't have parenthesis. So there's likely a long tail of unusual combinations that are still remaining. In this case, we made `await` handling a lot more robust by both adding parenthesis where they are needed and removing them when they are not.\n\n<!-- prettier-ignore -->\n```js\n// Before\n(await spellcheck) && spellcheck.setChecking(false);\nnew A((await x));\n\n// After\nawait (spellcheck && spellcheck.setChecking(false));\nnew A(await x);\n```\n\n#### Preserve getter/setter info on flow ObjectTypeProperty ([#1585](https://github.com/prettier/prettier/pull/1585)) by [@josephfrazier](https://github.com/josephfrazier)\n\nAnother long tail option that we haven't got right!\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype T = { method: () => void };\n\n// After\ntype T = { get method(): void }\n```\n\n#### Add parenthesis for single arg types with generics ([#1814](https://github.com/prettier/prettier/pull/1814))\n\nAnother case of sneaky parenthesis that we didn't properly add!\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype ExtractType = <A>B<C> => D\n\n// After\ntype ExtractType = <A>(B<C>) => D\n```\n\n#### Fall back to non-strict mode in babylon ([#1587](https://github.com/prettier/prettier/pull/1587), [#1608](https://github.com/prettier/prettier/pull/1608)) by [@josephfrazier](https://github.com/josephfrazier)\n\nWe want prettier to be able to parse all the JavaScript out there. For babylon parser, we have to chose whether a file is using strict mode or not. We opted in to use strict mode by default as most files parse that way. But if you have octal literals like `0775`, it would not even parse. Now if it fails to parse in strict mode, we're going to try again in non-strict. We also allow `return` outside of a function as it's valid in node files.\n\n<!-- prettier-ignore -->\n```js\n// Before\nSyntaxError\n\n// After\nreturn 0775;\n```\n\n## CLI\n\n#### Allow `--write` to be used with `--list-different` ([#1633](https://github.com/prettier/prettier/pull/1633))\n\nThis is useful to combine the two if you are writing a commit hook to tell the user what actually changed in a single command.\n\n#### Ignore node_modules when running prettier from CLI ([#1683](https://github.com/prettier/prettier/pull/1683)) by [@thymikee](https://github.com/thymikee)\n\nIt's very easy to run prettier over the `node_modules/` folder by mistake which is something you almost never want to. So now we disable it by default and add a `--with-node-modules` option if you really want to.\n\n#### Traverse dot files for glob ([#1844](https://github.com/prettier/prettier/pull/1844)) by [@jhgg](https://github.com/jhgg)\n\nWe enabled the option to go through .dotfiles in the glob parsing library we are using. This means that writing `*` will now catch `.eslintrc`."
    },
    {
      "id": "/2017/05/03/1.3.0",
      "metadata": {
        "permalink": "/blog/2017/05/03/1.3.0",
        "source": "@site/blog/2017-05-03-1.3.0.md",
        "title": "Prettier 1.3",
        "description": "This post provides an update to Facebook's adoption or Prettier, outlines our progress on TypeScript, and details some of the improvements and fixes included in the 1.3.0 release of Prettier.",
        "date": "2017-05-03T00:00:00.000Z",
        "formattedDate": "May 3, 2017",
        "tags": [],
        "readingTime": 12.385,
        "truncated": true,
        "authors": [
          {
            "name": "Christopher Chedeau (@vjeux)",
            "url": "https://twitter.com/vjeux"
          }
        ],
        "frontMatter": {
          "author": "Christopher Chedeau (@vjeux)",
          "authorURL": "https://twitter.com/vjeux",
          "title": "Prettier 1.3"
        },
        "prevItem": {
          "title": "Prettier 1.4: TypeScript and CSS support",
          "permalink": "/blog/2017/06/03/1.4.0"
        },
        "nextItem": {
          "title": "Prettier 1.2",
          "permalink": "/blog/2017/04/20/1.2.0"
        }
      },
      "content": "This post provides an update to Facebook's adoption or Prettier, outlines our progress on TypeScript, and details some of the improvements and fixes included in the 1.3.0 release of Prettier.\n\n<!--truncate-->\n\n### Facebook Adoption Update\n\nThe reason why I ([@vjeux](https://github.com/vjeux)) embarked on this journey working on prettier has always been to get the entire Facebook codebase converted over. I would like to give an update on how it is going and what is the process to get there.\n\nThe first projects to adopt prettier were Jest, React and immutable-js. Those are small codebases in the order of hundreds of files that have their own infrastructure. There are a handful of people working on them full time.\n\nThen, Oculus and Nuclide converted their codebase over. The scale is bigger with a few thousands of files and tens of full time contributors but looks pretty similar to the first projects. The conversions went in one big codemod and that's it.\n\nNow, the entire Facebook codebase is way bigger than this and it's not feasible to just convert everything in one go and to convince everyone that their entire codebase is going to be reformatted under their feet. So we need to find a more incremental approach.\n\n#### Scaling adoption\n\nRunning prettier on a piece of code is a pretty expensive operation, it makes your pull request look bad because of a lot of unrelated changes and it causes merge conflicts for all the outstanding pull requests. So **once a file has been formatted, you should do everything to make sure it remains formatted**.\n\n- When pretty-printing a file, add `@format` to the first block comment like `@flow`.\n- Have a lint rule with autofix that checks if the file is correctly pretty printed when `@format` is present.\n  - When running Nuclide, it's going to show as an inline warning and have a fix button.\n  - When sending a pull request, it's going to show the lint failing with a [Yn] prompt that you can just press enter.\n- Update the default code templates to add `@format` to the header.\n- When you run code formatting via cmd-shift-c inside of Nuclide, automatically insert the `@format` header.\n- Disable all the stylistic rules like max-len when `@format` is in the header.\n- Have script to run prettier through an entire folder with everything configured as a one line operation.\n- Have a good guide to help people that want to convert their codebase over with instructions and best practices.\n- When pushing a new release of prettier, also run it through all the files with `@format` in order to avoid getting warnings afterwards.\n- Add tracking for the number of files with `@format` over time.\n\nWe finally got all those things wired up 1.5 weeks ago and the reception has been insane. Many people from various teams converted their codebase to prettier on their own. As of today, 15% of Facebook codebase has been converted over!\n\n<center><img src=\"https://cloud.githubusercontent.com/assets/197597/25565785/ed4abca4-2d82-11e7-9c26-380733444543.png\" width=\"250\" /></center>\n\nWhen I started working on prettier, I had a hunch that people were hungry for tools to solve formatting. But I had no idea that once the tooling was in place, people would rush to convert their codebase over! This is great confirmation that this project is useful to people and not just a gimmicky tool.\n\n### TypeScript Support Progress\n\n[@despairblue](https://github.com/despairblue), [@azz](https://github.com/azz) and [@JamesHenry](https://github.com/JamesHenry) have been hard at work around getting TypeScript supported by prettier as it's the top requested feature. 2000 out of 11000 files in the TypeScript test suite are not yet properly printed. You can follow progress on https://github.com/prettier/prettier/issues/1480 and do not hesitate to help out!\n\n### Flow\n\n#### Add trailing commas on flow generics ([#1381](https://github.com/prettier/prettier/pull/1381))\n\nThe `--trailing-comma=all` option is supposed to add trailing commas everywhere possible, but as an oversight we forgot to do it for flow generics.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype Errors = Immutable.Map<\n  Ahohohhohohohohohohohohohohooh,\n  Fbt | Immutable.Map<ErrorIndex, Fbt>\n>;\n\n// After\ntype Errors = Immutable.Map<\n  Ahohohhohohohohohohohohohohooh,\n  Fbt | Immutable.Map<ErrorIndex, Fbt>,\n>;\n```\n\n#### Inline nullable in flow generics ([#1426](https://github.com/prettier/prettier/pull/1426))\n\nThe phase after printing things correctly is to tweak the output to make it closer to the way people write code in practice. Inlining optional flow types is a small thing that makes a difference.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype Cursor = Promise<\n  ?{\n    newCursor?: number,\n    formatted: string,\n  }\n>;\n\n// After\ntype Cursor = Promise<?{\n  newCursor?: number,\n  formatted: string,\n}>;\n```\n\n#### Allow flow declarations to break on StringLiteralTypeAnnotations ([#1437](https://github.com/prettier/prettier/pull/1437))\n\nWe can always find more places to add breaks when things don't fit 80 columns. This time it's around declaring a type as a constant string.\n\n<!-- prettier-ignore -->\n```js\n// Before\nexport type AdamPlacementValidationSingleErrorKey = 'SOME_FANCY_TARGETS.GLOBAL_TARGET';\n\n// After\nexport type AdamPlacementValidationSingleErrorKey =\n  'SOME_FANCY_TARGETS.GLOBAL_TARGET';\n```\n\n#### Add space around `=` for flow generics default arguments ([#1476](https://github.com/prettier/prettier/pull/1476))\n\nAnother example of small thing where we can improve the display of flow code. For function default arguments we put a space around `=` but didn't around flow generics.\n\n<!-- prettier-ignore -->\n```ts\n// Before\nclass PolyDefault<T=string> {}\n\n// After\nclass PolyDefault<T = string> {}\n```\n\n#### Don't break for unparenthesised single argument flow function ([#1452](https://github.com/prettier/prettier/pull/1452))\n\nI'm trying to figure out something to write here, but ... it just looks weird!\n\n<!-- prettier-ignore -->\n```ts\n// Before\nconst selectorByPath:\n  Path\n => SomethingSelector<\n  SomethingUEditorContextType,\n  SomethingUEditorContextType,\n  SomethingBulkValue<string>\n> = memoizeWithArgs(/* ... */)\n\n// After\nconst selectorByPath: Path => SomethingSelector<\n  SomethingUEditorContextType,\n  SomethingUEditorContextType,\n  SomethingBulkValue<string>\n> = memoizeWithArgs(/* ... */);\n```\n\n#### Fix optional flow parenthesis ([#1357](https://github.com/prettier/prettier/pull/1357))\n\nWe were a bit too lenient around parenthesis for optional flow types. In one case in the entire Facebook codebase, it generated code with different semantics. As part of this fix, we hardened the list of types that can be written without parenthesis.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype X = ?(number, number) => number => void;\n\n// After\ntype X = (?(number, number) => number) => void;\n```\n\n#### Skip trailing commas with FlowShorthandWithOneArg ([#1364](https://github.com/prettier/prettier/pull/1364))\n\nIt is a parse error to add a trailing comma without parenthesis for arguments of arrow function types. We found one case in Facebook codebase when this happened, it's a very rare occurrence.\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype IdeConnectionFactory =\n  child_process$ChildProcess,\n  => FlowIDEConnection = defaultIDEConnectionFactory;\n\n// After\ntype IdeConnectionFactory =\n  child_process$ChildProcess\n  => FlowIDEConnection = defaultIDEConnectionFactory;\n```\n\n#### Reorder flow object props ([#1451](https://github.com/prettier/prettier/pull/1451))\n\nThis one is an example where the way the AST is structured is not our favor. Instead of having a list of elements inside of a type, the AST is structured in a way where normal keys and array keys each have their own group. In order to restore the initial order, we're now reading from the original source :(\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype Foo = {\n  [key: string]: void,\n  alpha: \"hello\",\n  beta: 10\n};\n\n// After\ntype Foo = {\n  alpha: 'hello',\n  [key: string]: void,\n  beta: 10\n}\n```\n\n### Template Literal\n\n#### Proper indentation for template literals ([#1385](https://github.com/prettier/prettier/pull/1385))\n\nA long standing issue with template literals and prettier is around the indentation of code inside of `${}`. It used to be the indentation of the backtick but turned out to give poor results. Instead people tend to use the indent of the `${`. We changed this behavior and it magically made GraphQL queries look pretty!\n\n<!-- prettier-ignore -->\n```js\n// Before\nRelay.createContainer({\n  nodes: ({ solution_type, time_frame }) => Relay.QL`\n    fragment {\n      __typename\n      ${OptimalSolutionsSection.getFragment(\"node\", {\n    solution_type,\n    time_frame\n  })}\n    }\n  `\n})\n```\n\n<!-- prettier-ignore -->\n```js\n// After\nRelay.createContainer({\n  nodes: ({ solution_type, time_frame }) => Relay.QL`\n    fragment {\n      __typename\n      ${OptimalSolutionsSection.getFragment(\"node\", {\n        solution_type,\n        time_frame\n      })}\n    }\n  `\n})\n```\n\n#### Do not indent calls with a single template literal argument ([#873](https://github.com/prettier/prettier/pull/873))\n\nTemplate literals are very hard to deal with for a pretty printer because the spaces inside are meaningful so you can't re-indent them. We didn't know what to do for a call with a single template literal so we didn't do anything, but we kept receiving reports of people saying that prettier indented it the wrong way, so we are now inlining them. Fingers crossed it is going to cover most use cases.\n\n```js\n// Before\ninsertRule(\n  `*, *:before, *:after {\n    box-sizing: inherit;\n  }`\n);\n\n// After\ninsertRule(`*, *:before, *:after {\n  box-sizing: inherit;\n}`);\n```\n\n#### Fix windows line ending on template literals ([#1439](https://github.com/prettier/prettier/pull/1439))\n\nWe manipulate line endings in a lot of places in prettier and took great care of handling both `\\n` and `\\r\\n` except for template literals where we forgot. Now this is fixed!\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst aLongString = `\n\nLine 1\n\nLine 2\n\nLine 3\n\n`;\n\n// After\nconst aLongString = `\nLine 1\nLine 2\nLine 3\n`;\n```\n\n#### Inline template literals as arrow body ([#1485](https://github.com/prettier/prettier/pull/1485))\n\nWe already inline template literals that are tagged (eg `` graphql`query` ``) but didn't for plain template literals. For the anecdote, it turns out the code was supposed to support it but it was using `TemplateElement` instead of `TemplateLiteral` :(\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst inlineStore = preloadedState =>\n  `\n  <script>\n    window.preloadedState = ${JSON.stringify(preloadedState).replace(/</g, '\\\\u003c')}\n  </script>\n`\n\n// After\nconst inlineStore = preloadedState => `\n  <script>\n    window.preloadedState = ${JSON.stringify(preloadedState).replace(/</g, '\\\\u003c')}\n  </script>\n`\n```\n\n### Ternaries\n\n#### Add parenthesis for unusual nested ternaries ([#1386](https://github.com/prettier/prettier/pull/1386))\n\nWhile working on printing nested ternaries, everyone focused on the ones with the shape of an if then else `cond1 ? elem1_if : cond2 ? elem2_if : elem_else` which is the most common. But, if you move some `?` and `:` around you can have another pattern. It looks almost the same but has a different meaning. In order to reduce confusion, we're adding parenthesis around the uncommon form.\n\n<!-- prettier-ignore -->\n```js\n// Before\ncond1 ? cond2 ? elem2_if : elem2_else : elem1_else\n\n// After\ncond1 ? (cond2 ? elem2_if : elem2_else) : elem1_else\n```\n\n#### Only add parenthesis on ternaries inside of arrow functions if doesn't break ([#1450](https://github.com/prettier/prettier/pull/1450))\n\nThere's an eslint rule [`no-confusing-arrows`](http://eslint.org/docs/rules/no-confusing-arrow) which suggests adding parenthesis for ternaries in arrow functions without brackets. The following two pieces of code are confusing:\n\n<!-- prettier-ignore -->\n```js\nvar x = a => 1 ? 2 : 3;\nvar x = a <= 1 ? 2 : 3;\n```\n\nIt makes sense when code is in one line, but when it is split into multiple lines, the parenthesis are unnecessary given the indentation, so we now only put them when they serve their disambiguation purpose.\n\n<!-- prettier-ignore -->\n```js\n// Before\nvar x = a => (1 ? 2 : 3);\nvar x = a =>\n  (1\n    ? 2\n    : 3);\n\n// After\nvar x = a => (1 ? 2 : 3);\nvar x = a =>\n  1\n    ? 2\n    : 3;\n```\n\n### General JavaScript Improvements\n\n#### Inline function declaration with single arg as object ([#1173](https://github.com/prettier/prettier/pull/1173))\n\nThis one was often requested for React Stateless Functional Components (SFC). If you make use of a lot of them, it's likely going to be a big change for you.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst X = (\n  props: {\n    a: boolean,\n  },\n) => <div />;\n\n// After\nconst X = (props: {\n  a: boolean,\n}) => <div />;\n```\n\n#### Break inline object first in function arguments ([#1453](https://github.com/prettier/prettier/pull/1453))\n\nOne thing we discovered early on is that people usually break the arguments of the function before breaking the return type. Unfortunately, the code responsible to inline single destructuring argument broke that assumption and it introduced bad looking code like this example. The good news is that it enables us to turn on inlining for single arguments that are typed with an object.\n\n<!-- prettier-ignore -->\n```js\n// Before\nclass X {\n  async onDidInsertSuggestion({editor, triggerPosition, suggestion}): Promise<\n    void\n  > {\n  }\n}\n\n// After\nclass X {\n  async onDidInsertSuggestion({\n    editor,\n    triggerPosition,\n    suggestion\n  }): Promise<void> {\n  }\n}\n```\n\n#### Don't break on empty arrays and objects ([#1440](https://github.com/prettier/prettier/pull/1440))\n\nThis one has been a long standing issue and is an easy fix, but was an invaluable tool: whenever someone reported that `[]` or `{}` would break, we were able to fix the example by fixing something else. So it was a great way to surface edge cases. Fortunately, this vein has now ran out and all the recent examples just look bad with no other reason than the fact that they are breaking. So it's time to finally do it!\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst a = someVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeLong.Expression || [\n];\n\n// After\nconst a = someVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeryVeLong.Expression || [];\n```\n\n#### Do not break on `[0]` ([#1441](https://github.com/prettier/prettier/pull/1441))\n\nWe have a lot of issues where code breaks in array access when it doesn't look good. We don't yet have a good generic solution for it, but we can add a specific fix a common situation: `[0]`.\n\n<!-- prettier-ignore -->\n```js\n// Before\nqueryThenMutateDOM(() => {\n  title = SomeThing.call(root, \"someLongStringThatPushesThisTextReall\")[\n    0\n  ];\n});\n\n// After\nqueryThenMutateDOM(() => {\n  title = SomeThing.call(\n    root,\n    \"someLongStringThatPushesThisTextReall\",\n  )[0];\n});\n```\n\n#### Indent do while condition ([#1373](https://github.com/prettier/prettier/pull/1373))\n\nWe were not using the correct indentation logic for do-while condition but someone noticed, now we do!\n\n<!-- prettier-ignore -->\n```js\n// Before\ndo {}\nwhile (someVeryLongStringA && someVeryLongStringB && someVeryLongStringC && someVeryLongStringD);\n\n// After\ndo {}\nwhile (\n  someVeryLongStringA &&\n  someVeryLongStringB &&\n  someVeryLongStringC &&\n  someVeryLongStringD\n);\n```\n\n#### Preserve inline comment as last argument ([#1390](https://github.com/prettier/prettier/pull/1390))\n\nWe forgot to add one case in the comment detection code when they appear last for JSX attributes and function arguments which made them go after the closing. In the case of JSX, it generated code that had a different meaning. Fortunately, since we don't usually commit commented out code it didn't affect production code, but it is not a good experience while coding.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst x = (\n  <div\n    attr1={1}>\n//   attr3={3}\n    {children}\n  </div>\n);\n\n// After\nconst x = (\n  <div\n    attr1={1}\n//   attr3={3}\n  >\n    {children}\n  </div>\n);\n```\n\n#### Break class expression returned by arrow call ([#1464](https://github.com/prettier/prettier/pull/1464))\n\nIn 1.0, we made class be inline inside of arrow functions. It turns out that it doesn't work great when the class is non trivial, so we are reverting this change. We're trying really hard to avoid making trashy decisions like this where the style changes back and forth, but we allow ourselves to do it sometimes to fix mistakes!\n\n```js\n// Before\nexport default (ViewComponent: Function, ContainerComponent: Function) =>\n  class extends React.Component {\n    static propTypes = {};\n  };\n\n// After\nexport default (ViewComponent: Function, ContainerComponent: Function) =>\n  class extends React.Component {\n    static propTypes = {};\n  };\n```\n\n#### Fix empty line in block with EmptyStatement ([#1375](https://github.com/prettier/prettier/pull/1375))\n\nThis one was found by fuzzing. You're unlikely going to hit this in real code but it's good to know it is fixed!\n\n<!-- prettier-ignore -->\n```js\n// Input\nif (a) {\n  b;\n\n\n  ;\n}\n\n// Before\nif (a) {\n  b;\n\n}\n\n// After\nif (a) {\n  b;\n}\n```"
    },
    {
      "id": "/2017/04/20/1.2.0",
      "metadata": {
        "permalink": "/blog/2017/04/20/1.2.0",
        "source": "@site/blog/2017-04-20-1.2.0.md",
        "title": "Prettier 1.2",
        "description": "1.0 is not the end of prettier, we're going to continue to work on the long tail of formatting issues in order to make it an awesome JavaScript code formatter. You should expect minor version releases like this one to change small things and edge cases but nothing major or controversial.",
        "date": "2017-04-20T00:00:00.000Z",
        "formattedDate": "April 20, 2017",
        "tags": [],
        "readingTime": 3.555,
        "truncated": true,
        "authors": [
          {
            "name": "Christopher Chedeau (@vjeux)",
            "url": "https://twitter.com/vjeux"
          }
        ],
        "frontMatter": {
          "author": "Christopher Chedeau (@vjeux)",
          "authorURL": "https://twitter.com/vjeux",
          "title": "Prettier 1.2"
        },
        "prevItem": {
          "title": "Prettier 1.3",
          "permalink": "/blog/2017/05/03/1.3.0"
        },
        "nextItem": {
          "title": "Releasing Prettier 1.0",
          "permalink": "/blog/2017/04/13/1.0.0"
        }
      },
      "content": "1.0 is not the end of prettier, we're going to continue to work on the long tail of formatting issues in order to make it an awesome JavaScript code formatter. You should expect minor version releases like this one to change small things and edge cases but nothing major or controversial.\n\n<!--truncate-->\n\n### Format\n\n#### Do not print the sub-tree when using prettier-ignore ([#1286](https://github.com/prettier/prettier/pull/1286))\n\n#### Bail when traversing === groups ([#1294](https://github.com/prettier/prettier/pull/1294))\n\nA regression was introduced in 1.0 where deeply nested functions like this would trigger an exponential behavior and no longer complete in a reasonable time. We introduced a mitigation such that it's not instant but at least completes in a reasonable amount of time.\n\n<!-- prettier-ignore -->\n```js\nsomeObject.someFunction().then(function () {\n    return someObject.someFunction().then(function () {\n        return someObject.someFunction().then(function () {\n            return someObject.someFunction().then(function () {\n                return someObject.someFunction().then(function () {\n                });\n            });\n        });\n    });\n});\n```\n\n#### Break if () if conditional inside breaks ([#1344](https://github.com/prettier/prettier/pull/1344))\n\nprettier was sometimes breaking inside of an if condition as it didn't fit 80 columns but would print all the conditions in a single line. This was very weird looking. Now if the if break, prettier will also break the conditions.\n\n<!-- prettier-ignore -->\n```js\n// Before\nif (\n  this.hasPlugin(\"dynamicImports\") && this.lookahead().type === tt.parenLeft\n) {\n\n// After\nif (\n  this.hasPlugin(\"dynamicImports\") &&\n  this.lookahead().type === tt.parenLeft\n) {\n```\n\n#### Avoid breaking arguments for last arg expansion ([#1305](https://github.com/prettier/prettier/pull/1305))\n\nA long-standing issue around last argument expansion and complex arguments has been fixed, it no longer looks crazy bad.\n\n<!-- prettier-ignore -->\n```js\n// Before\nmanageChildren: jest.fn(function manageChildren(parentTag, moveFromIndices = [\n], moveToIndices = [], addChildReactTags = [], addAtIndices = [\n], removeAtIndices = []) {\n\n// After\nmanageChildren: jest.fn(function manageChildren(\n  parentTag,\n  moveFromIndices = [],\n  moveToIndices = [],\n  addChildReactTags = [],\n  addAtIndices = [],\n  removeAtIndices = []\n) {\n```\n\n#### Add parentheses for assignment as body of arrow ([#1326](https://github.com/prettier/prettier/pull/1326))\n\nWe're fine tuning when to add parenthesis in order to improve understanding of the code. This time, we're adding it to assignment inside of arrow functions. Please open up issues if you think that there should be parenthesis and prettier doesn't put them.\n\n<!-- prettier-ignore -->\n```js\n// Before\n() => foo = bar + 2;\n\n// After\n() => (foo = bar + 2);\n```\n\n#### Improve regex printing ([#1341](https://github.com/prettier/prettier/pull/1341))\n\nFlow and Babylon were inconsistent in how they printed escapes and flags. Now the escapes are untouched compared to the original ones and the flags are sorted.\n\n<!-- prettier-ignore -->\n```js\n// Before\n/[\\/]\\/\\u0aBc/mgi;\n\n// After\n/[/]\\/\\u0aBc/gim;\n```\n\n#### Fix arrow function parenthesis with comments in flow ([#1339](https://github.com/prettier/prettier/pull/1339))\n\nWith the Flow parser, prettier didn't add parenthesis for single argument functions with a comment.\n\n<!-- prettier-ignore -->\n```js\n// Before\ncall(/*object*/ row => {});\n\n// After\ncall((/*object*/ row) => {});\n```\n\n#### Don't inline paren at right of arguments ([#1345](https://github.com/prettier/prettier/pull/1345))\n\nWe incorrectly put a comment at the right of arguments inside of the argument list.\n\n<!-- prettier-ignore -->\n```js\n// Before\nf(/* ... */) {}\n\n// After\nf() /* ... */ {}\n```\n\n#### Fix template literal comments ([#1296](https://github.com/prettier/prettier/pull/1296))\n\nComments inside of template literals would crash in some conditions and be inserted in the wrong `${}`, no more :)\n\n<!-- prettier-ignore -->\n```js\n// Before\nstdin: TypeError: Cannot read property 'comments' of undefined\n\n// After\n`\n(?:${escapeChar}[\\\\S\\\\s]|(?:(?!${// Using `XRegExp.union` safely rewrites backreferences in `left` and `right`.\n// Intentionally not passing `basicFlags` to `XRegExp.union` since any syntax\n// transformation resulting from those flags was already applied to `left` and\n// `right` when they were passed through the XRegExp constructor above.\nXRegExp.union([left, right], '', {conjunction: 'or'}).source})[^${escapeChar}])+)+\n`\n```\n\n#### Fix isPreviousLineEmpty on Windows ([#1263](https://github.com/prettier/prettier/pull/1263))\n\nEmpty lines were not properly preserved for switch case on windows.\n\n<!-- prettier-ignore -->\n```js\n// Before\nswitch (a) {\n  case x:\n\n  case y:\n    call();\n}\n\n// After\nswitch (a) {\n  case x:\n  case y:\n    call();\n}\n```\n\n### CLI\n\n#### Skip globbing filenames with node-glob when the filename is not a glob ([#1307](https://github.com/prettier/prettier/pull/1307))\n\nIf you run `prettier file.js` and `file.js` doesn't exist, it's going to throw an exception instead of silently doing nothing.\n\n#### Write out change CLI changes synchronously ([#1292](https://github.com/prettier/prettier/pull/1292))\n\nThere was a race condition when you did ctrl-c to stop the process where it could delete files. Now we write files synchronously so it doesn't anymore."
    },
    {
      "id": "/2017/04/13/1.0.0",
      "metadata": {
        "permalink": "/blog/2017/04/13/1.0.0",
        "source": "@site/blog/2017-04-13-1.0.0.md",
        "title": "Releasing Prettier 1.0",
        "description": "_This post was written by vjeux and edited by",
        "date": "2017-04-13T00:00:00.000Z",
        "formattedDate": "April 13, 2017",
        "tags": [],
        "readingTime": 17.74,
        "truncated": true,
        "authors": [
          {
            "name": "Christopher Chedeau (@vjeux)",
            "url": "https://twitter.com/vjeux"
          }
        ],
        "frontMatter": {
          "author": "Christopher Chedeau (@vjeux)",
          "authorURL": "https://twitter.com/vjeux",
          "title": "Releasing Prettier 1.0"
        },
        "prevItem": {
          "title": "Prettier 1.2",
          "permalink": "/blog/2017/04/20/1.2.0"
        }
      },
      "content": "_This post was written by [vjeux](https://twitter.com/vjeux) and edited by\n[jlongster](https://twitter.com/jlongster), and originally published [here](http://jlongster.com/prettier-1.0)_\n\nWe officially [announced](http://jlongster.com/A-Prettier-Formatter)\n[prettier](https://github.com/prettier/prettier) over two months ago as a way to\nsolve the problem of wasting time formatting your code. It started as an\nexperiment but it clearly resonated with a lot of people, amassing ~7000 GitHub\nstars and over 100,000 monthly `npm downloads` in just two months.\n\n<!--truncate-->\n\nIn case you don't know, prettier is a JavaScript formatter that works by\ncompiling your code to an AST, and then pretty-printing the AST. Like browsers\nwrap text, prettier will also wrap code according to a given line length. The\nresult is good-looking code that is completely consistent no matter who wrote\nit. This solves the problem of programmers spending a lot of time manually\nmoving around code in their editor and arguing about styles (see\n[gif](http://jlongster.com/s/refactor.gif)).\n\nIt wasn't entirely clear from the beginning if we could make it always generate\nvalid and good-looking code, but the good news is that this is no longer an open\nquestion. Many projects (React, Jest, immutable-js, Haul, and many more) and\ncompanies (Oculus, Cloudflare) adopted prettier to format their JavaScript\ncodebase and realized the wins of automated formatting (see\n[this tweet](https://twitter.com/jlongster/status/852532847252566017) for\nmore!). Some of them ran prettier on their entire codebase (tens of thousands of\nlines of code).\n\nDuring the past three weeks we went through all the open issues and tried to\nmake as many decisions regarding how code is being formatted as possible and\nfixed most of the bugs we knew about. It's not perfect and we'll keep iterating\non it but it's a good time to **release a 1.0**!\n\nThis does not mean we won't change the format anymore, but changes will be\nminimal. For example, we are looking at adjusting\n[ternaries](https://github.com/prettier/prettier/pull/1171) but there will be\nvery few changes of that nature from here on out, and when there are we will\nmake a new major version.\n\nWhat it means is that **prettier is safe to use for production**. We've fixed a\nton of bugs and made sure the output is stable and semantically correct.\nPrettier is ready to be used from a few files in your side project to converting\nyour entire codebase. It's up to you to figure out where you are in the journey\nof letting go of a particular way to formatting your code.\n\nLet's take a look what 1.0 brings to\n[prettier](https://github.com/prettier/prettier)!\n\n_Thank you to all of the following contributors who have contributed to this\nrelease, and thank you to [Ian Storm Taylor](https://github.com/ianstormtaylor)\nfor the logo!_\n\n_Adam Stankiewicz, Alex Rattray, Alex Stachowiak, Amjad Masad, Andrey\nOkonetchnikov, António Nuno Monteiro, Artem Sapegin, Benjamin Tan, Bill Mill,\nBrandon Mills, Brian Holt, Brian Ng, Charles Pick, ChristianHersevoort,\nChristopher Chedeau, Christopher Moeller, Damien Lebrun, Dan Harper, Dara Hak,\nDavid Ascher, David Hong, Davy Duperron, Eric Clemmons, Erick Romero, Esben\nPetersen, Filipe Fortes, Gregor Adams, Hampus,hlsson, Hawken Rives, Henry Zhu,\nIlya Panasenko, James Henry, James Long, Jamie Webb, Jan Kassens, Jed Watson,\nJeffrey Horn, Jeremy Morrell, Joe Fiorini, Jon LaBelle, Joseph Savona, Karl\nHorky, Karl O'Keeffe, Kent C. Dodds, Kevin Gibbons, Kim Joar Bekkelund, Lucas\nBento, Lucas Duailibe, MarekMatejkaKCL, Mateusz Zatorski, Michael Ficarra, Michał\nPierzchała, Mikael Brevik, Nathan Friedly, Patrick Camacho, Paul,arduner, Rafael\nHengles, Raghuvir Kasturi, Rasmus Eneman, Riley Tomasek, Rogelio Guzman, Royce\nTownsend, Sean Grove, Shigeaki Okazaki, Simen,ekkhus, Simon Lydell, Sorin\nMuntean, Spencer Dixon, Thai Pangsakulyanont, Tom McKearney, Travis Jefferson,\nUmidbek Karimov, Vincent Voyer, Vu Tran, Walter Breakell, Yatharth Khatri, azu,\ndaleroy, kalmanb, skratchdot_\n\n## Options\n\nPrettier is an opinionated code formatter. At the beginning of the project, we\nthought that it meant having no configuration like gofmt or refmt. But, as we\nmoved forward, we realized that this was going to hurt the adoption of prettier\nand people that would have benefited from it wouldn't use it because it wasn't\nprinting code the way they want.\n\nInstead, our recent interpretation of being an opinionated code formatter is to\nprovide options regarding basic aspects of the syntax that are of the nature of\n\"if it doesn't do X, no matter how good it is, I'm never going to use it\". For\nexample, I (@vjeux) am never going to use\n[standard](https://github.com/feross/standard) because it doesn't use\nsemi-colons. This is absolutely not a rational way to think about it, but that's\nthe way many people behave and why we have \"style wars\".\n\nWe are still not going to introduce options for every type of syntax, but only\nfor more impactful things. We've identified two major options that fall in that\ncategory: _tabs vs spaces_ and _semi vs no-semi_. So we're adding them in\nprettier!\n\n### --no-semi ([#1129](https://github.com/prettier/prettier/pull/1129))\n\nThanks to [rattrayalex](https://github.com/rattrayalex) who did a lot of work to\nmake this happen!\n\n<!-- prettier-ignore -->\n```js\n// Before\nconsole.log();\n[1, 2, 3].map(x => x + 1);\n\n// After\nconsole.log()\n;[1, 2, 3].map(x => x + 1)\n\n```\n\n### --use-tabs ([#1026](https://github.com/prettier/prettier/pull/1026))\n\nThanks to [rhengles](https://github.com/rhengles) for implementing this and\nexplaining the reasons behind it!\n\n<!-- prettier-ignore -->\n```js\n// Before\nif (1) {\n··console.log(); // Two spaces\n}\n\n// After\nif (1) {\n» console.log(); // One Tab!\n}\n\n```\n\n## Formatting\n\nThe rest of this post document all of the smaller changes that we round up for\n1.0. We won't usually post a changelog as a post, but we thought that it shows\nhow stable prettier is getting and gives a good sense for the kinds of issues we\nare fixing these days.\n\n### Add newline for bracket-less arrow functions that return calls ([#927](https://github.com/prettier/prettier/pull/927))\n\nProbably the most reported issue from the current version of prettier: we were\nnot adding a newline after arrow functions inside of calls. Now, we do. On a\nside note, it's pretty exciting that the issues are now about small things like\nthis and no longer \"this looks completely broken\" kind of issues.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst testResults = results.testResults.map(testResult =>\n  formatResult(testResult, formatter, reporter));\n\n// After\nconst testResults = results.testResults.map(testResult =>\n  formatResult(testResult, formatter, reporter)\n);\n\n```\n\n### Add softline to assignment and parens around return for binary expressions ([#871](https://github.com/prettier/prettier/pull/871) & [#870](https://github.com/prettier/prettier/pull/870))\n\nBig chains of logical expressions look weird when the first line is on the same\nline as the variable declaration or return. Instead, it's better to move it on\nthe next line and add parenthesis in return to make it valid.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst computedDescriptionLines = (showConfirm &&\n  descriptionLinesConfirming) ||\n  (focused && !loading && descriptionLinesFocused) ||\n  descriptionLines;\n\n// After\nconst computedDescriptionLines =\n  (showConfirm && descriptionLinesConfirming) ||\n  (focused && !loading && descriptionLinesFocused) ||\n  descriptionLines;\n\n\n// Before\nreturn !filePath.includes(coverageDirectory) &&\n  !filePath.endsWith(`.${SNAPSHOT_EXTENSION}`);\n\n// After\nreturn (\n  !filePath.includes(coverageDirectory) &&\n  !filePath.endsWith(`.${SNAPSHOT_EXTENSION}`)\n);\n\n```\n\n### Group first arg for inline functions ([#947](https://github.com/prettier/prettier/pull/947))\n\nThe first big custom pattern we've added in prettier is printing functions as\nlast arguments inline. A less common one is to do the same thing for the first\nargument. It's very uncommon for libraries written nowadays to use that style\nbut some core JavaScript functions like `setTimeout` are doing it so it makes\nsense to support it in prettier.\n\n<!-- prettier-ignore -->\n```js\n// Before\nsetTimeout(\n  function() {\n    thing();\n  },\n  500\n);\n\n// After\nsetTimeout(function() {\n  thing();\n}, 500);\n\n```\n\n### Improve jsx output for style components ([#1144](https://github.com/prettier/prettier/pull/1144))\n\nTemplate literals are very tricky to format because whitespaces are significant.\nWith prettier, we don't want to change the semantic of your program by\nreformatting it so we're leaving them as is. The current way we handle them is\nnot optimal and we have ideas on how to fix them in a general way but in the\nmeantime, we can do some targeted fixes like this one for JSX.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<style>\n  {\n    `\n  color: red;\n`\n  }\n</style>\n\n// After\n<style>{`\n  color: red;\n`}</style>\n\n```\n\n### Add support for same line dot-notation in decorators ([#1029](https://github.com/prettier/prettier/pull/1029))\n\nMobX 3 now uses member expressions that should be written inline, the previous\nheuristic was too restrictive. It is now fixed.\n\n<!-- prettier-ignore -->\n```js\nclass X {\n  // Before\n  @action.bound\n  setPrice(price) {\n    this.price = price;\n  }\n\n  // After\n  @action.bound setPrice(price) {\n    this.price = price;\n  }\n}\n\n```\n\n### Hug on single object destructuring function ([#1022](https://github.com/prettier/prettier/pull/1022))\n\nReact stateless functional components are all the rage right now and it makes\nsense to hug the destructuring of the first argument to take less space.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\nexport default function StatelessFunctionalComponent(\n  {\n    searchFilters,\n    title,\n    items\n  }\n) {\n  return <div />;\n}\n\n// After\nexport default function StatelessFunctionalComponent({\n  searchFilters,\n  title,\n  items,\n}) {\n  return <div />\n}\n\n```\n\n### Add support for currying ([#1066](https://github.com/prettier/prettier/pull/1066))\n\nRedux is heavily promoting writing functions in a curried form where each\nargument is a nested function. Instead of indenting them, we're now putting them\ninline.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst mw = store =>\n  next =>\n    action => {\n      return next(action)\n    };\n\n// After\nconst mw = store => next => action => {\n  return next(action)\n};\n\n```\n\n### Respect escaping for JSX strings ([#1056](https://github.com/prettier/prettier/pull/1056))\n\nFor strings we've tried a bunch of different solutions regarding to escaping:\nescape nothing, escape everything, escape a whitelisted set... But we couldn't\nfind a heuristic that would make all the use cases reasonable. So we decided to\nleave the strings escaped the way they were inputted. We're now doing this for\nJSX strings.\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<a href=\"https://foo.bar?q1=foo&amp;q2=bar\" />\n\n// After\n<a href=\"https://foo.bar?q1=foo&q2=bar\" />\n\n```\n\n## Parenthesis\n\nA blessing and curse of printing from the AST is that we have to reprint all the\nparenthesis of the program. Our stance used to be to print only the minimum\nnumber of parenthesis that were needed for the program to be valid and execute\nthe same way. Now, we're willing to add parenthesis that are not strictly needed\nbut help people understand the code.\n\n### Add parenthesis for binary operators ([#1153](https://github.com/prettier/prettier/pull/1153))\n\n<!-- prettier-ignore -->\n```js\n// Before\nvar sizeIndex = index - 1 >>> level & MASK;\n\n// After\nvar sizeIndex = ((index - 1) >>> level) & MASK;\n\n```\n\n### Add parenthesis for no-confusing-arrow rule ([#1182](https://github.com/prettier/prettier/pull/1182))\n\n<!-- prettier-ignore -->\n```js\n// Before\nvar x = a => 1 ? 2 : 3;\n\n// After\nvar x = a => (1 ? 2 : 3);\n\n```\n\n### Remove parens from chained assignments ([#967](https://github.com/prettier/prettier/pull/967))\n\n<!-- prettier-ignore -->\n```js\n// Before\nthis.size = (this._origin = (this._capacity = 0));\n\n// After\nthis.size = this._origin = this._capacity = 0;\n\n```\n\n## Flow\n\nIn the early days of prettier we've heavily focused on getting the core\nJavaScript language well supported. Now that it is in a good shape, we have more\ntime to print Flow constructs in a polished way.\n\n### Add ability for flow generics to break ([#1041](https://github.com/prettier/prettier/pull/1041))\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype _ReactElement<DefaultProps, Props, Config: $Diff<Props, DefaultProps>, C: $React.Component<DefaultProps, Props, any>> = $React.Element<Config>;\n\n// After\ntype _ReactElement<\n  DefaultProps,\n  Props,\n  Config: $Diff<Props, DefaultProps>,\n  C: $React.Component<DefaultProps, Props, any>\n> = $React.Element<Config>;\n\n```\n\n### Improve printing of flow intersections ([#1018](https://github.com/prettier/prettier/pull/1018) & [#1155](https://github.com/prettier/prettier/pull/1155))\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype Props =\n  & {\n    focusedChildren?: React.Children,\n    onClick: () => void,\n    overlayChildren?: React.Children,\n  }\n  & FooterProps;\n\n// After\ntype Props = {\n  focusedChildren?: React.Children,\n  onClick: () => void,\n  overlayChildren?: React.Children,\n} & FooterProps;\n\n```\n\n### Add support for breaks in TupleTypeAnnotation ([#1003](https://github.com/prettier/prettier/pull/1003))\n\n<!-- prettier-ignore -->\n```ts\n// Before\nexport type FileMetaData = [/* id */ string, /* mtime */ number, /* visited */\n  | 0\n  | 1, /* dependencies */ Array<string>];\n\n// After\nexport type FileMetaData = [\n  /* id */ string,\n  /* mtime */ number,\n  /* visited */ 0|1,\n  /* dependencies */ Array<string>,\n];\n\n```\n\n### No parenthesis for Flow shorthand with one arg ([#972](https://github.com/prettier/prettier/pull/972))\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype T = { method: (a) => void };\n\n// After\ntype T = { method: a => void };\n\n```\n\n### Ability for interface to break ([#1060](https://github.com/prettier/prettier/pull/1060))\n\n<!-- prettier-ignore -->\n```ts\n// Before\nexport interface Environment1 extends GenericEnvironment<SomeType, AnotherType, YetAnotherType> {\n  m(): void\n}\n\n// After\nexport interface Environment1\n  extends GenericEnvironment<SomeType, AnotherType, YetAnotherType> {\n  m(): void\n}\n\n```\n\n### Fix printing of Flow type number literals ([#1132](https://github.com/prettier/prettier/pull/1132))\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype Hex = {n: 1};\n\n// After\ntype Hex = {n: 0x01};\n\n```\n\n## Places to break\n\nThere are a few cases where prettier still outputs code that's > 80 columns\nwhere there's a possible way to write it without. The solution is to carefully\nfind places where it's possible to break and make sure that it doesn't\nnegatively impact common cases.\n\n### Allow to break after = for strings and member expressions ([#1142](https://github.com/prettier/prettier/pull/1142) & [#1188](https://github.com/prettier/prettier/pull/1188))\n\n<!-- prettier-ignore -->\n```js\n// Before\nelements[0].innerHTML = '<div></div><div></div><div></div><div></div><div></div><div></div>';\nvar testExampleOrOrderOfGetterAndSetterReordered = obj.exampleOfOrderOfGetterAndSetterReordered;\n\n// After\nelements[0].innerHTML =\n  '<div></div><div></div><div></div><div></div><div></div><div></div>';\nvar testExampleOrOrderOfGetterAndSetterReordered =\n  obj.exampleOfOrderOfGetterAndSetterReordered;\n\n```\n\n### Add ability to break for top member expression ([#1036](https://github.com/prettier/prettier/pull/1036))\n\n<!-- prettier-ignore -->\n```js\n// Before\nexpect(\n  findDOMNode(component.instance()).getElementsByClassName(styles.inner)[0].style.paddingRight\n).toBe(\"1000px\");\n\n// After\nexpect(\n  findDOMNode(component.instance()).getElementsByClassName(styles.inner)[0]\n    .style.paddingRight\n).toBe(\"1000px\");\n\n```\n\n## Miscellaneous\n\n### Inline class expressions for bracket-less arrow functions ([#1023](https://github.com/prettier/prettier/pull/1023))\n\nSuper small thing, we're now inlining classes returned from arrow functions.\n\n<!-- prettier-ignore -->\n```js\n// Before\njest.mock(\n  '../SearchSource',\n  () =>\n    class {\n      findMatchingTests(pattern) {\n        return {paths: []};\n      }\n    },\n);\n\n// After\njest.mock(\n  '../SearchSource',\n  () => class {\n    findMatchingTests(pattern) {\n      return {paths: []};\n    }\n  },\n);\n\n```\n\n### Do not respect newlines for object destructuring pattern ([#981](https://github.com/prettier/prettier/pull/981))\n\nFor objects, we have special handling where if there is a \\\\n anywhere inside in\nthe original source, we keep it expanded. It was only intended for objects but\nbecause the same code is shared with destructuring, it accidentally applied\nthere too. This has been fixed.\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst Component2 = ({\n  props\n}) => <Text>Test</Text>;\n\n// After\nconst Component1 = ({ props }) => <Text>Test</Text>;\n\n```\n\n## Language Support\n\nIn order for you to be able to use prettier, it must be able to print the code\nyou are writing. We are aiming to be able to print everything that our\nunderlying parsers (babylon and flow) are able to parse.\n\n### Add support for ForOfStatement with await flag ([#1073](https://github.com/prettier/prettier/pull/1073))\n\n<!-- prettier-ignore -->\n```js\nasync function f() {\n  for await (const line of readLines(\\\\\"/path/to/file\\\\\")) {\n    (line: void); // error: string ~> void\n  }\n}\n\n```\n\n### Add support for flow type spread ([#1064](https://github.com/prettier/prettier/pull/1064))\n\n<!-- prettier-ignore -->\n```ts\ntype TypeB = { ...TypeA };\n\n```\n\n## Correctness\n\nThe absolute first requirement of prettier is to print valid code that has the\nsame behavior as the original source. You shouldn't be afraid of running\nprettier on your entire codebase. In order to ensure this, we are doing a lot of\nthings:\n\n- Have an automated way to ensure that prettier is outputting valid code.\n- Use it against large codebases such as Facebook, all of CDNjs and the many\n  people in the community using it.\n- Run extensive fuzzing using [eslump](https://github.com/lydell/eslump).\n- Making every report of such issue as high-pri and fixed right away.\n\nIf you are unlucky enough to see one, please report it so that we can fix it and\nyou can use `// prettier-ignore` to get you unblocked.\n\n### Properly handle \\\\r\\\\n in JSXText ([#1170](https://github.com/prettier/prettier/pull/1170))\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<div>\n  {\" \"}\n  Text{\" \"}\n</div>;\n\n// After\n<div>\n  Text\n</div>;\n\n```\n\n### Fix parenthesis when call inside of new ([#1169](https://github.com/prettier/prettier/pull/1169))\n\n<!-- prettier-ignore -->\n```js\n// Before\nnew factory()();\n\n// After\nnew (factory())();\n\n```\n\n### Add parens around arrow function return type ([#1152](https://github.com/prettier/prettier/pull/1152))\n\n<!-- prettier-ignore -->\n```ts\n// Before\nconst f = (): string => string => {};\n\n// After\nconst f = (): (string => string) => {};\n\n```\n\n### Fix printing of exact object flow type annotations ([#1114](https://github.com/prettier/prettier/pull/1114))\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype Props = {};\n\n// After\ntype Props = {||};\n\n```\n\n### Print return dangling comment ([#1178](https://github.com/prettier/prettier/pull/1178))\n\n<!-- prettier-ignore -->\n```js\n// Before\nfunction f() {\n  return;\n}\n\n// After\nfunction f() {\n  return /* a */;\n}\n\n```\n\n### Print comment after object key ([#1131](https://github.com/prettier/prettier/pull/1131))\n\n<!-- prettier-ignore -->\n```js\n// Before\nlet a = {\n   \"a\": () => 1\n};\n\n// After\nlet a = {\n   \"a\" /* comment */: () => 1\n};\n\n```\n\n### Fix leading comment inside returned SequenceExpression ([#1133](https://github.com/prettier/prettier/pull/1133))\n\n<!-- prettier-ignore -->\n```js\n// Before\nfunction sequenceExpressionInside() {\n  return;\n  // Reason for a\n  a, b;\n}\n\n// After\nfunction sequenceExpressionInside() {\n  return ( // Reason for a\n    a, b\n  );\n}\n\n```\n\n### Fix single optional arrow param printing ([#1002](https://github.com/prettier/prettier/pull/1002))\n\n<!-- prettier-ignore -->\n```ts\n// Before\na = b? => c;\n\n// After\na = (b?) => c;\n\n```\n\n### Fix default exports ([#998](https://github.com/prettier/prettier/pull/998))\n\n<!-- prettier-ignore -->\n```js\n// Before\nexport { foo, bar } from \"./baz\";\n\n// After\nexport foo, {bar} from './baz';\n\n```\n\n### Print line/mixed comments on new lines inside JSXEmptyExpression ([#985](https://github.com/prettier/prettier/pull/985))\n\n<!-- prettier-ignore -->\n```jsx\n// Before\n<div>\n  {\n    // single line comment}\n</div>;\n\n// After\n<div>\n  {\n    // single line comment\n  }\n</div>;\n\n```\n\n## Comments\n\nprettier works by printing the AST, this makes handling comments tricky as they\ncan be placed anywhere between tokens. The way prettier works is to attach a\ncomment to an ast node, either before or after it. We have a generic heuristic\nto find the location that works most of the time but there's a large amount of\nedge cases that we need to handle manually.\n\nprettier is never going to be able to properly print comments in all the crazy\nplaces where you can put them, but we expect to be able to do a reasonable job\nat them in most cases. If you see anything weird related to comments, please\ncreate issues and we can figure something out.\n\n### Add breakParent support for willBreak ([#674](https://github.com/prettier/prettier/pull/674))\n\n<!-- prettier-ignore -->\n```js\n// Before\nruntimeAgent.getProperties(objectId, false, false, false, ( // ownProperties // accessorPropertiesOnly // generatePreview\n  error,\n  properties,\n  internalProperties\n) => {\n  return 1;\n});\n\n// After\nruntimeAgent.getProperties(\n  objectId,\n  false, // ownProperties\n  false, // accessorPropertiesOnly\n  false, // generatePreview\n  (error, properties, internalProperties) => {\n    return 1\n  },\n);\n\n```\n\n### Fix additional empty line switch case comment ([#936](https://github.com/prettier/prettier/pull/936))\n\n<!-- prettier-ignore -->\n```js\n// Before\nswitch (foo) {\n  case \"bar\":\n    doThing()\n\n\n  // no default\n}\n\n// After\nswitch (foo) {\n  case \"bar\":\n    doThing()\n\n  // no default\n}\n\n```\n\n### Fix import declaration comments ([#1030](https://github.com/prettier/prettier/pull/1030))\n\n<!-- prettier-ignore -->\n```js\n// Before\nimport {\n  FN1,\n  FN2,\n  // FN3,\n  FN4\n} from // FN4,\n// FN5\n\"./module\";\n\n// After\nimport {\n  FN1,\n  FN2,\n  // FN3,\n  FN4,\n  // FN4,\n  // FN5\n} from './module';\n\n```\n\n### Fix last argument comment for function ([#1176](https://github.com/prettier/prettier/pull/1176) & [#905](https://github.com/prettier/prettier/pull/905))\n\n<!-- prettier-ignore -->\n```ts\n// Before\nfunction f(\n  a: number\n)// some comment here\n: number {\n  return a + 1;\n}\n\n// After\nfunction f(\n  a: number\n  // some comment here\n): number {\n  return a + 1;\n}\n\n```\n\n### Unrestrict flow union comments check ([#1040](https://github.com/prettier/prettier/pull/1040))\n\n<!-- prettier-ignore -->\n```ts\n// Before\ntype UploadState<E, EM, D> =\n  // The upload hasnt begun yet\n  | A\n  | // The upload timed out\n  B\n  | // Failed somewhere on the line\n  C;\n\n// After\ntype UploadState<E, EM, D> =\n  // The upload hasnt begun yet\n  | A\n  // The upload timed out\n  | B\n  // Failed somewhere on the line\n  | C;\n\n```\n\n### Fix comments inside of ObjectPattern ([#1045](https://github.com/prettier/prettier/pull/1045))\n\n<!-- prettier-ignore -->\n```ts\n// Before\nexport default (\n  {\n    foo,\n    bar\n    // comment\n    // comment 2\n  }: {\n    foo?: Object,\n    bar?: Object\n  }\n) => {};\n\n// After\nexport default (\n  {\n    foo,\n    bar\n  }: {\n    // comment\n    foo?: Object,\n    // comment 2\n    bar?: Object,\n  },\n) => {}\n\n```\n\n### Fix comment sorting location ([#1038](https://github.com/prettier/prettier/pull/1038))\n\n<!-- prettier-ignore -->\n```js\n// Before\nlet {\n  // comment\n  a = b\n} = c;\n\n// After\nlet {\n  a = b // comment\n} = c;\n\n```\n\n### Fix comment location for binary expressions ([#1043](https://github.com/prettier/prettier/pull/1043))\n\n<!-- prettier-ignore -->\n```js\n// Before\na = Math.random() * (yRange * (1 - minVerticalFraction)) +\n  minVerticalFraction * yRange// Comment\n   -\n  offset;\n\n// After\na =\n  // Comment\n  Math.random() * (yRange * (1 - minVerticalFraction)) +\n  minVerticalFraction * yRange -\n  offset;\n\n```\n\n### Fix class method comments ([#1074](https://github.com/prettier/prettier/pull/1074))\n\n<!-- prettier-ignore -->\n```js\n// Before\nclass x {\n  focus() // do nothing\n  {\n    // do nothing\n  }\n}\n\n// After\nclass x {\n  focus() {\n    // do nothing\n    // do nothing\n  }\n}\n\n```\n\n### Support \"// prettier-ignore\" in comment blocks ([#1125](https://github.com/prettier/prettier/pull/1125))\n\n<!-- prettier-ignore -->\n```js\n// Before\nmodule.exports = {\n  // Some comment\n  // prettier-ignore\n  m: matrix(1, 0, 0, 0, 1, 0, 0, 0, 1)\n};\n\n// After\nmodule.exports = {\n  // Some comment\n  // prettier-ignore\n  m: matrix(\n    1, 0, 0,\n    0, 1, 0,\n    0, 0, 1\n  )\n};\n\n```\n\n### Stabilize VariableDeclarator comments ([#1130](https://github.com/prettier/prettier/pull/1130))\n\n<!-- prettier-ignore -->\n```js\n// Before\nlet obj = [ // Comment\n  'val'\n];\n\n// After\nlet obj = [\n  // Comment\n  'val'\n];\n\n```\n\n### Fix comment detection before comma ([#1127](https://github.com/prettier/prettier/pull/1127))\n\n<!-- prettier-ignore -->\n```js\n// Before\nconst foo = {\n  a: 'a' /* comment for this line */,\n\n  /* Section B */\n  b: 'b',\n};\n\n// After\nconst foo = {\n  a: 'a' /* comment for this line */,\n  /* Section B */\n  b: 'b',\n};\n\n```\n\n### Fix last comment of an if test ([#1042](https://github.com/prettier/prettier/pull/1042))\n\n<!-- prettier-ignore -->\n```js\n// Before\nif (isIdentifierStart(code) || code === 92) {\n  /* '\\' */\n}\n\n// After\nif (isIdentifierStart(code) || code === 92 /* '\\' */) {}\n\n```"
    }
  ]
}